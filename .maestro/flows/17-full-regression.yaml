# Test: Full Regression - Complete App Walkthrough
# This flow tests every major screen in sequence
appId: com.nou09.Smuppy
name: "Regression - Full App Walkthrough"
tags:
  - regression
  - critical
  - smoke
---

- launchApp

# Dismiss overlays / launcher prompts
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    text: "Dismiss"
    optional: true
- tapOn:
    text: "Go home"
    optional: true
- waitForAnimationToEnd:
    timeout: 10000

# Open login if welcome/auth shown
- tapOn:
    id: "login-button"
    optional: true
- waitForAnimationToEnd

# Optional auth step when login form is visible
- extendedWaitUntil:
    visible:
      id: "email-input"
    timeout: 20000
    optional: true

- runFlow:
    when:
      visible:
        id: "email-input"
    commands:
      - tapOn:
          id: "email-input"
      - inputText: "${TEST_EMAIL}"
      - tapOn:
          id: "password-input"
      - inputText: "${TEST_PASSWORD}"
      - tapOn:
          id: "submit-login-button"
      - waitForAnimationToEnd:
          timeout: 10000

# Wait for any main tab surface
- extendedWaitUntil:
    visible:
      id: "home-tab"
    timeout: 25000
    optional: true

- takeScreenshot: "01-home-fan-feed"

# Home feed quick interaction
- swipe:
    direction: UP
    duration: 400
- swipe:
    direction: DOWN
    duration: 400

# ========== 2. HEADER ACTIONS ==========

- tapOn:
    id: "search-button"
    optional: true
- waitForAnimationToEnd
- runFlow:
    when:
      visible: "//XCUIElementTypeTextField[1]"
    commands:
      - tapOn: "//XCUIElementTypeTextField[1]"
      - inputText: "smuppy"
- waitForAnimationToEnd
- takeScreenshot: "02-search-screen"
- tapOn:
    text: "Cancel"
    optional: true
- tapOn:
    id: "home-tab"
    optional: true

- tapOn:
    id: "notifications-button"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "03-notifications"
- tapOn:
    id: "home-tab"
    optional: true

# ========== 3. TAB NAVIGATION ==========
- tapOn:
    id: "peaks-tab"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "04-peaks-feed"

# Scroll peaks
- swipe:
    direction: UP
    duration: 400
- swipe:
    direction: DOWN
    duration: 400

- tapOn:
    id: "create-tab"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "05-create-screen"
- tapOn:
    id: "home-tab"
    optional: true

- tapOn:
    id: "messages-tab"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "06-messages-list"

- tapOn:
    id: "profile-tab"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "07-profile-screen"

# Scroll profile
- swipe:
    direction: UP
    duration: 400
- takeScreenshot: "08-profile-scrolled"
- swipe:
    direction: DOWN
    duration: 400

# ========== 4. SETTINGS ==========
- tapOn:
    id: "settings-button"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "09-settings-screen"

- tapOn:
    text: "Edit Profile"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: "10-edit-profile"
- tapOn:
    id: "profile-tab"
    optional: true

- tapOn:
    id: "home-tab"
    optional: true

- extendedWaitUntil:
    visible:
      id: "home-tab"
    timeout: 5000
    optional: true

- takeScreenshot: "11-final-home"
