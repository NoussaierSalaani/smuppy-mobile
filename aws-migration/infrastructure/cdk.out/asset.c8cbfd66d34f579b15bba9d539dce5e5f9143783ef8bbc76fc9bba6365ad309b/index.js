var w5=Object.create;var Al=Object.defineProperty;var C5=Object.getOwnPropertyDescriptor;var v5=Object.getOwnPropertyNames;var R5=Object.getPrototypeOf,I5=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),yt=(t,e)=>{for(var r in e)Al(t,r,{get:e[r],enumerable:!0})},oR=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v5(e))!I5.call(t,s)&&s!==r&&Al(t,s,{get:()=>e[s],enumerable:!(n=C5(e,s))||n.enumerable});return t};var v=(t,e,r)=>(r=t!=null?w5(R5(t)):{},oR(e||!t||!t.__esModule?Al(r,"default",{value:t,enumerable:!0}):r,t)),K=t=>oR(Al({},"__esModule",{value:!0}),t);var By=b(iR=>{"use strict";iR.parse=function(t,e){return new $y(t,e).parse()};var $y=class t{constructor(e,r){this.source=e,this.transform=r||A5,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function A5(t){return t}});var Uy=b((KRe,aR)=>{var x5=By();aR.exports={create:function(t,e){return{parse:function(){return x5.parse(t,e)}}}}});var lR=b((QRe,uR)=>{"use strict";var P5=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,D5=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,O5=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,k5=/^-?infinity$/;uR.exports=function(e){if(k5.test(e))return Number(e.replace("i","I"));var r=P5.exec(e);if(!r)return N5(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=cR(s));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),d=r[7];d=d?1e3*parseFloat(d):0;var l,g=M5(e);return g!=null?(l=new Date(Date.UTC(s,o,i,a,c,u,d)),Fy(s)&&l.setUTCFullYear(s),g!==0&&l.setTime(l.getTime()-g)):(l=new Date(s,o,i,a,c,u,d),Fy(s)&&l.setFullYear(s)),l};function N5(t){var e=D5.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=cR(r));var s=parseInt(e[2],10)-1,o=e[3],i=new Date(r,s,o);return Fy(r)&&i.setFullYear(r),i}}function M5(t){if(t.endsWith("+00"))return 0;var e=O5.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function cR(t){return-(t-1)}function Fy(t){return t>=0&&t<100}});var pR=b((YRe,dR)=>{dR.exports=$5;var L5=Object.prototype.hasOwnProperty;function $5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)L5.call(r,n)&&(t[n]=r[n])}return t}});var mR=b((XRe,hR)=>{"use strict";var B5=pR();hR.exports=_i;function _i(t){if(!(this instanceof _i))return new _i(t);B5(this,Y5(t))}var U5=["seconds","minutes","hours","days","months","years"];_i.prototype.toPostgres=function(){var t=U5.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var F5={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},q5=["years","months","days"],G5=["hours","minutes","seconds"];_i.prototype.toISOString=_i.prototype.toISO=function(){var t=q5.map(r,this).join(""),e=G5.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+F5[n]}};var qy="([+-]?\\d+)",j5=qy+"\\s+years?",H5=qy+"\\s+mons?",V5=qy+"\\s+days?",z5="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",W5=new RegExp([j5,H5,V5,z5].map(function(t){return"("+t+")?"}).join("\\s*")),fR={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},K5=["hours","minutes","seconds","milliseconds"];function Q5(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function Y5(t){if(!t)return{};var e=W5.exec(t),r=e[8]==="-";return Object.keys(fR).reduce(function(n,s){var o=fR[s],i=e[o];return!i||(i=s==="milliseconds"?Q5(i):parseInt(i,10),!i)||(r&&~K5.indexOf(s)&&(i*=-1),n[s]=i),n},{})}});var SR=b((JRe,yR)=>{"use strict";var gR=Buffer.from||Buffer;yR.exports=function(e){if(/^\\x/.test(e))return gR(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var o=0;o<Math.floor(s/2);++o)r+="\\";n+=Math.floor(s/2)*2}return gR(r,"binary")}});var vR=b((ZRe,CR)=>{var sc=By(),oc=Uy(),xl=lR(),bR=mR(),_R=SR();function Pl(t){return function(r){return r===null?r:t(r)}}function TR(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function X5(t){return t?sc.parse(t,TR):null}function J5(t){return parseInt(t,10)}function Gy(t){return t?sc.parse(t,Pl(J5)):null}function Z5(t){return t?sc.parse(t,Pl(function(e){return wR(e).trim()})):null}var eQ=function(t){if(!t)return null;var e=oc.create(t,function(r){return r!==null&&(r=zy(r)),r});return e.parse()},jy=function(t){if(!t)return null;var e=oc.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},hr=function(t){if(!t)return null;var e=oc.create(t);return e.parse()},Hy=function(t){if(!t)return null;var e=oc.create(t,function(r){return r!==null&&(r=xl(r)),r});return e.parse()},tQ=function(t){if(!t)return null;var e=oc.create(t,function(r){return r!==null&&(r=bR(r)),r});return e.parse()},rQ=function(t){return t?sc.parse(t,Pl(_R)):null},Vy=function(t){return parseInt(t,10)},wR=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},ER=function(t){return t?sc.parse(t,Pl(JSON.parse)):null},zy=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},nQ=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var o=zy(e);return o.radius=parseFloat(r),o},sQ=function(t){t(20,wR),t(21,Vy),t(23,Vy),t(26,Vy),t(700,parseFloat),t(701,parseFloat),t(16,TR),t(1082,xl),t(1114,xl),t(1184,xl),t(600,zy),t(651,hr),t(718,nQ),t(1e3,X5),t(1001,rQ),t(1005,Gy),t(1007,Gy),t(1028,Gy),t(1016,Z5),t(1017,eQ),t(1021,jy),t(1022,jy),t(1231,jy),t(1014,hr),t(1015,hr),t(1008,hr),t(1009,hr),t(1040,hr),t(1041,hr),t(1115,Hy),t(1182,Hy),t(1185,Hy),t(1186,bR),t(1187,tQ),t(17,_R),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,ER),t(3807,ER),t(3907,hr),t(2951,hr),t(791,hr),t(1183,hr),t(1270,hr)};CR.exports={init:sQ}});var IR=b((eIe,RR)=>{"use strict";var Vt=1e6;function oQ(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",o,i,a,c,u,d;{if(o=e%Vt,e=e/Vt>>>0,i=4294967296*o+r,r=i/Vt>>>0,a=""+(i-Vt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";s=c+a+s}{if(o=e%Vt,e=e/Vt>>>0,i=4294967296*o+r,r=i/Vt>>>0,a=""+(i-Vt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";s=c+a+s}{if(o=e%Vt,e=e/Vt>>>0,i=4294967296*o+r,r=i/Vt>>>0,a=""+(i-Vt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";s=c+a+s}return o=e%Vt,i=4294967296*o+r,a=""+i%Vt,n+a+s}RR.exports=oQ});var OR=b((tIe,DR)=>{var iQ=IR(),Ue=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(y,S,w){return y*Math.pow(2,w)+S};var o=r>>3,i=function(y){return n?~y&255:y},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,i(t[o])&a,c));for(var d=e+r>>3,l=o+1;l<d;l++)u=s(u,i(t[l]),8);var g=(e+r)%8;return g>0&&(u=s(u,i(t[d])>>8-g,g)),u},PR=function(t,e,r){var n=Math.pow(2,r-1)-1,s=Ue(t,1),o=Ue(t,r,1);if(o===0)return 0;var i=1,a=function(u,d,l){u===0&&(u=1);for(var g=1;g<=l;g++)i/=2,(d&1<<l-g)>0&&(u+=i);return u},c=Ue(t,e,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,o-n)*c},aQ=function(t){return Ue(t,1)==1?-1*(Ue(t,15,1,!0)+1):Ue(t,15,1)},AR=function(t){return Ue(t,1)==1?-1*(Ue(t,31,1,!0)+1):Ue(t,31,1)},cQ=function(t){return PR(t,23,8)},uQ=function(t){return PR(t,52,11)},lQ=function(t){var e=Ue(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,Ue(t,16,16)),n=0,s=[],o=Ue(t,16),i=0;i<o;i++)n+=Ue(t,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,Ue(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},xR=function(t,e){var r=Ue(e,1),n=Ue(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(o){this.usec=o},s.getUTCMicroSeconds=function(){return this.usec},s},ic=function(t){for(var e=Ue(t,32),r=Ue(t,32,32),n=Ue(t,32,64),s=96,o=[],i=0;i<e;i++)o[i]=Ue(t,32,s),s+=32,s+=32;var a=function(u){var d=Ue(t,32,s);if(s+=32,d==4294967295)return null;var l;if(u==23||u==20)return l=Ue(t,d*8,s),s+=d*8,l;if(u==25)return l=t.toString(this.encoding,s>>3,(s+=d<<3)>>3),l;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,d){var l=[],g;if(u.length>1){var y=u.shift();for(g=0;g<y;g++)l[g]=c(u,d);u.unshift(y)}else for(g=0;g<u[0];g++)l[g]=a(d);return l};return c(o,n)},dQ=function(t){return t.toString("utf8")},pQ=function(t){return t===null?null:Ue(t,8)>0},fQ=function(t){t(20,iQ),t(21,aQ),t(23,AR),t(26,AR),t(1700,lQ),t(700,cQ),t(701,uQ),t(16,pQ),t(1114,xR.bind(null,!1)),t(1184,xR.bind(null,!0)),t(1e3,ic),t(1007,ic),t(1016,ic),t(1008,ic),t(1009,ic),t(25,dQ)};DR.exports={init:fQ}});var NR=b((rIe,kR)=>{kR.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var uc=b(cc=>{var hQ=vR(),mQ=OR(),gQ=Uy(),yQ=NR();cc.getTypeParser=SQ;cc.setTypeParser=EQ;cc.arrayParser=gQ;cc.builtins=yQ;var ac={text:{},binary:{}};function MR(t){return String(t)}function SQ(t,e){return e=e||"text",ac[e]&&ac[e][t]||MR}function EQ(t,e,r){typeof e=="function"&&(r=e,e="text"),ac[e][t]=r}hQ.init(function(t,e){ac.text[t]=e});mQ.init(function(t,e){ac.binary[t]=e})});var lc=b((sIe,Wy)=>{"use strict";var LR;try{LR=process.platform==="win32"?process.env.USERNAME:process.env.USER}catch{}Wy.exports={host:"localhost",user:LR,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Ti=uc(),bQ=Ti.getTypeParser(20,"text"),_Q=Ti.getTypeParser(1016,"text");Wy.exports.__defineSetter__("parseInt8",function(t){Ti.setTypeParser(20,"text",t?Ti.getTypeParser(23,"text"):bQ),Ti.setTypeParser(1016,"text",t?Ti.getTypeParser(1007,"text"):_Q)})});var wi=b((oIe,UR)=>{"use strict";var TQ=lc(),$R=require("util"),{isDate:wQ}=$R.types||$R;function CQ(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function BR(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+BR(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=CQ(Dl(t[r]));return e=e+"}",e}var Dl=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return wQ(t)?TQ.parseInputDatesAsUTC?IQ(t):RQ(t):Array.isArray(t)?BR(t):vQ(t,e)}return t.toString()};function vQ(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Dl(t.toPostgres(Dl),e)}return JSON.stringify(t)}function RQ(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function IQ(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function AQ(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var xQ=function(t){return'"'+t.replace(/"/g,'""')+'"'},PQ=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};UR.exports={prepareValue:function(e){return Dl(e)},normalizeQueryConfig:AQ,escapeIdentifier:xQ,escapeLiteral:PQ}});var qR=b((iIe,FR)=>{"use strict";var Ci=require("crypto");function Ky(t){return Ci.createHash("md5").update(t,"utf-8").digest("hex")}function DQ(t,e,r){let n=Ky(e+t);return"md5"+Ky(Buffer.concat([Buffer.from(n),r]))}function OQ(t){return Ci.createHash("sha256").update(t).digest()}function kQ(t,e){return t=t.replace(/(\D)-/,"$1"),Ci.createHash(t).update(e).digest()}function NQ(t,e){return Ci.createHmac("sha256",t).update(e).digest()}async function MQ(t,e,r){return Ci.pbkdf2Sync(t,e,r,32,"sha256")}FR.exports={postgresMd5PasswordHash:DQ,randomBytes:Ci.randomBytes,deriveKey:MQ,sha256:OQ,hashByName:kQ,hmacSha256:NQ,md5:Ky}});var VR=b((aIe,HR)=>{var GR=require("crypto");HR.exports={postgresMd5PasswordHash:$Q,randomBytes:LQ,deriveKey:qQ,sha256:BQ,hashByName:UQ,hmacSha256:FQ,md5:Qy};var jR=GR.webcrypto||globalThis.crypto,Io=jR.subtle,Yy=new TextEncoder;function LQ(t){return jR.getRandomValues(Buffer.alloc(t))}async function Qy(t){try{return GR.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?Yy.encode(t):t,n=await Io.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function $Q(t,e,r){let n=await Qy(e+t);return"md5"+await Qy(Buffer.concat([Buffer.from(n),r]))}async function BQ(t){return await Io.digest("SHA-256",t)}async function UQ(t,e){return await Io.digest(t,e)}async function FQ(t,e){let r=await Io.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Io.sign("HMAC",r,Yy.encode(e))}async function qQ(t,e,r){let n=await Io.importKey("raw",Yy.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await Io.deriveBits(s,n,256,["deriveBits"])}});var Jy=b((cIe,Xy)=>{"use strict";var GQ=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;GQ?Xy.exports=qR():Xy.exports=VR()});var KR=b((uIe,WR)=>{function Ao(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function Zy(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw Ao("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function zR(t,e){if(t[e++]!==6)throw Ao("non-OID data",t);let{length:r,index:n}=Zy(t,e);e=n;let s=e+r,o=t[e++],i=(o/40>>0)+"."+o%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:e}}function dc(t,e){if(t[e++]!==48)throw Ao("non-sequence data",t);return Zy(t,e)}function jQ(t,e){e===void 0&&(e=0),e=dc(t,e).index;let{length:r,index:n}=dc(t,e);e=n+r,e=dc(t,e).index;let{oid:s,index:o}=zR(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=o,e=dc(t,e).index,t[e++]!==160)throw Ao("non-tag data",t);e=Zy(t,e).index,e=dc(t,e).index;let{oid:i}=zR(t,e);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Ao("unknown hash OID "+i,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Ao("Ed448 certificate channel binding is not currently supported by Postgres")}throw Ao("unknown OID "+s,t)}WR.exports={signatureAlgorithmHashFromCertificate:jQ}});var JR=b((lIe,XR)=>{"use strict";var gs=Jy(),{signatureAlgorithmHashFromCertificate:HQ}=KR();function VQ(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(i=>t.includes(i));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=gs.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function zQ(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=QQ(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+t.clientNonce,i="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let k=n.getPeerCertificate().raw,L=HQ(k);(L==="MD5"||L==="SHA-1")&&(L="SHA-256");let B=await gs.hashByName(L,k);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(B)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=o+","+i+","+c,d=Buffer.from(s.salt,"base64"),l=await gs.deriveKey(e,d,s.iteration),g=await gs.hmacSha256(l,"Client Key"),y=await gs.sha256(g),S=await gs.hmacSha256(y,u),w=XQ(Buffer.from(g),Buffer.from(S)).toString("base64"),A=await gs.hmacSha256(l,"Server Key"),I=await gs.hmacSha256(A,u);t.message="SASLResponse",t.serverSignature=Buffer.from(I).toString("base64"),t.response=c+",p="+w}function WQ(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=YQ(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function KQ(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function QR(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function YR(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function QQ(t){let e=YR(t),r=e.get("r");if(r){if(!KQ(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!QR(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(s,10);return{nonce:r,salt:n,iteration:o}}function YQ(t){let r=YR(t).get("v");if(r){if(!QR(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function XQ(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}XR.exports={startSession:VQ,continueSession:zQ,finalizeSession:WQ}});var kl=b((dIe,ZR)=>{"use strict";var JQ=uc();function Ol(t){this._types=t||JQ,this.text={},this.binary={}}Ol.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Ol.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Ol.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};ZR.exports=Ol});var rI=b((pIe,tI)=>{"use strict";var{emitWarning:ZQ}=require("process");function vi(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){throw c.input&&(c.input="*****REDACTED*****"),c}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let o=s?"":n.hostname;r.host?o&&/^%2f/i.test(o)&&(n.pathname=o+n.pathname):r.host=decodeURIComponent(o),r.port||(r.port=n.port);let i=n.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":{r.sslmode!=="verify-full"&&eS(r.sslmode);break}case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function e9(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function eI(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let o=s;typeof o=="boolean"&&(r[n]=o),typeof o=="object"&&(r[n]=e9(o))}else if(s!=null)if(n==="port"){if(s!==""){let o=parseInt(s,10);if(isNaN(o))throw new Error(`Invalid ${n}: ${s}`);r[n]=o}}else r[n]=s;return r},{})}function t9(t){return eI(vi(t))}function eS(t){eS.warned||(eS.warned=!0,ZQ(`SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=${t}'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.`))}tI.exports=vi;vi.parse=vi;vi.toClientConfig=eI;vi.parseIntoClientConfig=t9});var rS=b((fIe,oI)=>{"use strict";var r9=require("dns"),sI=lc(),nI=rI().parse,kt=function(t,e,r){return e[t]?e[t]:(r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),r||sI[t])},n9=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return sI.ssl},Ri=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},mr=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+Ri(n))},tS=class{constructor(e){e=typeof e=="string"?nI(e):e||{},e.connectionString&&(e=Object.assign({},e,nI(e.connectionString))),this.user=kt("user",e),this.database=kt("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(kt("port",e),10),this.host=kt("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:kt("password",e)}),this.binary=kt("binary",e),this.options=kt("options",e),this.ssl=typeof e.ssl>"u"?n9():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=kt("client_encoding",e),this.replication=kt("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=kt("application_name",e,"PGAPPNAME"),this.fallback_application_name=kt("fallback_application_name",e,!1),this.statement_timeout=kt("statement_timeout",e,!1),this.lock_timeout=kt("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=kt("idle_in_transaction_session_timeout",e,!1),this.query_timeout=kt("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];mr(r,this,"user"),mr(r,this,"password"),mr(r,this,"port"),mr(r,this,"application_name"),mr(r,this,"fallback_application_name"),mr(r,this,"connect_timeout"),mr(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(mr(r,n,"sslmode"),mr(r,n,"sslca"),mr(r,n,"sslkey"),mr(r,n,"sslcert"),mr(r,n,"sslrootcert"),this.database&&r.push("dbname="+Ri(this.database)),this.replication&&r.push("replication="+Ri(this.replication)),this.host&&r.push("host="+Ri(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Ri(this.client_encoding)),r9.lookup(this.host,function(s,o){return s?e(s,null):(r.push("hostaddr="+Ri(o)),e(null,r.join(" ")))})}};oI.exports=tS});var sS=b((hIe,aI)=>{"use strict";var s9=uc(),iI=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,nS=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=iI.exec(e.text):r=iI.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let o=e[n];o!==null?r[n]=this._parsers[n](o):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let o=e[n],i=this.fields[n].name;if(o!==null){let a=this.fields[n].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[n](a)}else r[i]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=s9.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};aI.exports=nS});var dI=b((mIe,lI)=>{"use strict";var{EventEmitter:o9}=require("events"),cI=sS(),uI=wi(),oS=class extends o9{constructor(e,r,n){super(),e=uI.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new cI(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new cI(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:uI.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};lI.exports=oS});var bS=b(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.NoticeMessage=Q.DataRowMessage=Q.CommandCompleteMessage=Q.ReadyForQueryMessage=Q.NotificationResponseMessage=Q.BackendKeyDataMessage=Q.AuthenticationMD5Password=Q.ParameterStatusMessage=Q.ParameterDescriptionMessage=Q.RowDescriptionMessage=Q.Field=Q.CopyResponse=Q.CopyDataMessage=Q.DatabaseError=Q.copyDone=Q.emptyQuery=Q.replicationStart=Q.portalSuspended=Q.noData=Q.closeComplete=Q.bindComplete=Q.parseComplete=void 0;Q.parseComplete={name:"parseComplete",length:5};Q.bindComplete={name:"bindComplete",length:5};Q.closeComplete={name:"closeComplete",length:5};Q.noData={name:"noData",length:5};Q.portalSuspended={name:"portalSuspended",length:5};Q.replicationStart={name:"replicationStart",length:4};Q.emptyQuery={name:"emptyQuery",length:4};Q.copyDone={name:"copyDone",length:4};var iS=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};Q.DatabaseError=iS;var aS=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};Q.CopyDataMessage=aS;var cS=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};Q.CopyResponse=cS;var uS=class{constructor(e,r,n,s,o,i,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};Q.Field=uS;var lS=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};Q.RowDescriptionMessage=lS;var dS=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};Q.ParameterDescriptionMessage=dS;var pS=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};Q.ParameterStatusMessage=pS;var fS=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};Q.AuthenticationMD5Password=fS;var hS=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};Q.BackendKeyDataMessage=hS;var mS=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};Q.NotificationResponseMessage=mS;var gS=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};Q.ReadyForQueryMessage=gS;var yS=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};Q.CommandCompleteMessage=yS;var SS=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};Q.DataRowMessage=SS;var ES=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};Q.NoticeMessage=ES});var pI=b(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.Writer=void 0;var _S=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Nl.Writer=_S});var hI=b(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.serialize=void 0;var TS=pI(),Ne=new TS.Writer,i9=t=>{Ne.addInt16(3).addInt16(0);for(let n of Object.keys(t))Ne.addCString(n).addCString(t[n]);Ne.addCString("client_encoding").addCString("UTF8");let e=Ne.addCString("").flush(),r=e.length+4;return new TS.Writer().addInt32(r).add(e).flush()},a9=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},c9=t=>Ne.addCString(t).flush(112),u9=function(t,e){return Ne.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),Ne.flush(112)},l9=function(t){return Ne.addString(t).flush(112)},d9=t=>Ne.addCString(t).flush(81),fI=[],p9=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||fI,n=r.length,s=Ne.addCString(e).addCString(t.text).addInt16(n);for(let o=0;o<n;o++)s.addInt32(r[o]);return Ne.flush(80)},Ii=new TS.Writer,f9=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(Ne.addInt16(0),Ii.addInt32(-1)):n instanceof Buffer?(Ne.addInt16(1),Ii.addInt32(n.length),Ii.add(n)):(Ne.addInt16(0),Ii.addInt32(Buffer.byteLength(n)),Ii.addString(n))}},h9=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||fI,o=s.length;return Ne.addCString(e).addCString(r),Ne.addInt16(o),f9(s,t.valueMapper),Ne.addInt16(o),Ne.add(Ii.flush()),Ne.addInt16(1),Ne.addInt16(n?1:0),Ne.flush(66)},m9=Buffer.from([69,0,0,0,9,0,0,0,0,0]),g9=t=>{if(!t||!t.portal&&!t.rows)return m9;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,o=Buffer.allocUnsafe(1+s);return o[0]=69,o.writeInt32BE(s,1),o.write(e,5,"utf-8"),o[n+5]=0,o.writeUInt32BE(r,o.length-4),o},y9=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},wS=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},S9=Ne.addCString("P").flush(68),E9=Ne.addCString("S").flush(68),b9=t=>t.name?wS(68,`${t.type}${t.name||""}`):t.type==="P"?S9:E9,_9=t=>{let e=`${t.type}${t.name||""}`;return wS(67,e)},T9=t=>Ne.add(t).flush(100),w9=t=>wS(102,t),Ml=t=>Buffer.from([t,0,0,0,4]),C9=Ml(72),v9=Ml(83),R9=Ml(88),I9=Ml(99),A9={startup:i9,password:c9,requestSsl:a9,sendSASLInitialResponseMessage:u9,sendSCRAMClientFinalMessage:l9,query:d9,parse:p9,bind:h9,execute:g9,describe:b9,close:_9,flush:()=>C9,sync:()=>v9,end:()=>R9,copyData:T9,copyDone:()=>I9,copyFail:w9,cancel:y9};Ll.serialize=A9});var mI=b($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.BufferReader=void 0;var x9=Buffer.allocUnsafe(0),CS=class{constructor(e=0){this.offset=e,this.buffer=x9,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};$l.BufferReader=CS});var EI=b(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Parser=void 0;var Fe=bS(),P9=mI(),RS=1,D9=4,gI=RS+D9,rr=-1,vS=Buffer.allocUnsafe(0),IS=class{constructor(e){if(this.buffer=vS,this.bufferLength=0,this.bufferOffset=0,this.reader=new P9.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+gI<=n;){let o=this.buffer[s],i=this.buffer.readUInt32BE(s+RS),a=RS+i;if(a+s<=n){let c=this.handlePacket(s+gI,o,i,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=vS,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;s=Buffer.allocUnsafe(o)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){let{reader:o}=this;o.setBuffer(e,s);let i;switch(r){case 50:i=Fe.bindComplete;break;case 49:i=Fe.parseComplete;break;case 51:i=Fe.closeComplete;break;case 110:i=Fe.noData;break;case 115:i=Fe.portalSuspended;break;case 99:i=Fe.copyDone;break;case 87:i=Fe.replicationStart;break;case 73:i=Fe.emptyQuery;break;case 68:i=q9(o);break;case 67:i=k9(o);break;case 90:i=O9(o);break;case 65:i=$9(o);break;case 82:i=H9(o,n);break;case 83:i=G9(o);break;case 75:i=j9(o);break;case 69:i=yI(o,"error");break;case 78:i=yI(o,"notice");break;case 84:i=B9(o);break;case 116:i=F9(o);break;case 71:i=M9(o);break;case 72:i=L9(o);break;case 100:i=N9(o,n);break;default:return new Fe.DatabaseError("received invalid response: "+r.toString(16),n,"error")}return o.setBuffer(0,vS),i.length=n,i}};Bl.Parser=IS;var O9=t=>{let e=t.string(1);return new Fe.ReadyForQueryMessage(rr,e)},k9=t=>{let e=t.cstring();return new Fe.CommandCompleteMessage(rr,e)},N9=(t,e)=>{let r=t.bytes(e-4);return new Fe.CopyDataMessage(rr,r)},M9=t=>SI(t,"copyInResponse"),L9=t=>SI(t,"copyOutResponse"),SI=(t,e)=>{let r=t.byte()!==0,n=t.int16(),s=new Fe.CopyResponse(rr,e,r,n);for(let o=0;o<n;o++)s.columnTypes[o]=t.int16();return s},$9=t=>{let e=t.int32(),r=t.cstring(),n=t.cstring();return new Fe.NotificationResponseMessage(rr,e,r,n)},B9=t=>{let e=t.int16(),r=new Fe.RowDescriptionMessage(rr,e);for(let n=0;n<e;n++)r.fields[n]=U9(t);return r},U9=t=>{let e=t.cstring(),r=t.uint32(),n=t.int16(),s=t.uint32(),o=t.int16(),i=t.int32(),a=t.int16()===0?"text":"binary";return new Fe.Field(e,r,n,s,o,i,a)},F9=t=>{let e=t.int16(),r=new Fe.ParameterDescriptionMessage(rr,e);for(let n=0;n<e;n++)r.dataTypeIDs[n]=t.int32();return r},q9=t=>{let e=t.int16(),r=new Array(e);for(let n=0;n<e;n++){let s=t.int32();r[n]=s===-1?null:t.string(s)}return new Fe.DataRowMessage(rr,r)},G9=t=>{let e=t.cstring(),r=t.cstring();return new Fe.ParameterStatusMessage(rr,e,r)},j9=t=>{let e=t.int32(),r=t.int32();return new Fe.BackendKeyDataMessage(rr,e,r)},H9=(t,e)=>{let r=t.int32(),n={name:"authenticationOk",length:e};switch(r){case 0:break;case 3:n.length===8&&(n.name="authenticationCleartextPassword");break;case 5:if(n.length===12){n.name="authenticationMD5Password";let s=t.bytes(4);return new Fe.AuthenticationMD5Password(rr,s)}break;case 10:{n.name="authenticationSASL",n.mechanisms=[];let s;do s=t.cstring(),s&&n.mechanisms.push(s);while(s)}break;case 11:n.name="authenticationSASLContinue",n.data=t.string(e-8);break;case 12:n.name="authenticationSASLFinal",n.data=t.string(e-8);break;default:throw new Error("Unknown authenticationOk message type "+r)}return n},yI=(t,e)=>{let r={},n=t.string(1);for(;n!=="\0";)r[n]=t.cstring(),n=t.string(1);let s=r.M,o=e==="notice"?new Fe.NoticeMessage(rr,s):new Fe.DatabaseError(s,rr,e);return o.severity=r.S,o.code=r.C,o.detail=r.D,o.hint=r.H,o.position=r.P,o.internalPosition=r.p,o.internalQuery=r.q,o.where=r.W,o.schema=r.s,o.table=r.t,o.column=r.c,o.dataType=r.d,o.constraint=r.n,o.file=r.F,o.line=r.L,o.routine=r.R,o}});var AS=b(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.DatabaseError=ys.serialize=ys.parse=void 0;var V9=bS();Object.defineProperty(ys,"DatabaseError",{enumerable:!0,get:function(){return V9.DatabaseError}});var z9=hI();Object.defineProperty(ys,"serialize",{enumerable:!0,get:function(){return z9.serialize}});var W9=EI();function K9(t,e){let r=new W9.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}ys.parse=K9});var bI=b(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});xS.default={}});var TI=b((wIe,_I)=>{var{getStream:Q9,getSecureStream:Y9}=eY();_I.exports={getStream:Q9,getSecureStream:Y9};function X9(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function J9(){function t(r){let{CloudflareSocket:n}=bI();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function Z9(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function eY(){return Z9()?J9():X9()}});var DS=b((CIe,wI)=>{"use strict";var tY=require("events").EventEmitter,{parse:rY,serialize:ot}=AS(),{getStream:nY,getSecureStream:sY}=TI(),oY=ot.flush(),iY=ot.sync(),aY=ot.end(),PS=class extends tY{constructor(e){super(),e=e||{},this.stream=e.stream||nY(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(o){n._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||n.emit("error",o)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=sY(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){rY(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(ot.requestSsl())}startup(e){this.stream.write(ot.startup(e))}cancel(e,r){this._send(ot.cancel(e,r))}password(e){this._send(ot.password(e))}sendSASLInitialResponseMessage(e,r){this._send(ot.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(ot.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(ot.query(e))}parse(e){this._send(ot.parse(e))}bind(e){this._send(ot.bind(e))}execute(e){this._send(ot.execute(e))}flush(){this.stream.writable&&this.stream.write(oY)}sync(){this._ending=!0,this._send(iY)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(aY,()=>{this.stream.end()})}close(e){this._send(ot.close(e))}describe(e){this._send(ot.describe(e))}sendCopyFromChunk(e){this._send(ot.copyData(e))}endCopyFrom(){this._send(ot.copyDone())}sendCopyFail(e){this._send(ot.copyFail(e))}};wI.exports=PS});var II=b((vIe,RI)=>{"use strict";var{Transform:cY}=require("stream"),{StringDecoder:uY}=require("string_decoder"),Ss=Symbol("last"),Ul=Symbol("decoder");function lY(t,e,r){let n;if(this.overflow){if(n=this[Ul].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Ss]+=this[Ul].write(t),n=this[Ss].split(this.matcher);this[Ss]=n.pop();for(let s=0;s<n.length;s++)try{vI(this,this.mapper(n[s]))}catch(o){return r(o)}if(this.overflow=this[Ss].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function dY(t){if(this[Ss]+=this[Ul].end(),this[Ss])try{vI(this,this.mapper(this[Ss]))}catch(e){return t(e)}t()}function vI(t,e){e!==void 0&&t.push(e)}function CI(t){return t}function pY(t,e,r){switch(t=t||/\r?\n/,e=e||CI,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=CI)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=lY,r.flush=dY,r.readableObjectMode=!0;let n=new cY(r);return n[Ss]="",n[Ul]=new uY("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,o){this._writableState.errorEmitted=!1,o(s)},n}RI.exports=pY});var PI=b((RIe,An)=>{"use strict";var AI=require("path"),fY=require("stream").Stream,hY=II(),xI=require("util"),mY=5432,Fl=process.platform==="win32",pc=process.stderr,gY=56,yY=7,SY=61440,EY=32768;function bY(t){return(t&SY)==EY}var Ai=["host","port","database","user","password"],OS=Ai.length,_Y=Ai[OS-1];function kS(){var t=pc instanceof fY&&pc.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);pc.write(xI.format.apply(xI,e))}}Object.defineProperty(An.exports,"isWin",{get:function(){return Fl},set:function(t){Fl=t}});An.exports.warnTo=function(t){var e=pc;return pc=t,e};An.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(Fl?AI.join(e.APPDATA||"./","postgresql","pgpass.conf"):AI.join(e.HOME||"./",".pgpass"));return r};An.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Fl?!0:(e=e||"<unkn>",bY(t.mode)?t.mode&(gY|yY)?(kS('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(kS('WARNING: password file "%s" is not a plain file',e),!1))};var TY=An.exports.match=function(t,e){return Ai.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||mY)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};An.exports.getPassword=function(t,e,r){var n,s=e.pipe(hY());function o(c){var u=wY(c);u&&CY(u)&&TY(t,u)&&(n=u[_Y],s.end())}var i=function(){e.destroy(),r(n)},a=function(c){e.destroy(),kS("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",o).on("end",i).on("error",a)};var wY=An.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,o=0,i={},a=!1,c=function(d,l,g){var y=t.substring(l,g);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(y=y.replace(/\\([:\\])/g,"$1")),i[Ai[d]]=y},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==OS-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return i=Object.keys(i).length===OS?i:null,i},CY=An.exports.isValidEntry=function(t){for(var e={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Ai.length;r+=1){var n=e[r],s=t[Ai[r]]||"",o=n(s);if(!o)return!1}return!0}});var OI=b((AIe,NS)=>{"use strict";var IIe=require("path"),DI=require("fs"),ql=PI();NS.exports=function(t,e){var r=ql.getFileName();DI.stat(r,function(n,s){if(n||!ql.usePgPass(s,r))return e(void 0);var o=DI.createReadStream(r);ql.getPassword(t,o,e)})};NS.exports.warnTo=ql.warnTo});var $I=b((xIe,LI)=>{"use strict";var vY=require("events").EventEmitter,kI=wi(),jl=require("util"),MS=JR(),RY=kl(),IY=rS(),MI=dI(),AY=lc(),xY=DS(),PY=Jy(),NI=jl.deprecate(()=>{},"Client.activeQuery is deprecated and will be removed in a future version."),DY=jl.deprecate(()=>{},"Client.queryQueue is deprecated and will be removed in a future version."),OY=jl.deprecate(()=>{},"pgpass support is deprecated and will be removed in a future version. You can provide an async function as the password property to the Client/Pool constructor that returns a password instead. Within this funciton you can call the pgpass module in your own code."),kY=jl.deprecate(()=>{},"Passing a custom Promise implementation to the Client/Pool constructor is deprecated and will be removed in a future version."),Gl=class extends vY{constructor(e){super(),this.connectionParameters=new IY(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};r.Promise&&kY(),this._Promise=r.Promise||global.Promise,this._types=new RY(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this._activeQuery=null,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new xY({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this._queryQueue=[],this.binary=r.binary||AY.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}get activeQuery(){return NI(),this._activeQuery}set activeQuery(e){NI(),this._activeQuery=e}_getActiveQuery(){return this._activeQuery}_errorAllQueries(e){let r=s=>{process.nextTick(()=>{s.handleError(e,this.connection)})},n=this._getActiveQuery();n&&(r(n),this._activeQuery=null),this._queryQueue.forEach(r),this._queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_getPassword(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{OI()(this.connectionParameters,s=>{s!==void 0&&(OY(),this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._getPassword(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._getPassword(async()=>{try{let r=await PY.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._getPassword(()=>{try{this.saslSession=MS.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await MS.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{MS.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let r=this._getActiveQuery();this._activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this._getActiveQuery();if(!r){this._handleErrorEvent(e);return}this._activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this._getActiveQuery().handleRowDescription(e)}_handleDataRow(e){this._getActiveQuery().handleDataRow(e)}_handlePortalSuspended(e){this._getActiveQuery().handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this._getActiveQuery().handleEmptyQuery(this.connection)}_handleCommandComplete(e){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}r.handleCommandComplete(e,this.connection)}_handleParseComplete(){let e=this._getActiveQuery();if(e==null){let r=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(r);return}e.name&&(this.connection.parsedStatements[e.name]=e.text)}_handleCopyInResponse(e){this._getActiveQuery().handleCopyInResponse(this.connection)}_handleCopyData(e){this._getActiveQuery().handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e._queryQueue.indexOf(r)!==-1&&e._queryQueue.splice(e._queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return kI.escapeIdentifier(e)}escapeLiteral(e){return kI.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0){this._activeQuery=this._queryQueue.shift();let e=this._getActiveQuery();if(e){this.readyForQuery=!1,this.hasExecuted=!0;let r=e.submit(this.connection);r&&process.nextTick(()=>{e.handleError(r,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this._activeQuery=null,this.emit("drain"))}}query(e,r,n){let s,o,i,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(i=e.query_timeout||this.connectionParameters.query_timeout,o=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(i=e.query_timeout||this.connectionParameters.query_timeout,s=new MI(e,r,n),s.callback||(o=new this._Promise((u,d)=>{s.callback=(l,g)=>l?d(l):u(g)}).catch(u=>{throw Error.captureStackTrace(u),u}))),i&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let d=this._queryQueue.indexOf(s);d>-1&&this._queryQueue.splice(d,1),this._pulseQueryQueue()},i),s.callback=(u,d)=>{clearTimeout(a),c(u,d)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this._queryQueue.push(s),this._pulseQueryQueue(),o):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this._getActiveQuery()||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}get queryQueue(){return DY(),this._queryQueue}};Gl.Query=MI;LI.exports=Gl});var qI=b((PIe,FI)=>{"use strict";var NY=require("events").EventEmitter,BI=function(){},UI=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},LS=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},xi=class{constructor(e){this.callback=e}};function MY(){throw new Error("Release called on client which has already been released to the pool.")}function Hl(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(i,a){i?r(i):n(a)},o=new t(function(i,a){n=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:s,result:o}}function LY(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var $S=class extends NY{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||BS().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=UI(this._idle,o=>o.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(o=>o!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=Hl(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new xi(r.callback)),n;let s=(a,c,u)=>{clearTimeout(i),r.callback(a,c,u)},o=new xi(s),i=setTimeout(()=>{UI(this._pendingQueue,a=>a.callback===s),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),n}return this.newClient(new xi(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=LY(this,r);this.log("checking client timeout");let s,o=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(s&&clearTimeout(s),r.on("error",n),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),e.timedOut||e.callback(i,void 0,BI);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new xi((u,d,l)=>l()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,o=>{if(o)return e.release(o),r.callback(o,void 0,BI);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&MY(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this._isAboveMin()&&(this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this)))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new LS(e,r,o)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let o=Hl(this.Promise,e);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(n=r,r=void 0);let s=Hl(this.Promise,n);return n=s.callback,this.connect((o,i)=>{if(o)return n(o);let a=!1,c=u=>{a||(a=!0,i.release(u),n(u))};i.once("error",c),this.log("dispatching query");try{i.query(e,r,(u,d)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(u),u?n(u):n(void 0,d)})}catch(u){return i.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=Hl(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};FI.exports=$S});var HI=b((DIe,jI)=>{"use strict";var GI=require("events").EventEmitter,$Y=require("util"),US=wi(),Pi=jI.exports=function(t,e,r){GI.call(this),t=US.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};$Y.inherits(Pi,GI);var BY={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Pi.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=BY[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};Pi.prototype.then=function(t,e){return this._getPromise().then(t,e)};Pi.prototype.catch=function(t){return this._getPromise().catch(t)};Pi.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};Pi.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,o){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(o.length>1?s.forEach((i,a)=>{i.forEach(c=>{e.emit("row",c,o[a])})}):s.forEach(function(i){e.emit("row",i,o)})),e.state="end",e.emit("end",o),e.callback&&e.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(US.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(US.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var QI=b((OIe,KI)=>{"use strict";var VI;try{VI=require("pg-native")}catch(t){throw t}var UY=kl(),zI=require("events").EventEmitter,FY=require("util"),qY=rS(),WI=HI(),zt=KI.exports=function(t){zI.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new UY(t.types),this.native=new VI({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new qY(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};zt.Query=WI;FY.inherits(zt,zI);zt.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};zt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(o){e._queryable=!1,e._errorAllQueries(o),e.emit("error",o)}),e.native.on("notification",function(o){e.emit("notification",{channel:o.relname,payload:o.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};zt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};zt.prototype.query=function(t,e,r){let n,s,o,i,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")o=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(o=t.query_timeout||this.connectionParameters.query_timeout,n=new WI(t,e,r),!n.callback){let c,u;s=new this._Promise((d,l)=>{c=d,u=l}).catch(d=>{throw Error.captureStackTrace(d),d}),n.callback=(d,l)=>d?u(d):c(l)}return o&&(a=n.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},o),n.callback=(c,u)=>{clearTimeout(i),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};zt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=o=>o?s(o):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};zt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};zt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};zt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};zt.prototype.ref=function(){};zt.prototype.unref=function(){};zt.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};zt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var FS=b((kIe,YI)=>{"use strict";YI.exports=QI()});var BS=b((MIe,Vl)=>{"use strict";var GY=$I(),jY=lc(),HY=DS(),VY=sS(),zY=wi(),WY=qI(),KY=kl(),{DatabaseError:QY}=AS(),{escapeIdentifier:YY,escapeLiteral:XY}=wi(),JY=t=>class extends WY{constructor(r){super(r,t)}},XI=function(t){this.defaults=jY,this.Client=t,this.Query=this.Client.Query,this.Pool=JY(this.Client),this._pools=[],this.Connection=HY,this.types=uc(),this.DatabaseError=QY,this.TypeOverrides=KY,this.escapeIdentifier=YY,this.escapeLiteral=XY,this.Result=VY,this.utils=zY},JI=GY,ZI=!1;try{ZI=!!process.env.NODE_PG_FORCE_NATIVE}catch{}ZI&&(JI=FS());Vl.exports=new XI(JI);Object.defineProperty(Vl.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new XI(FS())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Vl.exports,"native",{value:t}),t}})});var tA=b((WIe,ZY)=>{ZY.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var Di=b(nr=>{"use strict";var e7=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});nr.getKeyIndexes=nr.hasFlag=nr.exists=nr.list=void 0;var zl=e7(tA());nr.list=Object.keys(zl.default);var qS={};nr.list.forEach(t=>{qS[t]=zl.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function t7(t,e){return t=e?.caseInsensitive?String(t).toLowerCase():t,!!zl.default[t]}nr.exists=t7;function r7(t,e,r){if(t=r?.nameCaseInsensitive?String(t).toLowerCase():t,!qS[t])throw new Error("Unknown command "+t);return!!qS[t][e]}nr.hasFlag=r7;function n7(t,e,r){t=r?.nameCaseInsensitive?String(t).toLowerCase():t;let n=zl.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let s=[],o=!!(r&&r.parseExternalKey),i=(c,u)=>{let d=[],l=Number(c[u]);for(let g=0;g<l;g++)d.push(g+u+1);return d},a=(c,u,d)=>{for(let l=u;l<c.length-1;l+=1)if(String(c[l]).toLowerCase()===d.toLowerCase())return l+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":s.push(0,...i(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":s.push(...i(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{s.push(...i(e,0));break}case"georadius":{s.push(0);let c=a(e,5,"STORE");c&&s.push(c);let u=a(e,5,"STOREDIST");u&&s.push(u);break}case"georadiusbymember":{s.push(0);let c=a(e,4,"STORE");c&&s.push(c);let u=a(e,4,"STOREDIST");u&&s.push(u);break}case"sort":case"sort_ro":s.push(0);for(let c=1;c<e.length-1;c++){let u=e[c];if(typeof u!="string")continue;let d=u.toUpperCase();d==="GET"?(c+=1,u=e[c],u!=="#"&&(o?s.push([c,rA(u)]):s.push(c))):d==="BY"?(c+=1,o?s.push([c,rA(e[c])]):s.push(c)):d==="STORE"&&(c+=1,s.push(c))}break;case"migrate":if(e[2]==="")for(let c=5;c<e.length-1;c++){let u=e[c];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let d=c+1;d<e.length;d++)s.push(d);break}}else s.push(2);break;case"xreadgroup":case"xread":for(let c=t==="xread"?0:3;c<e.length-1;c++)if(String(e[c]).toUpperCase()==="STREAMS"){for(let u=c+1;u<=c+(e.length-1-c)/2;u++)s.push(u);break}break;default:if(n.step>0){let c=n.keyStart-1,u=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let d=c;d<u;d+=n.step)s.push(d)}break}return s}nr.getKeyIndexes=n7;function rA(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var nA=b(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.tryCatch=Es.errorObj=void 0;Es.errorObj={e:{}};var GS;function s7(t,e){try{let r=GS;return GS=null,r.apply(this,arguments)}catch(r){return Es.errorObj.e=r,Es.errorObj}}function o7(t){return GS=t,s7}Es.tryCatch=o7});var bs=b(jS=>{"use strict";Object.defineProperty(jS,"__esModule",{value:!0});var Oi=nA();function sA(t){setTimeout(function(){throw t},0)}function i7(t,e,r){return typeof e=="function"&&t.then(n=>{let s;r!==void 0&&Object(r).spread&&Array.isArray(n)?s=Oi.tryCatch(e).apply(void 0,[null].concat(n)):s=n===void 0?Oi.tryCatch(e)(null):Oi.tryCatch(e)(null,n),s===Oi.errorObj&&sA(s.e)},n=>{if(!n){let o=new Error(n+"");Object.assign(o,{cause:n}),n=o}let s=Oi.tryCatch(e)(n);s===Oi.errorObj&&sA(s.e)}),t}jS.default=i7});var aA=b((XIe,iA)=>{"use strict";var oA=require("assert"),fc=require("util");function ki(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}fc.inherits(ki,Error);Object.defineProperty(ki.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function HS(t,e,r){oA(e),oA.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}fc.inherits(HS,ki);Object.defineProperty(HS.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function VS(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}fc.inherits(VS,ki);Object.defineProperty(VS.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function Wl(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}fc.inherits(Wl,ki);Object.defineProperty(Wl.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function zS(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}fc.inherits(zS,Wl);Object.defineProperty(zS.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});iA.exports={RedisError:ki,ParserError:HS,ReplyError:VS,AbortError:Wl,InterruptError:zS}});var lA=b((JIe,uA)=>{"use strict";var cA=require("assert"),Ni=class extends Error{get name(){return this.constructor.name}},WS=class extends Ni{constructor(e,r,n){cA(r),cA.strictEqual(typeof n,"number");let s=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=s,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},KS=class extends Ni{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},Kl=class extends Ni{get name(){return this.constructor.name}},QS=class extends Kl{get name(){return this.constructor.name}};uA.exports={RedisError:Ni,ParserError:WS,ReplyError:KS,AbortError:Kl,InterruptError:QS}});var xo=b((ZIe,dA)=>{"use strict";var a7=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?aA():lA();dA.exports=a7});var hc=b((eAe,YS)=>{var pA=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],c7=function(e){for(var r,n=0,s=0,o=[],i=e.length;n<i;n++)r=e.charCodeAt(n),r<128?o[s++]=r:r<2048?(o[s++]=r>>6|192,o[s++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),o[s++]=r>>18|240,o[s++]=r>>12&63|128,o[s++]=r>>6&63|128,o[s++]=r&63|128):(o[s++]=r>>12|224,o[s++]=r>>6&63|128,o[s++]=r&63|128);return o},fA=YS.exports=function(e){for(var r,n=0,s=-1,o=0,i=0,a=typeof e=="string"?c7(e):e,c=a.length;n<c;){if(r=a[n++],s===-1)r===123&&(s=n);else if(r!==125)i=pA[(r^i>>8)&255]^i<<8;else if(n-1!==s)return i&16383;o=pA[(r^o>>8)&255]^o<<8}return o&16383};YS.exports.generateMulti=function(e){for(var r=1,n=e.length,s=fA(e[0]);r<n;)if(fA(e[r++])!==s)return-1;return s}});var _A=b((tAe,bA)=>{var mA=9007199254740991,u7="[object Arguments]",l7="[object Function]",d7="[object GeneratorFunction]",p7=/^(?:0|[1-9]\d*)$/;function gA(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function f7(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var mc=Object.prototype,gc=mc.hasOwnProperty,yA=mc.toString,h7=mc.propertyIsEnumerable,hA=Math.max;function m7(t,e){var r=v7(t)||C7(t)?f7(t.length,String):[],n=r.length,s=!!n;for(var o in t)(e||gc.call(t,o))&&!(s&&(o=="length"||EA(o,n)))&&r.push(o);return r}function g7(t,e,r,n){return t===void 0||XS(t,mc[r])&&!gc.call(n,r)?e:t}function y7(t,e,r){var n=t[e];(!(gc.call(t,e)&&XS(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function S7(t){if(!ZS(t))return w7(t);var e=T7(t),r=[];for(var n in t)n=="constructor"&&(e||!gc.call(t,n))||r.push(n);return r}function SA(t,e){return e=hA(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,s=hA(r.length-e,0),o=Array(s);++n<s;)o[n]=r[e+n];n=-1;for(var i=Array(e+1);++n<e;)i[n]=r[n];return i[e]=o,gA(t,this,i)}}function E7(t,e,r,n){r||(r={});for(var s=-1,o=e.length;++s<o;){var i=e[s],a=n?n(r[i],t[i],i,r,t):void 0;y7(r,i,a===void 0?t[i]:a)}return r}function b7(t){return SA(function(e,r){var n=-1,s=r.length,o=s>1?r[s-1]:void 0,i=s>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):void 0,i&&_7(r[0],r[1],i)&&(o=s<3?void 0:o,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,o)}return e})}function EA(t,e){return e=e??mA,!!e&&(typeof t=="number"||p7.test(t))&&t>-1&&t%1==0&&t<e}function _7(t,e,r){if(!ZS(r))return!1;var n=typeof e;return(n=="number"?JS(r)&&EA(e,r.length):n=="string"&&e in r)?XS(r[e],t):!1}function T7(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||mc;return t===r}function w7(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function XS(t,e){return t===e||t!==t&&e!==e}function C7(t){return R7(t)&&gc.call(t,"callee")&&(!h7.call(t,"callee")||yA.call(t)==u7)}var v7=Array.isArray;function JS(t){return t!=null&&A7(t.length)&&!I7(t)}function R7(t){return x7(t)&&JS(t)}function I7(t){var e=ZS(t)?yA.call(t):"";return e==l7||e==d7}function A7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mA}function ZS(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function x7(t){return!!t&&typeof t=="object"}var P7=b7(function(t,e,r,n){E7(e,O7(e),t,n)}),D7=SA(function(t){return t.push(void 0,g7),gA(P7,void 0,t)});function O7(t){return JS(t)?m7(t,!0):S7(t)}bA.exports=D7});var CA=b((rAe,wA)=>{var k7=9007199254740991,N7="[object Arguments]",M7="[object Function]",L7="[object GeneratorFunction]",eE=Object.prototype,$7=eE.hasOwnProperty,TA=eE.toString,B7=eE.propertyIsEnumerable;function U7(t){return q7(t)&&$7.call(t,"callee")&&(!B7.call(t,"callee")||TA.call(t)==N7)}function F7(t){return t!=null&&j7(t.length)&&!G7(t)}function q7(t){return V7(t)&&F7(t)}function G7(t){var e=H7(t)?TA.call(t):"";return e==M7||e==L7}function j7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=k7}function H7(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function V7(t){return!!t&&typeof t=="object"}wA.exports=U7});var Ql=b(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.isArguments=_s.defaults=_s.noop=void 0;var z7=_A();_s.defaults=z7;var W7=CA();_s.isArguments=W7;function K7(){}_s.noop=K7});var RA=b((sAe,vA)=>{var Mi=1e3,Li=Mi*60,$i=Li*60,Po=$i*24,Q7=Po*7,Y7=Po*365.25;vA.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return X7(t);if(r==="number"&&isFinite(t))return e.long?Z7(t):J7(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function X7(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Y7;case"weeks":case"week":case"w":return r*Q7;case"days":case"day":case"d":return r*Po;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$i;case"minutes":case"minute":case"mins":case"min":case"m":return r*Li;case"seconds":case"second":case"secs":case"sec":case"s":return r*Mi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function J7(t){var e=Math.abs(t);return e>=Po?Math.round(t/Po)+"d":e>=$i?Math.round(t/$i)+"h":e>=Li?Math.round(t/Li)+"m":e>=Mi?Math.round(t/Mi)+"s":t+"ms"}function Z7(t){var e=Math.abs(t);return e>=Po?Yl(t,e,Po,"day"):e>=$i?Yl(t,e,$i,"hour"):e>=Li?Yl(t,e,Li,"minute"):e>=Mi?Yl(t,e,Mi,"second"):t+" ms"}function Yl(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var tE=b((oAe,IA)=>{function eX(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=s,r.enabled=a,r.humanize=RA(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let l=0;for(let g=0;g<d.length;g++)l=(l<<5)-l+d.charCodeAt(g),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(d){let l,g=null,y,S;function w(...A){if(!w.enabled)return;let I=w,k=Number(new Date),L=k-(l||k);I.diff=L,I.prev=l,I.curr=k,l=k,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let B=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(oe,Be)=>{if(oe==="%%")return"%";B++;let te=r.formatters[Be];if(typeof te=="function"){let ue=A[B];oe=te.call(I,ue),A.splice(B,1),B--}return oe}),r.formatArgs.call(I,A),(I.log||r.log).apply(I,A)}return w.namespace=d,w.useColors=r.useColors(),w.color=r.selectColor(d),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,S=r.enabled(d)),S),set:A=>{g=A}}),typeof r.init=="function"&&r.init(w),w}function n(d,l){let g=r(this.namespace+(typeof l>"u"?":":l)+d);return g.log=this.log,g}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let l=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let g of l)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function o(d,l){let g=0,y=0,S=-1,w=0;for(;g<d.length;)if(y<l.length&&(l[y]===d[g]||l[y]==="*"))l[y]==="*"?(S=y,w=g,y++):(g++,y++);else if(S!==-1)y=S+1,w++,g=w;else return!1;for(;y<l.length&&l[y]==="*";)y++;return y===l.length}function i(){let d=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),d}function a(d){for(let l of r.skips)if(o(d,l))return!1;for(let l of r.names)if(o(d,l))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}IA.exports=eX});var AA=b((Wt,Xl)=>{Wt.formatArgs=rX;Wt.save=nX;Wt.load=sX;Wt.useColors=tX;Wt.storage=oX();Wt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Wt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function tX(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rX(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Xl.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}Wt.log=console.debug||console.log||(()=>{});function nX(t){try{t?Wt.storage.setItem("debug",t):Wt.storage.removeItem("debug")}catch{}}function sX(){let t;try{t=Wt.storage.getItem("debug")||Wt.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function oX(){try{return localStorage}catch{}}Xl.exports=tE()(Wt);var{formatters:iX}=Xl.exports;iX.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var PA=b((iAe,xA)=>{"use strict";xA.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var OA=b((aAe,DA)=>{"use strict";var aX=require("os"),Or=PA(),St=process.env,Bi;Or("no-color")||Or("no-colors")||Or("color=false")?Bi=!1:(Or("color")||Or("colors")||Or("color=true")||Or("color=always"))&&(Bi=!0);"FORCE_COLOR"in St&&(Bi=St.FORCE_COLOR.length===0||parseInt(St.FORCE_COLOR,10)!==0);function cX(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function uX(t){if(Bi===!1)return 0;if(Or("color=16m")||Or("color=full")||Or("color=truecolor"))return 3;if(Or("color=256"))return 2;if(t&&!t.isTTY&&Bi!==!0)return 0;let e=Bi?1:0;if(process.platform==="win32"){let r=aX.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in St)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in St)||St.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in St)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(St.TEAMCITY_VERSION)?1:0;if(St.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in St){let r=parseInt((St.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(St.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(St.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(St.TERM)||"COLORTERM"in St?1:(St.TERM==="dumb",e)}function rE(t){let e=uX(t);return cX(e)}DA.exports={supportsColor:rE,stdout:rE(process.stdout),stderr:rE(process.stderr)}});var NA=b((it,Zl)=>{var lX=require("tty"),Jl=require("util");it.init=yX;it.log=hX;it.formatArgs=pX;it.save=mX;it.load=gX;it.useColors=dX;it.destroy=Jl.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");it.colors=[6,2,3,4,5,1];try{let t=OA();t&&(t.stderr||t).level>=2&&(it.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}it.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function dX(){return"colors"in it.inspectOpts?!!it.inspectOpts.colors:lX.isatty(process.stderr.fd)}function pX(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${s};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(s+"m+"+Zl.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=fX()+e+" "+t[0]}function fX(){return it.inspectOpts.hideDate?"":new Date().toISOString()+" "}function hX(...t){return process.stderr.write(Jl.formatWithOptions(it.inspectOpts,...t)+`
`)}function mX(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function gX(){return process.env.DEBUG}function yX(t){t.inspectOpts={};let e=Object.keys(it.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=it.inspectOpts[e[r]]}Zl.exports=tE()(it);var{formatters:kA}=Zl.exports;kA.o=function(t){return this.inspectOpts.colors=this.useColors,Jl.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};kA.O=function(t){return this.inspectOpts.colors=this.useColors,Jl.inspect(t,this.inspectOpts)}});var MA=b((cAe,nE)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?nE.exports=AA():nE.exports=NA()});var BA=b(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.genRedactedString=xn.getStringValue=xn.MAX_ARGUMENT_LENGTH=void 0;var SX=MA(),sE=200;xn.MAX_ARGUMENT_LENGTH=sE;var EX="ioredis";function LA(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}xn.getStringValue=LA;function $A(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}xn.genRedactedString=$A;function bX(t){let e=(0,SX.default)(`${EX}:${t}`);function r(...n){if(e.enabled){for(let s=1;s<n.length;s++){let o=LA(n[s]);typeof o=="string"&&o.length>sE&&(n[s]=$A(o,sE))}return e.apply(null,n)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}xn.default=bX});var FA=b(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});var UA=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,_X={RedisCloudFixed:{ca:UA},RedisCloudFlexible:{ca:UA}};oE.default=_X});var at=b(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.noop=ne.defaults=ne.Debug=ne.getPackageMeta=ne.zipMap=ne.CONNECTION_CLOSED_ERROR_MSG=ne.shuffle=ne.sample=ne.resolveTLSProfile=ne.parseURL=ne.optimizeErrorStack=ne.toArg=ne.convertMapToArray=ne.convertObjectToArray=ne.timeout=ne.packObject=ne.isInt=ne.wrapMultiResult=ne.convertBufferToString=void 0;var TX=require("fs"),wX=require("path"),qA=require("url"),iE=Ql();Object.defineProperty(ne,"defaults",{enumerable:!0,get:function(){return iE.defaults}});Object.defineProperty(ne,"noop",{enumerable:!0,get:function(){return iE.noop}});var CX=BA();ne.Debug=CX.default;var vX=FA();function GA(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let s=0;s<r;++s)n[s]=t[s]instanceof Buffer&&e==="utf8"?t[s].toString():GA(t[s],e);return n}return t}ne.convertBufferToString=GA;function RX(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let s=t[n];s instanceof Error?e.push([s]):e.push([null,s])}return e}ne.wrapMultiResult=RX;function jA(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}ne.isInt=jA;function IX(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}ne.packObject=IX;function AX(t,e){let r=null,n=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(n,e,new Error("timeout")),n}ne.timeout=AX;function xX(t){let e=[],r=Object.keys(t);for(let n=0,s=r.length;n<s;n++)e.push(r[n],t[r[n]]);return e}ne.convertObjectToArray=xX;function PX(t){let e=[],r=0;return t.forEach(function(n,s){e[r]=s,e[r+1]=n,r+=2}),e}ne.convertMapToArray=PX;function DX(t){return t===null||typeof t>"u"?"":String(t)}ne.toArg=DX;function OX(t,e,r){let n=e.split(`
`),s="",o;for(o=1;o<n.length&&n[o].indexOf(r)!==-1;++o);for(let i=o;i<n.length;++i)s+=`
`+n[i];if(t.stack){let i=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,i)+s}return t}ne.optimizeErrorStack=OX;function kX(t){if(jA(t))return{port:t};let e=(0,qA.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,qA.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let s=e.auth.indexOf(":");n.username=s===-1?e.auth:e.auth.slice(0,s),n.password=s===-1?"":e.auth.slice(s+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let s=Number.parseInt(r.family,10);Number.isNaN(s)||(n.family=s)}return(0,iE.defaults)(n,r),n}ne.parseURL=kX;function NX(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=vX.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}ne.resolveTLSProfile=NX;function MX(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}ne.sample=MX;function LX(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}ne.shuffle=LX;ne.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function $X(t,e){let r=new Map;return t.forEach((n,s)=>{r.set(n,e[s])}),r}ne.zipMap=$X;var Ui=null;async function BX(){if(Ui)return Ui;try{let t=(0,wX.resolve)(__dirname,"..","..","package.json"),e=await TX.promises.readFile(t,"utf8");return Ui={version:JSON.parse(e).version},Ui}catch{return Ui={version:"error-fetching-version"},Ui}}ne.getPackageMeta=BX});var HA=b(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.parseBlockOption=Fi.parseSecondsArgument=void 0;var aE=t=>{if(typeof t=="number")return t;if(Buffer.isBuffer(t))return aE(t.toString());if(typeof t=="string"){let e=Number(t);return Number.isFinite(e)?e:void 0}},UX=t=>{if(typeof t=="string")return t;if(Buffer.isBuffer(t))return t.toString()},FX=t=>{let e=aE(t);if(e!==void 0)return e<=0?0:e*1e3};Fi.parseSecondsArgument=FX;var qX=t=>{for(let e=0;e<t.length;e++){let r=UX(t[e]);if(r&&r.toLowerCase()==="block"){let n=aE(t[e+1]);return n===void 0?void 0:n<=0?0:n}}return null};Fi.parseBlockOption=qX});var Pn=b(lE=>{"use strict";Object.defineProperty(lE,"__esModule",{value:!0});var VA=Di(),GX=hc(),jX=bs(),Do=at(),cE=HA(),Zr=class t{constructor(e,r=[],n={},s){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=s,this.initPromise(),n.keyPrefix){let o=n.keyPrefix instanceof Buffer,i=o?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(i===null&&(i=Buffer.from(n.keyPrefix)),Buffer.concat([i,a])):o?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return r=r.toLowerCase(),!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:GX(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let s=new uE;s.push(n);for(let o=0;o<this.args.length;++o){let i=this.args[o];i instanceof Buffer?i.length===0?s.push(`$0\r
\r
`):(s.push("$"+i.length+`\r
`),s.push(i),s.push(`\r
`)):s.push("$"+Buffer.byteLength(i)+`\r
`+i+`\r
`)}r=s.toBuffer()}else{r=n;for(let s=0;s<this.args.length;++s){let o=this.args[s];r+="$"+Buffer.byteLength(o)+`\r
`+o+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,Do.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,Do.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}setBlockingTimeout(e){if(e<=0)return;this._blockingTimeoutTimer&&(clearTimeout(this._blockingTimeoutTimer),this._blockingTimeoutTimer=void 0);let r=Date.now();this._blockingDeadline===void 0&&(this._blockingDeadline=r+e);let n=this._blockingDeadline-r;if(n<=0){this.resolve(null);return}this._blockingTimeoutTimer=setTimeout(()=>{if(this.isResolved){this._blockingTimeoutTimer=void 0;return}this._blockingTimeoutTimer=void 0,this.resolve(null)},n)}extractBlockingTimeout(){let e=this.args;if(!e||e.length===0)return;let r=this.name.toLowerCase();if(t.checkFlag("LAST_ARG_TIMEOUT_COMMANDS",r))return(0,cE.parseSecondsArgument)(e[e.length-1]);if(t.checkFlag("FIRST_ARG_TIMEOUT_COMMANDS",r))return(0,cE.parseSecondsArgument)(e[0]);if(t.checkFlag("BLOCK_OPTION_COMMANDS",r))return(0,cE.parseBlockOption)(e)}_clearTimers(){let e=this._commandTimeoutTimer;e&&(clearTimeout(e),delete this._commandTimeoutTimer);let r=this._blockingTimeoutTimer;r&&(clearTimeout(r),delete this._blockingTimeoutTimer)}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let s=t._transformer.argument[this.name];s&&(this.args=s(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.reject=s=>{this._clearTimers(),this.errorStack?n((0,Do.optimizeErrorStack)(s,this.errorStack.stack,__dirname)):n(s)}});this.promise=(0,jX.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,VA.exists)(this.name,{caseInsensitive:!0}))){let r=(0,VA.getKeyIndexes)(this.name,this.args,{nameCaseInsensitive:!0});for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{this._clearTimers(),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};lE.default=Zr;Zr.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"],BLOCKING_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax","bzmpop","blmpop","xread","xreadgroup"],LAST_ARG_TIMEOUT_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax"],FIRST_ARG_TIMEOUT_COMMANDS:["bzmpop","blmpop"],BLOCK_OPTION_COMMANDS:["xread","xreadgroup"]};Zr._transformer={argument:{},reply:{}};var zA=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,Do.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,Do.convertObjectToArray)(t[0])}return t},WA=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,Do.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,Do.convertObjectToArray)(t[1]))}return t};Zr.setArgumentTransformer("mset",zA);Zr.setArgumentTransformer("msetnx",zA);Zr.setArgumentTransformer("hset",WA);Zr.setArgumentTransformer("hmset",WA);Zr.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],s=t[r+1];n in e?Object.defineProperty(e,n,{value:s,configurable:!0,enumerable:!0,writable:!0}):e[n]=s}return e}return t});var uE=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let s=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,s),r+=s}return e}}});var KA=b(dE=>{"use strict";Object.defineProperty(dE,"__esModule",{value:!0});var HX=xo(),ed=class extends HX.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};dE.default=ed;ed.defaultMessage="Failed to refresh slots cache."});var td=b(fE=>{"use strict";Object.defineProperty(fE,"__esModule",{value:!0});var VX=require("stream"),pE=class extends VX.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};fE.default=pE});var ex=b(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.executeWithAutoPipelining=He.getFirstValueInFlattenedArray=He.shouldUseAutoPipelining=He.notAllowedAutoPipelineCommands=He.kCallbacks=He.kExec=void 0;var YA=Ql(),zX=hc(),QA=bs();He.kExec=Symbol("exec");He.kCallbacks=Symbol("callbacks");He.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function XA(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[He.kCallbacks];r[He.kCallbacks]=null,r.exec(function(s,o){if(t._runningAutoPipelines.delete(e),s)for(let i=0;i<n.length;i++)process.nextTick(n[i],s);else for(let i=0;i<n.length;i++)process.nextTick(n[i],...o[i]);t._autoPipelines.has(e)&&XA(t,e)})}function WX(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!He.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}He.shouldUseAutoPipelining=WX;function JA(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,YA.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}He.getFirstValueInFlattenedArray=JA;function ZA(t,e,r,n,s){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(YA.noop),(0,QA.default)(new Promise(function(u,d){t.delayUntilReady(l=>{if(l){d(l);return}ZA(t,e,r,n,null).then(u,d)})}),s);let o=t.options.keyPrefix||"",i=t.isCluster?t.slots[zX(`${o}${JA(n)}`)].join(","):"main";if(!t._autoPipelines.has(i)){let u=t.pipeline();u[He.kExec]=!1,u[He.kCallbacks]=[],t._autoPipelines.set(i,u)}let a=t._autoPipelines.get(i);a[He.kExec]||(a[He.kExec]=!0,setImmediate(XA,t,i));let c=new Promise(function(u,d){a[He.kCallbacks].push(function(l,g){if(l){d(l);return}u(g)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,QA.default)(c,s)}He.executeWithAutoPipelining=ZA});var tx=b(mE=>{"use strict";Object.defineProperty(mE,"__esModule",{value:!0});var KX=require("crypto"),QX=Pn(),YX=bs(),hE=class{constructor(e,r=null,n="",s=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=s,this.sha=(0,KX.createHash)("sha1").update(e).digest("hex");let o=this.sha,i=new WeakSet;this.Command=class extends QX.default{toWritable(c){let u=this.reject;return this.reject=d=>{d.message.indexOf("NOSCRIPT")!==-1&&i.delete(c),u.call(this,d)},i.has(c)?this.name==="eval"&&(this.name="evalsha",this.args[0]=o):(i.add(c),this.name="eval",this.args[0]=e),super.toWritable(c)}}}execute(e,r,n,s){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let o=new this.Command("evalsha",[this.sha,...r],n);return o.promise=o.promise.catch(i=>{if(i.message.indexOf("NOSCRIPT")===-1)throw i;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,YX.default)(o.promise,s),e.sendCommand(o)}};mE.default=hE});var nd=b(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});var XX=Di(),rd=ex(),JX=Pn(),ZX=tx(),Dn=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return gE.slice(0)}createBuiltinCommand(e){return{string:Ts(null,e,"utf8"),buffer:Ts(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=Ts(e,e,"utf8"),this[e+"Buffer"]=Ts(e+"Buffer",e,null)}defineCommand(e,r){let n=new ZX.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=rx(e,e,n,"utf8"),this[e+"Buffer"]=rx(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},gE=XX.list.filter(t=>t!=="monitor");gE.push("sentinel");gE.forEach(function(t){Dn.prototype[t]=Ts(t,t,"utf8"),Dn.prototype[t+"Buffer"]=Ts(t+"Buffer",t,null)});Dn.prototype.call=Ts("call","utf8");Dn.prototype.callBuffer=Ts("callBuffer",null);Dn.prototype.send_command=Dn.prototype.call;function Ts(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let s=e||n.shift(),o=n[n.length-1];typeof o=="function"?n.pop():o=void 0;let i={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,rd.shouldUseAutoPipelining)(this,t,s)?(0,rd.executeWithAutoPipelining)(this,t,s,n,o):this.sendCommand(new JX.default(s,n,i,o))}}function rx(t,e,r,n){return function(...s){let o=typeof s[s.length-1]=="function"?s.pop():void 0,i={replyEncoding:n};return this.options.showFriendlyErrorStack&&(i.errorStack=new Error),(0,rd.shouldUseAutoPipelining)(this,t,e)?(0,rd.executeWithAutoPipelining)(this,t,e,s,o):r.execute(this,s,i,o)}}yE.default=Dn});var bE=b(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var SE=hc(),nx=Di(),sx=bs(),eJ=require("util"),tJ=Pn(),rJ=at(),nJ=nd();function sJ(t,e){let r=SE(e[0]),n=t._groupsBySlot[r];for(let s=1;s<e.length;s++)if(t._groupsBySlot[SE(e[s])]!==n)return-1;return r}var ws=class extends nJ.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let s=e.scriptsSet[n];this._shaToScript[s.sha]=s,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let s=e[1].length;for(let o=0;o<s;o++){if(e[1][o]instanceof Error)continue;let i=this._queue[r-(s-o)];try{e[1][o]=i.transformReply(e[1][o])}catch(a){e[1][o]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let s=!0,o;for(let i=0;i<this._result.length;++i){let a=this._result[i][0],c=this._queue[i];if(a){if(c.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!o)o={name:a.name,message:a.message};else if(o.name!==a.name||o.message!==a.message){s=!1;break}}else if(!c.inTransaction&&!((0,nx.exists)(c.name,{caseInsensitive:!0})&&(0,nx.hasFlag)(c.name,"readonly",{nameCaseInsensitive:!0}))){s=!1;break}}if(o&&s){let i=this,a=o.message.split(" "),c=this._queue,u=!1;this._queue=[];for(let y=0;y<c.length;++y){if(a[0]==="ASK"&&!u&&c[y].name!=="asking"&&(!c[y-1]||c[y-1].name!=="asking")){let S=new tJ.default("asking");S.ignore=!0,this.sendCommand(S)}c[y].initPromise(),this.sendCommand(c[y]),u=c[y].inTransaction}let d=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let l=function(){i.exec()},g=this.redis;if(g.handleError(o,this.leftRedirections,{moved:function(y,S){i.preferKey=S,g.slots[a[1]]=[S],g._groupsBySlot[a[1]]=g._groupsIds[g.slots[a[1]].join(";")],g.refreshSlotsCache(),i.exec()},ask:function(y,S){i.preferKey=S,i.exec()},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:()=>{d=!1},defaults:()=>{d=!1}}),d)return}}let n=0;for(let s=0;s<this._queue.length-n;++s)this._queue[s+n].ignore&&(n+=1),this._result[s]=this._result[s+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,s;for(let o=0;o<e.length;++o)r=e[o],n=r[0],s=r.slice(1),this[n].apply(this,s);return this}};EE.default=ws;var oJ=ws.prototype.multi;ws.prototype.multi=function(){return this._transactions+=1,oJ.apply(this,arguments)};var ox=ws.prototype.execBuffer;ws.prototype.execBuffer=(0,eJ.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),ox.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");ws.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(rJ.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,sx.default)(this.promise,t)),this.redis.delayUntilReady(s=>{if(s){this.reject(s);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,ox.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,sx.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let s=[];for(let o=0;o<this._queue.length;o++){let i=this._queue[o].getKeys();if(i.length&&s.push(i[0]),i.length&&SE.generateMulti(i)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(s.length){if(e=sJ(this.redis,s),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let s=r.replyPending=r._queue.length,o;r.isCluster&&(o={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let i="",a,c={isPipeline:!0,destination:r.isCluster?o:{redis:r.redis},write(u){typeof u!="string"?(a||(a=[]),i&&(a.push(Buffer.from(i,"utf8")),i=""),a.push(u)):i+=u,--s||(a?(i&&a.push(Buffer.from(i,"utf8")),c.destination.redis.stream.write(Buffer.concat(a))):c.destination.redis.stream.write(i),s=r._queue.length,i="",a=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],c,o);return r.promise}}});var wE=b(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.addTransactionSupport=void 0;var _E=at(),TE=bs(),ix=bE();function iJ(t){t.pipeline=function(n){let s=new ix.default(this);return Array.isArray(n)&&s.addBatch(n),s};let{multi:e}=t;t.multi=function(n,s){if(typeof s>"u"&&!Array.isArray(n)&&(s=n,n=null),s&&s.pipeline===!1)return e.call(this);let o=new ix.default(this);o.multi(),Array.isArray(n)&&o.addBatch(n);let i=o.exec;o.exec=function(c){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(_E.noop),(0,TE.default)(new Promise((d,l)=>{this.redis.delayUntilReady(g=>{if(g){l(g);return}this.exec(o).then(d,l)})}),c);if(this._transactions>0&&i.call(o),this.nodeifiedPromise)return i.call(o);let u=i.call(o);return(0,TE.default)(u.then(function(d){let l=d[d.length-1];if(typeof l>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(l[0]){l[0].previousErrors=[];for(let g=0;g<d.length-1;++g)d[g][0]&&l[0].previousErrors.push(d[g][0]);throw l[0]}return(0,_E.wrapMultiResult)(l[1])}),c)};let{execBuffer:a}=o;return o.execBuffer=function(c){return this._transactions>0&&a.call(o),o.exec(c)},o};let{exec:r}=t;t.exec=function(n){return(0,TE.default)(r.call(this).then(function(s){return Array.isArray(s)&&(s=(0,_E.wrapMultiResult)(s)),s}),n)}}sd.addTransactionSupport=iJ});var vE=b(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});function aJ(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}CE.default=aJ});var cx=b(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.DEFAULT_CLUSTER_OPTIONS=void 0;var ax=require("dns");od.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:ax.resolveSrv,dnsLookup:ax.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var qi=b(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.getConnectionName=Et.weightSrvRecords=Et.groupSrvRecords=Et.getUniqueHostnamesFromOptions=Et.normalizeNodeOptions=Et.nodeKeyToRedisOptions=Et.getNodeKey=void 0;var ux=at(),cJ=require("net");function uJ(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}Et.getNodeKey=uJ;function lJ(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}Et.nodeKeyToRedisOptions=lJ;function dJ(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,ux.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,ux.resolveTLSProfile)(r)})}Et.normalizeNodeOptions=dJ;function pJ(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,cJ.isIP)(r))}Et.getUniqueHostnamesFromOptions=pJ;function fJ(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}Et.groupSrvRecords=fJ;function hJ(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,s]of t.records.entries())if(r+=1+s.weight,r>e)return t.totalWeight-=s.weight,t.records.splice(n,1),s}Et.weightSrvRecords=hJ;function mJ(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}Et.getConnectionName=mJ});var dx=b(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});var lx=qi(),RE=at(),gJ=On(),en=(0,RE.Debug)("cluster:subscriber"),IE=class{constructor(e,r,n=!1){this.connectionPool=e,this.emitter=r,this.isSharded=n,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){en("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}en("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(s,o)=>{!this.started||!this.subscriber||(0,lx.getNodeKey)(this.subscriber.options)===o&&(en("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(en("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),en("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,RE.sample)(this.connectionPool.getNodes());if(!r){en("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;en("selected a subscriber %s:%s",n.host,n.port);let s="subscriber";this.isSharded&&(s="ssubscriber"),this.subscriber=new gJ.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,lx.getConnectionName)(s,n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",RE.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let o={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let i=e.condition||e.prevCondition;i&&i.subscriber&&(o.subscribe=i.subscriber.channels("subscribe"),o.psubscribe=i.subscriber.channels("psubscribe"),o.ssubscribe=i.subscriber.channels("ssubscribe"))}if(o.subscribe.length||o.psubscribe.length||o.ssubscribe.length){let i=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let c=o[a];if(c.length!=0)if(en("%s %d channels",a,c.length),a==="ssubscribe")for(let u of c)i+=1,this.subscriber[a](u).then(()=>{--i||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{en("failed to ssubscribe to channel: %s",u)});else i+=1,this.subscriber[a](c).then(()=>{--i||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{en("failed to %s %d channels",a,c.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let i of["message","messageBuffer"])this.subscriber.on(i,(a,c)=>{this.emitter.emit(i,a,c)});for(let i of["pmessage","pmessageBuffer"])this.subscriber.on(i,(a,c,u)=>{this.emitter.emit(i,a,c,u)});if(this.isSharded==!0)for(let i of["smessage","smessageBuffer"])this.subscriber.on(i,(a,c)=>{this.emitter.emit(i,a,c)})}};AE.default=IE});var px=b(DE=>{"use strict";Object.defineProperty(DE,"__esModule",{value:!0});var yJ=require("events"),id=at(),xE=qi(),SJ=On(),yc=(0,id.Debug)("cluster:connectionPool"),PE=class extends yJ.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,id.sample)(r);return this.nodes[e][n]}addMasterNode(e){let r=(0,xE.getNodeKey)(e.options),n=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=n,this.nodes.master[r]=n,!0)}createRedisFromOptions(e,r){return new SJ.default((0,id.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let n=(0,xE.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let s;return this.nodes.all[n]?(s=this.nodes.all[n],s.options.readOnly!==r&&(s.options.readOnly=r,yc("Change role of %s to %s",n,r?"slave":"master"),s[r?"readonly":"readwrite"]().catch(id.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=s):(delete this.nodes.slave[n],this.nodes.master[n]=s))):(yc("Connecting to %s as %s",n,r?"slave":"master"),s=this.createRedisFromOptions(e,r),this.nodes.all[n]=s,this.nodes[r?"slave":"master"][n]=s,s.once("end",()=>{this.removeNode(n),this.emit("-node",s,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",s,n),s.on("error",function(o){this.emit("nodeError",o,n)})),s}reset(e){yc("Reset with %O",e);let r={};e.forEach(n=>{let s=(0,xE.getNodeKey)(n);n.readOnly&&r[s]||(r[s]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(yc("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let s=r[n];this.findOrCreate(s,s.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(yc("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};DE.default=PE});var ad=b((IAe,fx)=>{"use strict";function qe(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}qe.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};qe.prototype.get=function(e){return this.peekAt(e)};qe.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};qe.prototype.peekFront=function(){return this.peek()};qe.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(qe.prototype,"length",{get:function(){return this.size()}});qe.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};qe.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};qe.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};qe.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};qe.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};qe.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),s=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var o=this._list[r],i;if(e<n/2){for(i=e;i>0;i--)this._list[r]=this._list[r=r-1+s&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(i=n-1-e;i>0;i--)this._list[r]=this._list[r=r+1+s&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+s&this._capacityMask}return o}}};qe.prototype.remove=function(e,r){var n=e,s,o=r;if(n===(n|0)&&this._head!==this._tail){var i=this.size(),a=this._list.length;if(!(n>=i||n<-i||r<1)){if(n<0&&(n+=i),r===1||!r)return s=new Array(1),s[0]=this.removeOne(n),s;if(n===0&&n+r>=i)return s=this.toArray(),this.clear(),s;n+r>i&&(r=i-n);var c;for(s=new Array(r),c=0;c<r;c++)s[c]=this._list[this._head+n+c&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===i){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(n<i/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;o>0;)this._list[n=n-1+a&this._capacityMask]=void 0,o--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,c=i-(r+e);c>0;c--)this.push(this._list[n++]);for(n=this._tail;o>0;)this._list[n=n+1+a&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),s}}};qe.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var s=this.size();if(n<0&&(n+=s),!(n>s))if(arguments.length>2){var o,i,a,c=arguments.length,u=this._list.length,d=2;if(!s||n<s/2){for(i=new Array(n),o=0;o<n;o++)i[o]=this._list[this._head+o&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+u&this._capacityMask);c>d;)this.unshift(arguments[--c]);for(o=n;o>0;o--)this.unshift(i[o-1])}else{i=new Array(s-(n+r));var l=i.length;for(o=0;o<l;o++)i[o]=this._list[this._head+n+r+o&this._capacityMask];for(r===0?(a=[],n!=s&&(this._tail=this._head+n+u&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-l+u&this._capacityMask);d<c;)this.push(arguments[d++]);for(o=0;o<l;o++)this.push(i[o])}return a}else return this.remove(n,r)}};qe.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};qe.prototype.isEmpty=function(){return this._head===this._tail};qe.prototype.toArray=function(){return this._copyArray(!1)};qe.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var s=0;s<r;s++)this._list[s]=e[s]};qe.prototype._copyArray=function(e,r){var n=this._list,s=n.length,o=this.length;if(r=r|o,r==o&&this._head<this._tail)return this._list.slice(this._head,this._tail);var i=new Array(r),a=0,c;if(e||this._head>this._tail){for(c=this._head;c<s;c++)i[a++]=n[c];for(c=0;c<this._tail;c++)i[a++]=n[c]}else for(c=this._head;c<this._tail;c++)i[a++]=n[c];return i};qe.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};qe.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};qe.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};fx.exports=qe});var hx=b(kE=>{"use strict";Object.defineProperty(kE,"__esModule",{value:!0});var EJ=at(),bJ=ad(),_J=(0,EJ.Debug)("delayqueue"),OE=class{constructor(){this.queues={},this.timeouts={}}push(e,r,n){let s=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new bJ),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{s(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for(_J("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};kE.default=OE});var gx=b(ME=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});var mx=qi(),TJ=at(),wJ=On(),cd=(0,TJ.Debug)("cluster:subscriberGroup:shardedSubscriber"),NE=class{constructor(e,r){this.emitter=e,this.started=!1,this.instance=null,this.messageListeners=new Map,this.onEnd=()=>{this.started=!1,this.emitter.emit("-node",this.instance,this.nodeKey)},this.onError=n=>{this.emitter.emit("nodeError",n,this.nodeKey)},this.onMoved=()=>{this.emitter.emit("moved")},this.instance=new wJ.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!1,offlineQueue:!0,connectionName:(0,mx.getConnectionName)("ssubscriber",r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.nodeKey=(0,mx.getNodeKey)(r),this.instance.once("end",this.onEnd),this.instance.on("error",this.onError),this.instance.on("moved",this.onMoved);for(let n of["smessage","smessageBuffer"]){let s=(...o)=>{this.emitter.emit(n,...o)};this.messageListeners.set(n,s),this.instance.on(n,s)}}async start(){if(this.started){cd("already started %s",this.nodeKey);return}try{await this.instance.connect(),cd("started %s",this.nodeKey),this.started=!0}catch(e){throw cd("failed to start %s: %s",this.nodeKey,e),this.started=!1,e}}stop(){this.started=!1,this.instance&&(this.instance.disconnect(),this.instance.removeAllListeners(),this.messageListeners.clear(),this.instance=null),cd("stopped %s",this.nodeKey)}isStarted(){return this.started}getInstance(){return this.instance}getNodeKey(){return this.nodeKey}};ME.default=NE});var yx=b(LE=>{"use strict";Object.defineProperty(LE,"__esModule",{value:!0});var CJ=at(),vJ=qi(),ud=hc(),RJ=gx(),kr=(0,CJ.Debug)("cluster:subscriberGroup"),Gi=class t{constructor(e){this.subscriberGroupEmitter=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,this.failedAttemptsByNode=new Map,this.isResetting=!1,this.pendingReset=null,this.handleSubscriberConnectFailed=(r,n)=>{let o=(this.failedAttemptsByNode.get(n)||0)+1;this.failedAttemptsByNode.set(n,o);let i=Math.min(o,t.MAX_RETRY_ATTEMPTS),a=Math.min(t.BASE_BACKOFF_MS*2**i,t.MAX_BACKOFF_MS),c=Math.floor((Math.random()-.5)*(a*.5)),u=Math.max(0,a+c);kr("Failed to connect subscriber for %s. Refreshing slots in %dms",n,u),this.subscriberGroupEmitter.emit("subscriberConnectFailed",{delay:u,error:r})},this.handleSubscriberConnectSucceeded=r=>{this.failedAttemptsByNode.delete(r)}}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=ud(e[0]);for(let s of e)if(ud(s)!==r)return-1;let n=this.channels.get(r);return n?this.channels.set(r,n.concat(e)):this.channels.set(r,e),Array.from(this.channels.values()).reduce((s,o)=>s+o.length,0)}removeChannels(e){let r=ud(e[0]);for(let s of e)if(ud(s)!==r)return-1;let n=this.channels.get(r);if(n){let s=n.filter(o=>!e.includes(o));this.channels.set(r,s)}return Array.from(this.channels.values()).reduce((s,o)=>s+o.length,0)}stop(){for(let e of this.shardedSubscribers.values())e.stop();this.pendingReset=null,this.shardedSubscribers.clear(),this.subscriberToSlotsIndex.clear()}start(){let e=[];for(let r of this.shardedSubscribers.values())r.isStarted()||e.push(r.start().then(()=>{this.handleSubscriberConnectSucceeded(r.getNodeKey())}).catch(n=>{this.handleSubscriberConnectFailed(n,r.getNodeKey())}));return Promise.all(e)}async reset(e,r){if(this.isResetting){this.pendingReset={slots:e,nodes:r};return}this.isResetting=!0;try{let n=this._refreshSlots(e),s=this.hasUnhealthySubscribers();if(!n&&!s){kr("No topology change detected or failed subscribers. Skipping reset.");return}for(let[i,a]of this.shardedSubscribers){if(this.subscriberToSlotsIndex.has(i)&&a.isStarted()){kr("Skipping deleting subscriber for %s",i);continue}kr("Removing subscriber for %s",i),a.stop(),this.shardedSubscribers.delete(i),this.subscriberGroupEmitter.emit("-subscriber")}let o=[];for(let[i,a]of this.subscriberToSlotsIndex){if(this.shardedSubscribers.has(i)){kr("Skipping creating new subscriber for %s",i);continue}kr("Creating new subscriber for %s",i);let c=r.find(d=>(0,vJ.getNodeKey)(d.options)===i);if(!c){kr("Failed to find node for key %s",i);continue}let u=new RJ.default(this.subscriberGroupEmitter,c.options);this.shardedSubscribers.set(i,u),o.push(u.start().then(()=>{this.handleSubscriberConnectSucceeded(i)}).catch(d=>{this.handleSubscriberConnectFailed(d,i)})),this.subscriberGroupEmitter.emit("+subscriber")}await Promise.all(o),this._resubscribe(),this.subscriberGroupEmitter.emit("subscribersReady")}finally{if(this.isResetting=!1,this.pendingReset){let{slots:n,nodes:s}=this.pendingReset;this.pendingReset=null,await this.reset(n,s)}}}_refreshSlots(e){if(this._slotsAreEqual(e))return kr("Nothing to refresh because the new cluster map is equal to the previous one."),!1;kr("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.length;r++){let n=e[r][0];this.subscriberToSlotsIndex.has(n)||this.subscriberToSlotsIndex.set(n,[]),this.subscriberToSlotsIndex.get(n).push(Number(r))}return this.clusterSlots=JSON.parse(JSON.stringify(e)),!0}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let n=this.subscriberToSlotsIndex.get(r);n&&n.forEach(s=>{let o=e.getInstance(),i=this.channels.get(s);if(i&&i.length>0){if(o.status==="end")return;o.status==="ready"?o.ssubscribe(...i).catch(a=>{kr("Failed to ssubscribe on node %s: %s",r,a)}):o.once("ready",()=>{o.ssubscribe(...i).catch(a=>{kr("Failed to ssubscribe on node %s: %s",r,a)})})}})})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}hasUnhealthySubscribers(){let e=Array.from(this.shardedSubscribers.values()).some(n=>!n.isStarted()),r=Array.from(this.subscriberToSlotsIndex.keys()).some(n=>!this.shardedSubscribers.has(n));return e||r}};LE.default=Gi;Gi.MAX_RETRY_ATTEMPTS=10;Gi.MAX_BACKOFF_MS=2e3;Gi.BASE_BACKOFF_MS=100});var UE=b(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});var Sx=Di(),$E=require("events"),ji=xo(),Ex=bs(),bx=Pn(),ld=KA(),IJ=On(),AJ=td(),xJ=wE(),sr=at(),PJ=vE(),DJ=nd(),OJ=cx(),kJ=dx(),NJ=px(),MJ=hx(),Hi=qi(),_x=ad(),LJ=yx(),De=(0,sr.Debug)("cluster"),Tx=new WeakSet,Sc=class t extends DJ.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new MJ.default,this.offlineQueue=new _x,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,$E.EventEmitter.call(this),this.startupNodes=e,this.options=(0,sr.defaults)({},r,OJ.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers&&this.createShardedSubscriberGroup(),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new NJ.default(this.options.redisOptions),this.connectionPool.on("-node",(n,s)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,s)=>{this.emit("node error",n,s)}),this.subscriber=new kJ.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{De("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(s=>{if(this.connectionEpoch!==n){De("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new ji.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){De("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new ji.RedisError("Connection is aborted"));return}this.connectionPool.reset(s),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(c=>{De("Error while starting subscribers: %s",c)});let o=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},i,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",i),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((c,u)=>{c||u?(De("Ready check failed (%s). Reconnecting...",c||u),this.status==="connect"&&this.disconnect(!0)):o()}):o()};i=()=>{let c=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(c),r(c)},this.once("refresh",a),this.once("close",i),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(c=>{c&&c.message===ld.default.defaultMessage&&(IJ.default.prototype.silentEmit.call(this,"error",c),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start().catch(c=>{De("Error while starting subscribers: %s",c)})}).catch(s=>{this.setStatus("close"),this.handleCloseEvent(s),this.invokeReadyDelayedCallbacks(s),r(s)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,De("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let n=(0,Ex.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,Ex.default)(Promise.all(this.nodes().map(n=>n.quit().catch(s=>{if(s.message===sr.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw s}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),s=Object.assign({},this.options,r);return new t(n,s)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=a=>{this.isRefreshing=!1;for(let c of this._refreshSlotsCacheCallbacks)c(a);this._refreshSlotsCacheCallbacks=[]},s=(0,sr.shuffle)(this.connectionPool.getNodes()),o=null;function i(a){if(a===s.length){let d=new ld.default(ld.default.defaultMessage,o);return n(d)}let c=s[a],u=`${c.options.host}:${c.options.port}`;De("getting slot cache from %s",u),r.getInfoFromNode(c,function(d){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}d?(r.emit("node error",d,u),o=d,i(a+1)):(r.emit("refresh"),n())})}i(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(sr.noop),this.status==="end")return e.reject(new Error(sr.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let s=this.options.scaleReads;s!=="master"&&(e.isReadOnly||(0,Sx.exists)(e.name)&&(0,Sx.hasFlag)(e.name,"readonly")||(s="master"));let o=n?n.slot:e.getSlot(),i={},a=this;if(!n&&!Tx.has(e)){Tx.add(e);let u=e.reject;e.reject=function(d){let l=c.bind(null,!0);a.handleError(d,i,{moved:function(g,y){De("command %s is moved to %s",e.name,y),o=Number(g),a.slots[g]?a.slots[g][0]=y:a.slots[g]=[y],a._groupsBySlot[g]=a._groupsIds[a.slots[g].join(";")],a.connectionPool.findOrCreate(a.natMapper(y)),c(),De("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(g,y){De("command %s is required to ask %s:%s",e.name,y);let S=a.natMapper(y);a.connectionPool.findOrCreate(S),c(!1,`${S.host}:${S.port}`)},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:function(g){u.call(e,g)},defaults:function(){u.call(e,d)}})}}c();function c(u,d){if(a.status==="end"){e.reject(new ji.AbortError("Cluster is ended."));return}let l;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)l=n.redis;else if(bx.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||bx.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let g=a.shardedSubscribers.getResponsibleSubscriber(o);if(!g){e.reject(new ji.AbortError(`No sharded subscriber for slot: ${o}`));return}let y=-1;e.name=="ssubscribe"&&(y=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(y=a.shardedSubscribers.removeChannels(e.getKeys())),y!==-1?l=g.getInstance():e.reject(new ji.AbortError("Possible CROSSSLOT error: All channels must hash to the same slot"))}else l=a.subscriber.getInstance();if(!l){e.reject(new ji.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof o=="number"&&a.slots[o]){let g=a.slots[o];if(typeof s=="function"){let y=g.map(function(S){return a.connectionPool.getInstanceByKey(S)});l=s(y,e),Array.isArray(l)&&(l=(0,sr.sample)(l)),l||(l=y[0])}else{let y;s==="all"?y=(0,sr.sample)(g):s==="slave"&&g.length>1?y=(0,sr.sample)(g,1):y=g[0],l=a.connectionPool.getInstanceByKey(y)}}d&&(l=a.connectionPool.getInstanceByKey(d),l.asking())}l||(l=(typeof s=="function"?null:a.connectionPool.getSampleInstance(s))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=l)}l?l.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let s=e.message.split(" ");if(s[0]==="MOVED"){let o=this.options.retryDelayOnMoved;o&&typeof o=="number"?this.delayQueue.push("moved",n.moved.bind(null,s[1],s[2]),{timeout:o}):n.moved(s[1],s[2])}else s[0]==="ASK"?n.ask(s[1],s[2]):s[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):s[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===sr.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new _x}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{De('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){De("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){var r;e&&De("closed because %s",e);let n;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(n=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof n=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,De("Cluster is disconnected. Retrying after %dms",n),this.connect().catch(function(s){De("Got error %s when reconnecting. Ignoring...",s)})},n)):(this.options.shardedSubscribers&&((r=this.subscriberGroupEmitter)===null||r===void 0||r.removeAllListeners()),this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){De("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=null;return this.options.natMap&&typeof this.options.natMap=="function"?n=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(n=this.options.natMap[r]),n?(De("NAT mapping %s -> %O",r,n),Object.assign({},n)):typeof e=="string"?(0,Hi.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,Hi.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",sr.noop),n.cluster("SLOTS",(0,sr.timeout)((s,o)=>{if(n.disconnect(),s)return De("error encountered running CLUSTER.SLOTS: %s",s),r(s);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){De("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",o.length,this.status),r();return}let i=[];De("cluster slots result count: %d",o.length);for(let c=0;c<o.length;++c){let u=o[c],d=u[0],l=u[1],g=[];for(let y=2;y<u.length;y++){if(!u[y][0])continue;let S=this.natMapper({host:u[y][0],port:u[y][1]});S.readOnly=y!==2,i.push(S),g.push(S.host+":"+S.port)}De("cluster slots result [%d]: slots %d~%d served by %s",c,d,l,g);for(let y=d;y<=l;y++)this.slots[y]=g}this._groupsIds=Object.create(null);let a=0;for(let c=0;c<16384;c++){let u=(this.slots[c]||[]).join(";");if(!u.length){this._groupsBySlot[c]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++a),this._groupsBySlot[c]=this._groupsIds[u]}this.connectionPool.reset(i),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(c=>{De("Error while starting subscribers: %s",c)}),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let s,o=n.split(`\r
`);for(let i=0;i<o.length;++i){let a=o[i].split(":");if(a[0]==="cluster_state"){s=a[1];break}}s==="fail"?(De("cluster state not ok (%s)",s),e(null,s)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(s,o)=>{if(s)return n(s);let i=this,a=(0,Hi.groupSrvRecords)(o),c=Object.keys(a).sort((d,l)=>parseInt(d)-parseInt(l));function u(d){if(!c.length)return n(d);let l=c[0],g=a[l],y=(0,Hi.weightSrvRecords)(g);g.records.length||c.shift(),i.dnsLookup(y.name).then(S=>r({host:S,port:y.port}),u)}u()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(s,o)=>{s?(De("failed to resolve hostname %s to IP: %s",e,s.message),n(s)):(De("resolved hostname %s to IP %s",e,o),r(o))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,Hi.normalizeNodeOptions)(this.startupNodes),r=(0,Hi.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),s=(0,sr.zipMap)(r,n);return e.map(o=>{let i=s.get(o.host);return i?this.options.useSRVRecords?Object.assign({},o,i):Object.assign({},o,{host:i}):o})}createScanStream(e,{key:r,options:n={}}){return new AJ.default({objectMode:!0,key:r,redis:this,command:e,...n})}createShardedSubscriberGroup(){this.subscriberGroupEmitter=new $E.EventEmitter,this.shardedSubscribers=new LJ.default(this.subscriberGroupEmitter);let e=r=>{r instanceof ld.default&&this.disconnect(!0)};this.subscriberGroupEmitter.on("-node",(r,n)=>{this.emit("-node",r,n),this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("subscriberConnectFailed",({delay:r,error:n})=>{this.emit("error",n),setTimeout(()=>{this.refreshSlotsCache(e)},r)}),this.subscriberGroupEmitter.on("moved",()=>{this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("-subscriber",()=>{this.emit("-subscriber")}),this.subscriberGroupEmitter.on("+subscriber",()=>{this.emit("+subscriber")}),this.subscriberGroupEmitter.on("nodeError",(r,n)=>{this.emit("nodeError",r,n)}),this.subscriberGroupEmitter.on("subscribersReady",()=>{this.emit("subscribersReady")});for(let r of["smessage","smessageBuffer"])this.subscriberGroupEmitter.on(r,(n,s,o)=>{this.emit(r,n,s,o)})}};(0,PJ.default)(Sc,$E.EventEmitter);(0,xJ.addTransactionSupport)(Sc.prototype);BE.default=Sc});var dd=b(qE=>{"use strict";Object.defineProperty(qE,"__esModule",{value:!0});var $J=at(),BJ=(0,$J.Debug)("AbstractConnector"),FE=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{BJ("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};qE.default=FE});var wx=b(jE=>{"use strict";Object.defineProperty(jE,"__esModule",{value:!0});var UJ=require("net"),FJ=require("tls"),qJ=at(),GJ=dd(),GE=class extends GJ.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((s,o)=>{process.nextTick(()=>{if(!this.connecting){o(new Error(qJ.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,FJ.connect)(n):this.stream=(0,UJ.createConnection)(n)}catch(i){o(i);return}this.stream.once("error",i=>{this.firstError=i}),s(this.stream)})})}};jE.default=GE});var Cx=b(VE=>{"use strict";Object.defineProperty(VE,"__esModule",{value:!0});function jJ(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var HE=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(jJ(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};VE.default=HE});var Rx=b(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.FailoverDetector=void 0;var HJ=at(),zE=(0,HJ.Debug)("FailoverDetector"),vx="+switch-master",WE=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){zE("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(vx).catch(s=>{zE("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,s.message)});e.push(n),r.client.on("message",s=>{!this.isDisconnected&&s===vx&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,zE("Failover detected, disconnecting"),this.connector.disconnect()}};pd.FailoverDetector=WE});var fd=b(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.SentinelIterator=void 0;var VJ=require("net"),Ec=at(),zJ=require("tls"),Ix=Cx();bc.SentinelIterator=Ix.default;var WJ=dd(),KJ=On(),QJ=Rx(),Vi=(0,Ec.Debug)("SentinelConnector"),KE=class extends WJ.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new Ix.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(Vi("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=async()=>{let s=this.sentinelIterator.next();if(s.done){this.sentinelIterator.reset(!1);let c=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof c!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${c}ms.`;r&&(u+=` Last error: ${r.message}`),Vi(u);let d=new Error(u);if(typeof c=="number")return e("error",d),await new Promise(l=>setTimeout(l,c)),n();throw d}let o=null,i=null;try{o=await this.resolve(s.value)}catch(c){i=c}if(!this.connecting)throw new Error(Ec.CONNECTION_CLOSED_ERROR_MSG);let a=s.value.host+":"+s.value.port;if(o)return Vi("resolved: %s:%s from sentinel %s",o.host,o.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(o,this.options.tls),this.stream=(0,zJ.connect)(o),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,VJ.createConnection)(o),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",c=>{this.firstError=c}),this.stream;{let c=i?"failed to connect to sentinel "+a+" because "+i.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+o;return Vi(c),e("sentinelError",new Error(c)),i&&(r=i),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(Ec.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let o=this.sentinelNatResolve(Ax(n));this.sentinelIterator.add(o)&&Vi("adding sentinel %s:%s",o.host,o.port)}}),Vi("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(Ec.packObject).filter(s=>s.flags&&!s.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(YJ(n,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,n=e;return typeof this.options.natMap=="function"?n=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(n=this.options.natMap[r]||e),n}connectToSentinel(e,r){return new KJ.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",XJ);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:s}=this.sentinelIterator.next();if(n)break;let o=this.connectToSentinel(s,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});o.on("reconnecting",()=>{var i;(i=this.emitter)===null||i===void 0||i.emit("sentinelReconnecting")}),r.push({address:s,client:o})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new QJ.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};bc.default=KE;function YJ(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((s,o)=>(s.prio||(s.prio=1),o.prio||(o.prio=1),s.prio<o.prio?-1:s.prio>o.prio?1:0));for(let s=0;s<n.length;s++){for(let o=0;o<t.length;o++){let i=t[o];if(i.ip===n[s].ip&&i.port===n[s].port){r=i;break}}if(r)break}}return r||(r=(0,Ec.sample)(t)),Ax(r)}function Ax(t){return{host:t.ip,port:Number(t.port)}}function XJ(){}});var xx=b(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.SentinelConnector=zi.StandaloneConnector=void 0;var JJ=wx();zi.StandaloneConnector=JJ.default;var ZJ=fd();zi.SentinelConnector=ZJ.default});var Px=b(YE=>{"use strict";Object.defineProperty(YE,"__esModule",{value:!0});var eZ=xo(),QE=class extends eZ.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};YE.default=QE});var Dx=b(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.MaxRetriesPerRequestError=void 0;var tZ=Px();hd.MaxRetriesPerRequestError=tZ.default});var Bx=b((FAe,$x)=>{"use strict";var rb=require("buffer").Buffer,rZ=require("string_decoder").StringDecoder,XE=new rZ,Ox=xo(),nZ=Ox.ReplyError,sZ=Ox.ParserError,Nr=rb.allocUnsafe(32*1024),Nt=0,md=null,_c=0,JE=0;function oZ(t){let e=t.buffer.length-1;var r=t.offset,n=0,s=1;for(t.buffer[r]===45&&(s=-1,r++);r<e;){let o=t.buffer[r++];if(o===13)return t.offset=r+1,s*n;n=n*10+(o-48)}}function iZ(t){let e=t.buffer.length-1;var r=t.offset,n=0,s="";for(t.buffer[r]===45&&(s+="-",r++);r<e;){var o=t.buffer[r++];if(o===13)return t.offset=r+1,n!==0&&(s+=n),s;n>429496728?(s+=n*10+(o-48),n=0):o===48&&n===0?s+=0:n=n*10+(o-48)}}function kx(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var s=e;s<n;)if(r[s++]===13)return t.offset=s+1,t.optionReturnBuffers===!0?t.buffer.slice(e,s-1):t.buffer.toString("utf8",e,s-1)}function Nx(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,n;n=n*10+(s-48)}}function aZ(t){return t.optionStringNumbers===!0?iZ(t):oZ(t)}function cZ(t){let e=Nx(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function uZ(t){var e=kx(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new nZ(e)}function lZ(t,e){let r=new sZ("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function dZ(t){let e=Nx(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return Mx(t,r,0)}function ZE(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function eb(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=eb(t);if(n===void 0){ZE(t,e,r);return}e[r++]=n}return Mx(t,e,r)}function Mx(t,e,r){let n=t.buffer.length;for(;r<e.length;){let s=t.offset;if(t.offset>=n){ZE(t,e,r);return}let o=Lx(t,t.buffer[t.offset++]);if(o===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=s),ZE(t,e,r);return}e[r]=o,r++}return e}function Lx(t,e){switch(e){case 36:return cZ(t);case 43:return kx(t);case 42:return dZ(t);case 58:return aZ(t);case 45:return uZ(t);default:return lZ(t,e)}}function pZ(){if(Nr.length>50*1024)if(_c===1||JE>_c*2){let t=Math.floor(Nr.length/10),e=t<Nt?Nt:t;Nt=0,Nr=Nr.slice(e,Nr.length)}else JE++,_c--;else clearInterval(md),_c=0,JE=0,md=null}function fZ(t){if(Nr.length<t+Nt){let e=t>78643200?2:3;Nt>1024*1024*111&&(Nt=1024*1024*50),Nr=rb.allocUnsafe(t*e+Nt),Nt=0,_c++,md===null&&(md=setInterval(pZ,50))}}function hZ(t){let e=t.bufferCache,r=t.offset;var n=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+s-2);n--,s=e[e.length-2].length+s}for(var o=XE.write(e[0].slice(r)),i=1;i<n-1;i++)o+=XE.write(e[i]);return o+=XE.end(e[i].slice(0,s-2)),o}function mZ(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var s=e.length,o=t.bigStrSize-t.totalChunkSize;if(t.offset=o,o<=2){if(s===2)return e[0].slice(r,e[0].length+o-2);s--,o=e[e.length-2].length+o}fZ(n);let i=Nt;e[0].copy(Nr,i,r,e[0].length),Nt+=e[0].length-r;for(var a=1;a<s-1;a++)e[a].copy(Nr,Nt),Nt+=e[a].length;return e[a].copy(Nr,Nt,0,o-2),Nt+=o-2,Nr.slice(i,Nt)}var tb=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,s=n-this.offset,o=rb.allocUnsafe(s+e.length);if(this.buffer.copy(o,0,this.offset,n),e.copy(o,s,0,e.length),this.buffer=o,this.offset=0,this.arrayCache.length){let i=eb(this);if(i===void 0)return;this.returnReply(i)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?mZ(this):hZ(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=eb(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,s=this.buffer[this.offset++],o=Lx(this,s);if(o===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}s===45?this.returnError(o):this.returnReply(o)}this.buffer=null}};$x.exports=tb});var Fx=b((qAe,Ux)=>{"use strict";Ux.exports=Bx()});var qx=b(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});var sb=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[nb(e)][r]=!0}del(e,r){delete this.set[nb(e)][r]}channels(e){return Object.keys(this.set[nb(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};ob.default=sb;function nb(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var Vx=b(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});var Gx=Pn(),gZ=at(),yZ=Fx(),SZ=qx(),EZ=(0,gZ.Debug)("dataHandler"),ib=class{constructor(e,r){this.redis=e;let n=new yZ({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:s=>{this.returnError(s)},returnFatalError:s=>{this.returnFatalError(s)},returnReply:s=>{this.returnReply(s)}});e.stream.prependListener("data",s=>{n.execute(s)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(Gx.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new SZ.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),jx(r.command,e[2])||this.redis.commandQueue.unshift(r)):Gx.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?Hx(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(EZ('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let s=this.shiftCommand(e);if(!s)return;jx(s.command,e[2])||this.redis.commandQueue.unshift(s);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let s=e[2];Number(s)===0&&(this.redis.condition.subscriber=!1);let o=this.shiftCommand(e);if(!o)return;Hx(o.command,s)||this.redis.commandQueue.unshift(o);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),s=r.slice(0,n),o=r.indexOf('"'),i=r.slice(o+1,-1).split('" "').map(c=>c.replace(/\\"/g,'"')),a=r.slice(n+2,o-2).split(" ");return this.redis.emit("monitor",s,i,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",s=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",s),null}return r}};ab.default=ib;var Cs=new WeakMap;function jx(t,e){let r=Cs.has(t)?Cs.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),Cs.delete(t),!0):(Cs.set(t,r),!1)}function Hx(t,e){let r=Cs.has(t)?Cs.get(t):t.args.length;return r===0?Number(e)===0?(Cs.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(Cs.set(t,r),!1))}});var zx=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.readyHandler=yr.errorHandler=yr.closeHandler=yr.connectHandler=void 0;var bZ=xo(),_Z=Pn(),TZ=Dx(),tn=at(),wZ=Vx(),dt=(0,tn.Debug)("connection");function CZ(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:n}=t;t.condition.auth&&t.auth(t.condition.auth,function(o){n===t.connectionEpoch&&o&&(o.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):o.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):o.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(o,o)))}),t.condition.select&&t.select(t.condition.select).catch(o=>{t.silentEmit("error",o)}),new wZ.default(t,{stringNumbers:t.options.stringNumbers});let s=[];t.options.connectionName&&(dt("set the connection name [%s]",t.options.connectionName),s.push(t.client("setname",t.options.connectionName).catch(tn.noop))),t.options.disableClientInfo||(dt("set the client info"),s.push((0,tn.getPackageMeta)().then(o=>t.client("SETINFO","LIB-VER",o.version).catch(tn.noop)).catch(tn.noop)),s.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(tn.noop))),Promise.all(s).catch(tn.noop).finally(()=>{t.options.enableReadyCheck||yr.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(o,i){n===t.connectionEpoch&&(o?r||t.recoverFromFatalError(new Error("Ready check failed: "+o.message),o):t.connector.check(i)?yr.readyHandler(t)():t.disconnect(!0))})})}}yr.connectHandler=CZ;function cb(t){let e=new bZ.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function vZ(t){var e;let r=0;for(let n=0;n<t.length;){let s=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,o=s.pipelineIndex;if((o===void 0||o===0)&&(r=0),o!==void 0&&o!==r++){t.remove(n,1),s.reject(cb(s));continue}n++}}function RZ(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(cb(n));break}n.inTransaction?(t.remove(r,1),n.reject(cb(n))):r++}}function IZ(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&vZ(t.commandQueue),t.offlineQueue.length&&RZ(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,dt("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return dt("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return dt("skip reconnecting because `retryStrategy` doesn't return a number"),e();dt("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(tn.noop)},n);let{maxRetriesPerRequest:s}=t.options;typeof s=="number"&&(s<0?dt("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(s+1)===0&&(dt("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new TZ.MaxRetriesPerRequestError(s))))};function e(){t.setStatus("end"),t.flushQueue(new Error(tn.CONNECTION_CLOSED_ERROR_MSG))}}yr.closeHandler=IZ;function AZ(t){return function(e){dt("error: %s",e),t.silentEmit("error",e)}}yr.errorHandler=AZ;function xZ(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return _Z.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(dt("set the connection to readonly mode"),t.readonly().catch(tn.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(dt("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(dt("subscribe %d channels",n.length),t.subscribe(n));let s=r.subscriber.channels("psubscribe");s.length&&(dt("psubscribe %d channels",s.length),t.psubscribe(s));let o=r.subscriber.channels("ssubscribe");if(o.length){dt("ssubscribe %s",o.length);for(let i of o)t.ssubscribe(i)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(dt("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){dt("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(dt("connect to db [%d]",e),t.select(e))}}yr.readyHandler=xZ});var Wx=b(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.DEFAULT_REDIS_OPTIONS=void 0;gd.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10,blockingTimeoutGrace:100}});var On=b(lb=>{"use strict";Object.defineProperty(lb,"__esModule",{value:!0});var Kx=Di(),Yx=require("events"),ub=bs(),PZ=UE(),Oo=Pn(),DZ=xx(),OZ=fd(),vs=zx(),Xx=Wx(),kZ=td(),NZ=wE(),ko=at(),MZ=vE(),LZ=nd(),Rs=Ql(),Qx=ad(),Is=(0,ko.Debug)("redis"),As=class t extends LZ.default{constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),Yx.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let s=new OZ.default(this.options);s.emitter=this,this.connector=s}else this.connector=new DZ.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([s,o])=>{this.defineCommand(s,o)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Rs.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,s)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){s(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:o}=this;this.condition={select:o.db,auth:o.username?[o.username,o.password]:o.password,subscriber:!1};let i=this;(0,ub.default)(this.connector.connect(function(a,c){i.silentEmit(a,c)}),function(a,c){if(a){i.flushQueue(a),i.silentEmit("error",a),s(a),i.setStatus("end");return}let u=o.tls?"secureConnect":"connect";if("sentinels"in o&&o.sentinels&&!o.enableTLSForSentinelMode&&(u="connect"),i.stream=c,o.noDelay&&c.setNoDelay(!0),typeof o.keepAlive=="number"&&(c.connecting?c.once(u,()=>{c.setKeepAlive(!0,o.keepAlive)}):c.setKeepAlive(!0,o.keepAlive)),c.connecting){if(c.once(u,vs.connectHandler(i)),o.connectTimeout){let g=!1;c.setTimeout(o.connectTimeout,function(){if(g)return;c.setTimeout(0),c.destroy();let y=new Error("connect ETIMEDOUT");y.errorno="ETIMEDOUT",y.code="ETIMEDOUT",y.syscall="connect",vs.errorHandler(i)(y)}),c.once(u,function(){g=!0,c.setTimeout(0)})}}else if(c.destroyed){let g=i.connector.firstError;g&&process.nextTick(()=>{vs.errorHandler(i)(g)}),process.nextTick(vs.closeHandler(i))}else process.nextTick(vs.connectHandler(i));c.destroyed||(c.once("error",vs.errorHandler(i)),c.once("close",vs.closeHandler(i)));let d=function(){i.removeListener("close",l),n()};var l=function(){i.removeListener("ready",d),s(new Error(ko.CONNECTION_CLOSED_ERROR_MSG))};i.once("ready",d),i.once("close",l)})});return(0,ub.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?vs.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,ub.default)(new Promise(function(n,s){r.once("error",s),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,s;if(this.status==="wait"&&this.connect().catch(Rs.noop),this.status==="end")return e.reject(new Error(ko.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!Oo.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let o=this.getBlockingTimeoutInMs(e),i=this.status==="ready"||!r&&this.status==="connect"&&(0,Kx.exists)(e.name,{caseInsensitive:!0})&&((0,Kx.hasFlag)(e.name,"loading",{nameCaseInsensitive:!0})||Oo.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(i=!1):i=!1,i)Is.enabled&&Is("write command[%s]: %d -> %s(%o)",this._getDescription(),(s=this.condition)===null||s===void 0?void 0:s.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),o!==void 0&&e.setBlockingTimeout(o),Oo.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;if(Is.enabled&&Is("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select}),Oo.default.checkFlag("BLOCKING_COMMANDS",e.name)){let a=this.getConfiguredBlockingTimeout();a!==void 0&&e.setBlockingTimeout(a)}}if(e.name==="select"&&(0,ko.isInt)(e.args[0])){let a=parseInt(e.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),Is("switch to db [%d]",this.condition.select))}return e.promise}getBlockingTimeoutInMs(e){var r;if(!Oo.default.checkFlag("BLOCKING_COMMANDS",e.name))return;let n=this.getConfiguredBlockingTimeout();if(n===void 0)return;let s=e.extractBlockingTimeout();if(typeof s=="number")return s>0?s+((r=this.options.blockingTimeoutGrace)!==null&&r!==void 0?r:Xx.DEFAULT_REDIS_OPTIONS.blockingTimeoutGrace):n;if(s===null)return n}getConfiguredBlockingTimeout(){if(typeof this.options.blockingTimeout=="number"&&this.options.blockingTimeout>0)return this.options.blockingTimeout}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===ko.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let s=!1;switch(this.options.reconnectOnError&&!Oo.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(s=this.options.reconnectOnError(e)),s){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new Qx}resetOfflineQueue(){this.offlineQueue=new Qx}parseOptions(...e){let r={},n=!1;for(let s=0;s<e.length;++s){let o=e[s];if(!(o===null||typeof o>"u"))if(typeof o=="object")(0,Rs.defaults)(r,o);else if(typeof o=="string")(0,Rs.defaults)(r,(0,ko.parseURL)(o)),o.startsWith("rediss://")&&(n=!0);else if(typeof o=="number")r.port=o;else throw new Error("Invalid argument "+o)}n&&(0,Rs.defaults)(r,{tls:!0}),(0,Rs.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,ko.resolveTLSProfile)(r)}setStatus(e,r){Is.enabled&&Is("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new kZ.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,Rs.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,s){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof s!="string")return e(null,s);let o={},i=s.split(`\r
`);for(let a=0;a<i.length;++a){let[c,...u]=i[a].split(":"),d=u.join(":");d&&(o[c]=d)}if(!o.loading||o.loading==="0")e(null,o);else{let a=(o.loading_eta_seconds||1)*1e3,c=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;Is("Redis server still loading, trying again in "+c+"ms"),setTimeout(function(){r._readyCheck(e)},c)}}).catch(Rs.noop)}};As.Cluster=PZ.default;As.Command=Oo.default;As.defaultOptions=Xx.DEFAULT_REDIS_OPTIONS;(0,MZ.default)(As,Yx.EventEmitter);(0,NZ.addTransactionSupport)(As.prototype);lb.default=As});var eP=b((Oe,Zx)=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.print=Oe.ReplyError=Oe.SentinelIterator=Oe.SentinelConnector=Oe.AbstractConnector=Oe.Pipeline=Oe.ScanStream=Oe.Command=Oe.Cluster=Oe.Redis=Oe.default=void 0;Oe=Zx.exports=On().default;var $Z=On();Object.defineProperty(Oe,"default",{enumerable:!0,get:function(){return $Z.default}});var BZ=On();Object.defineProperty(Oe,"Redis",{enumerable:!0,get:function(){return BZ.default}});var UZ=UE();Object.defineProperty(Oe,"Cluster",{enumerable:!0,get:function(){return UZ.default}});var FZ=Pn();Object.defineProperty(Oe,"Command",{enumerable:!0,get:function(){return FZ.default}});var qZ=td();Object.defineProperty(Oe,"ScanStream",{enumerable:!0,get:function(){return qZ.default}});var GZ=bE();Object.defineProperty(Oe,"Pipeline",{enumerable:!0,get:function(){return GZ.default}});var jZ=dd();Object.defineProperty(Oe,"AbstractConnector",{enumerable:!0,get:function(){return jZ.default}});var Jx=fd();Object.defineProperty(Oe,"SentinelConnector",{enumerable:!0,get:function(){return Jx.default}});Object.defineProperty(Oe,"SentinelIterator",{enumerable:!0,get:function(){return Jx.SentinelIterator}});Oe.ReplyError=xo().ReplyError;Object.defineProperty(Oe,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function HZ(t,e){console.log(t?"Error: "+t:"Reply: "+e)}Oe.print=HZ});var xs=b(xe=>{"use strict";xe.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(xe.HttpAuthLocation||(xe.HttpAuthLocation={}));xe.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(xe.HttpApiKeyAuthLocation||(xe.HttpApiKeyAuthLocation={}));xe.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(xe.EndpointURLScheme||(xe.EndpointURLScheme={}));xe.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(xe.AlgorithmId||(xe.AlgorithmId={}));var VZ=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>xe.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>xe.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},zZ=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},WZ=t=>VZ(t),KZ=t=>zZ(t);xe.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(xe.FieldPosition||(xe.FieldPosition={}));var QZ="__smithy_context";xe.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(xe.IniSectionType||(xe.IniSectionType={}));xe.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(xe.RequestHandlerProtocol||(xe.RequestHandlerProtocol={}));xe.SMITHY_CONTEXT_KEY=QZ;xe.getDefaultClientConfiguration=WZ;xe.resolveDefaultRuntimeConfig=KZ});var be=b(Ps=>{"use strict";var YZ=xs(),XZ=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),JZ=t=>({httpHandler:t.httpHandler()}),db=class{name;kind;values;constructor({name:e,kind:r=YZ.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},pb=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},fb=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=ZZ(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function ZZ(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var hb=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function eee(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Ps.Field=db;Ps.Fields=pb;Ps.HttpRequest=fb;Ps.HttpResponse=hb;Ps.getHttpHandlerExtensionConfiguration=XZ;Ps.isValidHostname=eee;Ps.resolveHttpHandlerRuntimeConfig=JZ});var No=b(Tc=>{"use strict";var tee=be();function ree(t){return t}var tP=t=>e=>async r=>{if(!tee.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},rP={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},nee=t=>({applyToStack:e=>{e.add(tP(t),rP)}});Tc.getHostHeaderPlugin=nee;Tc.hostHeaderMiddleware=tP;Tc.hostHeaderMiddlewareOptions=rP;Tc.resolveHostHeaderConfig=ree});var Mo=b(yd=>{"use strict";var nP=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,d=c??e.inputFilterSensitiveLog,l=u??e.outputFilterSensitiveLog,{$metadata:g,...y}=n.output;return i?.info?.({clientName:s,commandName:o,input:d(r.input),output:l(y),metadata:g}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(r.input),error:n,metadata:n.$metadata}),n}},sP={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},see=t=>({applyToStack:e=>{e.add(nP(),sP)}});yd.getLoggerPlugin=see;yd.loggerMiddleware=nP;yd.loggerMiddlewareOptions=sP});var oP={};yt(oP,{InvokeStore:()=>Sb,InvokeStoreBase:()=>Cc});var wc,mb,Cc,gb,yb,Sb,iP=T(()=>{wc={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},mb=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");mb||(globalThis.awslambda=globalThis.awslambda||{});Cc=class{static PROTECTED_KEYS=wc;isProtectedKey(e){return Object.values(wc).includes(e)}getRequestId(){return this.get(wc.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(wc.X_RAY_TRACE_ID)}getTenantId(){return this.get(wc.TENANT_ID)}},gb=class extends Cc{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=r}run(e,r){return this.currentContext=e,r()}},yb=class t extends Cc{als;static async create(){let e=new t,r=await import("node:async_hooks");return e.als=new r.AsyncLocalStorage,e}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw new Error("No context available");n[e]=r}run(e,r){return this.als.run(e,r)}};(function(t){let e=null;async function r(){return e||(e=(async()=>{let s="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await yb.create():new gb;return!mb&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!mb&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=s),s)})()),e}t.getInstanceAsync=r,t._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{e=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={InvokeStore:void 0}}}:void 0})(Sb||(Sb={}))});var aP=b(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.recursionDetectionMiddleware=void 0;var oee=(iP(),K(oP)),iee=be(),Eb="X-Amzn-Trace-Id",aee="AWS_LAMBDA_FUNCTION_NAME",cee="_X_AMZN_TRACE_ID",uee=()=>t=>async e=>{let{request:r}=e;if(!iee.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===Eb.toLowerCase())??Eb;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[aee],o=process.env[cee],c=(await oee.InvokeStore.getInstanceAsync())?.getXRayTraceId()??o,u=d=>typeof d=="string"&&d.length>0;return u(s)&&u(c)&&(r.headers[Eb]=c),t({...e,request:r})};Sd.recursionDetectionMiddleware=uee});var Lo=b(Ed=>{"use strict";var bb=aP(),lee={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dee=t=>({applyToStack:e=>{e.add(bb.recursionDetectionMiddleware(),lee)}});Ed.getRecursionDetectionPlugin=dee;Object.keys(bb).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ed,t)&&Object.defineProperty(Ed,t,{enumerable:!0,get:function(){return bb[t]}})})});var _b,pee,cP=T(()=>{_b=v(xs()),pee=t=>t[_b.SMITHY_CONTEXT_KEY]||(t[_b.SMITHY_CONTEXT_KEY]={})});var pt=b(Tb=>{"use strict";var uP=xs(),fee=t=>t[uP.SMITHY_CONTEXT_KEY]||(t[uP.SMITHY_CONTEXT_KEY]={}),hee=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Tb.getSmithyContext=fee;Tb.normalizeProvider=hee});var lP,dP=T(()=>{lP=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function mee(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var pP,vc,bd=T(()=>{pP=v(pt());dP();vc=(t,e)=>(r,n)=>async s=>{let o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),i=t.authSchemePreference?await t.authSchemePreference():[],a=lP(o,i),c=mee(t.httpAuthSchemes),u=(0,pP.getSmithyContext)(n),d=[];for(let l of a){let g=c.get(l.schemeId);if(!g){d.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let y=g.identityProvider(await e.identityProviderConfigProvider(t));if(!y){d.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:S={},signingProperties:w={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},S),l.signingProperties=Object.assign(l.signingProperties||{},w),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await y(l.identityProperties),signer:g.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(s)}});var fP,$o,hP=T(()=>{bd();fP={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},$o=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(vc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),fP)}})});var Cb=b(Wi=>{"use strict";var gee=be(),mP=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(gee.HttpResponse.isInstance(o)){let{headers:c={}}=o,u=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:wb(/^x-[\w-]+-request-?id$/,u),extendedRequestId:wb(/^x-[\w-]+-id-2$/,u),cfId:wb(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw i}},wb=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],gP=(t,e)=>(r,n)=>async s=>{let o=t,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:i});return r({...s,request:a})},yP={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},SP={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function yee(t,e,r){return{applyToStack:n=>{n.add(mP(t,r),yP),n.add(gP(t,e),SP)}}}Wi.deserializerMiddleware=mP;Wi.deserializerMiddlewareOption=yP;Wi.getSerdePlugin=yee;Wi.serializerMiddleware=gP;Wi.serializerMiddlewareOption=SP});var EP,bP,See,_P=T(()=>{EP=v(Cb());bd();bP={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:EP.serializerMiddlewareOption.name},See=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(vc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),bP)}})});var TP=T(()=>{bd();hP();_P()});var wP,CP,Eee,bee,vb,Rb=T(()=>{wP=v(be()),CP=v(pt()),Eee=t=>e=>{throw e},bee=(t,e)=>{},vb=t=>(e,r)=>async n=>{if(!wP.HttpRequest.isInstance(n.request))return e(n);let o=(0,CP.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await e({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||Eee)(i));return(c.successHandler||bee)(u.response,i),u}});var vP,Bo,RP=T(()=>{Rb();vP={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Bo=t=>({applyToStack:e=>{e.addRelativeTo(vb(t),vP)}})});var IP=T(()=>{Rb();RP()});var Ds,AP=T(()=>{Ds=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function xP(t,e,r,n,s){return async function*(i,a,...c){let u=a,d=i.startingToken??u[r],l=!0,g;for(;l;){if(u[r]=d,s&&(u[s]=u[s]??i.pageSize),i.client instanceof t)g=await _ee(e,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield g;let y=d;d=Tee(g,n),l=!!(d&&(!i.stopOnSameToken||d!==y))}return void 0}}var _ee,Tee,PP=T(()=>{_ee=async(t,e,r,n=o=>o,...s)=>{let o=new t(r);return o=n(o)??o,await e.send(o,...s)};Tee=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var Ib=b(DP=>{"use strict";var wee=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";DP.isArrayBuffer=wee});var Ki=b(xb=>{"use strict";var Cee=Ib(),Ab=require("buffer"),vee=(t,e=0,r=t.byteLength-e)=>{if(!Cee.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Ab.Buffer.from(t,e,r)},Ree=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Ab.Buffer.from(t,e):Ab.Buffer.from(t)};xb.fromArrayBuffer=vee;xb.fromString=Ree});var OP=b(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.fromBase64=void 0;var Iee=Ki(),Aee=/^[A-Za-z0-9+/]*={0,2}$/,xee=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Aee.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,Iee.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};_d.fromBase64=xee});var rt=b(Td=>{"use strict";var kP=Ki(),NP=t=>{let e=kP.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Pee=t=>typeof t=="string"?NP(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Dee=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return kP.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};Td.fromUtf8=NP;Td.toUint8Array=Pee;Td.toUtf8=Dee});var MP=b(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.toBase64=void 0;var Oee=Ki(),kee=rt(),Nee=t=>{let e;if(typeof t=="string"?e=(0,kee.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Oee.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};wd.toBase64=Nee});var Xe=b(Rc=>{"use strict";var LP=OP(),$P=MP();Object.keys(LP).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Rc,t)&&Object.defineProperty(Rc,t,{enumerable:!0,get:function(){return LP[t]}})});Object.keys($P).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Rc,t)&&Object.defineProperty(Rc,t,{enumerable:!0,get:function(){return $P[t]}})})});var Db=b(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.ChecksumStream=void 0;var Mee=Xe(),Lee=require("stream"),Pb=class extends Lee.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??Mee.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(s){return n(s)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};Cd.ChecksumStream=Pb});var kn=b(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.isBlob=Qi.isReadableStream=void 0;var $ee=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Qi.isReadableStream=$ee;var Bee=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Qi.isBlob=Bee});var BP=b(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.ChecksumStream=void 0;var Uee=typeof ReadableStream=="function"?ReadableStream:function(){},Ob=class extends Uee{};vd.ChecksumStream=Ob});var UP=b(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.createChecksumStream=void 0;var Fee=Xe(),qee=kn(),Gee=BP(),jee=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,qee.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??Fee.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),d=o(u);if(t!==d){let l=new Error(`Checksum mismatch: expected "${t}" but received "${d}" in response header "${n}".`);c.error(l)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,Gee.ChecksumStream.prototype),a};Rd.createChecksumStream=jee});var FP=b(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});kb.createChecksumStream=Wee;var Hee=kn(),Vee=Db(),zee=UP();function Wee(t){return typeof ReadableStream=="function"&&(0,Hee.isReadableStream)(t.source)?(0,zee.createChecksumStream)(t):new Vee.ChecksumStream(t)}});var Mb=b(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.ByteArrayCollector=void 0;var Nb=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};Id.ByteArrayCollector=Nb});var HP=b(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.createBufferedReadable=void 0;Nn.createBufferedReadableStream=qP;Nn.merge=GP;Nn.flush=Ad;Nn.sizeOf=Yi;Nn.modeOf=jP;var Kee=Mb();function qP(t,e,r){let n=t.getReader(),s=!1,o=0,i=["",new Kee.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:d,done:l}=await n.read(),g=d;if(l){if(a!==-1){let y=Ad(i,a);Yi(y)>0&&u.enqueue(y)}u.close()}else{let y=jP(g,!1);if(a!==y&&(a>=0&&u.enqueue(Ad(i,a)),a=y),a===-1){u.enqueue(g);return}let S=Yi(g);o+=S;let w=Yi(i[a]);if(S>=e&&w===0)u.enqueue(g);else{let A=GP(i,a,g);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${S} is below threshold of ${e}, automatically buffering.`)),A>=e?u.enqueue(Ad(i,a)):await c(u)}}};return new ReadableStream({pull:c})}Nn.createBufferedReadable=qP;function GP(t,e,r){switch(e){case 0:return t[0]+=r,Yi(t[0]);case 1:case 2:return t[e].push(r),Yi(t[e])}}function Ad(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Yi(t){return t?.byteLength??t?.length??0}function jP(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var zP=b(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});Lb.createBufferedReadable=Xee;var Qee=require("node:stream"),VP=Mb(),Mn=HP(),Yee=kn();function Xee(t,e,r){if((0,Yee.isReadableStream)(t))return(0,Mn.createBufferedReadableStream)(t,e,r);let n=new Qee.Readable({read(){}}),s=!1,o=0,i=["",new VP.ByteArrayCollector(c=>new Uint8Array(c)),new VP.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,Mn.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,Mn.flush)(i,a)),a=u),a===-1){n.push(c);return}let d=(0,Mn.sizeOf)(c);o+=d;let l=(0,Mn.sizeOf)(i[a]);if(d>=e&&l===0)n.push(c);else{let g=(0,Mn.merge)(i,a,c);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${d} is below threshold of ${e}, automatically buffering.`)),g>=e&&n.push((0,Mn.flush)(i,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,Mn.flush)(i,a);(0,Mn.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var WP=b(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.getAwsChunkedEncodingStream=void 0;var Jee=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&n!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,c=a?i(s,t):void 0,u=t.getReader();return new ReadableStream({async pull(d){let{value:l,done:g}=await u.read();if(g){if(d.enqueue(`0\r
`),a){let y=r(await c);d.enqueue(`${o}:${y}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(n(l)||0).toString(16)}\r
${l}\r
`)}})};xd.getAwsChunkedEncodingStream=Jee});var KP=b($b=>{"use strict";Object.defineProperty($b,"__esModule",{value:!0});$b.getAwsChunkedEncodingStream=rte;var Zee=require("node:stream"),ete=WP(),tte=kn();function rte(t,e){let r=t,n=t;if((0,tte.isReadableStream)(n))return(0,ete.getAwsChunkedEncodingStream)(n,e);let{base64Encoder:s,bodyLengthChecker:o,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:c}=e,u=s!==void 0&&i!==void 0&&a!==void 0&&c!==void 0,d=u?c(i,r):void 0,l=new Zee.Readable({read:()=>{}});return r.on("data",g=>{let y=o(g)||0;y!==0&&(l.push(`${y.toString(16)}\r
`),l.push(g),l.push(`\r
`))}),r.on("end",async()=>{if(l.push(`0\r
`),u){let g=s(await d);l.push(`${a}:${g}\r
`),l.push(`\r
`)}l.push(null)}),l}});var QP=b(Bb=>{"use strict";Object.defineProperty(Bb,"__esModule",{value:!0});Bb.headStream=nte;async function nte(t,e){let r=0,n=[],s=t.getReader(),o=!1;for(;!o;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;o=c}s.releaseLock();let i=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var YP=b(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.headStream=void 0;var ste=require("stream"),ote=QP(),ite=kn(),ate=(t,e)=>(0,ite.isReadableStream)(t)?(0,ote.headStream)(t,e):new Promise((r,n)=>{let s=new Ub;s.limit=e,t.pipe(s),t.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Pd.headStream=ate;var Ub=class extends ste.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var qb=b(Fb=>{"use strict";var XP=t=>encodeURIComponent(t).replace(/[!'()*]/g,cte),cte=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,ute=t=>t.split("/").map(XP).join("/");Fb.escapeUri=XP;Fb.escapeUriPath=ute});var jb=b(JP=>{"use strict";var Gb=qb();function lte(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Gb.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${Gb.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Gb.escapeUri(n)}`),e.push(s)}}return e.join("&")}JP.buildQueryString=lte});var Ln=b(Ic=>{"use strict";var r1=be(),n1=jb(),Dd=require("http"),Od=require("https"),s1=require("stream"),Hb=require("http2"),dte=["ECONNRESET","EPIPE","ETIMEDOUT"],o1=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},Mt={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},ZP=1e3,pte=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let o=Mt.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{Mt.clearTimeout(o)}):Mt.clearTimeout(o)};t.socket?i(t.socket):t.on("socket",i)};return r<2e3?(n(0),0):Mt.setTimeout(n.bind(null,ZP),ZP)},fte=(t,e,r=0,n,s)=>r?Mt.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(i),e(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,hte=3e3,mte=(t,{keepAlive:e,keepAliveMsecs:r},n=hte)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",o=>{o.setKeepAlive(e,r||0)})};return n===0?(s(),0):Mt.setTimeout(s,n)},e1=3e3,gte=(t,e,r=0)=>{let n=s=>{let o=r-s,i=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(o,i),t.on("close",()=>t.socket?.removeListener("timeout",i))):t.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):Mt.setTimeout(n.bind(null,r===0?0:e1),e1)},t1=6e3;async function i1(t,e,r=t1,n=!1){let s=e.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(Mt.setTimeout(()=>c(!0),Math.max(t1,r)))}),new Promise(c=>{t.on("continue",()=>{Mt.clearTimeout(i),c(!0)}),t.on("response",()=>{Mt.clearTimeout(i),c(!1)}),t.on("error",()=>{Mt.clearTimeout(i),c(!1)})})])),a&&yte(t,e.body)}function yte(t,e){if(e instanceof s1.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var Ste=0,Vb=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:o,maxSockets:i}=e;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let c in s){let u=s[c]?.length??0,d=o[c]?.length??0;if(u>=i&&d>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${d} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,d=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof Dd.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Dd.Agent({keepAlive:u,maxSockets:d,...i}),httpsAgent:a instanceof Od.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Od.Agent({keepAlive:u,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,c=[],u=async te=>{await a,c.forEach(Mt.clearTimeout),s(te)},d=async te=>{await a,c.forEach(Mt.clearTimeout),o(te)};if(r?.aborted){let te=new Error("Request aborted");te.name="AbortError",d(te);return}let l=e.protocol==="https:",g=e.headers??{},y=(g.Expect??g.expect)==="100-continue",S=l?i.httpsAgent:i.httpAgent;y&&!this.externalAgent&&(S=new(l?Od.Agent:Dd.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(Mt.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(S,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let w=n1.buildQueryString(e.query||{}),A;if(e.username!=null||e.password!=null){let te=e.username??"",ue=e.password??"";A=`${te}:${ue}`}let I=e.path;w&&(I+=`?${w}`),e.fragment&&(I+=`#${e.fragment}`);let k=e.hostname??"";k[0]==="["&&k.endsWith("]")?k=e.hostname.slice(1,-1):k=e.hostname;let L={headers:e.headers,host:k,method:e.method,path:I,port:e.port,agent:S,auth:A},X=(l?Od.request:Dd.request)(L,te=>{let ue=new r1.HttpResponse({statusCode:te.statusCode||-1,reason:te.statusMessage,headers:o1(te.headers),body:te});u({response:ue})});if(X.on("error",te=>{dte.includes(te.code)?d(Object.assign(te,{name:"TimeoutError"})):d(te)}),r){let te=()=>{X.destroy();let ue=new Error("Request aborted");ue.name="AbortError",d(ue)};if(typeof r.addEventListener=="function"){let ue=r;ue.addEventListener("abort",te,{once:!0}),X.once("close",()=>ue.removeEventListener("abort",te))}else r.onabort=te}let oe=n??i.requestTimeout;c.push(pte(X,d,i.connectionTimeout)),c.push(fte(X,d,oe,i.throwOnRequestTimeout,i.logger??console)),c.push(gte(X,d,i.socketTimeout));let Be=L.agent;typeof Be=="object"&&"keepAlive"in Be&&c.push(mte(X,{keepAlive:Be.keepAlive,keepAliveMsecs:Be.keepAliveMsecs})),a=i1(X,e,oe,this.externalAgent).catch(te=>(c.forEach(Mt.clearTimeout),o(te)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},zb=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},Wb=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let o=Hb.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new zb;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},Kb=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new Wb({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,c)=>{let u=!1,d,l=async Ae=>{await d,a(Ae)},g=async Ae=>{await d,c(Ae)};if(r?.aborted){u=!0;let Ae=new Error("Request aborted");Ae.name="AbortError",g(Ae);return}let{hostname:y,method:S,port:w,protocol:A,query:I}=e,k="";if(e.username!=null||e.password!=null){let Ae=e.username??"",lt=e.password??"";k=`${Ae}:${lt}@`}let L=`${A}//${k}${y}${w?`:${w}`:""}`,B={destination:new URL(L)},X=this.connectionManager.lease(B,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),oe=Ae=>{o&&this.destroySession(X),u=!0,g(Ae)},Be=n1.buildQueryString(I||{}),te=e.path;Be&&(te+=`?${Be}`),e.fragment&&(te+=`#${e.fragment}`);let ue=X.request({...e.headers,[Hb.constants.HTTP2_HEADER_PATH]:te,[Hb.constants.HTTP2_HEADER_METHOD]:S});if(X.ref(),ue.on("response",Ae=>{let lt=new r1.HttpResponse({statusCode:Ae[":status"]||-1,headers:o1(Ae),body:ue});u=!0,l({response:lt}),o&&(X.close(),this.connectionManager.deleteSession(L,X))}),i&&ue.setTimeout(i,()=>{ue.close();let Ae=new Error(`Stream timed out because of no activity for ${i} ms`);Ae.name="TimeoutError",oe(Ae)}),r){let Ae=()=>{ue.close();let lt=new Error("Request aborted");lt.name="AbortError",oe(lt)};if(typeof r.addEventListener=="function"){let lt=r;lt.addEventListener("abort",Ae,{once:!0}),ue.once("close",()=>lt.removeEventListener("abort",Ae))}else r.onabort=Ae}ue.on("frameError",(Ae,lt,Ht)=>{oe(new Error(`Frame type id ${Ae} in stream id ${Ht} has failed with code ${lt}.`))}),ue.on("error",oe),ue.on("aborted",()=>{oe(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ue.rstCode}.`))}),ue.on("close",()=>{X.unref(),o&&X.destroy(),u||oe(new Error("Unexpected error: http2 request did not get a response"))}),d=i1(ue,e,i)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Qb=class extends s1.Writable{bufferedBytes=[];_write(e,r,n){this.bufferedBytes.push(e),n()}},Ete=t=>bte(t)?_te(t):new Promise((e,r)=>{let n=new Qb;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),bte=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function _te(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}Ic.DEFAULT_REQUEST_TIMEOUT=Ste;Ic.NodeHttp2Handler=Kb;Ic.NodeHttpHandler=Vb;Ic.streamCollector=Ete});var u1=b(Nd=>{"use strict";var a1=be(),Tte=jb(),wte=Xe();function c1(t,e){return new Request(t,e)}function Cte(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var kd={supported:void 0},Yb=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),kd.supported===void 0&&(kd.supported=typeof Request<"u"&&"keepalive"in c1("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let k=new Error("Request aborted");return k.name="AbortError",Promise.reject(k)}let a=e.path,c=Tte.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let k=e.username??"",L=e.password??"";u=`${k}:${L}@`}let{port:d,method:l}=e,g=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${a}`,y=l==="GET"||l==="HEAD"?void 0:e.body,S={body:y,headers:new Headers(e.headers),method:l,credentials:i};this.config?.cache&&(S.cache=this.config.cache),y&&(S.duplex="half"),typeof AbortController<"u"&&(S.signal=r),kd.supported&&(S.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(S,this.config.requestInit(e));let w=()=>{},A=c1(g,S),I=[fetch(A).then(k=>{let L=k.headers,B={};for(let oe of L.entries())B[oe[0]]=oe[1];return k.body!=null?{response:new a1.HttpResponse({headers:B,reason:k.statusText,statusCode:k.status,body:k.body})}:k.blob().then(oe=>({response:new a1.HttpResponse({headers:B,reason:k.statusText,statusCode:k.status,body:oe})}))}),Cte(s)];return r&&I.push(new Promise((k,L)=>{let B=()=>{let X=new Error("Request aborted");X.name="AbortError",L(X)};if(typeof r.addEventListener=="function"){let X=r;X.addEventListener("abort",B,{once:!0}),w=()=>X.removeEventListener("abort",B)}else r.onabort=B})),Promise.race(I).finally(w)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},vte=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Rte(t):Ite(t);async function Rte(t){let e=await Ate(t),r=wte.fromBase64(e);return new Uint8Array(r)}async function Ite(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}function Ate(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;e(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}Nd.FetchHttpHandler=Yb;Nd.keepAliveSupport=kd;Nd.streamCollector=vte});var Zb=b(Jb=>{"use strict";var l1={},Xb={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),l1[t]=e,Xb[e]=t}function xte(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Xb)e[r/2]=Xb[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Pte(t){let e="";for(let r=0;r<t.byteLength;r++)e+=l1[t[r]];return e}Jb.fromHex=xte;Jb.toHex=Pte});var h1=b(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.sdkStreamMixin=void 0;var Dte=u1(),Ote=Xe(),kte=Zb(),Nte=rt(),d1=kn(),p1="The stream has already been transformed.",Mte=t=>{if(!f1(t)&&!(0,d1.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(p1);return e=!0,await(0,Dte.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,Ote.toBase64)(o);if(s==="hex")return(0,kte.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,Nte.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(p1);if(e=!0,f1(t))return n(t);if((0,d1.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};Md.sdkStreamMixin=Mte;var f1=t=>typeof Blob=="function"&&t instanceof Blob});var g1=b(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.sdkStreamMixin=void 0;var Lte=Ln(),$te=Ki(),e0=require("stream"),Bte=h1(),m1="The stream has already been transformed.",Ute=t=>{if(!(t instanceof e0.Readable))try{return(0,Bte.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(m1);return e=!0,await(0,Lte.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,$te.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(m1);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof e0.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,e0.Readable.toWeb(t)}})};Ld.sdkStreamMixin=Ute});var y1=b(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});t0.splitStream=Fte;async function Fte(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var b1=b(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});r0.splitStream=Gte;var S1=require("stream"),qte=y1(),E1=kn();async function Gte(t){if((0,E1.isReadableStream)(t)||(0,E1.isBlob)(t))return(0,qte.splitStream)(t);let e=new S1.PassThrough,r=new S1.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var $d=b(ct=>{"use strict";var _1=Xe(),T1=rt(),w1=Db(),C1=FP(),v1=zP(),R1=KP(),I1=YP(),A1=g1(),x1=b1(),P1=kn(),n0=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(_1.fromBase64(e)):t.mutate(T1.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?_1.toBase64(this):T1.toUtf8(this)}};Object.defineProperty(ct,"isBlob",{enumerable:!0,get:function(){return P1.isBlob}});Object.defineProperty(ct,"isReadableStream",{enumerable:!0,get:function(){return P1.isReadableStream}});ct.Uint8ArrayBlobAdapter=n0;Object.keys(w1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return w1[t]}})});Object.keys(C1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return C1[t]}})});Object.keys(v1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return v1[t]}})});Object.keys(R1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return R1[t]}})});Object.keys(I1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return I1[t]}})});Object.keys(A1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return A1[t]}})});Object.keys(x1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ct,t)&&Object.defineProperty(ct,t,{enumerable:!0,get:function(){return x1[t]}})})});var Bd,Sr,Ud=T(()=>{Bd=v($d()),Sr=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Bd.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Bd.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Bd.Uint8ArrayBlobAdapter.mutate(await r)}});function rn(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Fd=T(()=>{});var Mr,s0=T(()=>{Mr=t=>typeof t=="function"?t():t});var Ac,qd=T(()=>{Ac=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var D1,O1,k1,o0,N1=T(()=>{D1=v(be()),O1=v(pt());qd();k1=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:o}=(0,O1.getSmithyContext)(r),[,i,a,c,u,d]=o??[];try{let l=await t.protocol.deserializeResponse(Ac(i,a,c,u,d),{...t,...r},s);return{response:s,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){let g="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+g}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(g):r.logger?.warn?.(g)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(D1.HttpResponse.isInstance(s)){let{headers:y={}}=s,S=Object.entries(y);l.$metadata={httpStatusCode:s.statusCode,requestId:o0(/^x-[\w-]+-request-?id$/,S),extendedRequestId:o0(/^x-[\w-]+-id-2$/,S),cfId:o0(/^x-[\w-]+-cf-id$/,S)}}}catch{}}throw l}},o0=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var M1,L1,$1=T(()=>{M1=v(pt());qd();L1=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,M1.getSmithyContext)(r),[,o,i,a,c,u]=s??[],d=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(Ac(o,i,a,c,u),n.input,{...t,...r,endpoint:d});return e({...n,request:l})}});function Uo(t){return{applyToStack:e=>{e.add(L1(t),U1),e.add(k1(t),B1),t.protocol.setSerdeContext(t)}}}var B1,U1,F1=T(()=>{N1();$1();B1={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},U1={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var We,Os=T(()=>{We=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Gd,jte,q1=T(()=>{Os();Gd=class t extends We{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},jte=(t,e,r,n)=>We.assign(new Gd,{name:e,namespace:t,traits:r,valueSchema:n})});var jd,Hte,G1=T(()=>{Os();jd=class t extends We{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},Hte=(t,e,r,n,s)=>We.assign(new jd,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Hd,Vte,j1=T(()=>{Os();Hd=class t extends We{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},Vte=(t,e,r,n,s)=>We.assign(new Hd,{name:e,namespace:t,traits:r,input:n,output:s})});var Xi,zte,i0=T(()=>{Os();Xi=class t extends We{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},zte=(t,e,r,n,s)=>We.assign(new Xi,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var Vd,Wte,H1=T(()=>{Os();i0();Vd=class t extends Xi{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},Wte=(t,e,r,n,s,o)=>We.assign(new Vd,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function nn(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var a0=T(()=>{});function xc(t,e){if(t instanceof U)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=U;return new r(t,e)}var V1,U,c0,z1,W1=T(()=>{s0();a0();V1={it:Symbol.for("@smithy/nor-struct-it")},U=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let n=[],s=e,o=e;for(this._isMemberSchema=!1;c0(s);)n.push(s[1]),s=s[0],o=Mr(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,nn(a))}}else this.memberTraits=0;if(o instanceof t){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Mr(o),z1(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Mr(e);if(r instanceof t)return r;if(c0(r)){let[n,s]=r;if(n instanceof t)return Object.assign(n.getMergedTraits(),nn(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return nn(this.memberTraits)}getOwnTraits(){return nn(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return xc([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(o!=null)return xc([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return xc(c0(s)?s:[s,0],e)}if(this.isDocumentSchema())return xc([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema(),r=e[4].length,n=e[V1.it];if(n&&r===n.length){yield*n;return}n=Array(r);for(let s=0;s<r;++s){let o=e[4][s],i=xc([e[5][s],0],o);yield n[s]=[o,i]}e[V1.it]=n}};c0=t=>Array.isArray(t)&&t.length===2,z1=t=>Array.isArray(t)&&t.length>=5});var Pc,Kte,Qte,K1=T(()=>{Os();Pc=class t extends We{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},Kte=(t,e,r,n)=>We.assign(new Pc,{name:e,namespace:t,traits:n,schemaRef:r}),Qte=(t,e,r,n)=>We.assign(new Pc,{name:e,namespace:t,traits:r,schemaRef:n})});var Yte,Q1=T(()=>{Yte={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var W,Y1=T(()=>{W=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);t.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=t.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var Ji={};yt(Ji,{ErrorSchema:()=>Vd,ListSchema:()=>Gd,MapSchema:()=>jd,NormalizedSchema:()=>U,OperationSchema:()=>Hd,SCHEMA:()=>Yte,Schema:()=>We,SimpleSchema:()=>Pc,StructureSchema:()=>Xi,TypeRegistry:()=>W,deref:()=>Mr,deserializerMiddlewareOption:()=>B1,error:()=>Wte,getSchemaSerdePlugin:()=>Uo,isStaticSchema:()=>z1,list:()=>jte,map:()=>Hte,op:()=>Vte,operation:()=>Ac,serializerMiddlewareOption:()=>U1,sim:()=>Kte,simAdapter:()=>Qte,struct:()=>zte,translateTraits:()=>nn});var ye=T(()=>{s0();F1();q1();G1();j1();qd();H1();W1();Os();K1();i0();Q1();a0();Y1()});var Xte,X1=T(()=>{Xte=(t,e,r=n=>n)=>t});var Jte,Zte,Dc,ere,zd,Oc,tre,u0,l0,d0,p0,rre,nre,J1,sre,ore,Kd,ire,f0,are,Zi,h0,cre,ure,lre,Z1,eD,dre,pre,Fo,m0,Wd,kc,g0=T(()=>{Jte=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},Zte=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&kc.warn(Wd(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&kc.warn(Wd(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},Dc=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&kc.warn(Wd(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},ere=Math.ceil(34028234663852886e22),zd=t=>{let e=Dc(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>ere)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Oc=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},tre=Oc,u0=t=>p0(t,32),l0=t=>p0(t,16),d0=t=>p0(t,8),p0=(t,e)=>{let r=Oc(t);if(r!==void 0&&rre(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},rre=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},nre=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},J1=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},sre=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return kc.warn(Wd(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},ore=t=>{if(t==null)return;let e=J1(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Kd=t=>Dc(typeof t=="string"?Zi(t):t),ire=Kd,f0=t=>zd(typeof t=="string"?Zi(t):t),are=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zi=t=>{let e=t.match(are);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},h0=t=>typeof t=="string"?Z1(t):Dc(t),cre=h0,ure=h0,lre=t=>typeof t=="string"?Z1(t):zd(t),Z1=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},eD=t=>Oc(typeof t=="string"?Zi(t):t),dre=eD,pre=t=>u0(typeof t=="string"?Zi(t):t),Fo=t=>l0(typeof t=="string"?Zi(t):t),m0=t=>d0(typeof t=="string"?Zi(t):t),Wd=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),kc={warn:console.warn}});function Mc(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,d=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`;return`${fre[n]}, ${c} ${S0[r]} ${e} ${u}:${d}:${l} GMT`}var fre,S0,hre,mre,gre,E0,yre,Sre,Ere,b0,_0,Nc,bre,_re,Tre,y0,wre,Cre,vre,sn,Rre,Ire,ea,tD=T(()=>{g0();fre=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];hre=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),mre=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=hre.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u]=e,d=Fo(ea(n)),l=sn(s,"month",1,12),g=sn(o,"day",1,31);return Nc(d,l,g,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},gre=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),E0=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=gre.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u,d]=e,l=Fo(ea(n)),g=sn(s,"month",1,12),y=sn(o,"day",1,31),S=Nc(l,g,y,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return d.toUpperCase()!="Z"&&S.setTime(S.getTime()-Ire(d)),S},yre=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Sre=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ere=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),b0=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=yre.exec(t);if(e){let[r,n,s,o,i,a,c,u]=e;return Nc(Fo(ea(o)),y0(s),sn(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=Sre.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return Tre(Nc(bre(o),y0(s),sn(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=Ere.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return Nc(Fo(ea(u)),y0(n),sn(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},_0=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Kd(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Nc=(t,e,r,n)=>{let s=e-1;return Cre(t,s,r),new Date(Date.UTC(t,s,r,sn(n.hours,"hour",0,23),sn(n.minutes,"minute",0,59),sn(n.seconds,"seconds",0,60),Rre(n.fractionalMilliseconds)))},bre=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Fo(ea(t));return r<e?r+100:r},_re=50*365*24*60*60*1e3,Tre=t=>t.getTime()-new Date().getTime()>_re?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,y0=t=>{let e=S0.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},wre=[31,28,31,30,31,30,31,31,30,31,30,31],Cre=(t,e,r)=>{let n=wre[e];if(e===1&&vre(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${S0[e]} in ${t}: ${r}`)},vre=t=>t%4===0&&(t%100!==0||t%400===0),sn=(t,e,r,n)=>{let s=m0(ea(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},Rre=t=>t==null?0:f0("0."+t)*1e3,Ire=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},ea=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var ra={};yt(ra,{__addDisposableResource:()=>RD,__assign:()=>Qd,__asyncDelegator:()=>SD,__asyncGenerator:()=>yD,__asyncValues:()=>ED,__await:()=>ta,__awaiter:()=>dD,__classPrivateFieldGet:()=>wD,__classPrivateFieldIn:()=>vD,__classPrivateFieldSet:()=>CD,__createBinding:()=>Xd,__decorate:()=>sD,__disposeResources:()=>ID,__esDecorate:()=>iD,__exportStar:()=>fD,__extends:()=>rD,__generator:()=>pD,__importDefault:()=>TD,__importStar:()=>_D,__makeTemplateObject:()=>bD,__metadata:()=>lD,__param:()=>oD,__propKey:()=>cD,__read:()=>C0,__rest:()=>nD,__rewriteRelativeImportExtension:()=>AD,__runInitializers:()=>aD,__setFunctionName:()=>uD,__spread:()=>hD,__spreadArray:()=>gD,__spreadArrays:()=>mD,__values:()=>Yd,default:()=>Pre});function rD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");T0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function nD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function sD(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function oD(t,e){return function(r,n){e(r,n,t)}}function iD(t,e,r,n,s,o){function i(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),l,g=!1,y=r.length-1;y>=0;y--){var S={};for(var w in n)S[w]=w==="access"?{}:n[w];for(var w in n.access)S.access[w]=n.access[w];S.addInitializer=function(I){if(g)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(I||null))};var A=(0,r[y])(a==="accessor"?{get:d.get,set:d.set}:d[c],S);if(a==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(l=i(A.get))&&(d.get=l),(l=i(A.set))&&(d.set=l),(l=i(A.init))&&s.unshift(l)}else(l=i(A))&&(a==="field"?s.unshift(l):d[c]=l)}u&&Object.defineProperty(u,n.name,d),g=!0}function aD(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function cD(t){return typeof t=="symbol"?t:"".concat(t)}function uD(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function lD(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function dD(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(d){try{u(n.next(d))}catch(l){i(l)}}function c(d){try{u(n.throw(d))}catch(l){i(l)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function pD(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fD(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xd(e,t,r)}function Yd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function C0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function hD(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C0(arguments[e]));return t}function mD(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function gD(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function ta(t){return this instanceof ta?(this.v=t,this):new ta(t)}function yD(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(y){return function(S){return Promise.resolve(S).then(y,l)}}function a(y,S){n[y]&&(s[y]=function(w){return new Promise(function(A,I){o.push([y,w,A,I])>1||c(y,w)})},S&&(s[y]=S(s[y])))}function c(y,S){try{u(n[y](S))}catch(w){g(o[0][3],w)}}function u(y){y.value instanceof ta?Promise.resolve(y.value.v).then(d,l):g(o[0][2],y)}function d(y){c("next",y)}function l(y){c("throw",y)}function g(y,S){y(S),o.shift(),o.length&&c(o[0][0],o[0][1])}}function SD(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:ta(t[s](i)),done:!1}:o?o(i):i}:o}}function ED(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Yd=="function"?Yd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,c){i=t[o](i),s(a,c,i.done,i.value)})}}function s(o,i,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},i)}}function bD(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _D(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=w0(t),n=0;n<r.length;n++)r[n]!=="default"&&Xd(e,t,r[n]);return Are(e,t),e}function TD(t){return t&&t.__esModule?t:{default:t}}function wD(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function CD(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function vD(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function RD(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function ID(t){function e(o){t.error=t.hasError?new xre(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function AD(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}var T0,Qd,Xd,Are,w0,xre,Pre,na=T(()=>{T0=function(t,e){return T0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},T0(t,e)};Qd=function(){return Qd=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qd.apply(this,arguments)};Xd=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});Are=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},w0=function(t){return w0=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},w0(t)};xre=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Pre={__extends:rD,__assign:Qd,__rest:nD,__decorate:sD,__param:oD,__esDecorate:iD,__runInitializers:aD,__propKey:cD,__setFunctionName:uD,__metadata:lD,__awaiter:dD,__generator:pD,__createBinding:Xd,__exportStar:fD,__values:Yd,__read:C0,__spread:hD,__spreadArrays:mD,__spreadArray:gD,__await:ta,__asyncGenerator:yD,__asyncDelegator:SD,__asyncValues:ED,__makeTemplateObject:bD,__importStar:_D,__importDefault:TD,__classPrivateFieldGet:wD,__classPrivateFieldSet:CD,__classPrivateFieldIn:vD,__addDisposableResource:RD,__disposeResources:ID,__rewriteRelativeImportExtension:AD}});var PD=b(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.randomUUID=void 0;var Dre=(na(),K(ra)),xD=Dre.__importDefault(require("crypto"));Jd.randomUUID=xD.default.randomUUID.bind(xD.default)});var v0=b(OD=>{"use strict";var DD=PD(),bt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),Ore=()=>{if(DD.randomUUID)return DD.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,bt[t[0]]+bt[t[1]]+bt[t[2]]+bt[t[3]]+"-"+bt[t[4]]+bt[t[5]]+"-"+bt[t[6]]+bt[t[7]]+"-"+bt[t[8]]+bt[t[9]]+"-"+bt[t[10]]+bt[t[11]]+bt[t[12]]+bt[t[13]]+bt[t[14]]+bt[t[15]]};OD.v4=Ore});var Er,kD=T(()=>{Er=v(v0())});var Lt,ND=T(()=>{Lt=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Lt.from=t=>t&&typeof t=="object"&&(t instanceof Lt||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Lt(String(t)):Lt(JSON.stringify(t));Lt.fromObject=Lt.from});function R0(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var MD=T(()=>{});function $n(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var I0,A0,x0,LD,$D,kre,Nre,Mre,Lre,$re,sa,P0,D0,BD=T(()=>{I0="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",A0="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",x0="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",LD="(\\d?\\d)",$D="(\\d{4})",kre=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Nre=new RegExp(`^${I0}, ${LD} ${A0} ${$D} ${x0} GMT$`),Mre=new RegExp(`^${I0}, ${LD}-${A0}-(\\d\\d) ${x0} GMT$`),Lre=new RegExp(`^${I0} ${A0} ( [1-9]|\\d\\d) ${x0} ${$D}$`),$re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sa=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},P0=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=kre.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,o,i,a,,c,u]=e;$n(n,1,12),$n(s,1,31),$n(o,0,23),$n(i,0,59),$n(a,0,60);let d=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(d.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,l,g,y]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],S=l==="-"?1:-1;d.setTime(d.getTime()+S*(Number(g)*60*60*1e3+Number(y)*60*1e3))}return d},D0=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,o,i,a,c;if((c=Nre.exec(t))?[,e,r,n,s,o,i,a]=c:(c=Mre.exec(t))?([,e,r,n,s,o,i,a]=c,n=(Number(n)+1900).toString()):(c=Lre.exec(t))&&([,r,e,s,o,i,a,n]=c),n&&i){let u=Date.UTC(Number(n),$re.indexOf(r),Number(e),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);$n(e,1,31),$n(s,0,23),$n(o,0,59),$n(i,0,60);let d=new Date(u);return d.setUTCFullYear(Number(n)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function O0(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=e+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var UD=T(()=>{});var Lc,FD=T(()=>{Lc=t=>{let e=t.length,r=[],n=!1,s,o=0;for(let i=0;i<e;++i){let a=t[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(o,i)),o=i+1);break;default:}s=a}return r.push(t.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function k0(t){return new ke(String(t),"bigDecimal")}var qD,ke,GD=T(()=>{qD=/^-?\d*(\.\d+)?$/,ke=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!qD.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&qD.test(r.string)}}});var jD={};yt(jD,{LazyJsonString:()=>Lt,NumericValue:()=>ke,_parseEpochTimestamp:()=>sa,_parseRfc3339DateTimeWithOffset:()=>P0,_parseRfc7231DateTime:()=>D0,copyDocumentWithTransform:()=>Xte,dateToUtcString:()=>Mc,expectBoolean:()=>Zte,expectByte:()=>d0,expectFloat32:()=>zd,expectInt:()=>tre,expectInt32:()=>u0,expectLong:()=>Oc,expectNonNull:()=>nre,expectNumber:()=>Dc,expectObject:()=>J1,expectShort:()=>l0,expectString:()=>sre,expectUnion:()=>ore,generateIdempotencyToken:()=>Er.v4,handleFloat:()=>cre,limitedParseDouble:()=>h0,limitedParseFloat:()=>ure,limitedParseFloat32:()=>lre,logger:()=>kc,nv:()=>k0,parseBoolean:()=>Jte,parseEpochTimestamp:()=>_0,parseRfc3339DateTime:()=>mre,parseRfc3339DateTimeWithOffset:()=>E0,parseRfc7231DateTime:()=>b0,quoteHeader:()=>R0,splitEvery:()=>O0,splitHeader:()=>Lc,strictParseByte:()=>m0,strictParseDouble:()=>Kd,strictParseFloat:()=>ire,strictParseFloat32:()=>f0,strictParseInt:()=>dre,strictParseInt32:()=>pre,strictParseLong:()=>eD,strictParseShort:()=>Fo});var $t=T(()=>{X1();tD();kD();ND();g0();MD();BD();UD();FD();GD()});var Bt,oa=T(()=>{Bt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var Zd,N0,HD=T(()=>{Zd=v(rt()),N0=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),d={async*[Symbol.asyncIterator](){if(n){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let g=a.flush();yield{[u]:!0,headers:l,body:g}}for await(let l of e)yield l}};return s.serialize(d,l=>{if(l[u])return{headers:l.headers,body:l.body};let g=Object.keys(l).find(k=>k!=="__type")??"",{additionalHeaders:y,body:S,eventType:w,explicitPayloadContentType:A}=this.writeEventBody(g,i,l);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:A??c},...y},body:S}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async g=>{let y=Object.keys(g).find(w=>w!=="__type")??"",S=g[y].body;if(y==="initial-response"){let w=await this.deserializer.read(r,S);return delete w[o],{[c]:!0,...w}}else if(y in a){let w=a[y];if(w.isStructSchema()){let A={},I=!1;for(let[k,L]of w.structIterator()){let{eventHeader:B,eventPayload:X}=L.getMergedTraits();if(I=I||!!(B||X),X)L.isBlobSchema()?A[k]=S:L.isStringSchema()?A[k]=(this.serdeContext?.utf8Encoder??Zd.toUtf8)(S):L.isStructSchema()&&(A[k]=await this.deserializer.read(L,S));else if(B){let oe=g[y].headers[k]?.value;oe!=null&&(L.isNumericSchema()?oe&&typeof oe=="object"&&"bytes"in oe?A[k]=BigInt(oe.toString()):A[k]=Number(oe):A[k]=oe)}}if(I)return{[y]:A};if(S.byteLength===0)return{[y]:{}}}return{[y]:await this.deserializer.read(w,S)}}else return{$unknown:g}}),d=u[Symbol.asyncIterator](),l=await d.next();if(l.done)return u;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[g,y]of Object.entries(l.value))n[g]=y}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){let{done:g,value:y}=await d.next();if(g)break;yield y}}}}writeEventBody(e,r,n){let s=this.serializer,o=e,i=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let g=r.getMemberSchema(e);if(g.isStructSchema()){for(let[y,S]of g.structIterator()){let{eventHeader:w,eventPayload:A}=S.getMergedTraits();if(A)i=y;else if(w){let I=n[e][y],k="binary";S.isNumericSchema()?(-2)**31<=I&&I<=2**31-1?k="integer":k="long":S.isTimestampSchema()?k="timestamp":S.isStringSchema()?k="string":S.isBooleanSchema()&&(k="boolean"),I!=null&&(u[y]={type:k,value:I},delete n[e][y])}}if(i!==null){let y=g.getMemberSchema(i);y.isBlobSchema()?a="application/octet-stream":y.isStringSchema()&&(a="text/plain"),s.write(y,n[e][i])}else s.write(g,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[g,y]=n[e];o=g,s.write(15,y)}let d=s.flush();return{body:typeof d=="string"?(this.serdeContext?.utf8Decoder??Zd.fromUtf8)(d):d,eventType:o,explicitPayloadContentType:a,additionalHeaders:u}}}});var VD={};yt(VD,{EventStreamSerde:()=>N0});var zD=T(()=>{HD()});var ep,qo,tp=T(()=>{ye();ep=v(be());oa();qo=class extends Bt{options;constructor(e){super(),this.options=e}getRequestType(){return ep.HttpRequest}getResponseType(){return ep.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){if(this.serdeContext?.disableHostPrefix)return;let s=U.of(r.input),o=nn(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,u)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(zD(),VD));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,o){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var WD,KD,Go,QD=T(()=>{ye();$t();WD=v(be()),KD=v($d());Ud();Fd();tp();Go=class extends qo{async serializeRequest(e,r,n){let s={...r??{}},o=this.serializer,i={},a={},c=await n.endpoint(),u=U.of(e?.input),d=u.getSchema(),l=!1,g,y=new WD.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(y,c),this.setHostPrefix(y,e,s);let S=nn(e.traits);if(S.http){y.method=S.http[0];let[w,A]=S.http[1].split("?");y.path=="/"?y.path=w:y.path+=w;let I=new URLSearchParams(A??"");Object.assign(i,Object.fromEntries(I))}}for(let[S,w]of u.structIterator()){let A=w.getMergedTraits()??{},I=s[S];if(I==null&&!w.isIdempotencyToken()){if(A.httpLabel&&(y.path.includes(`{${S}+}`)||y.path.includes(`{${S}}`)))throw new Error(`No value provided for input HTTP label: ${S}.`);continue}if(A.httpPayload)w.isStreaming()?w.isStructSchema()?s[S]&&(g=await this.serializeEventStream({eventStream:s[S],requestSchema:u})):g=I:(o.write(w,I),g=o.flush()),delete s[S];else if(A.httpLabel){o.write(w,I);let k=o.flush();y.path.includes(`{${S}+}`)?y.path=y.path.replace(`{${S}+}`,k.split("/").map(rn).join("/")):y.path.includes(`{${S}}`)&&(y.path=y.path.replace(`{${S}}`,rn(k))),delete s[S]}else if(A.httpHeader)o.write(w,I),a[A.httpHeader.toLowerCase()]=String(o.flush()),delete s[S];else if(typeof A.httpPrefixHeaders=="string"){for(let[k,L]of Object.entries(I)){let B=A.httpPrefixHeaders+k;o.write([w.getValueSchema(),{httpHeader:B}],L),a[B.toLowerCase()]=o.flush()}delete s[S]}else A.httpQuery||A.httpQueryParams?(this.serializeQuery(w,I,i),delete s[S]):l=!0}return l&&s&&(o.write(d,s),g=o.flush()),y.headers=a,y.query=i,y.body=g,y}serializeQuery(e,r,n){let s=this.serializer,o=e.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let i=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),o],c);let u=s.flush();(i||u!==void 0)&&a.push(u)}n[o.httpQuery]=a}else s.write([e,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,o=U.of(e.output),i={};if(n.statusCode>=300){let c=await Sr(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let c=await Sr(n.body,r);if(c.byteLength>0){let u=await s.read(o,c);for(let d of a)i[d]=u[d]}}else a.discardResponseBody&&await Sr(n.body,r);return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(e,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=!0,c=this.deserializer,u=U.of(e),d=[];for(let[l,g]of u.structIterator()){let y=g.getMemberTraits();if(y.httpPayload){if(a=!1,g.isStreaming())g.isStructSchema()?i[l]=await this.deserializeEventStream({response:n,responseSchema:u}):i[l]=(0,KD.sdkStreamMixin)(n.body);else if(n.body){let w=await Sr(n.body,r);w.byteLength>0&&(i[l]=await c.read(g,w))}}else if(y.httpHeader){let S=String(y.httpHeader).toLowerCase(),w=n.headers[S];if(w!=null)if(g.isListSchema()){let A=g.getValueSchema();A.getMergedTraits().httpHeader=S;let I;A.isTimestampSchema()&&A.getSchema()===4?I=O0(w,",",2):I=Lc(w);let k=[];for(let L of I)k.push(await c.read(A,L.trim()));i[l]=k}else i[l]=await c.read(g,w)}else if(y.httpPrefixHeaders!==void 0){i[l]={};for(let[S,w]of Object.entries(n.headers))if(S.startsWith(y.httpPrefixHeaders)){let A=g.getValueSchema();A.getMergedTraits().httpHeader=S,i[l][S.slice(y.httpPrefixHeaders.length)]=await c.read(A,w)}}else y.httpResponseCode?i[l]=n.statusCode:d.push(l)}return d.discardResponseBody=a,d}}});var YD,Bn,XD=T(()=>{ye();YD=v(be());Ud();tp();Bn=class extends qo{async serializeRequest(e,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),c=U.of(e?.input),u=c.getSchema(),d,l=new YD.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,e,r));let g={...r};if(r){let y=c.getEventStreamMember();if(y){if(g[y]){let S={};for(let[w,A]of c.structIterator())w!==y&&g[w]&&(s.write(A,g[w]),S[w]=s.flush());d=await this.serializeEventStream({eventStream:g[y],requestSchema:c,initialRequest:S})}}else s.write(u,g),d=s.flush()}return l.headers=i,l.query=o,l.body=d,l.method="POST",l}async deserializeResponse(e,r,n){let s=this.deserializer,o=U.of(e.output),i={};if(n.statusCode>=300){let c=await Sr(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let c=await Sr(n.body,r);c.byteLength>0&&Object.assign(i,await s.read(o,c))}return i.$metadata=this.deserializeMetadata(n),i}}});var M0,L0=T(()=>{Fd();M0=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>rn(a)).join("/"):rn(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function $0(t,e){return new rp(t,e)}var JD,rp,ZD=T(()=>{JD=v(be());L0();rp=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new JD.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(o=>{this.path=M0(o,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function or(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??e.timestampFormat.default}var np=T(()=>{});var B0,eO,jo,U0=T(()=>{ye();$t();B0=v(Xe()),eO=v(rt());oa();np();jo=class extends Bt{settings;constructor(e){super(),this.settings=e}read(e,r){let n=U.of(e);if(n.isListSchema())return Lc(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??B0.fromBase64)(r);if(n.isTimestampSchema())switch(or(n,this.settings)){case 5:return P0(r);case 6:return D0(r);case 7:return sa(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=Lt.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new ke(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??eO.toUtf8)((this.serdeContext?.base64Decoder??B0.fromBase64)(e))}}});var sp,Ho,tO=T(()=>{ye();sp=v(rt());oa();U0();Ho=class extends Bt{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new jo(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let n=U.of(e),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??sp.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??sp.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var F0,$c,q0=T(()=>{ye();$t();F0=v(Xe());oa();np();$c=class extends Bt{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let n=U.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(or(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Mc(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??F0.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:R0(c);i!==""&&(i+=", "),i+=u}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=Lt.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??F0.toBase64)(o.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Er.v4)():this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var Vo,rO=T(()=>{ye();q0();Vo=class{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new $c(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=U.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var nO={};yt(nO,{FromStringShapeDeserializer:()=>jo,HttpBindingProtocol:()=>Go,HttpInterceptingShapeDeserializer:()=>Ho,HttpInterceptingShapeSerializer:()=>Vo,HttpProtocol:()=>qo,RequestBuilder:()=>rp,RpcProtocol:()=>Bn,SerdeContext:()=>Bt,ToStringShapeSerializer:()=>$c,collectBody:()=>Sr,determineTimestampFormat:()=>or,extendedEncodeURIComponent:()=>rn,requestBuilder:()=>$0,resolvedPath:()=>M0});var Kt=T(()=>{Ud();Fd();QD();tp();XD();ZD();L0();U0();tO();rO();q0();np();oa()});var sO=T(()=>{Kt()});function Bre(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var oO=T(()=>{});var Un,iO=T(()=>{Un=class{authSchemes=new Map;constructor(e){for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var aO,G0,j0,cO=T(()=>{aO=v(be()),G0=v(xs()),j0=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=aO.HttpRequest.clone(e);if(n.in===G0.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===G0.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var uO,H0,lO=T(()=>{uO=v(be()),H0=class{async sign(e,r,n){let s=uO.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Lr,dO=T(()=>{Lr=class{async sign(e,r,n){return e}}});var pO=T(()=>{cO();lO();dO()});var fO,Ure,V0,op,z0,hO=T(()=>{fO=t=>function(r){return op(r)&&r.expiration.getTime()-Date.now()<t},Ure=3e5,V0=fO(3e5),op=t=>t.expiration!==void 0,z0=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,o,i,a=!1,c=async u=>{o||(o=n(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return e===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var mO=T(()=>{iO();pO();hO()});var zo={};yt(zo,{DefaultIdentityProviderConfig:()=>Un,EXPIRATION_MS:()=>Ure,HttpApiKeyAuthSigner:()=>j0,HttpBearerAuthSigner:()=>H0,NoAuthSigner:()=>Lr,createIsIdentityExpiredFunction:()=>fO,createPaginator:()=>xP,doesIdentityRequireRefresh:()=>op,getHttpAuthSchemeEndpointRuleSetPlugin:()=>$o,getHttpAuthSchemePlugin:()=>See,getHttpSigningPlugin:()=>Bo,getSmithyContext:()=>pee,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>fP,httpAuthSchemeMiddleware:()=>vc,httpAuthSchemeMiddlewareOptions:()=>bP,httpSigningMiddleware:()=>vb,httpSigningMiddlewareOptions:()=>vP,isIdentityExpired:()=>V0,memoizeIdentityProvider:()=>z0,normalizeProvider:()=>Ds,requestBuilder:()=>$0,setFeature:()=>Bre});var _t=T(()=>{cP();TP();IP();AP();PP();sO();oO();mO()});var Fn=b(Wo=>{"use strict";var K0=xs(),Q0=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(e[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},Fre=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),gO=t=>Fre.test(t)||t.startsWith("[")&&t.endsWith("]"),qre=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),X0=(t,e=!1)=>{if(!e)return qre.test(t);let r=t.split(".");for(let n of r)if(!X0(n))return!1;return!0},Y0={},Bc="endpoints";function ks(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ks(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ks).join(", ")})`:JSON.stringify(t,null,2)}var Tt=class extends Error{constructor(e){super(e),this.name="EndpointError"}},Gre=(t,e)=>t===e,jre=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Tt(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new Tt(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},yO=(t,e)=>jre(e).reduce((r,n)=>{if(typeof r!="object")throw new Tt(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),Hre=t=>t!=null,Vre=t=>!t,W0={[K0.EndpointURLScheme.HTTP]:80,[K0.EndpointURLScheme.HTTPS]:443},zre=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:g,port:y,protocol:S="",path:w="",query:A={}}=t,I=new URL(`${S}//${g}${y?`:${y}`:""}${w}`);return I.search=Object.entries(A).map(([k,L])=>`${k}=${L}`).join("&"),I}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let c=i.slice(0,-1);if(!Object.values(K0.EndpointURLScheme).includes(c))return null;let u=gO(s),d=r.includes(`${n}:${W0[c]}`)||typeof t=="string"&&t.includes(`${n}:${W0[c]}`),l=`${n}${d?`:${W0[c]}`:""}`;return{scheme:c,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},Wre=(t,e)=>t===e,Kre=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),Qre=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Yre={booleanEquals:Gre,getAttr:yO,isSet:Hre,isValidHostLabel:X0,not:Vre,parseURL:zre,stringEquals:Wre,substring:Kre,uriEncode:Qre},SO=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[c,u]=a.split("#");r.push(yO(n[c],u))}else r.push(n[a]);s=i+1}return r.join("")},Xre=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],ip=(t,e,r)=>{if(typeof t=="string")return SO(t,r);if(t.fn)return bO.callFunction(t,r);if(t.ref)return Xre(t,r);throw new Tt(`'${e}': ${String(t)} is not a string, function or reference.`)},EO=({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:bO.evaluateExpression(o,"arg",r)),s=t.split(".");return s[0]in Y0&&s[1]!=null?Y0[s[0]][s[1]](...n):Yre[t](...n)},bO={evaluateExpression:ip,callFunction:EO},Jre=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Tt(`'${t}' is already defined in Reference Record.`);let n=EO(e,r);return r.logger?.debug?.(`${Bc} evaluateCondition: ${ks(e)} = ${ks(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},J0=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:o}=Jre(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,e.logger?.debug?.(`${Bc} assign: ${o.name} := ${ks(o.value)}`))}return{result:!0,referenceRecord:r}},Zre=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=ip(o,"Header value entry",e);if(typeof i!="string")throw new Tt(`Header '${n}' value '${i}' is not a string`);return i})}),{}),_O=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:wO.getEndpointProperty(s,e)}),{}),TO=(t,e)=>{if(Array.isArray(t))return t.map(r=>TO(r,e));switch(typeof t){case"string":return SO(t,e);case"object":if(t===null)throw new Tt(`Unexpected endpoint property: ${t}`);return wO.getEndpointProperties(t,e);case"boolean":return t;default:throw new Tt(`Unexpected endpoint property type: ${typeof t}`)}},wO={getEndpointProperty:TO,getEndpointProperties:_O},ene=(t,e)=>{let r=ip(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Tt(`Endpoint URL must be a string, got ${typeof r}`)},tne=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=J0(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Bc} Resolving endpoint from template: ${ks(n)}`),{...u!=null&&{headers:Zre(u,i)},...c!=null&&{properties:_O(c,i)},url:ene(a,i)}},rne=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=J0(r,e);if(s)throw new Tt(ip(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},CO=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=tne(r,e);if(n)return n}else if(r.type==="error")rne(r,e);else if(r.type==="tree"){let n=vO.evaluateTreeRule(r,e);if(n)return n}else throw new Tt(`Unknown endpoint rule: ${r}`);throw new Tt("Rules evaluation failed")},nne=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=J0(r,e);if(s)return vO.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},vO={evaluateRules:CO,evaluateTreeRule:nne},sne=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;e.logger?.debug?.(`${Bc} Initial EndpointParams: ${ks(r)}`);let i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,d])=>[u,d.default]);if(i.length>0)for(let[u,d]of i)r[u]=r[u]??d;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Tt(`Missing required parameter: '${u}'`);let c=CO(o,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Bc} Resolved endpoint: ${ks(c)}`),c};Wo.EndpointCache=Q0;Wo.EndpointError=Tt;Wo.customEndpointFunctions=Y0;Wo.isIpAddress=gO;Wo.isValidHostLabel=X0;Wo.resolveEndpoint=sne});var IO=b(RO=>{"use strict";function one(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}RO.parseQueryString=one});var on=b(xO=>{"use strict";var ine=IO(),AO=t=>{if(typeof t=="string")return AO(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=ine.parseQueryString(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};xO.parseUrl=AO});var Ns=b($r=>{"use strict";var ia=Fn(),ane=on(),DO=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!DO(r))return!1;return!0}return!(!ia.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ia.isIpAddress(t))},PO=":",cne="/",une=t=>{let e=t.split(PO);if(e.length<6)return null;let[r,n,s,o,i,...a]=e;if(r!=="arn"||n===""||s===""||a.join(PO)==="")return null;let c=a.map(u=>u.split(cne)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:c}},lne=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],dne="1.1",OO={partitions:lne,version:dne},kO=OO,NO="",MO=t=>{let{partitions:e}=kO;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},LO=(t,e="")=>{kO=t,NO=e},pne=()=>{LO(OO,"")},fne=()=>NO,$O={isVirtualHostableS3Bucket:DO,parseArn:une,partition:MO};ia.customEndpointFunctions.aws=$O;var hne=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>BO(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},BO=t=>ane.parseUrl(t.url);Object.defineProperty($r,"EndpointError",{enumerable:!0,get:function(){return ia.EndpointError}});Object.defineProperty($r,"isIpAddress",{enumerable:!0,get:function(){return ia.isIpAddress}});Object.defineProperty($r,"resolveEndpoint",{enumerable:!0,get:function(){return ia.resolveEndpoint}});$r.awsEndpointFunctions=$O;$r.getUserAgentPrefix=fne;$r.partition=MO;$r.resolveDefaultAwsRegionalEndpointsConfig=hne;$r.setPartitionInfo=LO;$r.toEndpointV1=BO;$r.useDefaultPartitionInfo=pne});var ap,Ms,UO=T(()=>{ap={warningEmitted:!1},Ms=t=>{t&&!ap.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20&&(ap.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function Ls(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var FO=T(()=>{});function qO(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var GO=T(()=>{});function jO(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var HO=T(()=>{});var qn={};yt(qn,{emitWarningIfUnsupportedVersion:()=>Ms,setCredentialFeature:()=>Ls,setFeature:()=>qO,setTokenFeature:()=>jO,state:()=>ap});var br=T(()=>{UO();FO();GO();HO()});var VO,Z0,zO=T(()=>{VO=v(be()),Z0=t=>VO.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var aa,e_=T(()=>{aa=t=>new Date(Date.now()+t)});var WO,KO=T(()=>{e_();WO=(t,e)=>Math.abs(aa(e).getTime()-t)>=3e5});var t_,QO=T(()=>{KO();t_=(t,e)=>{let r=Date.parse(t);return WO(r,e)?r-Date.now():e}});var r_=T(()=>{zO();e_();QO()});var YO,Uc,ca,wt,n_,s_=T(()=>{YO=v(be());r_();Uc=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},ca=async t=>{let e=Uc("context",t.context),r=Uc("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await Uc("signer",r.signer)(n),i=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},wt=class{async sign(e,r,n){if(!YO.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ca(n),{config:o,signer:i}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[l,g]=u.authSchemes;l?.name==="sigv4a"&&g?.name==="sigv4"&&(a=g?.signingRegion??a,c=g?.signingName??c)}return await i.sign(e,{signingDate:aa(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??Z0(r.$response);if(n){let s=Uc("config",e.config),o=s.systemClockOffset;s.systemClockOffset=t_(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=Z0(e);if(n){let s=Uc("config",r.config);s.systemClockOffset=t_(n,s.systemClockOffset)}}},n_=wt});var XO,Fc,JO=T(()=>{XO=v(be());r_();s_();Fc=class extends wt{async sign(e,r,n){if(!XO.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await ca(n),d=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(e,{signingDate:aa(s.systemClockOffset),signingRegion:d,signingService:c})}}});var o_,ZO=T(()=>{o_=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var cp,i_=T(()=>{cp=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var ek,tk,$s,rk=T(()=>{ZO();i_();ek="AWS_AUTH_SCHEME_PREFERENCE",tk="auth_scheme_preference",$s={environmentVariableSelector:(t,e)=>{if(e?.signingName&&cp(e.signingName)in t)return["httpBearerAuth"];if(ek in t)return o_(t[ek])},configFileSelector:t=>{if(tk in t)return o_(t[tk])},default:[]}});var Ct=b(Ko=>{"use strict";var ua=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},a_=class t extends ua{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},c_=class t extends ua{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},mne=(...t)=>async()=>{if(t.length===0)throw new ua("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},gne=t=>()=>Promise.resolve(t),yne=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async c=>((!o||c?.forceRefresh)&&(n=await a()),n):async c=>((!o||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};Ko.CredentialsProviderError=a_;Ko.ProviderError=ua;Ko.TokenProviderError=c_;Ko.chain=mne;Ko.fromStatic=gne;Ko.memoize=yne});var u_,nk,sk,ok=T(()=>{_t();u_=v(Ct()),nk=t=>(t.sigv4aSigningRegionSet=Ds(t.sigv4aSigningRegionSet),t),sk={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new u_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new u_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var xk=b(se=>{"use strict";var Bs=Zb(),Qo=rt(),Sne=Ib(),uk=be(),ik=pt(),up=qb(),lk="X-Amz-Algorithm",dk="X-Amz-Credential",m_="X-Amz-Date",pk="X-Amz-SignedHeaders",fk="X-Amz-Expires",g_="X-Amz-Signature",y_="X-Amz-Security-Token",Ene="X-Amz-Region-Set",S_="authorization",E_=m_.toLowerCase(),hk="date",mk=[S_,E_,hk],gk=g_.toLowerCase(),hp="x-amz-content-sha256",yk=y_.toLowerCase(),bne="host",Sk={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ek=/^proxy-/,bk=/^sec-/,_ne=[/^proxy-/i,/^sec-/i],lp="AWS4-HMAC-SHA256",Tne="AWS4-ECDSA-P256-SHA256",_k="AWS4-HMAC-SHA256-PAYLOAD",Tk="UNSIGNED-PAYLOAD",wk=50,b_="aws4_request",Ck=3600*24*7,la={},dp=[],pp=(t,e,r)=>`${t}/${e}/${r}/${b_}`,vk=async(t,e,r,n,s)=>{let o=await ak(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${Bs.toHex(o)}:${e.sessionToken}`;if(i in la)return la[i];for(dp.push(i);dp.length>wk;)delete la[dp.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,b_])a=await ak(t,a,c);return la[i]=a},wne=()=>{dp.length=0,Object.keys(la).forEach(t=>{delete la[t]})},ak=(t,e,r)=>{let n=new t(e);return n.update(Qo.toUint8Array(r)),n.digest()},l_=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in Sk||e?.has(o)||Ek.test(o)||bk.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n},fp=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===hp)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Sne.isArrayBuffer(e)){let n=new r;return n.update(Qo.toUint8Array(e)),Bs.toHex(await n.digest())}return Tk},d_=class{format(e){let r=[];for(let o of Object.keys(e)){let i=Qo.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=Qo.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(p_.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!Cne.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(Bs.fromHex(e.value.replace(/\-/g,"")),1),l}}},Cne=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,p_=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&ck(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&ck(e),parseInt(Bs.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function ck(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var Rk=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Ik=(t,e={})=>{let{headers:r,query:n={}}=uk.HttpRequest.clone(t);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(o)||e.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},f_=t=>{t=uk.HttpRequest.clone(t);for(let e of Object.keys(t.headers))mk.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Ak=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===gk)continue;let s=up.escapeUri(n);e.push(s);let o=t[n];typeof o=="string"?r[s]=`${s}=${up.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${up.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},vne=t=>Rne(t).toISOString().replace(/\.\d{3}Z$/,"Z"),Rne=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,mp=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=ik.normalizeProvider(n),this.credentialProvider=ik.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Ak(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let o=new this.sha256;o.update(Qo.toUint8Array(n));let i=await o.digest();return`${s}
${e}
${r}
${Bs.toHex(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return up.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=vne(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},h_=class extends mp{headerFormatter=new d_;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let g=u??await this.regionProvider(),{longDate:y,shortDate:S}=this.formatDate(n);if(s>Ck)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=pp(S,g,d??this.service),A=Ik(f_(e),{unhoistableHeaders:i,hoistableHeaders:c});l.sessionToken&&(A.query[y_]=l.sessionToken),A.query[lk]=lp,A.query[dk]=`${l.accessKeyId}/${w}`,A.query[m_]=y,A.query[fk]=s.toString(10);let I=l_(A,o,a);return A.query[pk]=this.getCanonicalHeaderList(I),A.query[g_]=await this.getSignature(y,w,this.getSigningKey(l,g,S,d),this.createCanonicalRequest(A,I,await fp(e,this.sha256))),A}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),d=pp(c,a,i??this.service),l=await fp({headers:{},body:r},this.sha256),g=new this.sha256;g.update(e);let y=Bs.toHex(await g.digest()),S=[_k,u,d,s,y,l].join(`
`);return this.signString(S,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(Qo.toUint8Array(e)),Bs.toHex(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),u=f_(e),{longDate:d,shortDate:l}=this.formatDate(r),g=pp(l,c,i??this.service);u.headers[E_]=d,a.sessionToken&&(u.headers[yk]=a.sessionToken);let y=await fp(u,this.sha256);!Rk(hp,u.headers)&&this.applyChecksum&&(u.headers[hp]=y);let S=l_(u,s,n),w=await this.getSignature(d,g,this.getSigningKey(a,c,l,i),this.createCanonicalRequest(u,S,y));return u.headers[S_]=`${lp} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(S)}, Signature=${w}`,u}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s,lp),i=new this.sha256(await n);return i.update(Qo.toUint8Array(o)),Bs.toHex(await i.digest())}getSigningKey(e,r,n,s){return vk(this.sha256,e,n,r,s||this.service)}},Ine={SignatureV4a:null};se.ALGORITHM_IDENTIFIER=lp;se.ALGORITHM_IDENTIFIER_V4A=Tne;se.ALGORITHM_QUERY_PARAM=lk;se.ALWAYS_UNSIGNABLE_HEADERS=Sk;se.AMZ_DATE_HEADER=E_;se.AMZ_DATE_QUERY_PARAM=m_;se.AUTH_HEADER=S_;se.CREDENTIAL_QUERY_PARAM=dk;se.DATE_HEADER=hk;se.EVENT_ALGORITHM_IDENTIFIER=_k;se.EXPIRES_QUERY_PARAM=fk;se.GENERATED_HEADERS=mk;se.HOST_HEADER=bne;se.KEY_TYPE_IDENTIFIER=b_;se.MAX_CACHE_SIZE=wk;se.MAX_PRESIGNED_TTL=Ck;se.PROXY_HEADER_PATTERN=Ek;se.REGION_SET_PARAM=Ene;se.SEC_HEADER_PATTERN=bk;se.SHA256_HEADER=hp;se.SIGNATURE_HEADER=gk;se.SIGNATURE_QUERY_PARAM=g_;se.SIGNED_HEADERS_QUERY_PARAM=pk;se.SignatureV4=h_;se.SignatureV4Base=mp;se.TOKEN_HEADER=yk;se.TOKEN_QUERY_PARAM=y_;se.UNSIGNABLE_PATTERNS=_ne;se.UNSIGNED_PAYLOAD=Tk;se.clearCredentialCache=wne;se.createScope=pp;se.getCanonicalHeaders=l_;se.getCanonicalQuery=Ak;se.getPayloadHash=fp;se.getSigningKey=vk;se.hasHeader=Rk;se.moveHeadersToQuery=Ik;se.prepareRequest=f_;se.signatureV4aContainer=Ine});function Ane(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=z0(e,V0,op):r?n=Ds(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function xne(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var __,Gn,Pk,Dk=T(()=>{br();_t();__=v(xk()),Gn=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let d=Ane(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=xne(t,d);if(r&&!l.attributed){let g=typeof e=="object"&&e!==null;n=async y=>{let w=await l(y);return g&&(!w.$source||Object.keys(w.$source).length===0)?Ls(w,"CREDENTIALS_CODE","e"):w},n.memoized=l.memoized,n.configBound=l.configBound,n.attributed=!0}else n=l},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t,a;return t.signer?a=Ds(t.signer):t.regionInfoProvider?a=()=>Ds(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{let{signingRegion:l,signingService:g}=u;t.signingRegion=t.signingRegion||l||d,t.signingName=t.signingName||g||t.serviceId;let y={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},S=t.signerConstructor||__.SignatureV4;return new S(y)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ds(t.region)(),properties:{}},u);let d=u.signingRegion,l=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||l||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},y=t.signerConstructor||__.SignatureV4;return new y(g)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})},Pk=Gn});var Ok=T(()=>{s_();JO();rk();ok();Dk()});var kk={};yt(kk,{AWSSDKSigV4Signer:()=>n_,AwsSdkSigV4ASigner:()=>Fc,AwsSdkSigV4Signer:()=>wt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>$s,NODE_SIGV4A_CONFIG_OPTIONS:()=>sk,getBearerTokenEnvKey:()=>cp,resolveAWSSDKSigV4Config:()=>Pk,resolveAwsSdkSigV4AConfig:()=>nk,resolveAwsSdkSigV4Config:()=>Gn,validateSigningProperties:()=>ca});var T_=T(()=>{Ok();i_()});function Us(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function gp(t){return t[w_]=!0,t}var w_,yp=T(()=>{w_=Symbol("@smithy/core/cbor::tagSymbol")});function Lk(t){Ie=t,Hn=new DataView(Ie.buffer,Ie.byteOffset,Ie.byteLength)}function an(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(Ie[t]&224)>>5,n=Ie[t]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=Bk[n],a=i+1;if(o=a,e-t<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=t+1;i===1?s=Ie[c]:i===2?s=Hn.getUint16(c):i===4?s=Hn.getUint32(c):s=Hn.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ae=o,C_(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,ae=o,C_(i)}else if(n===2||n===3){let i=Hc(t+o,e),a=BigInt(0),c=t+o+ae;for(let u=c;u<c+i;++u)a=a<<BigInt(8)|BigInt(Ie[u]);return ae=o+ae+i,n===3?-a-BigInt(1):a}else if(n===4){let i=an(t+o,e),[a,c]=i,u=c<0?-1:1,d="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),l,g=c<0?"-":"";return l=a===0?d:d.slice(0,d.length+a)+"."+d.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=g+l,ae=o+ae,k0(l)}else{let i=an(t+o,e);return ae=o+ae,gp({tag:C_(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return Lne(t,e);case 5:return qne(t,e);case 4:return Une(t,e);case 2:return $ne(t,e)}else switch(r){case 3:return Mne(t,e);case 5:return Fne(t,e);case 4:return Bne(t,e);case 2:return P_(t,e)}default:return Gne(t,e)}}function $k(t,e,r){return One&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):Nk?Nk.decode(t.subarray(e,r)):(0,Mk.toUtf8)(t.subarray(e,r))}function kne(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function Nne(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function Hc(t,e){let r=Ie[t]&31;if(r<24)return ae=1,r;if(r===24||r===25||r===26||r===27){let n=Bk[r];if(ae=n+1,e-t<ae)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?Ie[s]:n===2?Hn.getUint16(s):n===4?Hn.getUint32(s):kne(Hn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function Mne(t,e){let r=Hc(t,e),n=ae;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=$k(Ie,t,t+r);return ae=n+r,s}function Lne(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ie[t]===255){let c=Us(r.length);return c.set(r,0),ae=t-n+2,$k(c,0,c.length)}let s=(Ie[t]&224)>>5,o=Ie[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=P_(t,e);t+=ae;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function P_(t,e){let r=Hc(t,e),n=ae;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=Ie.subarray(t,t+r);return ae=n+r,s}function $ne(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ie[t]===255){let c=Us(r.length);return c.set(r,0),ae=t-n+2,c}let s=(Ie[t]&224)>>5,o=Ie[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=P_(t,e);t+=ae;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function Bne(t,e){let r=Hc(t,e),n=ae;t+=n;let s=t,o=Array(r);for(let i=0;i<r;++i){let a=an(t,e),c=ae;o[i]=a,t+=c}return ae=n+(t-s),o}function Une(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ie[t]===255)return ae=t-n+2,r;let s=an(t,e);t+=ae,r.push(s)}throw new Error("expected break marker.")}function Fne(t,e){let r=Hc(t,e),n=ae;t+=n;let s=t,o={};for(let i=0;i<r;++i){if(t>=e)throw new Error("unexpected end of map payload.");let a=(Ie[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=an(t,e);t+=ae;let u=an(t,e);t+=ae,o[c]=u}return ae=n+(t-s),o}function qne(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(Ie[t]===255)return ae=t-r+2,n;let s=(Ie[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=an(t,e);t+=ae;let i=an(t,e);t+=ae,n[o]=i}throw new Error("expected break marker.")}function Gne(t,e){let r=Ie[t]&31;switch(r){case 21:case 20:return ae=1,r===21;case 22:return ae=1,null;case 23:return ae=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ae=3,Nne(Ie[t+1],Ie[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ae=5,Hn.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ae=9,Hn.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function C_(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var Mk,Dne,One,Ie,Hn,Nk,ae,Bk,Uk=T(()=>{$t();Mk=v(rt());yp();Dne=typeof TextDecoder<"u",One=typeof Buffer<"u",Ie=Us(0),Hn=new DataView(Ie.buffer,Ie.byteOffset,Ie.byteLength),Nk=Dne?new TextDecoder:null,ae=0;Bk={24:1,25:2,26:4,27:8}});function O_(t){Y.byteLength-H<t&&(H<16e6?Ep(Math.max(Y.byteLength*4,Y.byteLength+t)):Ep(Y.byteLength+t+16e6))}function k_(){let t=Us(H);return t.set(Y.subarray(0,H),0),H=0,t}function Ep(t){let e=Y;Y=Us(t),e&&(e.copy?e.copy(Y,0,0,e.byteLength):Y.set(e,0)),Wn=new DataView(Y.buffer,Y.byteOffset,Y.byteLength)}function zn(t,e){e<24?Y[H++]=t<<5|e:e<256?(Y[H++]=t<<5|24,Y[H++]=e):e<65536?(Y[H++]=t<<5|25,Wn.setUint16(H,e),H+=2):e<2**32?(Y[H++]=t<<5|26,Wn.setUint32(H,e),H+=4):(Y[H++]=t<<5|27,Wn.setBigUint64(H,typeof e=="bigint"?e:BigInt(e)),H+=8)}function Gk(t){let e=[t];for(;e.length;){let r=e.pop();if(O_(typeof r=="string"?r.length*4:64),typeof r=="string"){if(Fk)zn(3,Buffer.byteLength(r)),H+=Y.write(r,H);else{let n=(0,qk.fromUtf8)(r);zn(3,n.byteLength),Y.set(n,H),H+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?Y[H++]=s<<5|o:o<256?(Y[H++]=s<<5|24,Y[H++]=o):o<65536?(Y[H++]=s<<5|25,Y[H++]=o>>8,Y[H++]=o):o<4294967296?(Y[H++]=s<<5|26,Wn.setUint32(H,o),H+=4):(Y[H++]=s<<5|27,Wn.setBigUint64(H,BigInt(o)),H+=8);continue}Y[H++]=251,Wn.setFloat64(H,r),H+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)Y[H++]=s<<5|i;else if(i<256)Y[H++]=s<<5|24,Y[H++]=i;else if(i<65536)Y[H++]=s<<5|25,Y[H++]=i>>8,Y[H++]=i&255;else if(i<4294967296)Y[H++]=s<<5|26,Wn.setUint32(H,i),H+=4;else if(o<BigInt("18446744073709551616"))Y[H++]=s<<5|27,Wn.setBigUint64(H,o),H+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=o,d=0;for(;c.byteLength-++d>=0;)c[c.byteLength-d]=Number(u&BigInt(255)),u>>=BigInt(8);O_(c.byteLength*2),Y[H++]=n?194:195,Fk?zn(2,Buffer.byteLength(c)):zn(2,c.byteLength),Y.set(c,H),H+=c.byteLength}continue}else if(r===null){Y[H++]=246;continue}else if(typeof r=="boolean"){Y[H++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);zn(4,r.length);continue}else if(typeof r.byteLength=="number"){O_(r.length*2),zn(2,r.length),Y.set(r,H),H+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof ke){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));Y[H++]=196,e.push(i),e.push(o),zn(4,2);continue}if(r[w_])if("tag"in r&&"value"in r){e.push(r.value),zn(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];e.push(r[o]),e.push(o)}zn(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var qk,Fk,jne,Y,Wn,H,jk=T(()=>{$t();qk=v(rt());yp();Fk=typeof Buffer<"u",jne=2048,Y=Us(jne),Wn=new DataView(Y.buffer,Y.byteOffset,Y.byteLength),H=0});var N_,Hk=T(()=>{Uk();jk();N_={deserialize(t){return Lk(t),an(0,t.length)},serialize(t){try{return Gk(t),k_()}catch(e){throw k_(),e}},resizeEncodingBuffer(t){Ep(t)}}});var bp,_p,Tp=T(()=>{yp();bp=t=>gp({tag:1,value:t.getTime()/1e3}),_p=(t,e)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var $_,wp,M_,L_,B_=T(()=>{Kt();ye();$t();$t();$_=v(Xe());Hk();Tp();wp=class extends Bt{createSerializer(){let e=new M_;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new L_;return e.setSerdeContext(this.serdeContext),e}},M_=class extends Bt{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let n=U.of(e);if(r==null)return n.isIdempotencyToken()?(0,Er.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??$_.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?bp(new Date(Number(r)/1e3|0)):bp(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],c=0;for(let u of s){let d=this.serialize(n.getValueSchema(),u);(d!=null||i)&&(a[c++]=d)}return a}if(s instanceof Date)return bp(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||i)&&(o[a]=c)}}else if(n.isStructSchema()){for(let[a,c]of n.structIterator()){let u=this.serialize(c,s[a]);u!=null&&(o[a]=u)}if(n.isUnionSchema()&&Array.isArray(s.$unknown)){let[a,c]=s.$unknown;o[a]=c}else if(typeof s.__type=="string")for(let[a,c]of Object.entries(s))a in o||(o[a]=this.serialize(15,c))}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);else if(n.isBigDecimalSchema())return s;return o}return r}flush(){let e=N_.serialize(this.value);return this.value=void 0,e}},L_=class extends Bt{read(e,r){let n=N_.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=U.of(e);if(n.isTimestampSchema()){if(typeof r=="number")return sa(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return sa(r.value)}if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??$_.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(i,c);(u!=null||a)&&o.push(u)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(s[a]=c)}}else if(n.isStructSchema()){let o=n.isUnionSchema(),i;o&&(i=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,c]of n.structIterator())o&&i.delete(a),r[a]!=null&&(s[a]=this.readValue(c,r[a]));if(o&&i?.size===1&&Object.keys(s).length===0){let a=i.values().next().value;s.$unknown=[a,r[a]]}else if(typeof r.__type=="string")for(let[a,c]of Object.entries(r))a in s||(s[a]=c)}else if(r instanceof ke)return r;return s}else return r}}});var Vk,Cp,zk=T(()=>{Kt();ye();Vk=v(pt());B_();Tp();Cp=class extends Bn{codec=new wp;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Mr(e.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,Vk.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=_p(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$fault:n.statusCode<=500?"client":"server"},u=W.for(a),d;try{d=u.getSchema(i)}catch{s.Message&&(s.message=s.Message);let I=W.for("smithy.ts.sdk.synthetic."+a),k=I.getBaseException();if(k){let L=I.getErrorCtor(k);throw Object.assign(new L({name:i}),c,s)}throw Object.assign(new Error(i),c,s)}let l=U.of(d),g=u.getErrorCtor(d),y=s.message??s.Message??"Unknown",S=new g(y),w={};for(let[A,I]of l.structIterator())w[A]=this.deserializer.readValue(I,s[A]);throw Object.assign(S,c,{$fault:l.getMergedTraits().error,message:y},w)}getDefaultContentType(){return"application/cbor"}}});var Wk=T(()=>{Tp();zk();B_()});var Xk=b(Yk=>{"use strict";var Yo=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},js=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,U_=()=>{let t=[],e=[],r=!1,n=new Set,s=l=>l.sort((g,y)=>Kk[y.step]-Kk[g.step]||Qk[y.priority||"normal"]-Qk[g.priority||"normal"]),o=l=>{let g=!1,y=S=>{let w=Yo(S.name,S.aliases);if(w.includes(l)){g=!0;for(let A of w)n.delete(A);return!1}return!0};return t=t.filter(y),e=e.filter(y),g},i=l=>{let g=!1,y=S=>{if(S.middleware===l){g=!0;for(let w of Yo(S.name,S.aliases))n.delete(w);return!1}return!0};return t=t.filter(y),e=e.filter(y),g},a=l=>(t.forEach(g=>{l.add(g.middleware,{...g})}),e.forEach(g=>{l.addRelativeTo(g.middleware,{...g})}),l.identifyOnResolve?.(d.identifyOnResolve()),l),c=l=>{let g=[];return l.before.forEach(y=>{y.before.length===0&&y.after.length===0?g.push(y):g.push(...c(y))}),g.push(l),l.after.reverse().forEach(y=>{y.before.length===0&&y.after.length===0?g.push(y):g.push(...c(y))}),g},u=(l=!1)=>{let g=[],y=[],S={};return t.forEach(A=>{let I={...A,before:[],after:[]};for(let k of Yo(I.name,I.aliases))S[k]=I;g.push(I)}),e.forEach(A=>{let I={...A,before:[],after:[]};for(let k of Yo(I.name,I.aliases))S[k]=I;y.push(I)}),y.forEach(A=>{if(A.toMiddleware){let I=S[A.toMiddleware];if(I===void 0){if(l)return;throw new Error(`${A.toMiddleware} is not found when adding ${js(A.name,A.aliases)} middleware ${A.relation} ${A.toMiddleware}`)}A.relation==="after"&&I.after.push(A),A.relation==="before"&&I.before.push(A)}}),s(g).map(c).reduce((A,I)=>(A.push(...I),A),[])},d={add:(l,g={})=>{let{name:y,override:S,aliases:w}=g,A={step:"initialize",priority:"normal",middleware:l,...g},I=Yo(y,w);if(I.length>0){if(I.some(k=>n.has(k))){if(!S)throw new Error(`Duplicate middleware name '${js(y,w)}'`);for(let k of I){let L=t.findIndex(X=>X.name===k||X.aliases?.some(oe=>oe===k));if(L===-1)continue;let B=t[L];if(B.step!==A.step||A.priority!==B.priority)throw new Error(`"${js(B.name,B.aliases)}" middleware with ${B.priority} priority in ${B.step} step cannot be overridden by "${js(y,w)}" middleware with ${A.priority} priority in ${A.step} step.`);t.splice(L,1)}}for(let k of I)n.add(k)}t.push(A)},addRelativeTo:(l,g)=>{let{name:y,override:S,aliases:w}=g,A={middleware:l,...g},I=Yo(y,w);if(I.length>0){if(I.some(k=>n.has(k))){if(!S)throw new Error(`Duplicate middleware name '${js(y,w)}'`);for(let k of I){let L=e.findIndex(X=>X.name===k||X.aliases?.some(oe=>oe===k));if(L===-1)continue;let B=e[L];if(B.toMiddleware!==A.toMiddleware||B.relation!==A.relation)throw new Error(`"${js(B.name,B.aliases)}" middleware ${B.relation} "${B.toMiddleware}" middleware cannot be overridden by "${js(y,w)}" middleware ${A.relation} "${A.toMiddleware}" middleware.`);e.splice(L,1)}}for(let k of I)n.add(k)}e.push(A)},clone:()=>a(U_()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):i(l),removeByTag:l=>{let g=!1,y=S=>{let{tags:w,name:A,aliases:I}=S;if(w&&w.includes(l)){let k=Yo(A,I);for(let L of k)n.delete(L);return g=!0,!1}return!0};return t=t.filter(y),e=e.filter(y),g},concat:l=>{let g=a(U_());return g.use(l),g.identifyOnResolve(r||g.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),g},applyToStack:a,identify:()=>u(!0).map(l=>{let g=l.step??l.relation+" "+l.toMiddleware;return js(l.name,l.aliases)+" - "+g}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,g)=>{for(let y of u().map(S=>S.middleware).reverse())l=y(l,g);return r&&console.log(d.identify()),l}};return d},Kk={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Qk={high:3,normal:2,low:1};Yk.constructStack=U_});var Z=b(ve=>{"use strict";var eN=Xk(),K_=(Kt(),K(nO)),q_=xs(),Hne=(ye(),K(Ji)),Jk=($t(),K(jD)),G_=class{config;middlewareStack=eN.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:r,protocolSettings:n}=e;n&&typeof r=="function"&&(e.protocol=new r(n))}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},F_="***SensitiveInformation***";function j_(t,e){if(e==null)return e;let r=Hne.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return F_;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return F_}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return F_}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=j_(i,n[o]));return s}return e}var vp=class{middlewareStack=eN.constructStack();schema;static classBuilder(){return new H_}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:d,CommandCtor:l}){for(let A of s.bind(this)(l,e,r,n))this.middlewareStack.use(A);let g=e.concat(this.middlewareStack),{logger:y}=r,S={logger:y,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[q_.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...d},{requestHandler:w}=r;return g.resolve(A=>w.handle(A.request,n||{}),S)}},H_=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends vp{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,o){let i=e._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?j_.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?j_.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},Vne="***SensitiveInformation***",zne=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(i,a,c){let u=new n(i);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=s}},V_=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},tN=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},rN=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=Kne(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw tN(i,e)},Wne=t=>({output:e,parsedBody:r,errorCode:n})=>{rN({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},Kne=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Qne=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Zk=!1,Yne=t=>{t&&!Zk&&parseInt(t.substring(1,t.indexOf(".")))<16&&(Zk=!0)},Xne=t=>{let e=[];for(let r in q_.AlgorithmId){let n=q_.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Jne=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Zne=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),ese=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},nN=t=>Object.assign(Xne(t),Zne(t)),tse=nN,rse=t=>Object.assign(Jne(t),ese(t)),nse=t=>Array.isArray(t)?t:[t],sN=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=sN(t[r]));return t},sse=t=>t!=null,z_=class{trace(){}debug(){}info(){}warn(){}error(){}};function oN(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,ase(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}iN(n,null,o,i)}return n}var ose=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},ise=(t,e)=>{let r={};for(let n in e)iN(r,t,e,n);return r},ase=(t,e,r)=>oN(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),iN=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=cse,c=use,u=n]=i;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:c&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},cse=t=>t!=null,use=t=>t,lse=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},dse=t=>t.toISOString().replace(".000Z","Z"),W_=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(W_);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=W_(t[r]));return e}return t};Object.defineProperty(ve,"collectBody",{enumerable:!0,get:function(){return K_.collectBody}});Object.defineProperty(ve,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return K_.extendedEncodeURIComponent}});Object.defineProperty(ve,"resolvedPath",{enumerable:!0,get:function(){return K_.resolvedPath}});ve.Client=G_;ve.Command=vp;ve.NoOpLogger=z_;ve.SENSITIVE_STRING=Vne;ve.ServiceException=V_;ve._json=W_;ve.convertMap=ose;ve.createAggregatedClient=zne;ve.decorateServiceException=tN;ve.emitWarningIfUnsupportedVersion=Yne;ve.getArrayIfSingleItem=nse;ve.getDefaultClientConfiguration=tse;ve.getDefaultExtensionConfiguration=nN;ve.getValueFromTextNode=sN;ve.isSerializableHeaderValue=sse;ve.loadConfigsForDefaultMode=Qne;ve.map=oN;ve.resolveDefaultRuntimeConfig=rse;ve.serializeDateTime=dse;ve.serializeFloat=lse;ve.take=ise;ve.throwDefaultError=rN;ve.withBaseException=Wne;Object.keys(Jk).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ve,t)&&Object.defineProperty(ve,t,{enumerable:!0,get:function(){return Jk[t]}})})});var Q_,_r,pa=T(()=>{ye();Q_=v(Z()),_r=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:d,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!u&&!d&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,o,i){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:o,$fault:n.statusCode<500?"client":"server"},d=W.for(a);try{return{errorSchema:i?.(d,c)??d.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let g=W.for("smithy.ts.sdk.synthetic."+a),y=g.getBaseException();if(y){let S=g.getErrorCtor(y)??Error;throw this.decorateServiceException(Object.assign(new S({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(e,r={}){if(this.queryCompat){let n=e.Message??r.Message,s=(0,Q_.decorateServiceException)(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};let o=s.$metadata.requestId;return o&&(s.RequestId=o),s}return(0,Q_.decorateServiceException)(e,r)}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(let[c,u]of i)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>U.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}});var Rp,aN=T(()=>{Wk();ye();pa();Rp=class extends Cp{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r,this.mixin=new _r(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=(()=>{let S=n.headers["x-amzn-query-error"];return S&&this.awsQueryCompatible?S.split(";")[0]:_p(n,s)??"Unknown"})(),{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=U.of(a),d=s.message??s.Message??"Unknown",l=W.for(a[1]).getErrorCtor(a)??Error,g=new l(d),y={};for(let[S,w]of u.structIterator())s[S]!=null&&(y[S]=this.deserializer.readValue(w,s[S]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,y),this.mixin.decorateServiceException(Object.assign(g,c,{$fault:u.getMergedTraits().error,message:d},y),s)}}});var cN,uN,lN,dN=T(()=>{cN=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},uN=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},lN=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var vt,Hs=T(()=>{vt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});function*fa(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let n=0;n<r[4].length;++n){let s=r[4][n],o=r[5][n],i=new U([o,0],s);!(s in e)&&!i.isIdempotencyToken()||(yield[s,i])}}function*pN(t,e,r){if(t.isUnitSchema())return;let n=t.getSchema(),s=Object.keys(e).filter(o=>o!=="__type").length;for(let o=0;o<n[4].length&&s!==0;++o){let i=n[4][o],a=n[5][o],c=new U([a,0],i),u=i;r&&(u=c.getMergedTraits()[r]??i),u in e&&(yield[i,c],s-=1)}}var Vc=T(()=>{ye()});var ha,Y_=T(()=>{ha=class{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}});function fN(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new ke(n,"bigDecimal"):BigInt(n)}return e}var hN=T(()=>{$t()});var mN,gN,Ip,X_=T(()=>{mN=v(Z()),gN=v(rt()),Ip=(t,e)=>(0,mN.collectBody)(t,e).then(r=>(e?.utf8Encoder??gN.toUtf8)(r))});var zc,yN,ma,Wc=T(()=>{X_();zc=(t,e)=>Ip(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),yN=async(t,e)=>{let r=await zc(t,e);return r.message=r.message??r.Message,r},ma=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let o=r(e,"code");if(o&&e[o]!==void 0)return n(e[o]);if(e.__type!==void 0)return n(e.__type)}}});var SN,ga,J_=T(()=>{Kt();ye();$t();SN=v(Xe());Hs();Vc();Y_();hN();Wc();ga=class extends vt{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,fN):await zc(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=U.of(e);if(n){if(s.isStructSchema()){let i=r,a=s.isUnionSchema(),c={},u,{jsonName:d}=this.settings;d&&(u={});let l;a&&(l=new ha(i,c));for(let[g,y]of pN(s,i,d?"jsonName":!1)){let S=g;d&&(S=y.getMergedTraits().jsonName??S,u[S]=g),a&&l.mark(S),i[S]!=null&&(c[g]=this._read(y,i[S]))}if(a)l.writeUnknown();else if(typeof i.__type=="string")for(let[g,y]of Object.entries(i)){let S=d?u[g]??g:g;S in c||(c[S]=y)}return c}if(Array.isArray(r)&&s.isListSchema()){let i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(i,u));return a}if(s.isMapSchema()){let i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._read(i,d));return a}}if(s.isBlobSchema()&&typeof r=="string")return(0,SN.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o)return o==="application/json"||o.endsWith("+json")?Lt.from(r):r;if(s.isTimestampSchema()&&r!=null)switch(or(s,this.settings)){case 5:return E0(r);case 6:return b0(r);case 7:return _0(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof ke)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new ke(i.string,i.type):new ke(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ke?i[a]=c:i[a]=this._read(s,c);return i}else return structuredClone(r);return r}}});var EN,Ap,bN=T(()=>{$t();EN="\u039D",Ap=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof ke){let n=`${EN+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${EN+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var Z_,ya,eT=T(()=>{Kt();ye();$t();Z_=v(Xe());Hs();Vc();bN();ya=class extends vt{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=U.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=U.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let n=new Ap;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",o=U.of(e);if(s){if(o.isStructSchema()){let i=r,a={},{jsonName:c}=this.settings,u;c&&(u={});for(let[d,l]of fa(o,i)){let g=this._write(l,i[d],o);if(g!==void 0){let y=d;c&&(y=l.getMergedTraits().jsonName??d,u[d]=y),a[y]=g}}if(o.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:d}=i;if(Array.isArray(d)){let[l,g]=d;a[l]=this._write(15,g)}}else if(typeof i.__type=="string")for(let[d,l]of Object.entries(i)){let g=c?u[d]??d:d;g in a||(a[g]=this._write(15,l))}return a}if(Array.isArray(r)&&o.isListSchema()){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(i,u));return a}if(o.isMapSchema()){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._write(i,d));return a}if(r instanceof Uint8Array&&(o.isBlobSchema()||o.isDocumentSchema()))return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??Z_.toBase64)(r);if(r instanceof Date&&(o.isTimestampSchema()||o.isDocumentSchema()))switch(or(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Mc(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof ke&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Er.v4)();let i=o.getMergedTraits().mediaType;return r!=null&&i&&(i==="application/json"||i.endsWith("+json"))?Lt.from(r):r}if(typeof r=="number"&&o.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&o.isBlobSchema())return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??Z_.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ke?(this.useReplacer=!0,i[a]=c):i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var Vs,xp=T(()=>{Hs();J_();eT();Vs=class extends vt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new ya(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new ga(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var zs,Pp=T(()=>{Kt();ye();pa();xp();Wc();zs=class extends Bn{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=s??new Vs({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new _r(this.awsQueryCompatible)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(Mr(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=ma(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=U.of(a),d=s.message??s.Message??"Unknown",l=W.for(a[1]).getErrorCtor(a)??Error,g=new l(d),y={};for(let[S,w]of u.structIterator())s[S]!=null&&(y[S]=this.codec.createDeserializer().readObject(w,s[S]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,y),this.mixin.decorateServiceException(Object.assign(g,c,{$fault:u.getMergedTraits().error,message:d},y),s)}}});var Dp,_N=T(()=>{Pp();Dp=class extends zs{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Op,TN=T(()=>{Pp();Op=class extends zs{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n,jsonCodec:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Ws,wN=T(()=>{Kt();ye();pa();xp();Wc();Ws=class extends Go{serializer;deserializer;codec;mixin=new _r;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Vs(r),this.serializer=new Vo(this.codec.createSerializer(),r),this.deserializer=new Ho(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=U.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,n){let s=await super.deserializeResponse(e,r,n),o=U.of(e.output);for(let[i,a]of o.structIterator())a.getMemberTraits().httpPayload&&!(i in s)&&(s[i]=null);return s}async handleError(e,r,n,s,o){let i=ma(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=U.of(a),d=s.message??s.Message??"Unknown",l=W.for(a[1]).getErrorCtor(a)??Error,g=new l(d);await this.deserializeHttpMessage(a,r,n,s);let y={};for(let[S,w]of u.structIterator()){let A=w.getMergedTraits().jsonName??S;y[S]=this.codec.createDeserializer().readObject(w,s[A])}throw this.mixin.decorateServiceException(Object.assign(g,c,{$fault:u.getMergedTraits().error,message:d},y),s)}getDefaultContentType(){return"application/json"}}});var CN,vN,RN=T(()=>{CN=v(Z()),vN=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,CN.expectUnion)(t)}});var AN=b((tNe,IN)=>{(()=>{"use strict";var t={d:(h,m)=>{for(var E in m)t.o(m,E)&&!t.o(h,E)&&Object.defineProperty(h,E,{enumerable:!0,get:m[E]})},o:(h,m)=>Object.prototype.hasOwnProperty.call(h,m),r:h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>hs,XMLParser:()=>h5,XMLValidator:()=>T5});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(h,m){let E=[],R=m.exec(h);for(;R;){let _=[];_.startIndex=m.lastIndex-R[0].length;let C=R.length;for(let D=0;D<C;D++)_.push(R[D]);E.push(_),R=m.exec(h)}return E}let o=function(h){return n.exec(h)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(h,m){m=Object.assign({},i,m);let E=[],R=!1,_=!1;h[0]==="\uFEFF"&&(h=h.substr(1));for(let C=0;C<h.length;C++)if(h[C]==="<"&&h[C+1]==="?"){if(C+=2,C=u(h,C),C.err)return C}else{if(h[C]!=="<"){if(c(h[C]))continue;return I("InvalidChar","char '"+h[C]+"' is not expected.",L(h,C))}{let D=C;if(C++,h[C]==="!"){C=d(h,C);continue}{let P=!1;h[C]==="/"&&(P=!0,C++);let N="";for(;C<h.length&&h[C]!==">"&&h[C]!==" "&&h[C]!=="	"&&h[C]!==`
`&&h[C]!=="\r";C++)N+=h[C];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),C--),!o(N)){let V;return V=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",I("InvalidTag",V,L(h,C))}let M=y(h,C);if(M===!1)return I("InvalidAttr","Attributes for '"+N+"' have open quote.",L(h,C));let J=M.value;if(C=M.index,J[J.length-1]==="/"){let V=C-J.length;J=J.substring(0,J.length-1);let he=w(J,m);if(he!==!0)return I(he.err.code,he.err.msg,L(h,V+he.err.line));R=!0}else if(P){if(!M.tagClosed)return I("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",L(h,C));if(J.trim().length>0)return I("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",L(h,D));if(E.length===0)return I("InvalidTag","Closing tag '"+N+"' has not been opened.",L(h,D));{let V=E.pop();if(N!==V.tagName){let he=L(h,V.tagStartPos);return I("InvalidTag","Expected closing tag '"+V.tagName+"' (opened in line "+he.line+", col "+he.col+") instead of closing tag '"+N+"'.",L(h,D))}E.length==0&&(_=!0)}}else{let V=w(J,m);if(V!==!0)return I(V.err.code,V.err.msg,L(h,C-J.length+V.err.line));if(_===!0)return I("InvalidXml","Multiple possible root nodes found.",L(h,C));m.unpairedTags.indexOf(N)!==-1||E.push({tagName:N,tagStartPos:D}),R=!0}for(C++;C<h.length;C++)if(h[C]==="<"){if(h[C+1]==="!"){C++,C=d(h,C);continue}if(h[C+1]!=="?")break;if(C=u(h,++C),C.err)return C}else if(h[C]==="&"){let V=A(h,C);if(V==-1)return I("InvalidChar","char '&' is not expected.",L(h,C));C=V}else if(_===!0&&!c(h[C]))return I("InvalidXml","Extra text at the end",L(h,C));h[C]==="<"&&C--}}}return R?E.length==1?I("InvalidTag","Unclosed tag '"+E[0].tagName+"'.",L(h,E[0].tagStartPos)):!(E.length>0)||I("InvalidXml","Invalid '"+JSON.stringify(E.map((C=>C.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):I("InvalidXml","Start tag expected.",1)}function c(h){return h===" "||h==="	"||h===`
`||h==="\r"}function u(h,m){let E=m;for(;m<h.length;m++)if(!(h[m]!="?"&&h[m]!=" ")){let R=h.substr(E,m-E);if(m>5&&R==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",L(h,m));if(h[m]=="?"&&h[m+1]==">"){m++;break}}return m}function d(h,m){if(h.length>m+5&&h[m+1]==="-"&&h[m+2]==="-"){for(m+=3;m<h.length;m++)if(h[m]==="-"&&h[m+1]==="-"&&h[m+2]===">"){m+=2;break}}else if(h.length>m+8&&h[m+1]==="D"&&h[m+2]==="O"&&h[m+3]==="C"&&h[m+4]==="T"&&h[m+5]==="Y"&&h[m+6]==="P"&&h[m+7]==="E"){let E=1;for(m+=8;m<h.length;m++)if(h[m]==="<")E++;else if(h[m]===">"&&(E--,E===0))break}else if(h.length>m+9&&h[m+1]==="["&&h[m+2]==="C"&&h[m+3]==="D"&&h[m+4]==="A"&&h[m+5]==="T"&&h[m+6]==="A"&&h[m+7]==="["){for(m+=8;m<h.length;m++)if(h[m]==="]"&&h[m+1]==="]"&&h[m+2]===">"){m+=2;break}}return m}let l='"',g="'";function y(h,m){let E="",R="",_=!1;for(;m<h.length;m++){if(h[m]===l||h[m]===g)R===""?R=h[m]:R!==h[m]||(R="");else if(h[m]===">"&&R===""){_=!0;break}E+=h[m]}return R===""&&{value:E,index:m,tagClosed:_}}let S=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(h,m){let E=s(h,S),R={};for(let _=0;_<E.length;_++){if(E[_][1].length===0)return I("InvalidAttr","Attribute '"+E[_][2]+"' has no space in starting.",B(E[_]));if(E[_][3]!==void 0&&E[_][4]===void 0)return I("InvalidAttr","Attribute '"+E[_][2]+"' is without value.",B(E[_]));if(E[_][3]===void 0&&!m.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+E[_][2]+"' is not allowed.",B(E[_]));let C=E[_][2];if(!k(C))return I("InvalidAttr","Attribute '"+C+"' is an invalid name.",B(E[_]));if(R.hasOwnProperty(C))return I("InvalidAttr","Attribute '"+C+"' is repeated.",B(E[_]));R[C]=1}return!0}function A(h,m){if(h[++m]===";")return-1;if(h[m]==="#")return(function(R,_){let C=/\d/;for(R[_]==="x"&&(_++,C=/[\da-fA-F]/);_<R.length;_++){if(R[_]===";")return _;if(!R[_].match(C))break}return-1})(h,++m);let E=0;for(;m<h.length;m++,E++)if(!(h[m].match(/\w/)&&E<20)){if(h[m]===";")break;return-1}return m}function I(h,m,E){return{err:{code:h,msg:m,line:E.line||E,col:E.col}}}function k(h){return o(h)}function L(h,m){let E=h.substring(0,m).split(/\r?\n/);return{line:E.length,col:E[E.length-1].length+1}}function B(h){return h.startIndex+h[1].length}let X={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(h,m){return m},attributeValueProcessor:function(h,m){return m},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(h,m,E){return h},captureMetaData:!1},oe;oe=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Be{constructor(m){this.tagname=m,this.child=[],this[":@"]={}}add(m,E){m==="__proto__"&&(m="#__proto__"),this.child.push({[m]:E})}addChild(m,E){m.tagname==="__proto__"&&(m.tagname="#__proto__"),m[":@"]&&Object.keys(m[":@"]).length>0?this.child.push({[m.tagname]:m.child,":@":m[":@"]}):this.child.push({[m.tagname]:m.child}),E!==void 0&&(this.child[this.child.length-1][oe]={startIndex:E})}static getMetaDataSymbol(){return oe}}function te(h,m){let E={};if(h[m+3]!=="O"||h[m+4]!=="C"||h[m+5]!=="T"||h[m+6]!=="Y"||h[m+7]!=="P"||h[m+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{m+=9;let R=1,_=!1,C=!1,D="";for(;m<h.length;m++)if(h[m]!=="<"||C)if(h[m]===">"){if(C?h[m-1]==="-"&&h[m-2]==="-"&&(C=!1,R--):R--,R===0)break}else h[m]==="["?_=!0:D+=h[m];else{if(_&&vo(h,"!ENTITY",m)){let P,N;m+=7,[P,N,m]=Ae(h,m+1),N.indexOf("&")===-1&&(E[P]={regx:RegExp(`&${P};`,"g"),val:N})}else if(_&&vo(h,"!ELEMENT",m)){m+=8;let{index:P}=WK(h,m+1);m=P}else if(_&&vo(h,"!ATTLIST",m))m+=8;else if(_&&vo(h,"!NOTATION",m)){m+=9;let{index:P}=lt(h,m+1);m=P}else{if(!vo(h,"!--",m))throw new Error("Invalid DOCTYPE");C=!0}R++,D=""}if(R!==0)throw new Error("Unclosed DOCTYPE")}return{entities:E,i:m}}let ue=(h,m)=>{for(;m<h.length&&/\s/.test(h[m]);)m++;return m};function Ae(h,m){m=ue(h,m);let E="";for(;m<h.length&&!/\s/.test(h[m])&&h[m]!=='"'&&h[m]!=="'";)E+=h[m],m++;if(Ny(E),m=ue(h,m),h.substring(m,m+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(h[m]==="%")throw new Error("Parameter entities are not supported");let R="";return[m,R]=Ht(h,m,"entity"),[E,R,--m]}function lt(h,m){m=ue(h,m);let E="";for(;m<h.length&&!/\s/.test(h[m]);)E+=h[m],m++;Ny(E),m=ue(h,m);let R=h.substring(m,m+6).toUpperCase();if(R!=="SYSTEM"&&R!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${R}"`);m+=R.length,m=ue(h,m);let _=null,C=null;if(R==="PUBLIC")[m,_]=Ht(h,m,"publicIdentifier"),h[m=ue(h,m)]!=='"'&&h[m]!=="'"||([m,C]=Ht(h,m,"systemIdentifier"));else if(R==="SYSTEM"&&([m,C]=Ht(h,m,"systemIdentifier"),!C))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:E,publicIdentifier:_,systemIdentifier:C,index:--m}}function Ht(h,m,E){let R="",_=h[m];if(_!=='"'&&_!=="'")throw new Error(`Expected quoted string, found "${_}"`);for(m++;m<h.length&&h[m]!==_;)R+=h[m],m++;if(h[m]!==_)throw new Error(`Unterminated ${E} value`);return[++m,R]}function WK(h,m){m=ue(h,m);let E="";for(;m<h.length&&!/\s/.test(h[m]);)E+=h[m],m++;if(!Ny(E))throw new Error(`Invalid element name: "${E}"`);let R="";if(h[m=ue(h,m)]==="E"&&vo(h,"MPTY",m))m+=4;else if(h[m]==="A"&&vo(h,"NY",m))m+=2;else{if(h[m]!=="(")throw new Error(`Invalid Element Expression, found "${h[m]}"`);for(m++;m<h.length&&h[m]!==")";)R+=h[m],m++;if(h[m]!==")")throw new Error("Unterminated content model")}return{elementName:E,contentModel:R.trim(),index:m}}function vo(h,m,E){for(let R=0;R<m.length;R++)if(m[R]!==h[E+R+1])return!1;return!0}function Ny(h){if(o(h))return h;throw new Error(`Invalid entity name ${h}`)}let KK=/^[-+]?0x[a-fA-F0-9]+$/,QK=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,YK={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},XK=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Zv(h){return typeof h=="function"?h:Array.isArray(h)?m=>{for(let E of h)if(typeof E=="string"&&m===E||E instanceof RegExp&&E.test(m))return!0}:()=>!1}class JK{constructor(m){this.options=m,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(E,R)=>String.fromCodePoint(Number.parseInt(R,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(E,R)=>String.fromCodePoint(Number.parseInt(R,16))}},this.addExternalEntities=ZK,this.parseXml=s5,this.parseTextData=e5,this.resolveNameSpace=t5,this.buildAttributesMap=n5,this.isItStopNode=c5,this.replaceEntitiesValue=i5,this.readStopNodeData=u5,this.saveTextToParentTag=a5,this.addChild=o5,this.ignoreAttributesFn=Zv(this.options.ignoreAttributes)}}function ZK(h){let m=Object.keys(h);for(let E=0;E<m.length;E++){let R=m[E];this.lastEntities[R]={regex:new RegExp("&"+R+";","g"),val:h[R]}}}function e5(h,m,E,R,_,C,D){if(h!==void 0&&(this.options.trimValues&&!R&&(h=h.trim()),h.length>0)){D||(h=this.replaceEntitiesValue(h));let P=this.options.tagValueProcessor(m,h,E,_,C);return P==null?h:typeof P!=typeof h||P!==h?P:this.options.trimValues||h.trim()===h?eR(h,this.options.parseTagValue,this.options.numberParseOptions):h}}function t5(h){if(this.options.removeNSPrefix){let m=h.split(":"),E=h.charAt(0)==="/"?"/":"";if(m[0]==="xmlns")return"";m.length===2&&(h=E+m[1])}return h}let r5=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function n5(h,m,E){if(this.options.ignoreAttributes!==!0&&typeof h=="string"){let R=s(h,r5),_=R.length,C={};for(let D=0;D<_;D++){let P=this.resolveNameSpace(R[D][1]);if(this.ignoreAttributesFn(P,m))continue;let N=R[D][4],M=this.options.attributeNamePrefix+P;if(P.length)if(this.options.transformAttributeName&&(M=this.options.transformAttributeName(M)),M==="__proto__"&&(M="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let J=this.options.attributeValueProcessor(P,N,m);C[M]=J==null?N:typeof J!=typeof N||J!==N?J:eR(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(C[M]=!0)}if(!Object.keys(C).length)return;if(this.options.attributesGroupName){let D={};return D[this.options.attributesGroupName]=C,D}return C}}let s5=function(h){h=h.replace(/\r\n?/g,`
`);let m=new Be("!xml"),E=m,R="",_="";for(let C=0;C<h.length;C++)if(h[C]==="<")if(h[C+1]==="/"){let D=Ro(h,">",C,"Closing Tag is not closed."),P=h.substring(C+2,D).trim();if(this.options.removeNSPrefix){let J=P.indexOf(":");J!==-1&&(P=P.substr(J+1))}this.options.transformTagName&&(P=this.options.transformTagName(P)),E&&(R=this.saveTextToParentTag(R,E,_));let N=_.substring(_.lastIndexOf(".")+1);if(P&&this.options.unpairedTags.indexOf(P)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${P}>`);let M=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(M=_.lastIndexOf(".",_.lastIndexOf(".")-1),this.tagsNodeStack.pop()):M=_.lastIndexOf("."),_=_.substring(0,M),E=this.tagsNodeStack.pop(),R="",C=D}else if(h[C+1]==="?"){let D=My(h,C,!1,"?>");if(!D)throw new Error("Pi Tag is not closed.");if(R=this.saveTextToParentTag(R,E,_),!(this.options.ignoreDeclaration&&D.tagName==="?xml"||this.options.ignorePiTags)){let P=new Be(D.tagName);P.add(this.options.textNodeName,""),D.tagName!==D.tagExp&&D.attrExpPresent&&(P[":@"]=this.buildAttributesMap(D.tagExp,_,D.tagName)),this.addChild(E,P,_,C)}C=D.closeIndex+1}else if(h.substr(C+1,3)==="!--"){let D=Ro(h,"-->",C+4,"Comment is not closed.");if(this.options.commentPropName){let P=h.substring(C+4,D-2);R=this.saveTextToParentTag(R,E,_),E.add(this.options.commentPropName,[{[this.options.textNodeName]:P}])}C=D}else if(h.substr(C+1,2)==="!D"){let D=te(h,C);this.docTypeEntities=D.entities,C=D.i}else if(h.substr(C+1,2)==="!["){let D=Ro(h,"]]>",C,"CDATA is not closed.")-2,P=h.substring(C+9,D);R=this.saveTextToParentTag(R,E,_);let N=this.parseTextData(P,E.tagname,_,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?E.add(this.options.cdataPropName,[{[this.options.textNodeName]:P}]):E.add(this.options.textNodeName,N),C=D+2}else{let D=My(h,C,this.options.removeNSPrefix),P=D.tagName,N=D.rawTagName,M=D.tagExp,J=D.attrExpPresent,V=D.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),E&&R&&E.tagname!=="!xml"&&(R=this.saveTextToParentTag(R,E,_,!1));let he=E;he&&this.options.unpairedTags.indexOf(he.tagname)!==-1&&(E=this.tagsNodeStack.pop(),_=_.substring(0,_.lastIndexOf("."))),P!==m.tagname&&(_+=_?"."+P:P);let Ce=C;if(this.isItStopNode(this.options.stopNodes,_,P)){let ge="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)P[P.length-1]==="/"?(P=P.substr(0,P.length-1),_=_.substr(0,_.length-1),M=P):M=M.substr(0,M.length-1),C=D.closeIndex;else if(this.options.unpairedTags.indexOf(P)!==-1)C=D.closeIndex;else{let Jr=this.readStopNodeData(h,N,V+1);if(!Jr)throw new Error(`Unexpected end of ${N}`);C=Jr.i,ge=Jr.tagContent}let Ye=new Be(P);P!==M&&J&&(Ye[":@"]=this.buildAttributesMap(M,_,P)),ge&&(ge=this.parseTextData(ge,P,_,!0,J,!0,!0)),_=_.substr(0,_.lastIndexOf(".")),Ye.add(this.options.textNodeName,ge),this.addChild(E,Ye,_,Ce)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){P[P.length-1]==="/"?(P=P.substr(0,P.length-1),_=_.substr(0,_.length-1),M=P):M=M.substr(0,M.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));let ge=new Be(P);P!==M&&J&&(ge[":@"]=this.buildAttributesMap(M,_,P)),this.addChild(E,ge,_,Ce),_=_.substr(0,_.lastIndexOf("."))}else{let ge=new Be(P);this.tagsNodeStack.push(E),P!==M&&J&&(ge[":@"]=this.buildAttributesMap(M,_,P)),this.addChild(E,ge,_,Ce),E=ge}R="",C=V}}else R+=h[C];return m.child};function o5(h,m,E,R){this.options.captureMetaData||(R=void 0);let _=this.options.updateTag(m.tagname,E,m[":@"]);_===!1||(typeof _=="string"&&(m.tagname=_),h.addChild(m,R))}let i5=function(h){if(this.options.processEntities){for(let m in this.docTypeEntities){let E=this.docTypeEntities[m];h=h.replace(E.regx,E.val)}for(let m in this.lastEntities){let E=this.lastEntities[m];h=h.replace(E.regex,E.val)}if(this.options.htmlEntities)for(let m in this.htmlEntities){let E=this.htmlEntities[m];h=h.replace(E.regex,E.val)}h=h.replace(this.ampEntity.regex,this.ampEntity.val)}return h};function a5(h,m,E,R){return h&&(R===void 0&&(R=m.child.length===0),(h=this.parseTextData(h,m.tagname,E,!1,!!m[":@"]&&Object.keys(m[":@"]).length!==0,R))!==void 0&&h!==""&&m.add(this.options.textNodeName,h),h=""),h}function c5(h,m,E){let R="*."+E;for(let _ in h){let C=h[_];if(R===C||m===C)return!0}return!1}function Ro(h,m,E,R){let _=h.indexOf(m,E);if(_===-1)throw new Error(R);return _+m.length-1}function My(h,m,E,R=">"){let _=(function(V,he,Ce=">"){let ge,Ye="";for(let Jr=he;Jr<V.length;Jr++){let ms=V[Jr];if(ge)ms===ge&&(ge="");else if(ms==='"'||ms==="'")ge=ms;else if(ms===Ce[0]){if(!Ce[1])return{data:Ye,index:Jr};if(V[Jr+1]===Ce[1])return{data:Ye,index:Jr}}else ms==="	"&&(ms=" ");Ye+=ms}})(h,m+1,R);if(!_)return;let C=_.data,D=_.index,P=C.search(/\s/),N=C,M=!0;P!==-1&&(N=C.substring(0,P),C=C.substring(P+1).trimStart());let J=N;if(E){let V=N.indexOf(":");V!==-1&&(N=N.substr(V+1),M=N!==_.data.substr(V+1))}return{tagName:N,tagExp:C,closeIndex:D,attrExpPresent:M,rawTagName:J}}function u5(h,m,E){let R=E,_=1;for(;E<h.length;E++)if(h[E]==="<")if(h[E+1]==="/"){let C=Ro(h,">",E,`${m} is not closed`);if(h.substring(E+2,C).trim()===m&&(_--,_===0))return{tagContent:h.substring(R,E),i:C};E=C}else if(h[E+1]==="?")E=Ro(h,"?>",E+1,"StopNode is not closed.");else if(h.substr(E+1,3)==="!--")E=Ro(h,"-->",E+3,"StopNode is not closed.");else if(h.substr(E+1,2)==="![")E=Ro(h,"]]>",E,"StopNode is not closed.")-2;else{let C=My(h,E,">");C&&((C&&C.tagName)===m&&C.tagExp[C.tagExp.length-1]!=="/"&&_++,E=C.closeIndex)}}function eR(h,m,E){if(m&&typeof h=="string"){let R=h.trim();return R==="true"||R!=="false"&&(function(_,C={}){if(C=Object.assign({},YK,C),!_||typeof _!="string")return _;let D=_.trim();if(C.skipLike!==void 0&&C.skipLike.test(D))return _;if(_==="0")return 0;if(C.hex&&KK.test(D))return(function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(D);if(D.search(/.+[eE].+/)!==-1)return(function(N,M,J){if(!J.eNotation)return N;let V=M.match(XK);if(V){let he=V[1]||"",Ce=V[3].indexOf("e")===-1?"E":"e",ge=V[2],Ye=he?N[ge.length+1]===Ce:N[ge.length]===Ce;return ge.length>1&&Ye?N:ge.length!==1||!V[3].startsWith(`.${Ce}`)&&V[3][0]!==Ce?J.leadingZeros&&!Ye?(M=(V[1]||"")+V[3],Number(M)):N:Number(M)}return N})(_,D,C);{let N=QK.exec(D);if(N){let M=N[1]||"",J=N[2],V=((P=N[3])&&P.indexOf(".")!==-1&&((P=P.replace(/0+$/,""))==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substring(0,P.length-1))),P),he=M?_[J.length+1]===".":_[J.length]===".";if(!C.leadingZeros&&(J.length>1||J.length===1&&!he))return _;{let Ce=Number(D),ge=String(Ce);if(Ce===0||Ce===-0)return Ce;if(ge.search(/[eE]/)!==-1)return C.eNotation?Ce:_;if(D.indexOf(".")!==-1)return ge==="0"||ge===V||ge===`${M}${V}`?Ce:_;let Ye=J?V:D;return J?Ye===ge||M+Ye===ge?Ce:_:Ye===ge||Ye===M+ge?Ce:_}}return _}var P})(h,E)}return h!==void 0?h:""}let Ly=Be.getMetaDataSymbol();function l5(h,m){return tR(h,m)}function tR(h,m,E){let R,_={};for(let C=0;C<h.length;C++){let D=h[C],P=d5(D),N="";if(N=E===void 0?P:E+"."+P,P===m.textNodeName)R===void 0?R=D[P]:R+=""+D[P];else{if(P===void 0)continue;if(D[P]){let M=tR(D[P],m,N),J=f5(M,m);D[Ly]!==void 0&&(M[Ly]=D[Ly]),D[":@"]?p5(M,D[":@"],N,m):Object.keys(M).length!==1||M[m.textNodeName]===void 0||m.alwaysCreateTextNode?Object.keys(M).length===0&&(m.alwaysCreateTextNode?M[m.textNodeName]="":M=""):M=M[m.textNodeName],_[P]!==void 0&&_.hasOwnProperty(P)?(Array.isArray(_[P])||(_[P]=[_[P]]),_[P].push(M)):m.isArray(P,N,J)?_[P]=[M]:_[P]=M}}}return typeof R=="string"?R.length>0&&(_[m.textNodeName]=R):R!==void 0&&(_[m.textNodeName]=R),_}function d5(h){let m=Object.keys(h);for(let E=0;E<m.length;E++){let R=m[E];if(R!==":@")return R}}function p5(h,m,E,R){if(m){let _=Object.keys(m),C=_.length;for(let D=0;D<C;D++){let P=_[D];R.isArray(P,E+"."+P,!0,!0)?h[P]=[m[P]]:h[P]=m[P]}}}function f5(h,m){let{textNodeName:E}=m,R=Object.keys(h).length;return R===0||!(R!==1||!h[E]&&typeof h[E]!="boolean"&&h[E]!==0)}class h5{constructor(m){this.externalEntities={},this.options=(function(E){return Object.assign({},X,E)})(m)}parse(m,E){if(typeof m!="string"){if(!m.toString)throw new Error("XML data is accepted in String or Bytes[] form.");m=m.toString()}if(E){E===!0&&(E={});let C=a(m,E);if(C!==!0)throw Error(`${C.err.msg}:${C.err.line}:${C.err.col}`)}let R=new JK(this.options);R.addExternalEntities(this.externalEntities);let _=R.parseXml(m);return this.options.preserveOrder||_===void 0?_:l5(_,this.options)}addEntity(m,E){if(E.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(m.indexOf("&")!==-1||m.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(E==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[m]=E}static getMetaDataSymbol(){return Be.getMetaDataSymbol()}}function m5(h,m){let E="";return m.format&&m.indentBy.length>0&&(E=`
`),rR(h,m,"",E)}function rR(h,m,E,R){let _="",C=!1;for(let D=0;D<h.length;D++){let P=h[D],N=g5(P);if(N===void 0)continue;let M="";if(M=E.length===0?N:`${E}.${N}`,N===m.textNodeName){let Ce=P[N];y5(M,m)||(Ce=m.tagValueProcessor(N,Ce),Ce=sR(Ce,m)),C&&(_+=R),_+=Ce,C=!1;continue}if(N===m.cdataPropName){C&&(_+=R),_+=`<![CDATA[${P[N][0][m.textNodeName]}]]>`,C=!1;continue}if(N===m.commentPropName){_+=R+`<!--${P[N][0][m.textNodeName]}-->`,C=!0;continue}if(N[0]==="?"){let Ce=nR(P[":@"],m),ge=N==="?xml"?"":R,Ye=P[N][0][m.textNodeName];Ye=Ye.length!==0?" "+Ye:"",_+=ge+`<${N}${Ye}${Ce}?>`,C=!0;continue}let J=R;J!==""&&(J+=m.indentBy);let V=R+`<${N}${nR(P[":@"],m)}`,he=rR(P[N],m,M,J);m.unpairedTags.indexOf(N)!==-1?m.suppressUnpairedNode?_+=V+">":_+=V+"/>":he&&he.length!==0||!m.suppressEmptyNode?he&&he.endsWith(">")?_+=V+`>${he}${R}</${N}>`:(_+=V+">",he&&R!==""&&(he.includes("/>")||he.includes("</"))?_+=R+m.indentBy+he+R:_+=he,_+=`</${N}>`):_+=V+"/>",C=!0}return _}function g5(h){let m=Object.keys(h);for(let E=0;E<m.length;E++){let R=m[E];if(h.hasOwnProperty(R)&&R!==":@")return R}}function nR(h,m){let E="";if(h&&!m.ignoreAttributes)for(let R in h){if(!h.hasOwnProperty(R))continue;let _=m.attributeValueProcessor(R,h[R]);_=sR(_,m),_===!0&&m.suppressBooleanAttributes?E+=` ${R.substr(m.attributeNamePrefix.length)}`:E+=` ${R.substr(m.attributeNamePrefix.length)}="${_}"`}return E}function y5(h,m){let E=(h=h.substr(0,h.length-m.textNodeName.length-1)).substr(h.lastIndexOf(".")+1);for(let R in m.stopNodes)if(m.stopNodes[R]===h||m.stopNodes[R]==="*."+E)return!0;return!1}function sR(h,m){if(h&&h.length>0&&m.processEntities)for(let E=0;E<m.entities.length;E++){let R=m.entities[E];h=h.replace(R.regex,R.val)}return h}let S5={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(h,m){return m},attributeValueProcessor:function(h,m){return m},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function hs(h){this.options=Object.assign({},S5,h),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Zv(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=_5),this.processTextOrObjNode=E5,this.options.format?(this.indentate=b5,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function E5(h,m,E,R){let _=this.j2x(h,E+1,R.concat(m));return h[this.options.textNodeName]!==void 0&&Object.keys(h).length===1?this.buildTextValNode(h[this.options.textNodeName],m,_.attrStr,E):this.buildObjectNode(_.val,m,_.attrStr,E)}function b5(h){return this.options.indentBy.repeat(h)}function _5(h){return!(!h.startsWith(this.options.attributeNamePrefix)||h===this.options.textNodeName)&&h.substr(this.attrPrefixLen)}hs.prototype.build=function(h){return this.options.preserveOrder?m5(h,this.options):(Array.isArray(h)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(h={[this.options.arrayNodeName]:h}),this.j2x(h,0,[]).val)},hs.prototype.j2x=function(h,m,E){let R="",_="",C=E.join(".");for(let D in h)if(Object.prototype.hasOwnProperty.call(h,D))if(h[D]===void 0)this.isAttribute(D)&&(_+="");else if(h[D]===null)this.isAttribute(D)||D===this.options.cdataPropName?_+="":D[0]==="?"?_+=this.indentate(m)+"<"+D+"?"+this.tagEndChar:_+=this.indentate(m)+"<"+D+"/"+this.tagEndChar;else if(h[D]instanceof Date)_+=this.buildTextValNode(h[D],D,"",m);else if(typeof h[D]!="object"){let P=this.isAttribute(D);if(P&&!this.ignoreAttributesFn(P,C))R+=this.buildAttrPairStr(P,""+h[D]);else if(!P)if(D===this.options.textNodeName){let N=this.options.tagValueProcessor(D,""+h[D]);_+=this.replaceEntitiesValue(N)}else _+=this.buildTextValNode(h[D],D,"",m)}else if(Array.isArray(h[D])){let P=h[D].length,N="",M="";for(let J=0;J<P;J++){let V=h[D][J];if(V!==void 0)if(V===null)D[0]==="?"?_+=this.indentate(m)+"<"+D+"?"+this.tagEndChar:_+=this.indentate(m)+"<"+D+"/"+this.tagEndChar;else if(typeof V=="object")if(this.options.oneListGroup){let he=this.j2x(V,m+1,E.concat(D));N+=he.val,this.options.attributesGroupName&&V.hasOwnProperty(this.options.attributesGroupName)&&(M+=he.attrStr)}else N+=this.processTextOrObjNode(V,D,m,E);else if(this.options.oneListGroup){let he=this.options.tagValueProcessor(D,V);he=this.replaceEntitiesValue(he),N+=he}else N+=this.buildTextValNode(V,D,"",m)}this.options.oneListGroup&&(N=this.buildObjectNode(N,D,M,m)),_+=N}else if(this.options.attributesGroupName&&D===this.options.attributesGroupName){let P=Object.keys(h[D]),N=P.length;for(let M=0;M<N;M++)R+=this.buildAttrPairStr(P[M],""+h[D][P[M]])}else _+=this.processTextOrObjNode(h[D],D,m,E);return{attrStr:R,val:_}},hs.prototype.buildAttrPairStr=function(h,m){return m=this.options.attributeValueProcessor(h,""+m),m=this.replaceEntitiesValue(m),this.options.suppressBooleanAttributes&&m==="true"?" "+h:" "+h+'="'+m+'"'},hs.prototype.buildObjectNode=function(h,m,E,R){if(h==="")return m[0]==="?"?this.indentate(R)+"<"+m+E+"?"+this.tagEndChar:this.indentate(R)+"<"+m+E+this.closeTag(m)+this.tagEndChar;{let _="</"+m+this.tagEndChar,C="";return m[0]==="?"&&(C="?",_=""),!E&&E!==""||h.indexOf("<")!==-1?this.options.commentPropName!==!1&&m===this.options.commentPropName&&C.length===0?this.indentate(R)+`<!--${h}-->`+this.newLine:this.indentate(R)+"<"+m+E+C+this.tagEndChar+h+this.indentate(R)+_:this.indentate(R)+"<"+m+E+C+">"+h+_}},hs.prototype.closeTag=function(h){let m="";return this.options.unpairedTags.indexOf(h)!==-1?this.options.suppressUnpairedNode||(m="/"):m=this.options.suppressEmptyNode?"/":`></${h}`,m},hs.prototype.buildTextValNode=function(h,m,E,R){if(this.options.cdataPropName!==!1&&m===this.options.cdataPropName)return this.indentate(R)+`<![CDATA[${h}]]>`+this.newLine;if(this.options.commentPropName!==!1&&m===this.options.commentPropName)return this.indentate(R)+`<!--${h}-->`+this.newLine;if(m[0]==="?")return this.indentate(R)+"<"+m+E+"?"+this.tagEndChar;{let _=this.options.tagValueProcessor(m,h);return _=this.replaceEntitiesValue(_),_===""?this.indentate(R)+"<"+m+E+this.closeTag(m)+this.tagEndChar:this.indentate(R)+"<"+m+E+">"+_+"</"+m+this.tagEndChar}},hs.prototype.replaceEntitiesValue=function(h){if(h&&h.length>0&&this.options.processEntities)for(let m=0;m<this.options.entities.length;m++){let E=this.options.entities[m];h=h.replace(E.regex,E.val)}return h};let T5={validate:a};IN.exports=e})()});var xN=b(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.parseXML=fse;var pse=AN(),tT=new pse.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});tT.addEntity("#xD","\r");tT.addEntity("#10",`
`);function fse(t){return tT.parse(t,!0)}});var Mp=b(Np=>{"use strict";var hse=xN();function mse(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function gse(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var kp=class{value;constructor(e){this.value=e}toString(){return gse(""+this.value)}},nT=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new kp(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(e,r,n,s){if(e[r]!=null){let o=s(),i=new t(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${mse(""+o)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Np,"parseXML",{enumerable:!0,get:function(){return hse.parseXML}});Np.XmlNode=nT;Np.XmlText=kp});var PN,DN,ON,Ks,Lp=T(()=>{PN=v(Mp());Kt();ye();DN=v(Z()),ON=v(rt());Hs();Y_();Ks=class extends vt{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new jo(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=U.of(e),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(u=>!!u.getMemberTraits().eventPayload)){let u={},d=Object.keys(o)[0];return o[d].isBlobSchema()?u[d]=r:u[d]=this.read(o[d],r),u}let a=(this.serdeContext?.utf8Encoder??ON.toUtf8)(r),c=this.parseXml(a);return this.readSchema(e,n?c[n]:c)}readSchema(e,r){let n=U.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),u=[],d=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[d],g=Array.isArray(l)?l:[l];for(let y of g)(y!=null||o)&&u.push(this.readSchema(c,y));return u}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),u=n.getValueSchema(),d;i?d=Array.isArray(r)?r:[r]:d=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",g=u.getMergedTraits().xmlName??"value";for(let y of d){let S=y[l],w=y[g];(w!=null||o)&&(a[S]=this.readSchema(u,w))}return a}if(n.isStructSchema()){let c=n.isUnionSchema(),u;c&&(u=new ha(r,a));for(let[d,l]of n.structIterator()){let g=l.getMergedTraits(),y=g.httpPayload?g.xmlName??l.getName():l.getMemberTraits().xmlName??d;c&&u.mark(y),r[y]!=null&&(a[d]=this.readSchema(l,r[y]))}return c&&u.writeUnknown(),a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,PN.parseXML)(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,DN.getValueFromTextNode)(o)}return{}}}});var kN,NN,$p,MN=T(()=>{Kt();ye();$t();kN=v(Z()),NN=v(Xe());Hs();Vc();$p=class extends vt{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=U.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??NN.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Er.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof ke?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),or(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,kN.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(s.isDocumentSchema())Array.isArray(r)?this.write(79,r,n):r instanceof Date?this.write(4,r,n):r instanceof Uint8Array?this.write(21,r,n):r&&typeof r=="object"?this.write(143,r,n):(this.writeKey(n),this.writeValue(String(r)));else if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",o.getMergedTraits().xmlName),d=i?`${n}${a}`:`${n}${u}.${a}`;this.write(o,c,d),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[u,d]of Object.entries(r)){if(d==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),g=a?`${n}${c}.${l}`:`${n}entry.${c}.${l}`,y=this.getKey("value",i.getMergedTraits().xmlName),S=a?`${n}${c}.${y}`:`${n}entry.${c}.${y}`;this.write(o,u,g),this.write(i,d,S),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object"){let o=!1;for(let[i,a]of fa(s,r)){if(r[i]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(i,a.getMergedTraits().xmlName),u=`${n}${c}`;this.write(a,r[i],u),o=!0}if(!o&&s.isUnionSchema()){let{$unknown:i}=r;if(Array.isArray(i)){let[a,c]=i,u=`${n}${a}`;this.write(15,c,u)}}}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${rn(e)}=`}writeValue(e){this.buffer+=rn(e)}}});var Qs,sT=T(()=>{Kt();ye();pa();Lp();MN();Qs=class extends Bn{options;serializer;deserializer;mixin=new _r;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new $p(r),this.deserializer=new Ks(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Mr(e.input)==="unit"||!s.body)&&(s.body="");let o=e.name.split("#")[1]??e.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,o=U.of(e.output),i={};if(n.statusCode>=300){let l=await Sr(n.body,r);l.byteLength>0&&Object.assign(i,await s.read(15,l)),await this.handleError(e,r,n,i,this.deserializeMetadata(n))}for(let l in n.headers){let g=n.headers[l];delete n.headers[l],n.headers[l.toLowerCase()]=g}let a=e.name.split("#")[1]??e.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await Sr(n.body,r);return u.byteLength>0&&Object.assign(i,await s.read(o,u,c)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(e,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,this.mixin.findQueryCompatibleError),l=U.of(u),g=W.for(u[1]).getErrorCtor(u)??Error,y=new g(c),S={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[w,A]of l.structIterator()){let I=A.getMergedTraits().xmlName??w,k=a[I]??s[I];S[w]=this.deserializer.readSchema(A,k)}throw this.mixin.decorateServiceException(Object.assign(y,d,{$fault:l.getMergedTraits().error,message:c},S),s)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Bp,LN=T(()=>{sT();Bp=class extends Qs{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var $N,BN,oT,UN,Up,iT=T(()=>{$N=v(Mp()),BN=v(Z());X_();oT=(t,e)=>Ip(t,e).then(r=>{if(r.length){let n;try{n=(0,$N.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,BN.getValueFromTextNode)(i)}return{}}),UN=async(t,e)=>{let r=await oT(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Up=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var Ut,aT,Fp,Sa,cT=T(()=>{Ut=v(Mp());Kt();ye();$t();aT=v(Z()),Fp=v(Xe());Hs();Vc();Sa=class extends vt{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=U.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Fp.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),o=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!o||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let i=Ut.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(e,n);for(let[d,l]of fa(e,r)){let g=r[d];if(g!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??d,this.writeSimple(l,g));continue}if(l.isListSchema())this.writeList(l,g,i,c);else if(l.isMapSchema())this.writeMap(l,g,i,c);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,g,c));else{let y=Ut.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,g,y,c),i.addChildNode(y)}}}let{$unknown:u}=r;if(u&&e.isUnionSchema()&&Array.isArray(u)&&Object.keys(r).length===1){let[d,l]=u,g=Ut.XmlNode.of(d);if(typeof l!="string")if(r instanceof Ut.XmlNode||r instanceof Ut.XmlText)i.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,l,g,c),i.addChildNode(g)}return c&&i.addAttribute(a,c),i}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let o=e.getMergedTraits(),i=e.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,u=!!o.xmlFlattened,[d,l]=this.getXmlnsAttribute(e,s),g=(y,S)=>{if(i.isListSchema())this.writeList(i,Array.isArray(S)?S:[S],y,l);else if(i.isMapSchema())this.writeMap(i,S,y,l);else if(i.isStructSchema()){let w=this.writeStruct(i,S,l);y.addChildNode(w.withName(u?o.xmlName??e.getMemberName():a.xmlName??"member"))}else{let w=Ut.XmlNode.of(u?o.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,S,w,l),y.addChildNode(w)}};if(u)for(let y of r)(c||y!=null)&&g(n,y);else{let y=Ut.XmlNode.of(o.xmlName??e.getMemberName());l&&y.addAttribute(d,l);for(let S of r)(c||S!=null)&&g(y,S);n.addChildNode(y)}}writeMap(e,r,n,s,o=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getKeySchema(),u=a.getMergedTraits().xmlName??"key",d=e.getValueSchema(),l=d.getMergedTraits(),g=l.xmlName??"value",y=!!l.sparse,S=!!i.xmlFlattened,[w,A]=this.getXmlnsAttribute(e,s),I=(k,L,B)=>{let X=Ut.XmlNode.of(u,L),[oe,Be]=this.getXmlnsAttribute(a,A);Be&&X.addAttribute(oe,Be),k.addChildNode(X);let te=Ut.XmlNode.of(g);d.isListSchema()?this.writeList(d,B,te,A):d.isMapSchema()?this.writeMap(d,B,te,A,!0):d.isStructSchema()?te=this.writeStruct(d,B,A):this.writeSimpleInto(d,B,te,A),k.addChildNode(te)};if(S){for(let[k,L]of Object.entries(r))if(y||L!=null){let B=Ut.XmlNode.of(i.xmlName??e.getMemberName());I(B,k,L),n.addChildNode(B)}}else{let k;o||(k=Ut.XmlNode.of(i.xmlName??e.getMemberName()),A&&k.addAttribute(w,A),n.addChildNode(k));for(let[L,B]of Object.entries(r))if(y||B!=null){let X=Ut.XmlNode.of("entry");I(X,L,B),(o?n:k).addChildNode(X)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=U.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Fp.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(or(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,aT.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,aT.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof ke?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Er.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let o=this.writeSimple(e,r),i=U.of(e),a=new Ut.XmlText(o),[c,u]=this.getXmlnsAttribute(i,s);u&&n.addAttribute(c,u),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var Ea,uT=T(()=>{Hs();Lp();cT();Ea=class extends vt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Sa(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Ks(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var qp,FN=T(()=>{Kt();ye();pa();iT();uT();qp=class extends Go{codec;serializer;deserializer;mixin=new _r;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new Ea(r),this.serializer=new Vo(this.codec.createSerializer(),r),this.deserializer=new Ho(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=U.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return typeof s.body=="string"&&s.headers["content-type"]===this.getDefaultContentType()&&!s.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=Up(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=U.of(a),d=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",l=W.for(a[1]).getErrorCtor(a)??Error,g=new l(d);await this.deserializeHttpMessage(a,r,n,s);let y={};for(let[S,w]of u.structIterator()){let A=w.getMergedTraits().xmlName??S,I=s.Error?.[A]??s[A];y[S]=this.codec.createDeserializer().readSchema(w,I)}throw this.mixin.decorateServiceException(Object.assign(g,c,{$fault:u.getMergedTraits().error,message:d},y),s)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(let[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var Kc={};yt(Kc,{AwsEc2QueryProtocol:()=>Bp,AwsJson1_0Protocol:()=>Dp,AwsJson1_1Protocol:()=>Op,AwsJsonRpcProtocol:()=>zs,AwsQueryProtocol:()=>Qs,AwsRestJsonProtocol:()=>Ws,AwsRestXmlProtocol:()=>qp,AwsSmithyRpcV2CborProtocol:()=>Rp,JsonCodec:()=>Vs,JsonShapeDeserializer:()=>ga,JsonShapeSerializer:()=>ya,XmlCodec:()=>Ea,XmlShapeDeserializer:()=>Ks,XmlShapeSerializer:()=>Sa,_toBool:()=>uN,_toNum:()=>lN,_toStr:()=>cN,awsExpectUnion:()=>vN,loadRestJsonErrorCode:()=>ma,loadRestXmlErrorCode:()=>Up,parseJsonBody:()=>zc,parseJsonErrorBody:()=>yN,parseXmlBody:()=>oT,parseXmlErrorBody:()=>UN});var Kn=T(()=>{aN();dN();_N();TN();Pp();wN();xp();J_();eT();RN();Wc();LN();sT();FN();uT();Lp();cT();iT()});var Br={};yt(Br,{AWSSDKSigV4Signer:()=>n_,AwsEc2QueryProtocol:()=>Bp,AwsJson1_0Protocol:()=>Dp,AwsJson1_1Protocol:()=>Op,AwsJsonRpcProtocol:()=>zs,AwsQueryProtocol:()=>Qs,AwsRestJsonProtocol:()=>Ws,AwsRestXmlProtocol:()=>qp,AwsSdkSigV4ASigner:()=>Fc,AwsSdkSigV4Signer:()=>wt,AwsSmithyRpcV2CborProtocol:()=>Rp,JsonCodec:()=>Vs,JsonShapeDeserializer:()=>ga,JsonShapeSerializer:()=>ya,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>$s,NODE_SIGV4A_CONFIG_OPTIONS:()=>sk,XmlCodec:()=>Ea,XmlShapeDeserializer:()=>Ks,XmlShapeSerializer:()=>Sa,_toBool:()=>uN,_toNum:()=>lN,_toStr:()=>cN,awsExpectUnion:()=>vN,emitWarningIfUnsupportedVersion:()=>Ms,getBearerTokenEnvKey:()=>cp,loadRestJsonErrorCode:()=>ma,loadRestXmlErrorCode:()=>Up,parseJsonBody:()=>zc,parseJsonErrorBody:()=>yN,parseXmlBody:()=>oT,parseXmlErrorBody:()=>UN,resolveAWSSDKSigV4Config:()=>Pk,resolveAwsSdkSigV4AConfig:()=>nk,resolveAwsSdkSigV4Config:()=>Gn,setCredentialFeature:()=>Ls,setFeature:()=>qO,setTokenFeature:()=>jO,state:()=>ap,validateSigningProperties:()=>ca});var Je=T(()=>{br();T_();Kn()});var Ys=b(ba=>{"use strict";var yse=(_t(),K(zo)),Sse=Ns(),Ese=be(),cn=(Je(),K(Br)),HN=void 0;function bse(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function _se(t){let e=yse.normalizeProvider(t.userAgentAppId??HN),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!bse(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var Tse=/\d{12}\.ddb/;async function wse(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&cn.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?cn.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):cn.setFeature(t,"RETRY_MODE_STANDARD","E"):cn.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let o=t.endpointV2;switch(String(o?.url?.hostname).match(Tse)&&cn.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":cn.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":cn.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":cn.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&cn.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))cn.setFeature(t,i,a)}}var qN="user-agent",lT="x-amz-user-agent",GN=" ",dT="/",Cse=/[^!$%&'*+\-.^_`|~\w]/g,vse=/[^!$%&'*+\-.^_`|~\w#]/g,jN="-",Rse=1024;function Ise(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=Rse){e.length?e+=","+n:e+=n;continue}break}return e}var VN=t=>(e,r)=>async n=>{let{request:s}=n;if(!Ese.HttpRequest.isInstance(s))return e(n);let{headers:o}=s,i=r?.userAgent?.map(Gp)||[],a=(await t.defaultUserAgentProvider()).map(Gp);await wse(r,t,n);let c=r;a.push(`m/${Ise(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Gp)||[],d=await t.userAgentAppId();d&&a.push(Gp(["app",`${d}`]));let l=Sse.getUserAgentPrefix(),g=(l?[l]:[]).concat([...a,...i,...u]).join(GN),y=[...a.filter(S=>S.startsWith("aws-sdk-")),...u].join(GN);return t.runtime!=="browser"?(y&&(o[lT]=o[lT]?`${o[qN]} ${y}`:y),o[qN]=g):o[lT]=g,e({...n,request:s})},Gp=t=>{let e=t[0].split(dT).map(i=>i.replace(Cse,jN)).join(dT),r=t[1]?.replace(vse,jN),n=e.indexOf(dT),s=e.substring(0,n),o=e.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},zN={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ase=t=>({applyToStack:e=>{e.add(VN(t),zN)}});ba.DEFAULT_UA_APP_ID=HN;ba.getUserAgentMiddlewareOptions=zN;ba.getUserAgentPlugin=Ase;ba.resolveUserAgentConfig=_se;ba.userAgentMiddleware=VN});var WN=b(_a=>{"use strict";var xse=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},Pse=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};_a.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(_a.SelectorType||(_a.SelectorType={}));_a.booleanSelector=xse;_a.numberSelector=Pse});var Rt=b(ft=>{"use strict";var Xs=WN(),jp=pt(),Dse=Fn(),YN="AWS_USE_DUALSTACK_ENDPOINT",XN="use_dualstack_endpoint",Ose=!1,kse={environmentVariableSelector:t=>Xs.booleanSelector(t,YN,Xs.SelectorType.ENV),configFileSelector:t=>Xs.booleanSelector(t,XN,Xs.SelectorType.CONFIG),default:!1},JN="AWS_USE_FIPS_ENDPOINT",ZN="use_fips_endpoint",Nse=!1,Mse={environmentVariableSelector:t=>Xs.booleanSelector(t,JN,Xs.SelectorType.ENV),configFileSelector:t=>Xs.booleanSelector(t,ZN,Xs.SelectorType.CONFIG),default:!1},Lse=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:jp.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:jp.normalizeProvider(s??!1)})},$se=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:i}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${i}`)},Bse=t=>{let e=jp.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=t;return Object.assign(t,{tls:o??!0,endpoint:r?jp.normalizeProvider(typeof r=="string"?s(r):r):()=>$se({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},eM="AWS_REGION",tM="region",Use={environmentVariableSelector:t=>t[eM],configFileSelector:t=>t[tM],default:()=>{throw new Error("Region is missing")}},Fse={preferredFile:"credentials"},KN=new Set,qse=(t,e=Dse.isValidHostLabel)=>{if(!KN.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else KN.add(t)},rM=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Gse=t=>rM(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,jse=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=Gse(n);return qse(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return rM(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},QN=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,Hse=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),Vse=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",zse=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},Wse=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=Vse(t,{partitionHash:o}),a=t in s?t:o[i]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=QN(s[a]?.variants,c),d=QN(o[i]?.variants,c),l=Hse(a,{regionHostname:u,partitionHostname:d});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let g=zse(l,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:e});return{partition:i,signingService:n,hostname:l,...g&&{signingRegion:g},...s[a]?.signingService&&{signingService:s[a].signingService}}};ft.CONFIG_USE_DUALSTACK_ENDPOINT=XN;ft.CONFIG_USE_FIPS_ENDPOINT=ZN;ft.DEFAULT_USE_DUALSTACK_ENDPOINT=Ose;ft.DEFAULT_USE_FIPS_ENDPOINT=Nse;ft.ENV_USE_DUALSTACK_ENDPOINT=YN;ft.ENV_USE_FIPS_ENDPOINT=JN;ft.NODE_REGION_CONFIG_FILE_OPTIONS=Fse;ft.NODE_REGION_CONFIG_OPTIONS=Use;ft.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=kse;ft.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Mse;ft.REGION_ENV_NAME=eM;ft.REGION_INI_NAME=tM;ft.getRegionInfo=Wse;ft.resolveCustomEndpointsConfig=Lse;ft.resolveEndpointsConfig=Bse;ft.resolveRegionConfig=jse});var Xo=b(Hp=>{"use strict";var Kse=be(),nM="content-length";function sM(t){return e=>async r=>{let n=r.request;if(Kse.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(nM)===-1)try{let i=t(s);n.headers={...n.headers,[nM]:String(i)}}catch{}}return e({...r,request:n})}}var oM={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Qse=t=>({applyToStack:e=>{e.add(sM(t.bodyLengthChecker),oM)}});Hp.contentLengthMiddleware=sM;Hp.contentLengthMiddlewareOptions=oM;Hp.getContentLengthPlugin=Qse});var fT=b(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.getHomeDir=void 0;var Yse=require("os"),Xse=require("path"),pT={},Jse=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Zse=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${Xse.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=Jse();return pT[s]||(pT[s]=(0,Yse.homedir)()),pT[s]};Vp.getHomeDir=Zse});var hT=b(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.getSSOTokenFilepath=void 0;var eoe=require("crypto"),toe=require("path"),roe=fT(),noe=t=>{let r=(0,eoe.createHash)("sha1").update(t).digest("hex");return(0,toe.join)((0,roe.getHomeDir)(),".aws","sso","cache",`${r}.json`)};zp.getSSOTokenFilepath=noe});var iM=b(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.getSSOTokenFromFile=Js.tokenIntercept=void 0;var soe=require("fs/promises"),ooe=hT();Js.tokenIntercept={};var ioe=async t=>{if(Js.tokenIntercept[t])return Js.tokenIntercept[t];let e=(0,ooe.getSSOTokenFilepath)(t),r=await(0,soe.readFile)(e,"utf8");return JSON.parse(r)};Js.getSSOTokenFromFile=ioe});var aM=b(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.readFile=ir.fileIntercept=ir.filePromises=void 0;var aoe=require("node:fs/promises");ir.filePromises={};ir.fileIntercept={};var coe=(t,e)=>ir.fileIntercept[t]!==void 0?ir.fileIntercept[t]:((!ir.filePromises[t]||e?.ignoreCache)&&(ir.filePromises[t]=(0,aoe.readFile)(t,"utf8")),ir.filePromises[t]);ir.readFile=coe});var un=b(Ft=>{"use strict";var Qc=fT(),cM=hT(),mT=iM(),Wp=require("path"),Kp=xs(),Ta=aM(),lM="AWS_PROFILE",dM="default",uoe=t=>t.profile||process.env[lM]||dM,Jo=".",loe=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Jo);return r===-1?!1:Object.values(Kp.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(Jo),o=r.substring(0,s)===Kp.IniSectionType.PROFILE?r.substring(s+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),doe="AWS_CONFIG_FILE",pM=()=>process.env[doe]||Wp.join(Qc.getHomeDir(),".aws","config"),poe="AWS_SHARED_CREDENTIALS_FILE",foe=()=>process.env[poe]||Wp.join(Qc.getHomeDir(),".aws","credentials"),hoe=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,moe=["__proto__","profile __proto__"],gT=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),c=hoe.exec(a);if(c){let[,u,,d]=c;Object.values(Kp.IniSectionType).includes(u)&&(r=[u,d].join(Jo))}else r=a;if(moe.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let d=n?[n,c].join(Jo):c;e[r][d]=u}}}}return e},uM=()=>({}),fM=async(t={})=>{let{filepath:e=foe(),configFilepath:r=pM()}=t,n=Qc.getHomeDir(),s="~/",o=e;e.startsWith(s)&&(o=Wp.join(n,e.slice(2)));let i=r;r.startsWith(s)&&(i=Wp.join(n,r.slice(2)));let a=await Promise.all([Ta.readFile(i,{ignoreCache:t.ignoreCache}).then(gT).then(loe).catch(uM),Ta.readFile(o,{ignoreCache:t.ignoreCache}).then(gT).catch(uM)]);return{configFile:a[0],credentialsFile:a[1]}},goe=t=>Object.entries(t).filter(([e])=>e.startsWith(Kp.IniSectionType.SSO_SESSION+Jo)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Jo)+1)]:n}),{}),yoe=()=>({}),Soe=async(t={})=>Ta.readFile(t.configFilepath??pM()).then(gT).then(goe).catch(yoe),Eoe=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},boe=async t=>{let e=await fM(t);return Eoe(e.configFile,e.credentialsFile)},_oe={getFileRecord(){return Ta.fileIntercept},interceptFile(t,e){Ta.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return mT.tokenIntercept},interceptToken(t,e){mT.tokenIntercept[t]=e}};Object.defineProperty(Ft,"getSSOTokenFromFile",{enumerable:!0,get:function(){return mT.getSSOTokenFromFile}});Object.defineProperty(Ft,"readFile",{enumerable:!0,get:function(){return Ta.readFile}});Ft.CONFIG_PREFIX_SEPARATOR=Jo;Ft.DEFAULT_PROFILE=dM;Ft.ENV_PROFILE=lM;Ft.externalDataInterceptor=_oe;Ft.getProfileName=uoe;Ft.loadSharedConfigFiles=fM;Ft.loadSsoSessionData=Soe;Ft.parseKnownFiles=boe;Object.keys(Qc).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ft,t)&&Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return Qc[t]}})});Object.keys(cM).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ft,t)&&Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return cM[t]}})})});var Ur=b(gM=>{"use strict";var Yc=Ct(),hM=un();function mM(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var Toe=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new Yc.CredentialsProviderError(r.message||`Not found in ENV: ${mM(t.toString())}`,{logger:e?.logger})}},woe=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=hM.getProfileName(r),{configFile:s,credentialsFile:o}=await hM.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},c=e==="config"?{...i,...a}:{...a,...i};try{let d=t(c,e==="config"?s:o);if(d===void 0)throw new Error;return d}catch(u){throw new Yc.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${mM(t.toString())}`,{logger:r.logger})}},Coe=t=>typeof t=="function",voe=t=>Coe(t)?async()=>await t():Yc.fromStatic(t),Roe=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return Yc.memoize(Yc.chain(Toe(t,i),woe(e,n),voe(r)))};gM.loadConfig=Roe});var bM=b(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.getEndpointUrlConfig=void 0;var yM=un(),SM="AWS_ENDPOINT_URL",EM="endpoint_url",Ioe=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[SM,...r].join("_")];if(n)return n;let s=e[SM];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(yM.CONFIG_PREFIX_SEPARATOR)];if(s){let o=t.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),EM].join(yM.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=e[EM];if(n)return n},default:void 0});Qp.getEndpointUrlConfig=Ioe});var _M=b(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.getEndpointFromConfig=void 0;var Aoe=Ur(),xoe=bM(),Poe=async t=>(0,Aoe.loadConfig)((0,xoe.getEndpointUrlConfig)(t??""))();Yp.getEndpointFromConfig=Poe});var Fr=b(Qn=>{"use strict";var wM=_M(),TM=on(),Doe=(_t(),K(zo)),Xp=pt(),Ooe=Cb(),koe=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Boe(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!$oe(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Noe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Moe=/(\d+\.){3}\d+/,Loe=/\.\./,$oe=t=>Noe.test(t)&&!Moe.test(t)&&!Loe.test(t),Boe=t=>{let[e,r,n,,,s]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},Uoe=(t,e,r,n=!1)=>{let s=async()=>{let o;return n?o=r.clientContextParams?.[t]??r[t]??r[e]:o=r[t]??r[e],typeof o=="function"?o():o};return t==="credentialScope"||e==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await s();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:a,port:c,path:u}=o;return`${i}//${a}${c?":"+c:""}${u}`}}return o}:s},yT=t=>typeof t=="object"?"url"in t?TM.parseUrl(t.url):t:TM.parseUrl(t),CM=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await wM.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(yT(i)),r.isCustomEndpoint=!0)}let s=await vM(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},vM=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=t[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await Uoe(i.name,o,r,i.type!=="builtInParams")();break;case"operationContextParams":n[o]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await koe(n),n},RM=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&Doe.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await CM(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=Xp.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},IM={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ooe.serializerMiddlewareOption.name},Foe=(t,e)=>({applyToStack:r=>{r.addRelativeTo(RM({config:t,instructions:e}),IM)}}),qoe=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,o=r!=null?async()=>yT(await Xp.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:o,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Xp.normalizeProvider(n??!1),useFipsEndpoint:Xp.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=wM.getEndpointFromConfig(t.serviceId)),c),a},Goe=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Qn.endpointMiddleware=RM;Qn.endpointMiddlewareOptions=IM;Qn.getEndpointFromInstructions=CM;Qn.getEndpointPlugin=Foe;Qn.resolveEndpointConfig=qoe;Qn.resolveEndpointRequiredConfig=Goe;Qn.resolveParams=vM;Qn.toEndpointV1=yT});var ET=b(Zs=>{"use strict";var joe=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Hoe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Voe=["TimeoutError","RequestTimeout","RequestTimeoutException"],zoe=[500,502,503,504],Woe=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Koe=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],AM=t=>t?.$retryable!==void 0,Qoe=t=>joe.includes(t.name),xM=t=>t.$metadata?.clockSkewCorrected,PM=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Yoe=t=>t.$metadata?.httpStatusCode===429||Hoe.includes(t.name)||t.$retryable?.throttling==!0,ST=(t,e=0)=>AM(t)||xM(t)||Voe.includes(t.name)||Woe.includes(t?.code||"")||Koe.includes(t?.code||"")||zoe.includes(t.$metadata?.httpStatusCode||0)||PM(t)||t.cause!==void 0&&e<=10&&ST(t.cause,e+1),Xoe=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!ST(t)}return!1};Zs.isBrowserNetworkError=PM;Zs.isClockSkewCorrectedError=xM;Zs.isClockSkewError=Qoe;Zs.isRetryableByTrait=AM;Zs.isServerError=Xoe;Zs.isThrottlingError=Yoe;Zs.isTransientError=ST});var eo=b(Ve=>{"use strict";var Joe=ET();Ve.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Ve.RETRY_MODES||(Ve.RETRY_MODES={}));var bT=3,Zoe=Ve.RETRY_MODES.STANDARD,Jp=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>t.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Joe.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},Xc=100,CT=20*1e3,OM=500,_T=500,kM=5,NM=10,MM=1,eie="amz-sdk-invocation-id",tie="amz-sdk-request",rie=()=>{let t=Xc;return{computeNextBackoffDelay:n=>Math.floor(Math.min(CT,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},DM=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(CT,t),getRetryCost:()=>r}),Jc=class{maxAttempts;mode=Ve.RETRY_MODES.STANDARD;capacity=_T;retryBackoffStrategy=rie();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return DM({retryDelay:Xc,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?OM:Xc);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,DM({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(_T,this.capacity+(e.getRetryCost()??MM))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${bT}`),bT}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?NM:kM}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},TT=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ve.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Jp,this.standardRetryStrategy=new Jc(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},wT=class extends Jc{computeNextBackoffDelay;constructor(e,r=Xc){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ve.AdaptiveRetryStrategy=TT;Ve.ConfiguredRetryStrategy=wT;Ve.DEFAULT_MAX_ATTEMPTS=bT;Ve.DEFAULT_RETRY_DELAY_BASE=Xc;Ve.DEFAULT_RETRY_MODE=Zoe;Ve.DefaultRateLimiter=Jp;Ve.INITIAL_RETRY_TOKENS=_T;Ve.INVOCATION_ID_HEADER=eie;Ve.MAXIMUM_RETRY_DELAY=CT;Ve.NO_RETRY_INCREMENT=MM;Ve.REQUEST_HEADER=tie;Ve.RETRY_COST=kM;Ve.StandardRetryStrategy=Jc;Ve.THROTTLING_RETRY_DELAY_BASE=OM;Ve.TIMEOUT_RETRY_COST=NM});var LM=b(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.isStreamingPayload=void 0;var nie=require("stream"),sie=t=>t?.body instanceof nie.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Zp.isStreamingPayload=sie});var ar=b(nt=>{"use strict";var Ge=eo(),wa=be(),to=ET(),BM=v0(),$M=pt(),oie=Z(),iie=LM(),aie=(t,e)=>{let r=t,n=Ge.NO_RETRY_INCREMENT,s=Ge.RETRY_COST,o=Ge.TIMEOUT_RETRY_COST,i=t,a=l=>l.name==="TimeoutError"?o:s,c=l=>a(l)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");let g=a(l);return i-=g,g},releaseRetryTokens:l=>{i+=l??n,i=Math.min(i,r)}})},UM=(t,e)=>Math.floor(Math.min(Ge.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),FM=t=>t?to.isRetryableByTrait(t)||to.isClockSkewError(t)||to.isThrottlingError(t)||to.isTransientError(t):!1,qM=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),ef=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ge.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??FM,this.delayDecider=r?.delayDecider??UM,this.retryQuota=r?.retryQuota??aie(Ge.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Ge.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(wa.HttpRequest.isInstance(c)&&(c.headers[Ge.INVOCATION_ID_HEADER]=BM.v4());;)try{wa.HttpRequest.isInstance(c)&&(c.headers[Ge.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:d}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),d.$metadata.attempts=o+1,d.$metadata.totalRetryDelay=i,{response:u,output:d}}catch(u){let d=qM(u);if(o++,this.shouldRetry(d,o,a)){s=this.retryQuota.retrieveRetryTokens(d);let l=this.delayDecider(to.isThrottlingError(d)?Ge.THROTTLING_RETRY_DELAY_BASE:Ge.DEFAULT_RETRY_DELAY_BASE,o),g=cie(d.$response),y=Math.max(g||0,l);i+=y,await new Promise(S=>setTimeout(S,y));continue}throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=o,d.$metadata.totalRetryDelay=i,d}}},cie=t=>{if(!wa.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},vT=class extends ef{rateLimiter;constructor(e,r){let{rateLimiter:n,...s}=r??{};super(e,s),this.rateLimiter=n??new Ge.DefaultRateLimiter,this.mode=Ge.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},RT="AWS_MAX_ATTEMPTS",IT="max_attempts",uie={environmentVariableSelector:t=>{let e=t[RT];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${RT} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[IT];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${IT} mast be a number, got "${e}"`);return r},default:Ge.DEFAULT_MAX_ATTEMPTS},lie=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=$M.normalizeProvider(n??Ge.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await $M.normalizeProvider(r)()===Ge.RETRY_MODES.ADAPTIVE?new Ge.AdaptiveRetryStrategy(s):new Ge.StandardRetryStrategy(s))})},GM="AWS_RETRY_MODE",jM="retry_mode",die={environmentVariableSelector:t=>t[GM],configFileSelector:t=>t[jM],default:Ge.DEFAULT_RETRY_MODE},HM=()=>t=>async e=>{let{request:r}=e;return wa.HttpRequest.isInstance(r)&&(delete r.headers[Ge.INVOCATION_ID_HEADER],delete r.headers[Ge.REQUEST_HEADER]),t(e)},VM={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},pie=t=>({applyToStack:e=>{e.addRelativeTo(HM(),VM)}}),zM=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(fie(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:d}=n,l=wa.HttpRequest.isInstance(d);for(l&&(d.headers[Ge.INVOCATION_ID_HEADER]=BM.v4());;)try{l&&(d.headers[Ge.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:g,output:y}=await e(n);return s.recordSuccess(i),y.$metadata.attempts=c+1,y.$metadata.totalRetryDelay=u,{response:g,output:y}}catch(g){let y=hie(g);if(a=qM(g),l&&iie.isStreamingPayload(d))throw(r.logger instanceof oie.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,y)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();let S=i.getRetryDelay();u+=S,await new Promise(w=>setTimeout(w,S))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},fie=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",hie=t=>{let e={error:t,errorType:mie(t)},r=KM(t.$response);return r&&(e.retryAfterHint=r),e},mie=t=>to.isThrottlingError(t)?"THROTTLING":to.isTransientError(t)?"TRANSIENT":to.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",WM={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},gie=t=>({applyToStack:e=>{e.add(zM(t),WM)}}),KM=t=>{if(!wa.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};nt.AdaptiveRetryStrategy=vT;nt.CONFIG_MAX_ATTEMPTS=IT;nt.CONFIG_RETRY_MODE=jM;nt.ENV_MAX_ATTEMPTS=RT;nt.ENV_RETRY_MODE=GM;nt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=uie;nt.NODE_RETRY_MODE_CONFIG_OPTIONS=die;nt.StandardRetryStrategy=ef;nt.defaultDelayDecider=UM;nt.defaultRetryDecider=FM;nt.getOmitRetryHeadersPlugin=pie;nt.getRetryAfterHint=KM;nt.getRetryPlugin=gie;nt.omitRetryHeadersMiddleware=HM;nt.omitRetryHeadersMiddlewareOptions=VM;nt.resolveRetryConfig=lie;nt.retryMiddleware=zM;nt.retryMiddlewareOptions=WM});var xT=b(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.resolveHttpAuthSchemeConfig=ro.defaultSecretsManagerHttpAuthSchemeProvider=ro.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var yie=(Je(),K(Br)),AT=pt(),Sie=async(t,e,r)=>({operation:(0,AT.getSmithyContext)(e).operation,region:await(0,AT.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ro.defaultSecretsManagerHttpAuthSchemeParametersProvider=Sie;function Eie(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var bie=t=>{let e=[];switch(t.operation){default:e.push(Eie(t))}return e};ro.defaultSecretsManagerHttpAuthSchemeProvider=bie;var _ie=t=>{let e=(0,yie.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,AT.normalizeProvider)(t.authSchemePreference??[])})};ro.resolveHttpAuthSchemeConfig=_ie});var QM=b((RMe,Tie)=>{Tie.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.975.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.1","@aws-sdk/credential-provider-node":"^3.972.1","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.2","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.1","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.11","@smithy/middleware-retry":"^4.4.27","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.12","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.26","@smithy/util-defaults-mode-node":"^4.2.29","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var PT=b(no=>{"use strict";var wie=(br(),K(qn)),Cie=Ct(),YM="AWS_ACCESS_KEY_ID",XM="AWS_SECRET_ACCESS_KEY",JM="AWS_SESSION_TOKEN",ZM="AWS_CREDENTIAL_EXPIRATION",eL="AWS_CREDENTIAL_SCOPE",tL="AWS_ACCOUNT_ID",vie=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[YM],r=process.env[XM],n=process.env[JM],s=process.env[ZM],o=process.env[eL],i=process.env[tL];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return wie.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new Cie.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};no.ENV_ACCOUNT_ID=tL;no.ENV_CREDENTIAL_SCOPE=eL;no.ENV_EXPIRATION=ZM;no.ENV_KEY=YM;no.ENV_SECRET=XM;no.ENV_SESSION=JM;no.fromEnv=vie});var eu=b(It=>{"use strict";var ln=Ct(),Rie=require("url"),Iie=require("buffer"),Aie=require("http"),MT=Ur(),xie=on();function Zc(t){return new Promise((e,r)=>{let n=Aie.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new ln.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new ln.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new ln.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{e(Iie.Buffer.concat(i)),n.destroy()})}),n.end()})}var oL=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",iL=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),aL=1e3,cL=0,LT=({maxRetries:t=cL,timeout:e=aL})=>({maxRetries:t,timeout:e}),OT=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},tf="AWS_CONTAINER_CREDENTIALS_FULL_URI",rf="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",kT="AWS_CONTAINER_AUTHORIZATION_TOKEN",Pie=(t={})=>{let{timeout:e,maxRetries:r}=LT(t);return()=>OT(async()=>{let n=await Mie({logger:t.logger}),s=JSON.parse(await Die(e,n));if(!oL(s))throw new ln.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return iL(s)},r)},Die=async(t,e)=>(process.env[kT]&&(e.headers={...e.headers,Authorization:process.env[kT]}),(await Zc({...e,timeout:t})).toString()),Oie="169.254.170.2",kie={localhost:!0,"127.0.0.1":!0},Nie={"http:":!0,"https:":!0},Mie=async({logger:t})=>{if(process.env[rf])return{hostname:Oie,path:process.env[rf]};if(process.env[tf]){let e=Rie.parse(process.env[tf]);if(!e.hostname||!(e.hostname in kie))throw new ln.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in Nie))throw new ln.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new ln.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${rf} or ${tf} environment variable is set`,{tryNextLink:!1,logger:t})},NT=class t extends ln.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};It.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(It.Endpoint||(It.Endpoint={}));var Lie="AWS_EC2_METADATA_SERVICE_ENDPOINT",$ie="ec2_metadata_service_endpoint",Bie={environmentVariableSelector:t=>t[Lie],configFileSelector:t=>t[$ie],default:void 0},Ca;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(Ca||(Ca={}));var Uie="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Fie="ec2_metadata_service_endpoint_mode",qie={environmentVariableSelector:t=>t[Uie],configFileSelector:t=>t[Fie],default:Ca.IPv4},uL=async()=>xie.parseUrl(await Gie()||await jie()),Gie=async()=>MT.loadConfig(Bie)(),jie=async()=>{let t=await MT.loadConfig(qie)();switch(t){case Ca.IPv4:return It.Endpoint.IPv4;case Ca.IPv6:return It.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(Ca)}`)}},Hie=300,Vie=300,zie="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",rL=(t,e)=>{let r=Hie+Math.floor(Math.random()*Vie),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+zie);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},Wie=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=rL(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=rL(n,r);else throw o}return n=s,s}},lL="/latest/meta-data/iam/security-credentials/",Kie="/latest/api/token",DT="AWS_EC2_METADATA_V1_DISABLED",nL="ec2_metadata_v1_disabled",sL="x-aws-ec2-metadata-token",Qie=(t={})=>Wie(Yie(t),{logger:t.logger}),Yie=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:o}=LT(t),i=async(a,c)=>{if(e||c.headers?.[sL]==null){let l=!1,g=!1,y=await MT.loadConfig({environmentVariableSelector:S=>{let w=S[DT];if(g=!!w&&w!=="false",w===void 0)throw new ln.CredentialsProviderError(`${DT} not set in env, checking config file next.`,{logger:t.logger});return g},configFileSelector:S=>{let w=S[nL];return l=!!w&&w!=="false",l},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||y){let S=[];throw t.ec2MetadataV1Disabled&&S.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&S.push(`config file profile (${nL})`),g&&S.push(`process environment variable (${DT})`),new NT(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${S.join(", ")}].`)}}let d=(await OT(async()=>{let l;try{l=await Jie(c)}catch(g){throw g.statusCode===401&&(e=!1),g}return l},a)).trim();return OT(async()=>{let l;try{l=await Zie(d,c,t)}catch(g){throw g.statusCode===401&&(e=!1),g}return l},a)};return async()=>{let a=await uL();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let c;try{c=(await Xie({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[sL]:c},timeout:s})}}},Xie=async t=>Zc({...t,path:Kie,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Jie=async t=>(await Zc({...t,path:lL})).toString(),Zie=async(t,e,r)=>{let n=JSON.parse((await Zc({...e,path:lL+t})).toString());if(!oL(n))throw new ln.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return iL(n)};It.DEFAULT_MAX_RETRIES=cL;It.DEFAULT_TIMEOUT=aL;It.ENV_CMDS_AUTH_TOKEN=kT;It.ENV_CMDS_FULL_URI=tf;It.ENV_CMDS_RELATIVE_URI=rf;It.fromContainerMetadata=Pie;It.fromInstanceMetadata=Qie;It.getInstanceMetadataEndpoint=uL;It.httpRequest=Zc;It.providerConfigFromInit=LT});var dL=b(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.checkUrl=void 0;var eae=Ct(),tae="169.254.170.2",rae="169.254.170.23",nae="[fd00:ec2::23]",sae=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===tae||t.hostname===rae||t.hostname===nae)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new eae.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};nf.checkUrl=sae});var pL=b(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.createGetRequest=cae;sf.getCredentials=uae;var $T=Ct(),oae=be(),iae=Z(),aae=$d();function cae(t){return new oae.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function uae(t,e){let n=await(0,aae.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new $T.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,iae.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new $T.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new $T.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var fL=b(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.retryWrapper=void 0;var lae=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(o=>setTimeout(o,r))}return await t()};of.retryWrapper=lae});var gL=b(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.fromHttp=void 0;var dae=(na(),K(ra)),pae=(br(),K(qn)),fae=Ln(),hL=Ct(),hae=dae.__importDefault(require("fs/promises")),mae=dL(),mL=pL(),gae=fL(),yae="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Sae="http://169.254.170.2",Eae="AWS_CONTAINER_CREDENTIALS_FULL_URI",bae="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",_ae="AWS_CONTAINER_AUTHORIZATION_TOKEN",Tae=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[yae],n=t.awsContainerCredentialsFullUri??process.env[Eae],s=t.awsContainerAuthorizationToken??process.env[_ae],o=t.awsContainerAuthorizationTokenFile??process.env[bae],i=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${Sae}${r}`;else throw new hL.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,mae.checkUrl)(a,t.logger);let c=fae.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,gae.retryWrapper)(async()=>{let u=(0,mL.createGetRequest)(a);s?u.headers.Authorization=s:o&&(u.headers.Authorization=(await hae.default.readFile(o)).toString());try{let d=await c.handle(u);return(0,mL.getCredentials)(d.response).then(l=>(0,pae.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(d){throw new hL.CredentialsProviderError(String(d),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};af.fromHttp=Tae});var BT=b(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.fromHttp=void 0;var wae=gL();Object.defineProperty(cf,"fromHttp",{enumerable:!0,get:function(){return wae.fromHttp}})});function Cae(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function vae(t){return{schemeId:"smithy.api#noAuth"}}var tu,yL,SL,EL,UT=T(()=>{Je();tu=v(pt()),yL=async(t,e,r)=>({operation:(0,tu.getSmithyContext)(e).operation,region:await(0,tu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});SL=t=>{let e=[];return t.operation==="CreateToken"?e.push(vae(t)):e.push(Cae(t)),e},EL=t=>{let e=Gn(t);return Object.assign(e,{authSchemePreference:(0,tu.normalizeProvider)(t.authSchemePreference??[])})}});var bL,_L,FT=T(()=>{bL=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),_L={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var va,uf=T(()=>{va={name:"@aws-sdk/nested-clients",version:"3.974.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var ei=b(Zo=>{"use strict";var TL=require("os"),qT=require("process"),Iae=Ys(),wL={isCrtAvailable:!1},Aae=()=>wL.isCrtAvailable?["md/crt-avail"]:null,CL=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${TL.platform()}`,TL.release()],["lang/js"],["md/nodejs",`${qT.versions.node}`]],s=Aae();s&&n.push(s),t&&n.push([`api/${t}`,e]),qT.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${qT.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},xae=CL,vL="AWS_SDK_UA_APP_ID",RL="sdk_ua_app_id",Pae="sdk-ua-app-id",Dae={environmentVariableSelector:t=>t[vL],configFileSelector:t=>t[RL]??t[Pae],default:Iae.DEFAULT_UA_APP_ID};Zo.NODE_APP_ID_CONFIG_OPTIONS=Dae;Zo.UA_APP_ID_ENV_NAME=vL;Zo.UA_APP_ID_INI_NAME=RL;Zo.createDefaultUserAgentProvider=CL;Zo.crtAvailability=wL;Zo.defaultUserAgent=xae});var ti=b(xL=>{"use strict";var GT=Ki(),Oae=rt(),kae=require("buffer"),IL=require("crypto"),jT=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(Oae.toUint8Array(AL(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?IL.createHmac(this.algorithmIdentifier,AL(this.secret)):IL.createHash(this.algorithmIdentifier)}};function AL(t,e){return kae.Buffer.isBuffer(t)?t:typeof t=="string"?GT.fromString(t,e):ArrayBuffer.isView(t)?GT.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):GT.fromArrayBuffer(t)}xL.Hash=jT});var ri=b(PL=>{"use strict";var HT=require("node:fs"),Nae=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof HT.ReadStream){if(t.path!=null)return HT.lstatSync(t.path).size;if(typeof t.fd=="number")return HT.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};PL.calculateBodyLength=Nae});var ni=b(NL=>{"use strict";var Mae=Rt(),DL=Ur(),Lae=Ct(),$ae="AWS_EXECUTION_ENV",OL="AWS_REGION",kL="AWS_DEFAULT_REGION",Bae="AWS_EC2_METADATA_DISABLED",Uae=["in-region","cross-region","mobile","standard","legacy"],Fae="/latest/meta-data/placement/region",qae="AWS_DEFAULTS_MODE",Gae="defaults_mode",jae={environmentVariableSelector:t=>t[qae],configFileSelector:t=>t[Gae],default:"legacy"},Hae=({region:t=DL.loadConfig(Mae.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=DL.loadConfig(jae)}={})=>Lae.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return Vae(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Uae.join(", ")}, got ${r}`)}}),Vae=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await zae();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},zae=async()=>{if(process.env[$ae]&&(process.env[OL]||process.env[kL]))return process.env[OL]??process.env[kL];if(!process.env[Bae])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>v(eu())),r=await t();return(await e({...r,path:Fae})).toString()}catch{}};NL.resolveDefaultsModeConfig=Hae});var HL,wr,ML,ru,Ra,Ia,Yn,VT,zT,LL,$L,BL,VL,zL,Tr,UL,WL,FL,qL,GL,jL,Wae,KL,QL=T(()=>{HL="required",wr="argv",ML="isSet",ru="booleanEquals",Ra="error",Ia="endpoint",Yn="tree",VT="PartitionResult",zT="getAttr",LL={[HL]:!1,type:"string"},$L={[HL]:!0,default:!1,type:"boolean"},BL={ref:"Endpoint"},VL={fn:ru,[wr]:[{ref:"UseFIPS"},!0]},zL={fn:ru,[wr]:[{ref:"UseDualStack"},!0]},Tr={},UL={fn:zT,[wr]:[{ref:VT},"supportsFIPS"]},WL={ref:VT},FL={fn:ru,[wr]:[!0,{fn:zT,[wr]:[WL,"supportsDualStack"]}]},qL=[VL],GL=[zL],jL=[{ref:"Region"}],Wae={version:"1.0",parameters:{Region:LL,UseDualStack:$L,UseFIPS:$L,Endpoint:LL},rules:[{conditions:[{fn:ML,[wr]:[BL]}],rules:[{conditions:qL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ra},{conditions:GL,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ra},{endpoint:{url:BL,properties:Tr,headers:Tr},type:Ia}],type:Yn},{conditions:[{fn:ML,[wr]:jL}],rules:[{conditions:[{fn:"aws.partition",[wr]:jL,assign:VT}],rules:[{conditions:[VL,zL],rules:[{conditions:[{fn:ru,[wr]:[!0,UL]},FL],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tr,headers:Tr},type:Ia}],type:Yn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ra}],type:Yn},{conditions:qL,rules:[{conditions:[{fn:ru,[wr]:[UL,!0]}],rules:[{conditions:[{fn:"stringEquals",[wr]:[{fn:zT,[wr]:[WL,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Tr,headers:Tr},type:Ia},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Tr,headers:Tr},type:Ia}],type:Yn},{error:"FIPS is enabled but this partition does not support FIPS",type:Ra}],type:Yn},{conditions:GL,rules:[{conditions:[FL],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tr,headers:Tr},type:Ia}],type:Yn},{error:"DualStack is enabled but this partition does not support DualStack",type:Ra}],type:Yn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Tr,headers:Tr},type:Ia}],type:Yn}],type:Yn},{error:"Invalid Configuration: Missing Region",type:Ra}]},KL=Wae});var YL,Aa,Kae,XL,JL=T(()=>{YL=v(Ns()),Aa=v(Fn());QL();Kae=new Aa.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),XL=(t,e={})=>Kae.get(t,()=>(0,Aa.resolveEndpoint)(KL,{endpointParams:t,logger:e.logger}));Aa.customEndpointFunctions.aws=YL.awsEndpointFunctions});var ZL,e$,lf,df,t$,r$=T(()=>{Je();Kn();_t();ZL=v(Z()),e$=v(on()),lf=v(Xe()),df=v(rt());UT();JL();t$=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??lf.fromBase64,base64Encoder:t?.base64Encoder??lf.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??XL,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??SL,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new wt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Lr}],logger:t?.logger??new ZL.NoOpLogger,protocol:t?.protocol??Ws,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??e$.parseUrl,utf8Decoder:t?.utf8Decoder??df.fromUtf8,utf8Encoder:t?.utf8Encoder??df.toUtf8})});var pf,oo,n$,ff,so,hf,mf,s$,o$,i$,a$,c$=T(()=>{uf();Je();pf=v(ei()),oo=v(Rt()),n$=v(ti()),ff=v(ar()),so=v(Ur()),hf=v(Ln()),mf=v(Z()),s$=v(ri()),o$=v(ni()),i$=v(eo());r$();a$=t=>{(0,mf.emitWarningIfUnsupportedVersion)(process.version);let e=(0,o$.resolveDefaultsModeConfig)(t),r=()=>e().then(mf.loadConfigsForDefaultMode),n=t$(t);Ms(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,so.loadConfig)($s,s),bodyLengthChecker:t?.bodyLengthChecker??s$.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,pf.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:va.version}),maxAttempts:t?.maxAttempts??(0,so.loadConfig)(ff.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,so.loadConfig)(oo.NODE_REGION_CONFIG_OPTIONS,{...oo.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:hf.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,so.loadConfig)({...ff.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||i$.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??n$.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??hf.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,so.loadConfig)(oo.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,so.loadConfig)(oo.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,so.loadConfig)(pf.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var l$=b(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.warning=void 0;xa.stsRegionDefaultResolver=Yae;var u$=Rt(),Qae=Ur();function Yae(t={}){return(0,Qae.loadConfig)({...u$.NODE_REGION_CONFIG_OPTIONS,async default(){return xa.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...u$.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}xa.warning={silence:!1}});var io=b(dn=>{"use strict";var d$=l$(),nu=Rt(),Xae=t=>({setRegion(e){t.region=e},region(){return t.region}}),Jae=t=>({region:t.region()});Object.defineProperty(dn,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return nu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(dn,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return nu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(dn,"REGION_ENV_NAME",{enumerable:!0,get:function(){return nu.REGION_ENV_NAME}});Object.defineProperty(dn,"REGION_INI_NAME",{enumerable:!0,get:function(){return nu.REGION_INI_NAME}});Object.defineProperty(dn,"resolveRegionConfig",{enumerable:!0,get:function(){return nu.resolveRegionConfig}});dn.getAwsRegionExtensionConfiguration=Xae;dn.resolveAwsRegionExtensionConfiguration=Jae;Object.keys(d$).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(dn,t)&&Object.defineProperty(dn,t,{enumerable:!0,get:function(){return d$[t]}})})});var p$,f$,h$=T(()=>{p$=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},f$=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var gf,yf,Sf,m$,g$=T(()=>{gf=v(io()),yf=v(be()),Sf=v(Z());h$();m$=(t,e)=>{let r=Object.assign((0,gf.getAwsRegionExtensionConfiguration)(t),(0,Sf.getDefaultExtensionConfiguration)(t),(0,yf.getHttpHandlerExtensionConfiguration)(t),p$(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,gf.resolveAwsRegionExtensionConfiguration)(r),(0,Sf.resolveDefaultRuntimeConfig)(r),(0,yf.resolveHttpHandlerRuntimeConfig)(r),f$(r))}});var Ef,y$,S$,bf,E$,b$,_$,_f,WT,su,KT=T(()=>{Ef=v(No()),y$=v(Mo()),S$=v(Lo()),bf=v(Ys()),E$=v(Rt());_t();ye();b$=v(Xo()),_$=v(Fr()),_f=v(ar()),WT=v(Z());UT();FT();c$();g$();su=class extends WT.Client{config;constructor(...[e]){let r=a$(e||{});super(r),this.initConfig=r;let n=bL(r),s=(0,bf.resolveUserAgentConfig)(n),o=(0,_f.resolveRetryConfig)(s),i=(0,E$.resolveRegionConfig)(o),a=(0,Ef.resolveHostHeaderConfig)(i),c=(0,_$.resolveEndpointConfig)(a),u=EL(c),d=m$(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Uo(this.config)),this.middlewareStack.use((0,bf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,_f.getRetryPlugin)(this.config)),this.middlewareStack.use((0,b$.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ef.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,y$.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,S$.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($o(this.config,{httpAuthSchemeParametersProvider:yL,identityProviderConfigProvider:async l=>new Un({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Bo(this.config))}destroy(){super.destroy()}}});var T$,ut,Tf=T(()=>{T$=v(Z()),ut=class t extends T$.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var ou,iu,au,cu,uu,lu,du,pu,fu,hu,mu,QT=T(()=>{Tf();ou=class t extends ut{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},iu=class t extends ut{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},au=class t extends ut{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},cu=class t extends ut{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},uu=class t extends ut{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},lu=class t extends ut{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},du=class t extends ut{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},pu=class t extends ut{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},fu=class t extends ut{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},hu=class t extends ut{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},mu=class t extends ut{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var Zae,ece,tce,rce,nce,sce,oce,ice,ace,cce,uce,lce,dce,pce,fce,hce,mce,gce,yce,Sce,pn,Ece,bce,_ce,Tce,wce,ze,Cce,qr,vce,Rce,Gr,Ice,w$,C$,Ace,xce,Pce,v$,Dce,_e,Oce,kce,Nce,Mce,R$,I$,A$,x$,P$,D$,O$,k$,N$,M$,L$,$$,B$,U$,F$,YT,XT=T(()=>{ye();QT();Tf();Zae="AccessDeniedException",ece="AuthorizationPendingException",tce="AccessToken",rce="ClientSecret",nce="CreateToken",sce="CreateTokenRequest",oce="CreateTokenResponse",ice="CodeVerifier",ace="ExpiredTokenException",cce="InvalidClientException",uce="InvalidGrantException",lce="InvalidRequestException",dce="InternalServerException",pce="InvalidScopeException",fce="IdToken",hce="RefreshToken",mce="SlowDownException",gce="UnauthorizedClientException",yce="UnsupportedGrantTypeException",Sce="accessToken",pn="client",Ece="clientId",bce="clientSecret",_ce="codeVerifier",Tce="code",wce="deviceCode",ze="error",Cce="expiresIn",qr="error_description",vce="grantType",Rce="http",Gr="httpError",Ice="idToken",w$="reason",C$="refreshToken",Ace="redirectUri",xce="scope",Pce="server",v$="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",Dce="tokenType",_e="com.amazonaws.ssooidc",Oce=[0,_e,tce,8,0],kce=[0,_e,rce,8,0],Nce=[0,_e,ice,8,0],Mce=[0,_e,fce,8,0],R$=[0,_e,hce,8,0],I$=[-3,_e,Zae,{[ze]:pn,[Gr]:400},[ze,w$,qr],[0,0,0]];W.for(_e).registerError(I$,ou);A$=[-3,_e,ece,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(A$,iu);x$=[3,_e,sce,0,[Ece,bce,vce,wce,Tce,C$,xce,Ace,_ce],[0,[()=>kce,0],0,0,0,[()=>R$,0],64,0,[()=>Nce,0]],3],P$=[3,_e,oce,0,[Sce,Dce,Cce,C$,Ice],[[()=>Oce,0],0,1,[()=>R$,0],[()=>Mce,0]]],D$=[-3,_e,ace,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(D$,au);O$=[-3,_e,dce,{[ze]:Pce,[Gr]:500},[ze,qr],[0,0]];W.for(_e).registerError(O$,cu);k$=[-3,_e,cce,{[ze]:pn,[Gr]:401},[ze,qr],[0,0]];W.for(_e).registerError(k$,uu);N$=[-3,_e,uce,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(N$,lu);M$=[-3,_e,lce,{[ze]:pn,[Gr]:400},[ze,w$,qr],[0,0,0]];W.for(_e).registerError(M$,du);L$=[-3,_e,pce,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(L$,pu);$$=[-3,_e,mce,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError($$,fu);B$=[-3,_e,gce,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(B$,hu);U$=[-3,_e,yce,{[ze]:pn,[Gr]:400},[ze,qr],[0,0]];W.for(_e).registerError(U$,mu);F$=[-3,v$,"SSOOIDCServiceException",0,[],[]];W.for(v$).registerError(F$,ut);YT=[9,_e,nce,{[Rce]:["POST","/token",200]},()=>x$,()=>P$]});var q$,JT,gu,ZT=T(()=>{q$=v(Fr()),JT=v(Z());FT();XT();gu=class extends JT.Command.classBuilder().ep(_L).m(function(e,r,n,s){return[(0,q$.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(YT).build(){}});var G$,Lce,wf,j$=T(()=>{G$=v(Z());ZT();KT();Lce={CreateTokenCommand:gu},wf=class extends su{};(0,G$.createAggregatedClient)(Lce,wf)});var H$=T(()=>{ZT()});var $ce,Bce,V$=T(()=>{$ce={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Bce={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var z$=T(()=>{});var ew={};yt(ew,{$Command:()=>JT.Command,AccessDeniedException:()=>ou,AccessDeniedException$:()=>I$,AccessDeniedExceptionReason:()=>$ce,AuthorizationPendingException:()=>iu,AuthorizationPendingException$:()=>A$,CreateToken$:()=>YT,CreateTokenCommand:()=>gu,CreateTokenRequest$:()=>x$,CreateTokenResponse$:()=>P$,ExpiredTokenException:()=>au,ExpiredTokenException$:()=>D$,InternalServerException:()=>cu,InternalServerException$:()=>O$,InvalidClientException:()=>uu,InvalidClientException$:()=>k$,InvalidGrantException:()=>lu,InvalidGrantException$:()=>N$,InvalidRequestException:()=>du,InvalidRequestException$:()=>M$,InvalidRequestExceptionReason:()=>Bce,InvalidScopeException:()=>pu,InvalidScopeException$:()=>L$,SSOOIDC:()=>wf,SSOOIDCClient:()=>su,SSOOIDCServiceException:()=>ut,SSOOIDCServiceException$:()=>F$,SlowDownException:()=>fu,SlowDownException$:()=>$$,UnauthorizedClientException:()=>hu,UnauthorizedClientException$:()=>B$,UnsupportedGrantTypeException:()=>mu,UnsupportedGrantTypeException$:()=>U$,__Client:()=>WT.Client});var tw=T(()=>{KT();j$();H$();XT();V$();QT();z$();Tf()});var Y$=b(Su=>{"use strict";var Uce=(br(),K(qn)),Fce=(T_(),K(kk)),cr=Ct(),yu=un(),qce=require("fs"),Gce=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new cr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=Fce.getBearerTokenEnvKey(e);if(!(r in process.env))throw new cr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return Uce.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},jce=300*1e3,rw="To refresh this SSO session run 'aws sso login' with the corresponding profile.",Hce=async(t,e={},r)=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(tw(),ew)),s=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i]??r?.[i];return new n(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},Vce=async(t,e,r={},n)=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(tw(),ew));return(await Hce(e,r,n)).send(new s({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},W$=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new cr.TokenProviderError(`Token is expired. ${rw}`,!1)},si=(t,e,r=!1)=>{if(typeof e>"u")throw new cr.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${rw}`,!1)},{writeFile:zce}=qce.promises,Wce=(t,e)=>{let r=yu.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return zce(r,n)},K$=new Date(0),Q$=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await yu.parseKnownFiles(t),n=yu.getProfileName({profile:t.profile??e?.profile}),s=r[n];if(s){if(!s.sso_session)throw new cr.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new cr.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=s.sso_session,a=(await yu.loadSsoSessionData(t))[o];if(!a)throw new cr.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new cr.TokenProviderError(`Sso session '${o}' is missing required property '${y}'.`,!1);a.sso_start_url;let c=a.sso_region,u;try{u=await yu.getSSOTokenFromFile(o)}catch{throw new cr.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${rw}`,!1)}si("accessToken",u.accessToken),si("expiresAt",u.expiresAt);let{accessToken:d,expiresAt:l}=u,g={token:d,expiration:new Date(l)};if(g.expiration.getTime()-Date.now()>jce)return g;if(Date.now()-K$.getTime()<30*1e3)return W$(g),g;si("clientId",u.clientId,!0),si("clientSecret",u.clientSecret,!0),si("refreshToken",u.refreshToken,!0);try{K$.setTime(Date.now());let y=await Vce(u,c,t,e);si("accessToken",y.accessToken),si("expiresIn",y.expiresIn);let S=new Date(Date.now()+y.expiresIn*1e3);try{await Wce(o,{...u,accessToken:y.accessToken,expiresAt:S.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:S}}catch{return W$(g),g}},Kce=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new cr.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},Qce=(t={})=>cr.memoize(cr.chain(Q$(t),async()=>{throw new cr.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Su.fromEnvSigningName=Gce;Su.fromSso=Q$;Su.fromStatic=Kce;Su.nodeProvider=Qce});var sw=b(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.resolveHttpAuthSchemeConfig=ao.defaultSSOHttpAuthSchemeProvider=ao.defaultSSOHttpAuthSchemeParametersProvider=void 0;var Yce=(Je(),K(Br)),nw=pt(),Xce=async(t,e,r)=>({operation:(0,nw.getSmithyContext)(e).operation,region:await(0,nw.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ao.defaultSSOHttpAuthSchemeParametersProvider=Xce;function Jce(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Cf(t){return{schemeId:"smithy.api#noAuth"}}var Zce=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Cf(t));break}case"ListAccountRoles":{e.push(Cf(t));break}case"ListAccounts":{e.push(Cf(t));break}case"Logout":{e.push(Cf(t));break}default:e.push(Jce(t))}return e};ao.defaultSSOHttpAuthSchemeProvider=Zce;var eue=t=>{let e=(0,Yce.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,nw.normalizeProvider)(t.authSchemePreference??[])})};ao.resolveHttpAuthSchemeConfig=eue});var X$=b((ULe,tue)=>{tue.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var pB=b(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.ruleSet=void 0;var cB="required",vr="fn",Rr="argv",Oa="ref",J$=!0,Z$="isSet",Eu="booleanEquals",Pa="error",Da="endpoint",Xn="tree",ow="PartitionResult",iw="getAttr",eB={[cB]:!1,type:"string"},tB={[cB]:!0,default:!1,type:"boolean"},rB={[Oa]:"Endpoint"},uB={[vr]:Eu,[Rr]:[{[Oa]:"UseFIPS"},!0]},lB={[vr]:Eu,[Rr]:[{[Oa]:"UseDualStack"},!0]},Cr={},nB={[vr]:iw,[Rr]:[{[Oa]:ow},"supportsFIPS"]},dB={[Oa]:ow},sB={[vr]:Eu,[Rr]:[!0,{[vr]:iw,[Rr]:[dB,"supportsDualStack"]}]},oB=[uB],iB=[lB],aB=[{[Oa]:"Region"}],rue={version:"1.0",parameters:{Region:eB,UseDualStack:tB,UseFIPS:tB,Endpoint:eB},rules:[{conditions:[{[vr]:Z$,[Rr]:[rB]}],rules:[{conditions:oB,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Pa},{conditions:iB,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Pa},{endpoint:{url:rB,properties:Cr,headers:Cr},type:Da}],type:Xn},{conditions:[{[vr]:Z$,[Rr]:aB}],rules:[{conditions:[{[vr]:"aws.partition",[Rr]:aB,assign:ow}],rules:[{conditions:[uB,lB],rules:[{conditions:[{[vr]:Eu,[Rr]:[J$,nB]},sB],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Cr,headers:Cr},type:Da}],type:Xn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Pa}],type:Xn},{conditions:oB,rules:[{conditions:[{[vr]:Eu,[Rr]:[nB,J$]}],rules:[{conditions:[{[vr]:"stringEquals",[Rr]:[{[vr]:iw,[Rr]:[dB,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Cr,headers:Cr},type:Da},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Cr,headers:Cr},type:Da}],type:Xn},{error:"FIPS is enabled but this partition does not support FIPS",type:Pa}],type:Xn},{conditions:iB,rules:[{conditions:[sB],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Cr,headers:Cr},type:Da}],type:Xn},{error:"DualStack is enabled but this partition does not support DualStack",type:Pa}],type:Xn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Cr,headers:Cr},type:Da}],type:Xn}],type:Xn},{error:"Invalid Configuration: Missing Region",type:Pa}]};vf.ruleSet=rue});var fB=b(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.defaultEndpointResolver=void 0;var nue=Ns(),aw=Fn(),sue=pB(),oue=new aw.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),iue=(t,e={})=>oue.get(t,()=>(0,aw.resolveEndpoint)(sue.ruleSet,{endpointParams:t,logger:e.logger}));Rf.defaultEndpointResolver=iue;aw.customEndpointFunctions.aws=nue.awsEndpointFunctions});var gB=b(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.getRuntimeConfig=void 0;var aue=(Je(),K(Br)),cue=(Kn(),K(Kc)),uue=(_t(),K(zo)),lue=Z(),due=on(),hB=Xe(),mB=rt(),pue=sw(),fue=fB(),hue=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??hB.fromBase64,base64Encoder:t?.base64Encoder??hB.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??fue.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??pue.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new aue.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new uue.NoAuthSigner}],logger:t?.logger??new lue.NoOpLogger,protocol:t?.protocol??cue.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??due.parseUrl,utf8Decoder:t?.utf8Decoder??mB.fromUtf8,utf8Encoder:t?.utf8Encoder??mB.toUtf8});If.getRuntimeConfig=hue});var TB=b(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.getRuntimeConfig=void 0;var mue=(na(),K(ra)),gue=mue.__importDefault(X$()),yB=(Je(),K(Br)),SB=ei(),Af=Rt(),yue=ti(),EB=ar(),oi=Ur(),bB=Ln(),_B=Z(),Sue=ri(),Eue=ni(),bue=eo(),_ue=gB(),Tue=t=>{(0,_B.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Eue.resolveDefaultsModeConfig)(t),r=()=>e().then(_B.loadConfigsForDefaultMode),n=(0,_ue.getRuntimeConfig)(t);(0,yB.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,oi.loadConfig)(yB.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??Sue.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,SB.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:gue.default.version}),maxAttempts:t?.maxAttempts??(0,oi.loadConfig)(EB.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,oi.loadConfig)(Af.NODE_REGION_CONFIG_OPTIONS,{...Af.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:bB.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,oi.loadConfig)({...EB.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||bue.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??yue.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??bB.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,oi.loadConfig)(Af.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,oi.loadConfig)(Af.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,oi.loadConfig)(SB.NODE_APP_ID_CONFIG_OPTIONS,s)}};xf.getRuntimeConfig=Tue});var e2=b(pe=>{"use strict";var wB=No(),wue=Mo(),Cue=Lo(),CB=Ys(),vue=Rt(),bu=(_t(),K(zo)),Na=(ye(),K(Ji)),Rue=Xo(),wu=Fr(),vB=ar(),jr=Z(),RB=sw(),Iue=TB(),IB=io(),AB=be(),Aue=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),$f={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},xue=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Pue=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),Due=(t,e)=>{let r=Object.assign(IB.getAwsRegionExtensionConfiguration(t),jr.getDefaultExtensionConfiguration(t),AB.getHttpHandlerExtensionConfiguration(t),xue(t));return e.forEach(n=>n.configure(r)),Object.assign(t,IB.resolveAwsRegionExtensionConfiguration(r),jr.resolveDefaultRuntimeConfig(r),AB.resolveHttpHandlerRuntimeConfig(r),Pue(r))},ka=class extends jr.Client{config;constructor(...[e]){let r=Iue.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=Aue(r),s=CB.resolveUserAgentConfig(n),o=vB.resolveRetryConfig(s),i=vue.resolveRegionConfig(o),a=wB.resolveHostHeaderConfig(i),c=wu.resolveEndpointConfig(a),u=RB.resolveHttpAuthSchemeConfig(c),d=Due(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Na.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(CB.getUserAgentPlugin(this.config)),this.middlewareStack.use(vB.getRetryPlugin(this.config)),this.middlewareStack.use(Rue.getContentLengthPlugin(this.config)),this.middlewareStack.use(wB.getHostHeaderPlugin(this.config)),this.middlewareStack.use(wue.getLoggerPlugin(this.config)),this.middlewareStack.use(Cue.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(bu.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:RB.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new bu.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(bu.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},co=class t extends jr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Pf=class t extends co{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Df=class t extends co{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Of=class t extends co{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},kf=class t extends co{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Oue="AccountInfo",kue="AccountListType",Nue="AccessTokenType",Mue="GetRoleCredentials",Lue="GetRoleCredentialsRequest",$ue="GetRoleCredentialsResponse",Bue="InvalidRequestException",Uue="Logout",Fue="ListAccounts",que="ListAccountsRequest",Gue="ListAccountRolesRequest",jue="ListAccountRolesResponse",Hue="ListAccountsResponse",Vue="ListAccountRoles",zue="LogoutRequest",Wue="RoleCredentials",Kue="RoleInfo",Que="RoleListType",Yue="ResourceNotFoundException",Xue="SecretAccessKeyType",Jue="SessionTokenType",Zue="TooManyRequestsException",ele="UnauthorizedException",Bf="accountId",tle="accessKeyId",rle="accountList",nle="accountName",Uf="accessToken",xB="account_id",Ff="client",qf="error",sle="emailAddress",ole="expiration",Gf="http",jf="httpError",Hf="httpHeader",ii="httpQuery",Vf="message",PB="maxResults",DB="max_result",zf="nextToken",OB="next_token",ile="roleCredentials",ale="roleList",kB="roleName",cle="role_name",NB="smithy.ts.sdk.synthetic.com.amazonaws.sso",ule="secretAccessKey",lle="sessionToken",Wf="x-amz-sso_bearer_token",Pe="com.amazonaws.sso",Kf=[0,Pe,Nue,8,0],dle=[0,Pe,Xue,8,0],ple=[0,Pe,Jue,8,0],MB=[3,Pe,Oue,0,[Bf,nle,sle],[0,0,0]],LB=[3,Pe,Lue,0,[kB,Bf,Uf],[[0,{[ii]:cle}],[0,{[ii]:xB}],[()=>Kf,{[Hf]:Wf}]],3],$B=[3,Pe,$ue,0,[ile],[[()=>VB,0]]],BB=[-3,Pe,Bue,{[qf]:Ff,[jf]:400},[Vf],[0]];Na.TypeRegistry.for(Pe).registerError(BB,Pf);var UB=[3,Pe,Gue,0,[Uf,Bf,zf,PB],[[()=>Kf,{[Hf]:Wf}],[0,{[ii]:xB}],[0,{[ii]:OB}],[1,{[ii]:DB}]],2],FB=[3,Pe,jue,0,[zf,ale],[0,()=>mle]],qB=[3,Pe,que,0,[Uf,zf,PB],[[()=>Kf,{[Hf]:Wf}],[0,{[ii]:OB}],[1,{[ii]:DB}]],1],GB=[3,Pe,Hue,0,[zf,rle],[0,()=>hle]],jB=[3,Pe,zue,0,[Uf],[[()=>Kf,{[Hf]:Wf}]],1],HB=[-3,Pe,Yue,{[qf]:Ff,[jf]:404},[Vf],[0]];Na.TypeRegistry.for(Pe).registerError(HB,Df);var VB=[3,Pe,Wue,0,[tle,ule,lle,ole],[0,[()=>dle,0],[()=>ple,0],1]],zB=[3,Pe,Kue,0,[kB,Bf],[0,0]],WB=[-3,Pe,Zue,{[qf]:Ff,[jf]:429},[Vf],[0]];Na.TypeRegistry.for(Pe).registerError(WB,Of);var KB=[-3,Pe,ele,{[qf]:Ff,[jf]:401},[Vf],[0]];Na.TypeRegistry.for(Pe).registerError(KB,kf);var fle="unit",QB=[-3,NB,"SSOServiceException",0,[],[]];Na.TypeRegistry.for(NB).registerError(QB,co);var hle=[1,Pe,kue,0,()=>MB],mle=[1,Pe,Que,0,()=>zB],YB=[9,Pe,Mue,{[Gf]:["GET","/federation/credentials",200]},()=>LB,()=>$B],XB=[9,Pe,Vue,{[Gf]:["GET","/assignment/roles",200]},()=>UB,()=>FB],JB=[9,Pe,Fue,{[Gf]:["GET","/assignment/accounts",200]},()=>qB,()=>GB],ZB=[9,Pe,Uue,{[Gf]:["POST","/logout",200]},()=>jB,()=>fle],Nf=class extends jr.Command.classBuilder().ep($f).m(function(e,r,n,s){return[wu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(YB).build(){},_u=class extends jr.Command.classBuilder().ep($f).m(function(e,r,n,s){return[wu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(XB).build(){},Tu=class extends jr.Command.classBuilder().ep($f).m(function(e,r,n,s){return[wu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(JB).build(){},Mf=class extends jr.Command.classBuilder().ep($f).m(function(e,r,n,s){return[wu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(ZB).build(){},gle={GetRoleCredentialsCommand:Nf,ListAccountRolesCommand:_u,ListAccountsCommand:Tu,LogoutCommand:Mf},Lf=class extends ka{};jr.createAggregatedClient(gle,Lf);var yle=bu.createPaginator(ka,_u,"nextToken","nextToken","maxResults"),Sle=bu.createPaginator(ka,Tu,"nextToken","nextToken","maxResults");Object.defineProperty(pe,"$Command",{enumerable:!0,get:function(){return jr.Command}});Object.defineProperty(pe,"__Client",{enumerable:!0,get:function(){return jr.Client}});pe.AccountInfo$=MB;pe.GetRoleCredentials$=YB;pe.GetRoleCredentialsCommand=Nf;pe.GetRoleCredentialsRequest$=LB;pe.GetRoleCredentialsResponse$=$B;pe.InvalidRequestException=Pf;pe.InvalidRequestException$=BB;pe.ListAccountRoles$=XB;pe.ListAccountRolesCommand=_u;pe.ListAccountRolesRequest$=UB;pe.ListAccountRolesResponse$=FB;pe.ListAccounts$=JB;pe.ListAccountsCommand=Tu;pe.ListAccountsRequest$=qB;pe.ListAccountsResponse$=GB;pe.Logout$=ZB;pe.LogoutCommand=Mf;pe.LogoutRequest$=jB;pe.ResourceNotFoundException=Df;pe.ResourceNotFoundException$=HB;pe.RoleCredentials$=VB;pe.RoleInfo$=zB;pe.SSO=Lf;pe.SSOClient=ka;pe.SSOServiceException=co;pe.SSOServiceException$=QB;pe.TooManyRequestsException=Of;pe.TooManyRequestsException$=WB;pe.UnauthorizedException=kf;pe.UnauthorizedException$=KB;pe.paginateListAccountRoles=yle;pe.paginateListAccounts=Sle});var r2=b(cw=>{"use strict";var t2=e2();Object.defineProperty(cw,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return t2.GetRoleCredentialsCommand}});Object.defineProperty(cw,"SSOClient",{enumerable:!0,get:function(){return t2.SSOClient}})});var uw=b(Yf=>{"use strict";var Hr=Ct(),Qf=un(),n2=(br(),K(qn)),Ele=Y$(),o2=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),Cu=!1,s2=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,callerClientConfig:c,profile:u,filepath:d,configFilepath:l,ignoreCache:g,logger:y})=>{let S,w="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let Ht=await Ele.fromSso({profile:u,filepath:d,configFilepath:l,ignoreCache:g})();S={accessToken:Ht.token,expiresAt:new Date(Ht.expiration).toISOString()}}catch(Ht){throw new Hr.CredentialsProviderError(Ht.message,{tryNextLink:Cu,logger:y})}else try{S=await Qf.getSSOTokenFromFile(t)}catch{throw new Hr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${w}`,{tryNextLink:Cu,logger:y})}if(new Date(S.expiresAt).getTime()-Date.now()<=0)throw new Hr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${w}`,{tryNextLink:Cu,logger:y});let{accessToken:A}=S,{SSOClient:I,GetRoleCredentialsCommand:k}=await Promise.resolve().then(function(){return r2()}),L=o||new I(Object.assign({},i??{},{logger:i?.logger??c?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??c?.userAgentAppId??a?.userAgentAppId})),B;try{B=await L.send(new k({accountId:r,roleName:s,accessToken:A}))}catch(Ht){throw new Hr.CredentialsProviderError(Ht,{tryNextLink:Cu,logger:y})}let{roleCredentials:{accessKeyId:X,secretAccessKey:oe,sessionToken:Be,expiration:te,credentialScope:ue,accountId:Ae}={}}=B;if(!X||!oe||!Be||!te)throw new Hr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Cu,logger:y});let lt={accessKeyId:X,secretAccessKey:oe,sessionToken:Be,expiration:new Date(te),...ue&&{credentialScope:ue},...Ae&&{accountId:Ae}};return e?n2.setCredentialFeature(lt,"CREDENTIALS_SSO","s"):n2.setCredentialFeature(lt,"CREDENTIALS_SSO_LEGACY","u"),lt},i2=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=t;if(!r||!n||!s||!o)throw new Hr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},ble=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t,{ssoClient:a}=t,c=Qf.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!o&&!i){let d=(await Qf.parseKnownFiles(t))[c];if(!d)throw new Hr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!o2(d))throw new Hr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(d?.sso_session){let I=(await Qf.loadSsoSessionData(t))[d.sso_session],k=` configurations in profile ${c} and sso-session ${d.sso_session}`;if(s&&s!==I.sso_region)throw new Hr.CredentialsProviderError("Conflicting SSO region"+k,{tryNextLink:!1,logger:t.logger});if(r&&r!==I.sso_start_url)throw new Hr.CredentialsProviderError("Conflicting SSO start_url"+k,{tryNextLink:!1,logger:t.logger});d.sso_region=I.sso_region,d.sso_start_url=I.sso_start_url}let{sso_start_url:l,sso_account_id:g,sso_region:y,sso_role_name:S,sso_session:w}=i2(d,t.logger);return s2({ssoStartUrl:l,ssoSession:w,ssoAccountId:g,ssoRegion:y,ssoRoleName:S,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!o)throw new Hr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return s2({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Yf.fromSSO=ble;Yf.isSsoProfile=o2;Yf.validateSsoProfile=i2});function _le(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Tle(t){return{schemeId:"smithy.api#noAuth"}}var vu,a2,c2,u2,lw=T(()=>{Je();vu=v(pt()),a2=async(t,e,r)=>({operation:(0,vu.getSmithyContext)(e).operation,region:await(0,vu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});c2=t=>{let e=[];return t.operation==="CreateOAuth2Token"?e.push(Tle(t)):e.push(_le(t)),e},u2=t=>{let e=Gn(t);return Object.assign(e,{authSchemePreference:(0,vu.normalizeProvider)(t.authSchemePreference??[])})}});var l2,d2,dw=T(()=>{l2=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"signin"}),d2={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var E2,xt,p2,ai,Ma,uo,Vr,Zf,pw,f2,h2,m2,fw,hw,At,mw,Xf,Jf,g2,y2,S2,wle,b2,_2=T(()=>{E2="required",xt="argv",p2="isSet",ai="booleanEquals",Ma="error",uo="endpoint",Vr="tree",Zf="PartitionResult",pw="stringEquals",f2={[E2]:!0,default:!1,type:"boolean"},h2={[E2]:!1,type:"string"},m2={ref:"Endpoint"},fw={fn:ai,[xt]:[{ref:"UseFIPS"},!0]},hw={fn:ai,[xt]:[{ref:"UseDualStack"},!0]},At={},mw={fn:"getAttr",[xt]:[{ref:Zf},"name"]},Xf={fn:ai,[xt]:[{ref:"UseFIPS"},!1]},Jf={fn:ai,[xt]:[{ref:"UseDualStack"},!1]},g2={fn:"getAttr",[xt]:[{ref:Zf},"supportsFIPS"]},y2={fn:ai,[xt]:[!0,{fn:"getAttr",[xt]:[{ref:Zf},"supportsDualStack"]}]},S2=[{ref:"Region"}],wle={version:"1.0",parameters:{UseDualStack:f2,UseFIPS:f2,Endpoint:h2,Region:h2},rules:[{conditions:[{fn:p2,[xt]:[m2]}],rules:[{conditions:[fw],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ma},{rules:[{conditions:[hw],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ma},{endpoint:{url:m2,properties:At,headers:At},type:uo}],type:Vr}],type:Vr},{rules:[{conditions:[{fn:p2,[xt]:S2}],rules:[{conditions:[{fn:"aws.partition",[xt]:S2,assign:Zf}],rules:[{conditions:[{fn:pw,[xt]:[mw,"aws"]},Xf,Jf],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:At,headers:At},type:uo},{conditions:[{fn:pw,[xt]:[mw,"aws-cn"]},Xf,Jf],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:At,headers:At},type:uo},{conditions:[{fn:pw,[xt]:[mw,"aws-us-gov"]},Xf,Jf],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:At,headers:At},type:uo},{conditions:[fw,hw],rules:[{conditions:[{fn:ai,[xt]:[!0,g2]},y2],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:At,headers:At},type:uo}],type:Vr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ma}],type:Vr},{conditions:[fw,Jf],rules:[{conditions:[{fn:ai,[xt]:[g2,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:At,headers:At},type:uo}],type:Vr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ma}],type:Vr},{conditions:[Xf,hw],rules:[{conditions:[y2],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:At,headers:At},type:uo}],type:Vr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ma}],type:Vr},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:At,headers:At},type:uo}],type:Vr}],type:Vr},{error:"Invalid Configuration: Missing Region",type:Ma}],type:Vr}]},b2=wle});var T2,La,Cle,w2,C2=T(()=>{T2=v(Ns()),La=v(Fn());_2();Cle=new La.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),w2=(t,e={})=>Cle.get(t,()=>(0,La.resolveEndpoint)(b2,{endpointParams:t,logger:e.logger}));La.customEndpointFunctions.aws=T2.awsEndpointFunctions});var v2,R2,eh,th,I2,A2=T(()=>{Je();Kn();_t();v2=v(Z()),R2=v(on()),eh=v(Xe()),th=v(rt());lw();C2();I2=t=>({apiVersion:"2023-01-01",base64Decoder:t?.base64Decoder??eh.fromBase64,base64Encoder:t?.base64Encoder??eh.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??w2,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??c2,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new wt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Lr}],logger:t?.logger??new v2.NoOpLogger,protocol:t?.protocol??Ws,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:t?.serviceId??"Signin",urlParser:t?.urlParser??R2.parseUrl,utf8Decoder:t?.utf8Decoder??th.fromUtf8,utf8Encoder:t?.utf8Encoder??th.toUtf8})});var rh,po,x2,nh,lo,sh,oh,P2,D2,O2,k2,N2=T(()=>{uf();Je();rh=v(ei()),po=v(Rt()),x2=v(ti()),nh=v(ar()),lo=v(Ur()),sh=v(Ln()),oh=v(Z()),P2=v(ri()),D2=v(ni()),O2=v(eo());A2();k2=t=>{(0,oh.emitWarningIfUnsupportedVersion)(process.version);let e=(0,D2.resolveDefaultsModeConfig)(t),r=()=>e().then(oh.loadConfigsForDefaultMode),n=I2(t);Ms(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,lo.loadConfig)($s,s),bodyLengthChecker:t?.bodyLengthChecker??P2.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,rh.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:va.version}),maxAttempts:t?.maxAttempts??(0,lo.loadConfig)(nh.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,lo.loadConfig)(po.NODE_REGION_CONFIG_OPTIONS,{...po.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:sh.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,lo.loadConfig)({...nh.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||O2.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??x2.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??sh.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,lo.loadConfig)(po.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,lo.loadConfig)(po.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,lo.loadConfig)(rh.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var M2,L2,$2=T(()=>{M2=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},L2=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ih,ah,ch,B2,U2=T(()=>{ih=v(io()),ah=v(be()),ch=v(Z());$2();B2=(t,e)=>{let r=Object.assign((0,ih.getAwsRegionExtensionConfiguration)(t),(0,ch.getDefaultExtensionConfiguration)(t),(0,ah.getHttpHandlerExtensionConfiguration)(t),M2(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,ih.resolveAwsRegionExtensionConfiguration)(r),(0,ch.resolveDefaultRuntimeConfig)(r),(0,ah.resolveHttpHandlerRuntimeConfig)(r),L2(r))}});var uh,F2,q2,lh,G2,j2,H2,dh,gw,Ru,yw=T(()=>{uh=v(No()),F2=v(Mo()),q2=v(Lo()),lh=v(Ys()),G2=v(Rt());_t();ye();j2=v(Xo()),H2=v(Fr()),dh=v(ar()),gw=v(Z());lw();dw();N2();U2();Ru=class extends gw.Client{config;constructor(...[e]){let r=k2(e||{});super(r),this.initConfig=r;let n=l2(r),s=(0,lh.resolveUserAgentConfig)(n),o=(0,dh.resolveRetryConfig)(s),i=(0,G2.resolveRegionConfig)(o),a=(0,uh.resolveHostHeaderConfig)(i),c=(0,H2.resolveEndpointConfig)(a),u=u2(c),d=B2(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Uo(this.config)),this.middlewareStack.use((0,lh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,dh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,j2.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,uh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,F2.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,q2.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($o(this.config,{httpAuthSchemeParametersProvider:a2,identityProviderConfigProvider:async l=>new Un({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Bo(this.config))}destroy(){super.destroy()}}});var V2,zr,ph=T(()=>{V2=v(Z()),zr=class t extends V2.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Iu,Au,xu,Pu,Sw=T(()=>{ph();Iu=class t extends zr{name="AccessDeniedException";$fault="client";error;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Au=class t extends zr{name="InternalServerException";$fault="server";error;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},xu=class t extends zr{name="TooManyRequestsError";$fault="client";error;constructor(e){super({name:"TooManyRequestsError",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Pu=class t extends zr{name="ValidationException";$fault="client";error;constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}}});var vle,Rle,Ile,Ale,xle,Ple,Dle,Ole,kle,Nle,Mle,z2,W2,Ew,K2,Q2,Lle,fo,Y2,X2,$le,bw,J2,ur,hh,fh,Z2,Ble,eU,tU,nU,Ule,Fle,rU,qt,sU,oU,iU,aU,cU,uU,lU,dU,pU,fU,hU,_w,Tw=T(()=>{ye();Sw();ph();vle="AccessDeniedException",Rle="AccessToken",Ile="CreateOAuth2Token",Ale="CreateOAuth2TokenRequest",xle="CreateOAuth2TokenRequestBody",Ple="CreateOAuth2TokenResponseBody",Dle="CreateOAuth2TokenResponse",Ole="InternalServerException",kle="RefreshToken",Nle="TooManyRequestsError",Mle="ValidationException",z2="accessKeyId",W2="accessToken",Ew="client",K2="clientId",Q2="codeVerifier",Lle="code",fo="error",Y2="expiresIn",X2="grantType",$le="http",bw="httpError",J2="idToken",ur="jsonName",hh="message",fh="refreshToken",Z2="redirectUri",Ble="server",eU="secretAccessKey",tU="sessionToken",nU="smithy.ts.sdk.synthetic.com.amazonaws.signin",Ule="tokenInput",Fle="tokenOutput",rU="tokenType",qt="com.amazonaws.signin",sU=[0,qt,kle,8,0],oU=[-3,qt,vle,{[fo]:Ew},[fo,hh],[0,0],2];W.for(qt).registerError(oU,Iu);iU=[3,qt,Rle,8,[z2,eU,tU],[[0,{[ur]:z2}],[0,{[ur]:eU}],[0,{[ur]:tU}]],3],aU=[3,qt,Ale,0,[Ule],[[()=>cU,16]],1],cU=[3,qt,xle,0,[K2,X2,Lle,Z2,Q2,fh],[[0,{[ur]:K2}],[0,{[ur]:X2}],0,[0,{[ur]:Z2}],[0,{[ur]:Q2}],[()=>sU,{[ur]:fh}]],2],uU=[3,qt,Dle,0,[Fle],[[()=>lU,16]],1],lU=[3,qt,Ple,0,[W2,rU,Y2,fh,J2],[[()=>iU,{[ur]:W2}],[0,{[ur]:rU}],[1,{[ur]:Y2}],[()=>sU,{[ur]:fh}],[0,{[ur]:J2}]],4],dU=[-3,qt,Ole,{[fo]:Ble,[bw]:500},[fo,hh],[0,0],2];W.for(qt).registerError(dU,Au);pU=[-3,qt,Nle,{[fo]:Ew,[bw]:429},[fo,hh],[0,0],2];W.for(qt).registerError(pU,xu);fU=[-3,qt,Mle,{[fo]:Ew,[bw]:400},[fo,hh],[0,0],2];W.for(qt).registerError(fU,Pu);hU=[-3,nU,"SigninServiceException",0,[],[]];W.for(nU).registerError(hU,zr);_w=[9,qt,Ile,{[$le]:["POST","/v1/token",200]},()=>aU,()=>uU]});var mU,ww,Du,Cw=T(()=>{mU=v(Fr()),ww=v(Z());dw();Tw();Du=class extends ww.Command.classBuilder().ep(d2).m(function(e,r,n,s){return[(0,mU.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(_w).build(){}});var gU,qle,mh,yU=T(()=>{gU=v(Z());Cw();yw();qle={CreateOAuth2TokenCommand:Du},mh=class extends Ru{};(0,gU.createAggregatedClient)(qle,mh)});var SU=T(()=>{Cw()});var Gle,EU=T(()=>{Gle={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var bU=T(()=>{});var _U={};yt(_U,{$Command:()=>ww.Command,AccessDeniedException:()=>Iu,AccessDeniedException$:()=>oU,AccessToken$:()=>iU,CreateOAuth2Token$:()=>_w,CreateOAuth2TokenCommand:()=>Du,CreateOAuth2TokenRequest$:()=>aU,CreateOAuth2TokenRequestBody$:()=>cU,CreateOAuth2TokenResponse$:()=>uU,CreateOAuth2TokenResponseBody$:()=>lU,InternalServerException:()=>Au,InternalServerException$:()=>dU,OAuth2ErrorCode:()=>Gle,Signin:()=>mh,SigninClient:()=>Ru,SigninServiceException:()=>zr,SigninServiceException$:()=>hU,TooManyRequestsError:()=>xu,TooManyRequestsError$:()=>pU,ValidationException:()=>Pu,ValidationException$:()=>fU,__Client:()=>gw.Client});var TU=T(()=>{yw();yU();SU();Tw();EU();Sw();bU();ph()});var CU=b(wU=>{"use strict";var jle=(br(),K(qn)),ho=Ct(),Iw=un(),Hle=be(),gh=require("node:crypto"),vw=require("node:fs"),Vle=require("node:os"),Rw=require("node:path"),Aw=class t{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,r,n){this.profileData=e,this.init=r,this.callerClientConfig=n}async loadCredentials(){let e=await this.loadToken();if(!e)throw new ho.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=e.accessToken,n=Date.now();return new Date(r.expiresAt).getTime()-n<=t.REFRESH_THRESHOLD?this.refresh(e):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:r,CreateOAuth2TokenCommand:n}=await Promise.resolve().then(()=>(TU(),_U)),{logger:s,userAgentAppId:o}=this.callerClientConfig??{},a=(l=>l?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,c=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,u=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:c,requestHandler:a,logger:s,userAgentAppId:o,...this.init?.clientConfig});this.createDPoPInterceptor(u.middlewareStack);let d={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:"refresh_token"}};try{let l=await u.send(new n(d)),{accessKeyId:g,secretAccessKey:y,sessionToken:S}=l.tokenOutput?.accessToken??{},{refreshToken:w,expiresIn:A}=l.tokenOutput??{};if(!g||!y||!S||!w)throw new ho.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let I=(A??900)*1e3,k=new Date(Date.now()+I),L={...e,accessToken:{...e.accessToken,accessKeyId:g,secretAccessKey:y,sessionToken:S,expiresAt:k.toISOString()},refreshToken:w};await this.saveToken(L);let B=L.accessToken;return{accessKeyId:B.accessKeyId,secretAccessKey:B.secretAccessKey,sessionToken:B.sessionToken,accountId:B.accountId,expiration:k}}catch(l){if(l.name==="AccessDeniedException"){let g=l.error,y;switch(g){case"TOKEN_EXPIRED":y="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":y="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":y="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:y=`Failed to refresh token: ${String(l)}. Please re-authenticate using \`aws login\``}throw new ho.CredentialsProviderError(y,{logger:this.logger,tryNextLink:!1})}throw new ho.CredentialsProviderError(`Failed to refresh token: ${String(l)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let r;try{r=await Iw.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{r=await vw.promises.readFile(e,"utf8")}let n=JSON.parse(r),s=["accessToken","clientId","refreshToken","dpopKey"].filter(o=>!n[o]);if(n.accessToken?.accountId||s.push("accountId"),s.length>0)throw new ho.CredentialsProviderError(`Token validation failed, missing fields: ${s.join(", ")}`,{logger:this.logger,tryNextLink:!1});return n}catch(r){throw new ho.CredentialsProviderError(`Failed to load token from ${e}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let r=this.getTokenFilePath(),n=Rw.dirname(r);try{await vw.promises.mkdir(n,{recursive:!0})}catch{}await vw.promises.writeFile(r,JSON.stringify(e,null,2),"utf8")}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??Rw.join(Vle.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),n=gh.createHash("sha256").update(r).digest("hex");return Rw.join(e,`${n}.json`)}derToRawSignature(e){let r=2;if(e[r]!==2)throw new Error("Invalid DER signature");r++;let n=e[r++],s=e.subarray(r,r+n);if(r+=n,e[r]!==2)throw new Error("Invalid DER signature");r++;let o=e[r++],i=e.subarray(r,r+o);s=s[0]===0?s.subarray(1):s,i=i[0]===0?i.subarray(1):i;let a=Buffer.concat([Buffer.alloc(32-s.length),s]),c=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([a,c])}createDPoPInterceptor(e){e.add(r=>async n=>{if(Hle.HttpRequest.isInstance(n.request)){let s=n.request,o=`${s.protocol}//${s.hostname}${s.port?`:${s.port}`:""}${s.path}`,i=await this.generateDpop(s.method,o);s.headers={...s.headers,DPoP:i}}return r(n)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(e="POST",r){let n=await this.loadToken();try{let s=gh.createPrivateKey({key:n.dpopKey,format:"pem",type:"sec1"}),i=gh.createPublicKey(s).export({format:"der",type:"spki"}),a=-1;for(let k=0;k<i.length;k++)if(i[k]===4){a=k;break}let c=i.slice(a+1,a+33),u=i.slice(a+33,a+65),d={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:c.toString("base64url"),y:u.toString("base64url")}},l={jti:crypto.randomUUID(),htm:e,htu:r,iat:Math.floor(Date.now()/1e3)},g=Buffer.from(JSON.stringify(d)).toString("base64url"),y=Buffer.from(JSON.stringify(l)).toString("base64url"),S=`${g}.${y}`,w=gh.sign("sha256",Buffer.from(S),s),I=this.derToRawSignature(w).toString("base64url");return`${S}.${I}`}catch(s){throw new ho.CredentialsProviderError(`Failed to generate Dpop proof: ${s instanceof Error?s.message:String(s)}`,{logger:this.logger,tryNextLink:!1})}}},zle=t=>async({callerClientConfig:e}={})=>{t?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await Iw.parseKnownFiles(t||{}),n=Iw.getProfileName({profile:t?.profile??e?.profile}),s=r[n];if(!s?.login_session)throw new ho.CredentialsProviderError(`Profile ${n} does not contain login_session.`,{tryNextLink:!0,logger:t?.logger});let i=await new Aw(s,t,e).loadCredentials();return jle.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};wU.fromLoginCredentials=zle});function Wle(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Kle(t){return{schemeId:"smithy.api#noAuth"}}var Ou,vU,RU,Qle,IU,xw=T(()=>{Je();Ou=v(pt());ku();vU=async(t,e,r)=>({operation:(0,Ou.getSmithyContext)(e).operation,region:await(0,Ou.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});RU=t=>{let e=[];return t.operation==="AssumeRoleWithWebIdentity"?e.push(Kle(t)):e.push(Wle(t)),e},Qle=t=>Object.assign(t,{stsClientCtor:fn}),IU=t=>{let e=Qle(t),r=Gn(e);return Object.assign(r,{authSchemePreference:(0,Ou.normalizeProvider)(t.authSchemePreference??[])})}});var AU,yh,Sh=T(()=>{AU=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),yh={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var UU,re,Se,mo,ht,FU,qU,Me,xU,hn,$a,Dw,PU,Pw,GU,DU,mt,OU,jU,HU,Pt,lr,kU,VU,zU,NU,WU,MU,LU,$U,BU,Yle,KU,QU=T(()=>{UU="required",re="type",Se="argv",mo="booleanEquals",ht="stringEquals",FU="sigv4",qU="us-east-1",Me="endpoint",xU="https://sts.{Region}.{PartitionResult#dnsSuffix}",hn="tree",$a="error",Dw="getAttr",PU={[UU]:!1,[re]:"string"},Pw={[UU]:!0,default:!1,[re]:"boolean"},GU={ref:"Endpoint"},DU={fn:"isSet",[Se]:[{ref:"Region"}]},mt={ref:"Region"},OU={fn:"aws.partition",[Se]:[mt],assign:"PartitionResult"},jU={ref:"UseFIPS"},HU={ref:"UseDualStack"},Pt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:FU,signingName:"sts",signingRegion:qU}]},headers:{}},lr={},kU={conditions:[{fn:ht,[Se]:[mt,"aws-global"]}],[Me]:Pt,[re]:Me},VU={fn:mo,[Se]:[jU,!0]},zU={fn:mo,[Se]:[HU,!0]},NU={fn:Dw,[Se]:[{ref:"PartitionResult"},"supportsFIPS"]},WU={ref:"PartitionResult"},MU={fn:mo,[Se]:[!0,{fn:Dw,[Se]:[WU,"supportsDualStack"]}]},LU=[{fn:"isSet",[Se]:[GU]}],$U=[VU],BU=[zU],Yle={version:"1.0",parameters:{Region:PU,UseDualStack:Pw,UseFIPS:Pw,Endpoint:PU,UseGlobalEndpoint:Pw},rules:[{conditions:[{fn:mo,[Se]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[Se]:LU},DU,OU,{fn:mo,[Se]:[jU,!1]},{fn:mo,[Se]:[HU,!1]}],rules:[{conditions:[{fn:ht,[Se]:[mt,"ap-northeast-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"ap-south-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"ap-southeast-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"ap-southeast-2"]}],endpoint:Pt,[re]:Me},kU,{conditions:[{fn:ht,[Se]:[mt,"ca-central-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"eu-central-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"eu-north-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"eu-west-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"eu-west-2"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"eu-west-3"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"sa-east-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,qU]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"us-east-2"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"us-west-1"]}],endpoint:Pt,[re]:Me},{conditions:[{fn:ht,[Se]:[mt,"us-west-2"]}],endpoint:Pt,[re]:Me},{endpoint:{url:xU,properties:{authSchemes:[{name:FU,signingName:"sts",signingRegion:"{Region}"}]},headers:lr},[re]:Me}],[re]:hn},{conditions:LU,rules:[{conditions:$U,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[re]:$a},{conditions:BU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[re]:$a},{endpoint:{url:GU,properties:lr,headers:lr},[re]:Me}],[re]:hn},{conditions:[DU],rules:[{conditions:[OU],rules:[{conditions:[VU,zU],rules:[{conditions:[{fn:mo,[Se]:[!0,NU]},MU],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lr,headers:lr},[re]:Me}],[re]:hn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[re]:$a}],[re]:hn},{conditions:$U,rules:[{conditions:[{fn:mo,[Se]:[NU,!0]}],rules:[{conditions:[{fn:ht,[Se]:[{fn:Dw,[Se]:[WU,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:lr,headers:lr},[re]:Me},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:lr,headers:lr},[re]:Me}],[re]:hn},{error:"FIPS is enabled but this partition does not support FIPS",[re]:$a}],[re]:hn},{conditions:BU,rules:[{conditions:[MU],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lr,headers:lr},[re]:Me}],[re]:hn},{error:"DualStack is enabled but this partition does not support DualStack",[re]:$a}],[re]:hn},kU,{endpoint:{url:xU,properties:lr,headers:lr},[re]:Me}],[re]:hn}],[re]:hn},{error:"Invalid Configuration: Missing Region",[re]:$a}]},KU=Yle});var YU,Ba,Xle,XU,JU=T(()=>{YU=v(Ns()),Ba=v(Fn());QU();Xle=new Ba.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),XU=(t,e={})=>Xle.get(t,()=>(0,Ba.resolveEndpoint)(KU,{endpointParams:t,logger:e.logger}));Ba.customEndpointFunctions.aws=YU.awsEndpointFunctions});var ZU,eF,Eh,bh,tF,rF=T(()=>{Je();Kn();_t();ZU=v(Z()),eF=v(on()),Eh=v(Xe()),bh=v(rt());xw();JU();tF=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??Eh.fromBase64,base64Encoder:t?.base64Encoder??Eh.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??XU,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??RU,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new wt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Lr}],logger:t?.logger??new ZU.NoOpLogger,protocol:t?.protocol??Qs,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??eF.parseUrl,utf8Decoder:t?.utf8Decoder??bh.fromUtf8,utf8Encoder:t?.utf8Encoder??bh.toUtf8})});var _h,yo,nF,Th,go,wh,Ch,sF,oF,iF,aF,cF=T(()=>{uf();Je();_h=v(ei()),yo=v(Rt());_t();nF=v(ti()),Th=v(ar()),go=v(Ur()),wh=v(Ln()),Ch=v(Z()),sF=v(ri()),oF=v(ni()),iF=v(eo());rF();aF=t=>{(0,Ch.emitWarningIfUnsupportedVersion)(process.version);let e=(0,oF.resolveDefaultsModeConfig)(t),r=()=>e().then(Ch.loadConfigsForDefaultMode),n=tF(t);Ms(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,go.loadConfig)($s,s),bodyLengthChecker:t?.bodyLengthChecker??sF.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,_h.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:va.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await t.credentialDefaultProvider(i?.__config||{})()),signer:new wt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Lr}],maxAttempts:t?.maxAttempts??(0,go.loadConfig)(Th.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,go.loadConfig)(yo.NODE_REGION_CONFIG_OPTIONS,{...yo.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:wh.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,go.loadConfig)({...Th.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||iF.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??nF.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??wh.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,go.loadConfig)(yo.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,go.loadConfig)(yo.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,go.loadConfig)(_h.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var uF,lF,dF=T(()=>{uF=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},lF=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var vh,Rh,Ih,pF,fF=T(()=>{vh=v(io()),Rh=v(be()),Ih=v(Z());dF();pF=(t,e)=>{let r=Object.assign((0,vh.getAwsRegionExtensionConfiguration)(t),(0,Ih.getDefaultExtensionConfiguration)(t),(0,Rh.getHttpHandlerExtensionConfiguration)(t),uF(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,vh.resolveAwsRegionExtensionConfiguration)(r),(0,Ih.resolveDefaultRuntimeConfig)(r),(0,Rh.resolveHttpHandlerRuntimeConfig)(r),lF(r))}});var Ah,hF,mF,xh,gF,yF,SF,Ph,Ow,fn,ku=T(()=>{Ah=v(No()),hF=v(Mo()),mF=v(Lo()),xh=v(Ys()),gF=v(Rt());_t();ye();yF=v(Xo()),SF=v(Fr()),Ph=v(ar()),Ow=v(Z());xw();Sh();cF();fF();fn=class extends Ow.Client{config;constructor(...[e]){let r=aF(e||{});super(r),this.initConfig=r;let n=AU(r),s=(0,xh.resolveUserAgentConfig)(n),o=(0,Ph.resolveRetryConfig)(s),i=(0,gF.resolveRegionConfig)(o),a=(0,Ah.resolveHostHeaderConfig)(i),c=(0,SF.resolveEndpointConfig)(a),u=IU(c),d=pF(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Uo(this.config)),this.middlewareStack.use((0,xh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Ph.getRetryPlugin)(this.config)),this.middlewareStack.use((0,yF.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ah.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hF.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,mF.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($o(this.config,{httpAuthSchemeParametersProvider:vU,identityProviderConfigProvider:async l=>new Un({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Bo(this.config))}destroy(){super.destroy()}}});var EF,Qt,Dh=T(()=>{EF=v(Z()),Qt=class t extends EF.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Nu,Mu,Lu,$u,Bu,Uu,Fu,kw=T(()=>{Dh();Nu=class t extends Qt{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Mu=class t extends Qt{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Lu=class t extends Qt{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},$u=class t extends Qt{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Bu=class t extends Qt{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Uu=class t extends Qt{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Fu=class t extends Qt{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var Jle,Zle,ede,tde,rde,nde,Nw,sde,ode,ide,ade,Mw,cde,bF,ude,lde,dde,pde,fde,hde,mde,gde,_F,TF,yde,Sde,Ede,bde,_de,Tde,wF,wde,Cde,CF,vde,vF,Rde,Ide,Lw,Ade,xde,Pde,Dde,Ode,kde,Nde,Mde,Lde,$de,ci,ui,Bde,li,di,pi,Ude,RF,Fde,Te,qde,Gde,$w,IF,AF,xF,PF,Bw,DF,OF,kF,NF,MF,LF,$F,BF,UF,FF,qF,GF,jde,Hde,Uw,Fw,Oh=T(()=>{ye();kw();Dh();Jle="Arn",Zle="AccessKeyId",ede="AssumeRole",tde="AssumedRoleId",rde="AssumeRoleRequest",nde="AssumeRoleResponse",Nw="AssumedRoleUser",sde="AssumeRoleWithWebIdentity",ode="AssumeRoleWithWebIdentityRequest",ide="AssumeRoleWithWebIdentityResponse",ade="Audience",Mw="Credentials",cde="ContextAssertion",bF="DurationSeconds",ude="Expiration",lde="ExternalId",dde="ExpiredTokenException",pde="IDPCommunicationErrorException",fde="IDPRejectedClaimException",hde="InvalidIdentityTokenException",mde="Key",gde="MalformedPolicyDocumentException",_F="Policy",TF="PolicyArns",yde="ProviderArn",Sde="ProvidedContexts",Ede="ProvidedContextsListType",bde="ProvidedContext",_de="PolicyDescriptorType",Tde="ProviderId",wF="PackedPolicySize",wde="PackedPolicyTooLargeException",Cde="Provider",CF="RoleArn",vde="RegionDisabledException",vF="RoleSessionName",Rde="SecretAccessKey",Ide="SubjectFromWebIdentityToken",Lw="SourceIdentity",Ade="SerialNumber",xde="SessionToken",Pde="Tags",Dde="TokenCode",Ode="TransitiveTagKeys",kde="Tag",Nde="Value",Mde="WebIdentityToken",Lde="arn",$de="accessKeySecretType",ci="awsQueryError",ui="client",Bde="clientTokenType",li="error",di="httpError",pi="message",Ude="policyDescriptorListType",RF="smithy.ts.sdk.synthetic.com.amazonaws.sts",Fde="tagListType",Te="com.amazonaws.sts",qde=[0,Te,$de,8,0],Gde=[0,Te,Bde,8,0],$w=[3,Te,Nw,0,[tde,Jle],[0,0],2],IF=[3,Te,rde,0,[CF,vF,TF,_F,bF,Pde,Ode,lde,Ade,Dde,Lw,Sde],[0,0,()=>GF,0,1,()=>Hde,64,0,0,0,0,()=>jde],2],AF=[3,Te,nde,0,[Mw,Nw,wF,Lw],[[()=>Bw,0],()=>$w,1,0]],xF=[3,Te,ode,0,[CF,vF,Mde,Tde,TF,_F,bF],[0,0,[()=>Gde,0],0,()=>GF,0,1],3],PF=[3,Te,ide,0,[Mw,Ide,Nw,wF,Cde,ade,Lw],[[()=>Bw,0],0,()=>$w,1,0,0,0]],Bw=[3,Te,Mw,0,[Zle,Rde,xde,ude],[0,[()=>qde,0],0,4],4],DF=[-3,Te,dde,{[ci]:["ExpiredTokenException",400],[li]:ui,[di]:400},[pi],[0]];W.for(Te).registerError(DF,Nu);OF=[-3,Te,pde,{[ci]:["IDPCommunicationError",400],[li]:ui,[di]:400},[pi],[0]];W.for(Te).registerError(OF,Fu);kF=[-3,Te,fde,{[ci]:["IDPRejectedClaim",403],[li]:ui,[di]:403},[pi],[0]];W.for(Te).registerError(kF,Bu);NF=[-3,Te,hde,{[ci]:["InvalidIdentityToken",400],[li]:ui,[di]:400},[pi],[0]];W.for(Te).registerError(NF,Uu);MF=[-3,Te,gde,{[ci]:["MalformedPolicyDocument",400],[li]:ui,[di]:400},[pi],[0]];W.for(Te).registerError(MF,Mu);LF=[-3,Te,wde,{[ci]:["PackedPolicyTooLarge",400],[li]:ui,[di]:400},[pi],[0]];W.for(Te).registerError(LF,Lu);$F=[3,Te,_de,0,[Lde],[0]],BF=[3,Te,bde,0,[yde,cde],[0,0]],UF=[-3,Te,vde,{[ci]:["RegionDisabledException",403],[li]:ui,[di]:403},[pi],[0]];W.for(Te).registerError(UF,$u);FF=[3,Te,kde,0,[mde,Nde],[0,0],2],qF=[-3,RF,"STSServiceException",0,[],[]];W.for(RF).registerError(qF,Qt);GF=[1,Te,Ude,0,()=>$F],jde=[1,Te,Ede,0,()=>BF],Hde=[1,Te,Fde,0,()=>FF],Uw=[9,Te,ede,0,()=>IF,()=>AF],Fw=[9,Te,sde,0,()=>xF,()=>PF]});var jF,HF,fi,kh=T(()=>{jF=v(Fr()),HF=v(Z());Sh();Oh();fi=class extends HF.Command.classBuilder().ep(yh).m(function(e,r,n,s){return[(0,jF.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Uw).build(){}});var VF,zF,hi,Nh=T(()=>{VF=v(Fr()),zF=v(Z());Sh();Oh();hi=class extends zF.Command.classBuilder().ep(yh).m(function(e,r,n,s){return[(0,VF.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(Fw).build(){}});var WF,Vde,Mh,KF=T(()=>{WF=v(Z());kh();Nh();ku();Vde={AssumeRoleCommand:fi,AssumeRoleWithWebIdentityCommand:hi},Mh=class extends fn{};(0,WF.createAggregatedClient)(Vde,Mh)});var QF=T(()=>{kh();Nh()});var YF=T(()=>{});var XF,JF,ZF,eq,tq,rq,nq=T(()=>{br();XF=v(io());kh();Nh();JF=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},ZF=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e,i="",a=s??o??(i=await(0,XF.stsRegionDefaultResolver)(n)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),a},eq=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:d=t?.parentClientConfig?.logger,profile:l=t?.parentClientConfig?.profile,region:g,requestHandler:y=t?.parentClientConfig?.requestHandler,credentialProviderLogger:S,userAgentAppId:w=t?.parentClientConfig?.userAgentAppId}=t,A=await ZF(g,t?.parentClientConfig?.region,S,{logger:d,profile:l}),I=!rq(y);r=new e({...t,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>n,region:A,requestHandler:I?y:void 0,logger:d})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new fi(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=JF(a),u={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return Ls(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},tq=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:d,requestHandler:l=t?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:y=t?.parentClientConfig?.userAgentAppId}=t,S=await ZF(d,t?.parentClientConfig?.region,g,{logger:c,profile:u}),w=!rq(l);r=new e({...t,userAgentAppId:y,profile:u,region:S,requestHandler:w?l:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new hi(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=JF(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&Ls(a,"RESOLVED_ACCOUNT_ID","T"),Ls(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},rq=t=>t?.metadata?.handlerProtocol==="h2"});var sq,oq,iq,zde,aq=T(()=>{nq();ku();sq=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,oq=(t={},e)=>eq(t,sq(fn,e)),iq=(t={},e)=>tq(t,sq(fn,e)),zde=t=>e=>t({roleAssumer:oq(e),roleAssumerWithWebIdentity:iq(e),...e})});var qw={};yt(qw,{AssumeRole$:()=>Uw,AssumeRoleCommand:()=>fi,AssumeRoleRequest$:()=>IF,AssumeRoleResponse$:()=>AF,AssumeRoleWithWebIdentity$:()=>Fw,AssumeRoleWithWebIdentityCommand:()=>hi,AssumeRoleWithWebIdentityRequest$:()=>xF,AssumeRoleWithWebIdentityResponse$:()=>PF,AssumedRoleUser$:()=>$w,Credentials$:()=>Bw,ExpiredTokenException:()=>Nu,ExpiredTokenException$:()=>DF,IDPCommunicationErrorException:()=>Fu,IDPCommunicationErrorException$:()=>OF,IDPRejectedClaimException:()=>Bu,IDPRejectedClaimException$:()=>kF,InvalidIdentityTokenException:()=>Uu,InvalidIdentityTokenException$:()=>NF,MalformedPolicyDocumentException:()=>Mu,MalformedPolicyDocumentException$:()=>MF,PackedPolicyTooLargeException:()=>Lu,PackedPolicyTooLargeException$:()=>LF,PolicyDescriptorType$:()=>$F,ProvidedContext$:()=>BF,RegionDisabledException:()=>$u,RegionDisabledException$:()=>UF,STS:()=>Mh,STSClient:()=>fn,STSServiceException:()=>Qt,STSServiceException$:()=>qF,Tag$:()=>FF,__Client:()=>Ow.Client,decorateDefaultCredentialProvider:()=>zde,getDefaultRoleAssumer:()=>oq,getDefaultRoleAssumerWithWebIdentity:()=>iq});var Gw=T(()=>{ku();KF();QF();Oh();kw();YF();aq();Dh()});var Vw=b(cq=>{"use strict";var Hw=un(),jw=Ct(),Wde=require("child_process"),Kde=require("util"),Qde=(br(),K(qn)),Yde=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let o=new Date;if(new Date(e.Expiration)<o)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return Qde.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},Xde=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let o=Kde.promisify(Hw.externalDataInterceptor?.getTokenRecord?.().exec??Wde.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return Yde(t,a,e)}catch(i){throw new jw.CredentialsProviderError(i.message,{logger:r})}}else throw new jw.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new jw.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},Jde=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await Hw.parseKnownFiles(t);return Xde(Hw.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};cq.fromProcess=Jde});var zw=b(mn=>{"use strict";var Zde=mn&&mn.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),epe=mn&&mn.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),tpe=mn&&mn.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&Zde(r,e,n[s]);return epe(r,e),r}})();Object.defineProperty(mn,"__esModule",{value:!0});mn.fromWebToken=void 0;var rpe=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>tpe((Gw(),K(qw))));u=d({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};mn.fromWebToken=rpe});var lq=b(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.fromTokenFile=void 0;var npe=(br(),K(qn)),spe=Ct(),ope=un(),ipe=require("fs"),ape=zw(),uq="AWS_WEB_IDENTITY_TOKEN_FILE",cpe="AWS_ROLE_ARN",upe="AWS_ROLE_SESSION_NAME",lpe=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[uq],n=t?.roleArn??process.env[cpe],s=t?.roleSessionName??process.env[upe];if(!r||!n)throw new spe.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let o=await(0,ape.fromWebToken)({...t,webIdentityToken:ope.externalDataInterceptor?.getTokenRecord?.()[r]??(0,ipe.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[uq]&&(0,npe.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};Lh.fromTokenFile=lpe});var Ww=b(qu=>{"use strict";var dq=lq(),pq=zw();Object.keys(dq).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qu,t)&&Object.defineProperty(qu,t,{enumerable:!0,get:function(){return dq[t]}})});Object.keys(pq).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qu,t)&&Object.defineProperty(qu,t,{enumerable:!0,get:function(){return pq[t]}})})});var Sq=b(yq=>{"use strict";var Qw=un(),Gu=Ct(),Jn=(br(),K(qn)),dpe=CU(),ppe=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>v(BT())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>v(eu()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Gu.chain(o(s??{}),i(s))().then(Kw)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>v(eu()));return async()=>o(s)().then(Kw)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>v(PT()));return async()=>o(s)().then(Kw)}};if(t in n)return n[t];throw new Gu.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},Kw=t=>Jn.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),fpe=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(hpe(t,{profile:e,logger:r})||mpe(t,{profile:e,logger:r})),hpe=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},mpe=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},gpe=async(t,e,r,n,s={},o)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:a,region:c}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(Gw(),qw));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...n,...r?.parentClientConfig,region:c??r?.parentClientConfig?.region??n?.region}},r.clientPlugins)}if(a&&a in s)throw new Gu.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Qw.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let u=a?o(a,e,r,n,{...s,[a]:!0},fq(e[a]??{})):(await ppe(i.credential_source,t,r.logger)(r))();if(fq(i))return u.then(d=>Jn.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Gu.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let g=await u;return r.roleAssumer(g,d).then(y=>Jn.setCredentialFeature(y,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},fq=t=>!t.role_arn&&!!t.credential_source,ype=t=>!!(t&&t.login_session),Spe=async(t,e,r)=>{let n=await dpe.fromLoginCredentials({...e,profile:t})({callerClientConfig:r});return Jn.setCredentialFeature(n,"CREDENTIALS_PROFILE_LOGIN","AC")},Epe=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",bpe=async(t,e)=>Promise.resolve().then(()=>v(Vw())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>Jn.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),_pe=async(t,e,r={},n)=>{let{fromSSO:s}=await Promise.resolve().then(()=>v(uw()));return s({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:n}).then(o=>e.sso_session?Jn.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):Jn.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},Tpe=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),hq=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,mq=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Jn.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},wpe=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,Cpe=async(t,e,r)=>Promise.resolve().then(()=>v(Ww())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})({callerClientConfig:r}).then(s=>Jn.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),gq=async(t,e,r,n,s={},o=!1)=>{let i=e[t];if(Object.keys(s).length>0&&hq(i))return mq(i,r);if(o||fpe(i,{profile:t,logger:r.logger}))return gpe(t,e,r,n,s,gq);if(hq(i))return mq(i,r);if(wpe(i))return Cpe(i,r,n);if(Epe(i))return bpe(r,t);if(Tpe(i))return await _pe(t,i,r,n);if(ype(i))return Spe(t,r,n);throw new Gu.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},vpe=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await Qw.parseKnownFiles(t);return gq(Qw.getProfileName({profile:t.profile??e?.profile}),r,t,e)};yq.fromIni=vpe});var Xw=b($h=>{"use strict";var Yw=PT(),ju=Ct(),Rpe=un(),Eq="AWS_EC2_METADATA_DISABLED",Ipe=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>v(eu()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>v(BT()));return ju.chain(o(t),n(t))}return process.env[Eq]&&process.env[Eq]!=="false"?async()=>{throw new ju.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function Ape(t,e){let r=xpe(t),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||e?.(o))if(o)s||(s=r(a).then(c=>{o=c,s=void 0}));else return n=r(a).then(c=>{o=c,n=void 0}),i(a);return o};return i}var xpe=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},bq=!1,Ppe=(t={})=>Ape([async()=>{if(t.profile??process.env[Rpe.ENV_PROFILE])throw process.env[Yw.ENV_KEY]&&process.env[Yw.ENV_SECRET]&&(bq||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),bq=!0)),new ju.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Yw.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t;if(!r&&!n&&!s&&!o&&!i)throw new ju.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>v(uw()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>v(Sq()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>v(Vw()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>v(Ww()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Ipe(t))()),async()=>{throw new ju.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],_q),Dpe=t=>t?.expiration!==void 0,_q=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;$h.credentialsTreatedAsExpired=_q;$h.credentialsWillNeedRefresh=Dpe;$h.defaultProvider=Ppe});var Uq=b(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.ruleSet=void 0;var Lq="required",Yt="fn",Xt="argv",mi="ref",So="properties",Eo="headers",Tq=!0,wq="isSet",Hu="booleanEquals",Ua="error",gn="endpoint",Zn="tree",Bh="PartitionResult",Jw="stringEquals",Cq={[Lq]:!1,type:"string"},vq={[Lq]:!0,default:!1,type:"boolean"},Rq={[mi]:"Endpoint"},$q={[Yt]:Hu,[Xt]:[{[mi]:"UseFIPS"},!0]},Bq={[Yt]:Hu,[Xt]:[{[mi]:"UseDualStack"},!0]},Ir={},Iq={[Yt]:"getAttr",[Xt]:[{[mi]:Bh},"supportsFIPS"]},Aq={[Yt]:Hu,[Xt]:[!0,{[Yt]:"getAttr",[Xt]:[{[mi]:Bh},"supportsDualStack"]}]},Zw={[Yt]:"getAttr",[Xt]:[{[mi]:Bh},"name"]},xq={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[So]:{},[Eo]:{}},Pq={url:"https://secretsmanager.{Region}.amazonaws.com",[So]:{},[Eo]:{}},Dq=[$q],Oq=[Bq],kq=[{[mi]:"Region"}],Nq=[{[Yt]:Jw,[Xt]:["aws",Zw]}],Mq=[{[Yt]:Jw,[Xt]:["aws-us-gov",Zw]}],Ope={version:"1.0",parameters:{Region:Cq,UseDualStack:vq,UseFIPS:vq,Endpoint:Cq},rules:[{conditions:[{[Yt]:wq,[Xt]:[Rq]}],rules:[{conditions:Dq,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ua},{conditions:Oq,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ua},{endpoint:{url:Rq,[So]:Ir,[Eo]:Ir},type:gn}],type:Zn},{conditions:[{[Yt]:wq,[Xt]:kq}],rules:[{conditions:[{[Yt]:"aws.partition",[Xt]:kq,assign:Bh}],rules:[{conditions:[$q,Bq],rules:[{conditions:[{[Yt]:Hu,[Xt]:[Tq,Iq]},Aq],rules:[{conditions:Nq,endpoint:xq,type:gn},{conditions:Mq,endpoint:xq,type:gn},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[So]:Ir,[Eo]:Ir},type:gn}],type:Zn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ua}],type:Zn},{conditions:Dq,rules:[{conditions:[{[Yt]:Hu,[Xt]:[Iq,Tq]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[So]:Ir,[Eo]:Ir},type:gn}],type:Zn},{error:"FIPS is enabled but this partition does not support FIPS",type:Ua}],type:Zn},{conditions:Oq,rules:[{conditions:[Aq],rules:[{conditions:Nq,endpoint:Pq,type:gn},{conditions:[{[Yt]:Jw,[Xt]:["aws-cn",Zw]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[So]:Ir,[Eo]:Ir},type:gn},{conditions:Mq,endpoint:Pq,type:gn},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[So]:Ir,[Eo]:Ir},type:gn}],type:Zn},{error:"DualStack is enabled but this partition does not support DualStack",type:Ua}],type:Zn},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[So]:Ir,[Eo]:Ir},type:gn}],type:Zn}],type:Zn},{error:"Invalid Configuration: Missing Region",type:Ua}]};Uh.ruleSet=Ope});var Fq=b(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.defaultEndpointResolver=void 0;var kpe=Ns(),eC=Fn(),Npe=Uq(),Mpe=new eC.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Lpe=(t,e={})=>Mpe.get(t,()=>(0,eC.resolveEndpoint)(Npe.ruleSet,{endpointParams:t,logger:e.logger}));Fh.defaultEndpointResolver=Lpe;eC.customEndpointFunctions.aws=kpe.awsEndpointFunctions});var jq=b(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.getRuntimeConfig=void 0;var $pe=(Je(),K(Br)),Bpe=(Kn(),K(Kc)),Upe=Z(),Fpe=on(),qq=Xe(),Gq=rt(),qpe=xT(),Gpe=Fq(),jpe=t=>({apiVersion:"2017-10-17",base64Decoder:t?.base64Decoder??qq.fromBase64,base64Encoder:t?.base64Encoder??qq.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Gpe.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??qpe.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new $pe.AwsSdkSigV4Signer}],logger:t?.logger??new Upe.NoOpLogger,protocol:t?.protocol??Bpe.AwsJson1_1Protocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.secretsmanager",version:"2017-10-17",serviceTarget:"secretsmanager"},serviceId:t?.serviceId??"Secrets Manager",urlParser:t?.urlParser??Fpe.parseUrl,utf8Decoder:t?.utf8Decoder??Gq.fromUtf8,utf8Encoder:t?.utf8Encoder??Gq.toUtf8});qh.getRuntimeConfig=jpe});var Qq=b(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.getRuntimeConfig=void 0;var Hpe=(na(),K(ra)),Vpe=Hpe.__importDefault(QM()),Hq=(Je(),K(Br)),zpe=Xw(),Vq=ei(),Gh=Rt(),Wpe=ti(),zq=ar(),gi=Ur(),Wq=Ln(),Kq=Z(),Kpe=ri(),Qpe=ni(),Ype=eo(),Xpe=jq(),Jpe=t=>{(0,Kq.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Qpe.resolveDefaultsModeConfig)(t),r=()=>e().then(Kq.loadConfigsForDefaultMode),n=(0,Xpe.getRuntimeConfig)(t);(0,Hq.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,gi.loadConfig)(Hq.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??Kpe.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??zpe.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Vq.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Vpe.default.version}),maxAttempts:t?.maxAttempts??(0,gi.loadConfig)(zq.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,gi.loadConfig)(Gh.NODE_REGION_CONFIG_OPTIONS,{...Gh.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Wq.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,gi.loadConfig)({...zq.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Ype.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??Wpe.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Wq.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,gi.loadConfig)(Gh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,gi.loadConfig)(Gh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,gi.loadConfig)(Vq.NODE_APP_ID_CONFIG_OPTIONS,s)}};jh.getRuntimeConfig=Jpe});var rj=b(x=>{"use strict";var Yq=No(),Zpe=Mo(),efe=Lo(),Xq=Ys(),tfe=Rt(),Fa=(_t(),K(zo)),Jt=(ye(),K(Ji)),rfe=Xo(),Le=Fr(),Jq=ar(),we=Z(),Zq=xT(),nfe=Qq(),e3=io(),t3=be(),sfe=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),je={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},ofe=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},ife=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),afe=(t,e)=>{let r=Object.assign(e3.getAwsRegionExtensionConfiguration(t),we.getDefaultExtensionConfiguration(t),t3.getHttpHandlerExtensionConfiguration(t),ofe(t));return e.forEach(n=>n.configure(r)),Object.assign(t,e3.resolveAwsRegionExtensionConfiguration(r),we.resolveDefaultRuntimeConfig(r),t3.resolveHttpHandlerRuntimeConfig(r),ife(r))},yi=class extends we.Client{config;constructor(...[e]){let r=nfe.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=sfe(r),s=Xq.resolveUserAgentConfig(n),o=Jq.resolveRetryConfig(s),i=tfe.resolveRegionConfig(o),a=Yq.resolveHostHeaderConfig(i),c=Le.resolveEndpointConfig(a),u=Zq.resolveHttpAuthSchemeConfig(c),d=afe(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Jt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(Xq.getUserAgentPlugin(this.config)),this.middlewareStack.use(Jq.getRetryPlugin(this.config)),this.middlewareStack.use(rfe.getContentLengthPlugin(this.config)),this.middlewareStack.use(Yq.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Zpe.getLoggerPlugin(this.config)),this.middlewareStack.use(efe.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Fa.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Zq.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new Fa.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Fa.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Dt=class t extends we.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Hh=class t extends Dt{name="DecryptionFailure";$fault="client";Message;constructor(e){super({name:"DecryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Vh=class t extends Dt{name="InternalServiceError";$fault="server";Message;constructor(e){super({name:"InternalServiceError",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},zh=class t extends Dt{name="InvalidNextTokenException";$fault="client";Message;constructor(e){super({name:"InvalidNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Wh=class t extends Dt{name="InvalidParameterException";$fault="client";Message;constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Kh=class t extends Dt{name="InvalidRequestException";$fault="client";Message;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Qh=class t extends Dt{name="ResourceNotFoundException";$fault="client";Message;constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Yh=class t extends Dt{name="EncryptionFailure";$fault="client";Message;constructor(e){super({name:"EncryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Xh=class t extends Dt{name="LimitExceededException";$fault="client";Message;constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Jh=class t extends Dt{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Zh=class t extends Dt{name="PreconditionNotMetException";$fault="client";Message;constructor(e){super({name:"PreconditionNotMetException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},em=class t extends Dt{name="ResourceExistsException";$fault="client";Message;constructor(e){super({name:"ResourceExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},tm=class t extends Dt{name="PublicPolicyException";$fault="client";Message;constructor(e){super({name:"PublicPolicyException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},cfe="AutomaticallyAfterDays",ufe="APIErrorListType",lfe="APIErrorType",st="ARN",r3="AddReplicaRegions",dfe="AddReplicaRegionListType",pfe="BatchGetSecretValue",ffe="BatchGetSecretValueRequest",hfe="BatchGetSecretValueResponse",mfe="BlockPublicPolicy",Ku="CreatedDate",gfe="CheckName",yfe="CancelRotateSecret",Sfe="CancelRotateSecretRequest",Efe="CancelRotateSecretResponse",wm="ClientRequestToken",bfe="CreateSecret",_fe="CreateSecretRequest",Tfe="CreateSecretResponse",Cm="Description",wfe="DeletionDate",n3="DeletedDate",Cfe="DecryptionFailure",vfe="DeleteResourcePolicy",Rfe="DeleteResourcePolicyRequest",Ife="DeleteResourcePolicyResponse",Afe="DeleteSecret",xfe="DeleteSecretRequest",Pfe="DeleteSecretResponse",Dfe="DescribeSecretRequest",Ofe="DescribeSecretResponse",kfe="DescribeSecret",Nfe="Duration",Mfe="Errors",Lfe="ErrorCode",$fe="ExcludeCharacters",Bfe="EncryptionFailure",Ufe="ExcludeLowercase",Ffe="ErrorMessage",qfe="ExcludeNumbers",Gfe="ExcludePunctuation",tC="ExternalSecretRotationMetadata",jfe="ExternalSecretRotationMetadataItem",Hfe="ExternalSecretRotationMetadataType",rC="ExternalSecretRotationRoleArn",Vfe="ExcludeUppercase",s3="Filters",zfe="ForceDeleteWithoutRecovery",Wfe="FiltersListType",o3="ForceOverwriteReplicaSecret",Kfe="Filter",Qfe="GetRandomPassword",Yfe="GetRandomPasswordRequest",Xfe="GetRandomPasswordResponse",Jfe="GetResourcePolicyRequest",Zfe="GetResourcePolicyResponse",ehe="GetResourcePolicy",the="GetSecretValue",rhe="GetSecretValueRequest",nhe="GetSecretValueResponse",she="IncludeDeprecated",ohe="InvalidNextTokenException",ihe="IncludePlannedDeletion",ahe="InvalidParameterException",che="InvalidRequestException",uhe="IncludeSpace",lhe="InternalServiceError",nC="Key",qa="KmsKeyId",dhe="KmsKeyIds",vm="LastAccessedDate",i3="LastChangedDate",phe="LimitExceededException",a3="LastRotatedDate",fhe="ListSecrets",hhe="ListSecretsRequest",mhe="ListSecretsResponse",ghe="ListSecretVersionIds",yhe="ListSecretVersionIdsRequest",She="ListSecretVersionIdsResponse",dr="Message",Ehe="MalformedPolicyDocumentException",sC="MaxResults",bhe="MoveToVersionId",gt="Name",c3="NextRotationDate",Ga="NextToken",u3="OwningService",_he="PasswordLength",The="PreconditionNotMetException",whe="PublicPolicyException",l3="PrimaryRegion",Che="PutResourcePolicy",vhe="PutResourcePolicyRequest",Rhe="PutResourcePolicyResponse",Ihe="PutSecretValue",Ahe="PutSecretValueRequest",xhe="PutSecretValueResponse",Phe="PolicyValidationPassed",d3="Region",p3="RotationEnabled",Dhe="ResourceExistsException",Ohe="RequireEachIncludedType",khe="RemoveFromVersionId",Nhe="RotateImmediately",oC="RotationLambdaARN",Mhe="ResourceNotFoundException",Lhe="RandomPassword",$he="RandomPasswordType",iC="ResourcePolicy",aC="RotationRules",Bhe="RemoveRegionsFromReplication",Uhe="RemoveRegionsFromReplicationRequest",Fhe="RemoveRegionsFromReplicationResponse",qhe="RemoveReplicaRegions",Ghe="ReplicaRegionType",jhe="RotationRulesType",Rm="ReplicationStatus",Hhe="ReplicationStatusListType",Vhe="RestoreSecretRequest",zhe="RestoreSecretResponse",Whe="RotateSecretRequest",Khe="RotateSecretResponse",Qhe="ReplicationStatusType",Yhe="ReplicateSecretToRegions",Xhe="ReplicateSecretToRegionsRequest",Jhe="ReplicateSecretToRegionsResponse",Zhe="RestoreSecret",eme="RotateSecret",tme="RotationToken",rme="RotationTokenType",nme="RecoveryWindowInDays",sme="Status",Qu="SecretBinary",ome="SecretBinaryType",ime="SortBy",ame="ScheduleExpression",Ze="SecretId",cme="SecretIdList",ume="SecretList",lme="SecretListEntry",dme="SecretListType",pme="StatusMessage",fme="SortOrder",hme="StopReplicationToReplica",mme="StopReplicationToReplicaRequest",gme="StopReplicationToReplicaResponse",Yu="SecretString",yme="SecretStringType",Sme="SecretValues",Eme="SecretValueEntry",bme="SecretVersionsListEntry",_me="SecretVersionsListType",Tme="SecretValuesType",wme="SecretVersionsToStages",f3="SecretVersionsToStagesMapType",Im="Tags",Cme="TagKeys",vme="TagListType",Rme="TagResource",Ime="TagResourceRequest",Ame="Tag",Am="Type",xme="UntagResource",Pme="UntagResourceRequest",Dme="UpdateSecret",Ome="UpdateSecretRequest",kme="UpdateSecretResponse",Nme="UpdateSecretVersionStage",Mme="UpdateSecretVersionStageRequest",Lme="UpdateSecretVersionStageResponse",h3="Value",$me="ValidationErrors",Bme="ValidationErrorsEntry",Ume="ValidationErrorsType",es="VersionId",Fme="VersionIdsToStages",qme="ValidateResourcePolicy",Gme="ValidateResourcePolicyRequest",jme="ValidateResourcePolicyResponse",m3="VersionStage",Xu="VersionStages",Hme="Values",Vme="Versions",Wr="client",Ar="error",zme="server",g3="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",O="com.amazonaws.secretsmanager",Wme=[0,O,$he,8,0],Kme=[0,O,rme,8,0],Ju=[0,O,ome,8,21],Zu=[0,O,yme,8,0],y3=[3,O,lfe,0,[Ze,Lfe,dr],[0,0,0]],S3=[3,O,ffe,0,[cme,s3,sC,Ga],[64,()=>OG,1,0]],E3=[3,O,hfe,0,[Sme,Ga,Mfe],[[()=>Xme,0],0,()=>Qme]],b3=[3,O,Sfe,0,[Ze],[0],1],_3=[3,O,Efe,0,[st,gt,es],[0,0,0]],T3=[3,O,_fe,0,[gt,wm,Cm,qa,Qu,Yu,Im,r3,o3,Am],[0,[0,4],0,0,[()=>Ju,0],[()=>Zu,0],()=>Dm,()=>DG,2,0],1],w3=[3,O,Tfe,0,[st,gt,es,Rm],[0,0,0,()=>Pm]],C3=[-3,O,Cfe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(C3,Hh);var v3=[3,O,Rfe,0,[Ze],[0],1],R3=[3,O,Ife,0,[st,gt],[0,0]],I3=[3,O,xfe,0,[Ze,nme,zfe],[0,1,2],1],A3=[3,O,Pfe,0,[st,gt,wfe],[0,0,4]],x3=[3,O,Dfe,0,[Ze],[0],1],P3=[3,O,Ofe,0,[st,gt,Am,Cm,qa,p3,oC,aC,tC,rC,a3,i3,vm,n3,c3,Im,Fme,u3,Ku,l3,Rm],[0,0,0,0,0,2,0,()=>xm,()=>cC,0,4,4,4,4,4,()=>Dm,[2,O,f3,0,0,64],0,4,0,()=>Pm]],D3=[-3,O,Bfe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(D3,Yh);var O3=[3,O,jfe,0,[nC,h3],[0,0]],k3=[3,O,Kfe,0,[nC,Hme],[0,64]],N3=[3,O,Yfe,0,[_he,$fe,qfe,Gfe,Vfe,Ufe,uhe,Ohe],[1,0,2,2,2,2,2,2]],M3=[3,O,Xfe,0,[Lhe],[[()=>Wme,0]]],L3=[3,O,Jfe,0,[Ze],[0],1],$3=[3,O,Zfe,0,[st,gt,iC],[0,0,0]],B3=[3,O,rhe,0,[Ze,es,m3],[0,0,0],1],U3=[3,O,nhe,0,[st,gt,es,Qu,Yu,Xu,Ku],[0,0,0,[()=>Ju,0],[()=>Zu,0],64,4]],F3=[-3,O,lhe,{[Ar]:zme},[dr],[0]];Jt.TypeRegistry.for(O).registerError(F3,Vh);var q3=[-3,O,ohe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(q3,zh);var G3=[-3,O,ahe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(G3,Wh);var j3=[-3,O,che,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(j3,Kh);var H3=[-3,O,phe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(H3,Xh);var V3=[3,O,hhe,0,[ihe,sC,Ga,s3,fme,ime],[2,1,0,()=>OG,0,0]],z3=[3,O,mhe,0,[ume,Ga],[()=>Yme,0]],W3=[3,O,yhe,0,[Ze,sC,Ga,she],[0,1,0,2],1],K3=[3,O,She,0,[Vme,Ga,st,gt],[()=>Jme,0,0,0]],Q3=[-3,O,Ehe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(Q3,Jh);var Y3=[-3,O,The,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(Y3,Zh);var X3=[-3,O,whe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(X3,tm);var J3=[3,O,vhe,0,[Ze,iC,mfe],[0,0,2],2],Z3=[3,O,Rhe,0,[st,gt],[0,0]],eG=[3,O,Ahe,0,[Ze,wm,Qu,Yu,Xu,tme],[0,[0,4],[()=>Ju,0],[()=>Zu,0],64,[()=>Kme,0]],1],tG=[3,O,xhe,0,[st,gt,es,Xu],[0,0,0,64]],rG=[3,O,Uhe,0,[Ze,qhe],[0,64],2],nG=[3,O,Fhe,0,[st,Rm],[0,()=>Pm]],sG=[3,O,Ghe,0,[d3,qa],[0,0]],oG=[3,O,Xhe,0,[Ze,r3,o3],[0,()=>DG,2],2],iG=[3,O,Jhe,0,[st,Rm],[0,()=>Pm]],aG=[3,O,Qhe,0,[d3,qa,sme,pme,vm],[0,0,0,0,4]],cG=[-3,O,Dhe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(cG,em);var uG=[-3,O,Mhe,{[Ar]:Wr},[dr],[0]];Jt.TypeRegistry.for(O).registerError(uG,Qh);var lG=[3,O,Vhe,0,[Ze],[0],1],dG=[3,O,zhe,0,[st,gt],[0,0]],pG=[3,O,Whe,0,[Ze,wm,oC,aC,tC,rC,Nhe],[0,[0,4],0,()=>xm,()=>cC,0,2],1],fG=[3,O,Khe,0,[st,gt,es],[0,0,0]],xm=[3,O,jhe,0,[cfe,Nfe,ame],[1,0,0]],hG=[3,O,lme,0,[st,gt,Am,Cm,qa,p3,oC,aC,tC,rC,a3,i3,vm,n3,c3,Im,wme,u3,Ku,l3],[0,0,0,0,0,2,0,()=>xm,()=>cC,0,4,4,4,4,4,()=>Dm,[2,O,f3,0,0,64],0,4,0]],mG=[3,O,Eme,0,[st,gt,es,Qu,Yu,Xu,Ku],[0,0,0,[()=>Ju,0],[()=>Zu,0],64,4]],gG=[3,O,bme,0,[es,Xu,vm,Ku,dhe],[0,64,4,4,64]],yG=[3,O,mme,0,[Ze],[0],1],SG=[3,O,gme,0,[st],[0]],EG=[3,O,Ame,0,[nC,h3],[0,0]],bG=[3,O,Ime,0,[Ze,Im],[0,()=>Dm],2],_G=[3,O,Pme,0,[Ze,Cme],[0,64],2],TG=[3,O,Ome,0,[Ze,wm,Cm,qa,Qu,Yu,Am],[0,[0,4],0,0,[()=>Ju,0],[()=>Zu,0],0],1],wG=[3,O,kme,0,[st,gt,es],[0,0,0]],CG=[3,O,Mme,0,[Ze,m3,khe,bhe],[0,0,0,0],2],vG=[3,O,Lme,0,[st,gt],[0,0]],RG=[3,O,Gme,0,[iC,Ze],[0,0],1],IG=[3,O,jme,0,[Phe,$me],[2,()=>Zme]],AG=[3,O,Bme,0,[gfe,Ffe],[0,0]],xG="unit",PG=[-3,g3,"SecretsManagerServiceException",0,[],[]];Jt.TypeRegistry.for(g3).registerError(PG,Dt);var DG=[1,O,dfe,0,()=>sG],Qme=[1,O,ufe,0,()=>y3],cC=[1,O,Hfe,0,()=>O3],OG=[1,O,Wfe,0,()=>k3],Pm=[1,O,Hhe,0,()=>aG],Yme=[1,O,dme,0,()=>hG],Xme=[1,O,Tme,0,[()=>mG,0]],Jme=[1,O,_me,0,()=>gG],Dm=[1,O,vme,0,()=>EG],Zme=[1,O,Ume,0,()=>AG],kG=[9,O,pfe,0,()=>S3,()=>E3],NG=[9,O,yfe,0,()=>b3,()=>_3],MG=[9,O,bfe,0,()=>T3,()=>w3],LG=[9,O,vfe,0,()=>v3,()=>R3],$G=[9,O,Afe,0,()=>I3,()=>A3],BG=[9,O,kfe,0,()=>x3,()=>P3],UG=[9,O,Qfe,0,()=>N3,()=>M3],FG=[9,O,ehe,0,()=>L3,()=>$3],qG=[9,O,the,0,()=>B3,()=>U3],GG=[9,O,fhe,0,()=>V3,()=>z3],jG=[9,O,ghe,0,()=>W3,()=>K3],HG=[9,O,Che,0,()=>J3,()=>Z3],VG=[9,O,Ihe,0,()=>eG,()=>tG],zG=[9,O,Bhe,0,()=>rG,()=>nG],WG=[9,O,Yhe,0,()=>oG,()=>iG],KG=[9,O,Zhe,0,()=>lG,()=>dG],QG=[9,O,eme,0,()=>pG,()=>fG],YG=[9,O,hme,0,()=>yG,()=>SG],XG=[9,O,Rme,0,()=>bG,()=>xG],JG=[9,O,xme,0,()=>_G,()=>xG],ZG=[9,O,Dme,0,()=>TG,()=>wG],ej=[9,O,Nme,0,()=>CG,()=>vG],tj=[9,O,qme,0,()=>RG,()=>IG],Vu=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(kG).build(){},rm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(NG).build(){},nm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(MG).build(){},sm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(LG).build(){},om=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc($G).build(){},im=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(BG).build(){},am=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(UG).build(){},cm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(FG).build(){},um=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(qG).build(){},zu=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(GG).build(){},Wu=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(jG).build(){},lm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(HG).build(){},dm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(VG).build(){},pm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(zG).build(){},fm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(WG).build(){},hm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(KG).build(){},mm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(QG).build(){},gm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(YG).build(){},ym=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(XG).build(){},Sm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(JG).build(){},Em=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(ZG).build(){},bm=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(ej).build(){},_m=class extends we.Command.classBuilder().ep(je).m(function(e,r,n,s){return[Le.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(tj).build(){},ege={BatchGetSecretValueCommand:Vu,CancelRotateSecretCommand:rm,CreateSecretCommand:nm,DeleteResourcePolicyCommand:sm,DeleteSecretCommand:om,DescribeSecretCommand:im,GetRandomPasswordCommand:am,GetResourcePolicyCommand:cm,GetSecretValueCommand:um,ListSecretsCommand:zu,ListSecretVersionIdsCommand:Wu,PutResourcePolicyCommand:lm,PutSecretValueCommand:dm,RemoveRegionsFromReplicationCommand:pm,ReplicateSecretToRegionsCommand:fm,RestoreSecretCommand:hm,RotateSecretCommand:mm,StopReplicationToReplicaCommand:gm,TagResourceCommand:ym,UntagResourceCommand:Sm,UpdateSecretCommand:Em,UpdateSecretVersionStageCommand:bm,ValidateResourcePolicyCommand:_m},Tm=class extends yi{};we.createAggregatedClient(ege,Tm);var tge=Fa.createPaginator(yi,Vu,"NextToken","NextToken","MaxResults"),rge=Fa.createPaginator(yi,zu,"NextToken","NextToken","MaxResults"),nge=Fa.createPaginator(yi,Wu,"NextToken","NextToken","MaxResults"),sge={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},oge={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},ige={created_date:"created-date",last_accessed_date:"last-accessed-date",last_changed_date:"last-changed-date",name:"name"},age={asc:"asc",desc:"desc"};Object.defineProperty(x,"$Command",{enumerable:!0,get:function(){return we.Command}});Object.defineProperty(x,"__Client",{enumerable:!0,get:function(){return we.Client}});x.APIErrorType$=y3;x.BatchGetSecretValue$=kG;x.BatchGetSecretValueCommand=Vu;x.BatchGetSecretValueRequest$=S3;x.BatchGetSecretValueResponse$=E3;x.CancelRotateSecret$=NG;x.CancelRotateSecretCommand=rm;x.CancelRotateSecretRequest$=b3;x.CancelRotateSecretResponse$=_3;x.CreateSecret$=MG;x.CreateSecretCommand=nm;x.CreateSecretRequest$=T3;x.CreateSecretResponse$=w3;x.DecryptionFailure=Hh;x.DecryptionFailure$=C3;x.DeleteResourcePolicy$=LG;x.DeleteResourcePolicyCommand=sm;x.DeleteResourcePolicyRequest$=v3;x.DeleteResourcePolicyResponse$=R3;x.DeleteSecret$=$G;x.DeleteSecretCommand=om;x.DeleteSecretRequest$=I3;x.DeleteSecretResponse$=A3;x.DescribeSecret$=BG;x.DescribeSecretCommand=im;x.DescribeSecretRequest$=x3;x.DescribeSecretResponse$=P3;x.EncryptionFailure=Yh;x.EncryptionFailure$=D3;x.ExternalSecretRotationMetadataItem$=O3;x.Filter$=k3;x.FilterNameStringType=sge;x.GetRandomPassword$=UG;x.GetRandomPasswordCommand=am;x.GetRandomPasswordRequest$=N3;x.GetRandomPasswordResponse$=M3;x.GetResourcePolicy$=FG;x.GetResourcePolicyCommand=cm;x.GetResourcePolicyRequest$=L3;x.GetResourcePolicyResponse$=$3;x.GetSecretValue$=qG;x.GetSecretValueCommand=um;x.GetSecretValueRequest$=B3;x.GetSecretValueResponse$=U3;x.InternalServiceError=Vh;x.InternalServiceError$=F3;x.InvalidNextTokenException=zh;x.InvalidNextTokenException$=q3;x.InvalidParameterException=Wh;x.InvalidParameterException$=G3;x.InvalidRequestException=Kh;x.InvalidRequestException$=j3;x.LimitExceededException=Xh;x.LimitExceededException$=H3;x.ListSecretVersionIds$=jG;x.ListSecretVersionIdsCommand=Wu;x.ListSecretVersionIdsRequest$=W3;x.ListSecretVersionIdsResponse$=K3;x.ListSecrets$=GG;x.ListSecretsCommand=zu;x.ListSecretsRequest$=V3;x.ListSecretsResponse$=z3;x.MalformedPolicyDocumentException=Jh;x.MalformedPolicyDocumentException$=Q3;x.PreconditionNotMetException=Zh;x.PreconditionNotMetException$=Y3;x.PublicPolicyException=tm;x.PublicPolicyException$=X3;x.PutResourcePolicy$=HG;x.PutResourcePolicyCommand=lm;x.PutResourcePolicyRequest$=J3;x.PutResourcePolicyResponse$=Z3;x.PutSecretValue$=VG;x.PutSecretValueCommand=dm;x.PutSecretValueRequest$=eG;x.PutSecretValueResponse$=tG;x.RemoveRegionsFromReplication$=zG;x.RemoveRegionsFromReplicationCommand=pm;x.RemoveRegionsFromReplicationRequest$=rG;x.RemoveRegionsFromReplicationResponse$=nG;x.ReplicaRegionType$=sG;x.ReplicateSecretToRegions$=WG;x.ReplicateSecretToRegionsCommand=fm;x.ReplicateSecretToRegionsRequest$=oG;x.ReplicateSecretToRegionsResponse$=iG;x.ReplicationStatusType$=aG;x.ResourceExistsException=em;x.ResourceExistsException$=cG;x.ResourceNotFoundException=Qh;x.ResourceNotFoundException$=uG;x.RestoreSecret$=KG;x.RestoreSecretCommand=hm;x.RestoreSecretRequest$=lG;x.RestoreSecretResponse$=dG;x.RotateSecret$=QG;x.RotateSecretCommand=mm;x.RotateSecretRequest$=pG;x.RotateSecretResponse$=fG;x.RotationRulesType$=xm;x.SecretListEntry$=hG;x.SecretValueEntry$=mG;x.SecretVersionsListEntry$=gG;x.SecretsManager=Tm;x.SecretsManagerClient=yi;x.SecretsManagerServiceException=Dt;x.SecretsManagerServiceException$=PG;x.SortByType=ige;x.SortOrderType=age;x.StatusType=oge;x.StopReplicationToReplica$=YG;x.StopReplicationToReplicaCommand=gm;x.StopReplicationToReplicaRequest$=yG;x.StopReplicationToReplicaResponse$=SG;x.Tag$=EG;x.TagResource$=XG;x.TagResourceCommand=ym;x.TagResourceRequest$=bG;x.UntagResource$=JG;x.UntagResourceCommand=Sm;x.UntagResourceRequest$=_G;x.UpdateSecret$=ZG;x.UpdateSecretCommand=Em;x.UpdateSecretRequest$=TG;x.UpdateSecretResponse$=wG;x.UpdateSecretVersionStage$=ej;x.UpdateSecretVersionStageCommand=bm;x.UpdateSecretVersionStageRequest$=CG;x.UpdateSecretVersionStageResponse$=vG;x.ValidateResourcePolicy$=tj;x.ValidateResourcePolicyCommand=_m;x.ValidateResourcePolicyRequest$=RG;x.ValidateResourcePolicyResponse$=IG;x.ValidationErrorsEntry$=AG;x.paginateBatchGetSecretValue=tge;x.paginateListSecretVersionIds=nge;x.paginateListSecrets=rge});function ja(t){return nj.includes(t)}var el,nj,Om=T(()=>{el="preferred",nj=["disabled","preferred","required"]});var sj,cge,oj=T(()=>{sj=v(pt());Om();cge=t=>{let{accountIdEndpointMode:e}=t,r=(0,sj.normalizeProvider)(e??el);return Object.assign(t,{accountIdEndpointMode:async()=>{let n=await r();if(!ja(n))throw new Error(`Invalid value for accountIdEndpointMode: ${n}. Valid values are: "required", "preferred", "disabled".`);return n}})}});var ij,aj,cj,uj,uge,lj=T(()=>{Om();ij="Invalid AccountIdEndpointMode value",aj=t=>{throw new Error(t)},cj="AWS_ACCOUNT_ID_ENDPOINT_MODE",uj="account_id_endpoint_mode",uge={environmentVariableSelector:t=>{let e=t[cj];return e&&!ja(e)&&aj(ij),e},configFileSelector:t=>{let e=t[uj];return e&&!ja(e)&&aj(ij),e},default:el}});var uC={};yt(uC,{ACCOUNT_ID_ENDPOINT_MODE_VALUES:()=>nj,CONFIG_ACCOUNT_ID_ENDPOINT_MODE:()=>uj,DEFAULT_ACCOUNT_ID_ENDPOINT_MODE:()=>el,ENV_ACCOUNT_ID_ENDPOINT_MODE:()=>cj,NODE_ACCOUNT_ID_ENDPOINT_MODE_CONFIG_OPTIONS:()=>uge,resolveAccountIdEndpointModeConfig:()=>cge,validateAccountIdEndpointMode:()=>ja});var lC=T(()=>{oj();Om();lj()});var pj=b((E2e,dj)=>{function ts(t){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:t}),this.done=!1}ts.prototype.next=function(){if(this.done)return{done:!0};var t=this._next();return t.done&&(this.done=!0),t};typeof Symbol<"u"&&(ts.prototype[Symbol.iterator]=function(){return this});ts.of=function(){var t=arguments,e=t.length,r=0;return new ts(function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}})};ts.empty=function(){var t=new ts(null);return t.done=!0,t};ts.is=function(t){return t instanceof ts?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};dj.exports=ts});var dC=b((b2e,gj)=>{var fj=typeof ArrayBuffer<"u",hj=typeof Symbol<"u";function mj(t,e){var r,n,s,o,i;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||fj&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(s=0,o=t.length;s<o;s++)e(t[s],s);return}if(typeof t.forEach=="function"){t.forEach(e);return}if(hj&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,s=0;i=r.next(),i.done!==!0;)e(i.value,s),s++;return}for(n in t)t.hasOwnProperty(n)&&e(t[n],n)}mj.forEachWithNullKeys=function(t,e){var r,n,s,o,i;if(!t)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(t)||fj&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(s=0,o=t.length;s<o;s++)e(t[s],null);return}if(t instanceof Set){t.forEach(function(a){e(a,null)});return}if(typeof t.forEach=="function"){t.forEach(e);return}if(hj&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,s=0;i=r.next(),i.done!==!0;)e(i.value,null),s++;return}for(n in t)t.hasOwnProperty(n)&&e(t[n],n)};gj.exports=mj});var pC=b(yn=>{var lge=Math.pow(2,8)-1,dge=Math.pow(2,16)-1,pge=Math.pow(2,32)-1,fge=Math.pow(2,7)-1,hge=Math.pow(2,15)-1,mge=Math.pow(2,31)-1;yn.getPointerArray=function(t){var e=t-1;return e<=lge?Uint8Array:e<=dge?Uint16Array:e<=pge?Uint32Array:Float64Array};yn.getSignedPointerArray=function(t){var e=t-1;return e<=fge?Int8Array:e<=hge?Int16Array:e<=mge?Int32Array:Float64Array};yn.getNumberType=function(t){return t===(t|0)?Math.sign(t)===-1?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var gge={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};yn.getMinimalRepresentation=function(t,e){var r=null,n=0,s,o,i,a,c;for(a=0,c=t.length;a<c;a++)i=e?e(t[a]):t[a],o=yn.getNumberType(i),s=gge[o.name],s>n&&(n=s,r=o);return r};yn.isTypedArray=function(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t)};yn.concat=function(){var t=0,e,r,n;for(e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var s=new arguments[0].constructor(t);for(e=0,r=0;e<n;e++)s.set(arguments[e],r),r+=arguments[e].length;return s};yn.indices=function(t){for(var e=yn.getPointerArray(t),r=new e(t),n=0;n<t;n++)r[n]=n;return r}});var Ej=b(tl=>{var yj=dC(),Sj=pC();function yge(t){return Array.isArray(t)||Sj.isTypedArray(t)}function fC(t){if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size}function Sge(t){var e=fC(t),r=typeof e=="number"?new Array(e):[],n=0;return yj(t,function(s){r[n++]=s}),r}function Ege(t){var e=fC(t),r=typeof e=="number"?Sj.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],s=typeof e=="number"?new r(e):[],o=0;return yj(t,function(i){n[o]=i,s[o]=o++}),[n,s]}tl.isArrayLike=yge;tl.guessLength=fC;tl.toArray=Sge;tl.toArrayWithIndices=Ege});var _j=b((w2e,bj)=>{var hC=pj(),bge=dC(),_ge=pC(),Tge=Ej();function et(t,e,r){if(arguments.length<2&&(r=t,t=null,e=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");var n=_ge.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof t=="function"?new t(r):new Array(r),this.V=typeof e=="function"?new e(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}et.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};et.prototype.splayOnTop=function(t){var e=this.head;if(this.head===t)return this;var r=this.backward[t],n=this.forward[t];return this.tail===t?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[e]=t,this.head=t,this.forward[t]=e,this};et.prototype.set=function(t,e){var r=this.items[t];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=e;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[t]=r,this.K[r]=t,this.V[r]=e,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};et.prototype.setpop=function(t,e){var r=null,n=null,s=this.items[t];return typeof s<"u"?(this.splayOnTop(s),r=this.V[s],this.V[s]=e,{evicted:!1,key:t,value:r}):(this.size<this.capacity?s=this.size++:(s=this.tail,this.tail=this.backward[s],r=this.V[s],n=this.K[s],delete this.items[this.K[s]]),this.items[t]=s,this.K[s]=t,this.V[s]=e,this.forward[s]=this.head,this.backward[this.head]=s,this.head=s,n?{evicted:!0,key:n,value:r}:null)};et.prototype.has=function(t){return t in this.items};et.prototype.get=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};et.prototype.peek=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.V[e]};et.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0,n=this.size,s=this.head,o=this.K,i=this.V,a=this.forward;r<n;)t.call(e,i[s],o[s],this),s=a[s],r++};et.prototype.keys=function(){var t=0,e=this.size,r=this.head,n=this.K,s=this.forward;return new hC(function(){if(t>=e)return{done:!0};var o=n[r];return t++,t<e&&(r=s[r]),{done:!1,value:o}})};et.prototype.values=function(){var t=0,e=this.size,r=this.head,n=this.V,s=this.forward;return new hC(function(){if(t>=e)return{done:!0};var o=n[r];return t++,t<e&&(r=s[r]),{done:!1,value:o}})};et.prototype.entries=function(){var t=0,e=this.size,r=this.head,n=this.K,s=this.V,o=this.forward;return new hC(function(){if(t>=e)return{done:!0};var i=n[r],a=s[r];return t++,t<e&&(r=o[r]),{done:!1,value:[i,a]}})};typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=et.prototype.entries);et.prototype.inspect=function(){for(var t=new Map,e=this.entries(),r;r=e.next(),!r.done;)t.set(r.value[0],r.value[1]);return Object.defineProperty(t,"constructor",{value:et,enumerable:!1}),t};typeof Symbol<"u"&&(et.prototype[Symbol.for("nodejs.util.inspect.custom")]=et.prototype.inspect);et.from=function(t,e,r,n){if(arguments.length<2){if(n=Tge.guessLength(t),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,r=null);var s=new et(e,r,n);return bge(t,function(o,i){s.set(i,o)}),s};bj.exports=et});var wj=b(Tj=>{"use strict";var wge=_j(),mC=class{cache;constructor(e){this.cache=new wge(e)}getEndpoint(e){let r=this.get(e);if(!r||r.length===0)return;let n=r.map(s=>s.Address);return n[Math.floor(Math.random()*n.length)]}get(e){if(!this.has(e))return;let r=this.cache.get(e);if(!r)return;let n=Date.now(),s=r.filter(o=>n<o.Expires);if(s.length===0){this.delete(e);return}return s}set(e,r){let n=Date.now();this.cache.set(e,r.map(({Address:s,CachePeriodInMinutes:o})=>({Address:s,Expires:n+o*60*1e3})))}delete(e){this.cache.set(e,[])}has(e){if(!this.cache.has(e))return!1;let r=this.cache.peek(e);return r?r.length>0:!1}clear(){this.cache.clear()}};Tj.EndpointCache=mC});var SC=b(Si=>{"use strict";var Cge=be(),vge=wj(),Cj=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"],gC="endpoint_discovery_enabled",vj=t=>["false","0"].indexOf(t)>=0,Rge={environmentVariableSelector:t=>{for(let e=0;e<Cj.length;e++){let r=Cj[e];if(r in t){let n=t[r];if(n==="")throw Error(`Environment variable ${r} can't be empty of undefined, got "${n}"`);return!vj(n)}}},configFileSelector:t=>{if(gC in t){let e=t[gC];if(e===void 0)throw Error(`Shared config entry ${gC} can't be undefined, got "${e}"`);return!vj(e)}},default:void 0},Ige=async(t,e,r)=>{let{accessKeyId:n}=await e.credentials(),{identifiers:s}=r;return JSON.stringify({...n&&{accessKeyId:n},...s&&{commandName:t,identifiers:Object.entries(s).sort().reduce((o,[i,a])=>({...o,[i]:a}),{})}})},rs={},Rj=async(t,e)=>new Promise((r,n)=>{let{endpointCache:s}=t,{cacheKey:o,commandName:i,identifiers:a}=e,c=s.get(o);if(c&&c.length===1&&c[0].Address==="")e.isDiscoveredEndpointRequired?(rs[o]||(rs[o]=[]),rs[o].push({resolve:r,reject:n})):r();else if(c&&c.length>0)r();else{let u=[{Address:"",CachePeriodInMinutes:1}];s.set(o,u);let d=new e.endpointDiscoveryCommandCtor({Operation:i.slice(0,-7),Identifiers:a});d.resolveMiddleware(e.clientStack,t,e.options)(d).then(g=>{s.set(o,g.output.Endpoints),rs[o]&&(rs[o].forEach(({resolve:y})=>{y()}),delete rs[o]),r()}).catch(g=>{s.delete(o);let y=Object.assign(new Error("The operation to discover endpoint failed. Please retry, or provide a custom endpoint and disable endpoint discovery to proceed."),{reason:g});rs[o]&&(rs[o].forEach(({reject:S})=>{S(y)}),delete rs[o]),e.isDiscoveredEndpointRequired?n(y):(s.set(o,u),r())})}}),yC=(t,e)=>(r,n)=>async s=>{if(t.isCustomEndpoint){if(t.isClientEndpointDiscoveryEnabled)throw new Error("Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.");return r(s)}let{endpointDiscoveryCommandCtor:o}=t,{isDiscoveredEndpointRequired:i,identifiers:a}=e,c=n.clientName,u=n.commandName,d=await t.endpointDiscoveryEnabled(),l=await Ige(u,t,{identifiers:a});if(i){if(d===!1)throw new Error(`Endpoint Discovery is disabled but ${u} on ${c} requires it. Please check your configurations.`);await Rj(t,{...e,commandName:u,cacheKey:l,endpointDiscoveryCommandCtor:o})}else d&&Rj(t,{...e,commandName:u,cacheKey:l,endpointDiscoveryCommandCtor:o});let{request:g}=s;if(l&&Cge.HttpRequest.isInstance(g)){let y=t.endpointCache.getEndpoint(l);y&&(g.hostname=y)}return r(s)},km={name:"endpointDiscoveryMiddleware",step:"build",tags:["ENDPOINT_DISCOVERY"],override:!0},Age=(t,e)=>({applyToStack:r=>{r.add(yC(t,e),km)}}),xge=(t,e)=>({applyToStack:r=>{r.add(yC(t,{...e,isDiscoveredEndpointRequired:!0}),km)}}),Pge=(t,e)=>({applyToStack:r=>{r.add(yC(t,{...e,isDiscoveredEndpointRequired:!1}),km)}}),Dge=(t,{endpointDiscoveryCommandCtor:e})=>{let{endpointCacheSize:r,endpointDiscoveryEnabled:n,endpointDiscoveryEnabledProvider:s}=t;return Object.assign(t,{endpointDiscoveryCommandCtor:e,endpointCache:new vge.EndpointCache(r??1e3),endpointDiscoveryEnabled:n!==void 0?()=>Promise.resolve(n):s,isClientEndpointDiscoveryEnabled:n!==void 0})};Si.NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS=Rge;Si.endpointDiscoveryMiddlewareOptions=km;Si.getEndpointDiscoveryOptionalPlugin=Pge;Si.getEndpointDiscoveryPlugin=Age;Si.getEndpointDiscoveryRequiredPlugin=xge;Si.resolveEndpointDiscoveryConfig=Dge});var bC=b(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.resolveHttpAuthSchemeConfig=bo.defaultDynamoDBHttpAuthSchemeProvider=bo.defaultDynamoDBHttpAuthSchemeParametersProvider=void 0;var Oge=(Je(),K(Br)),EC=pt(),kge=async(t,e,r)=>({operation:(0,EC.getSmithyContext)(e).operation,region:await(0,EC.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});bo.defaultDynamoDBHttpAuthSchemeParametersProvider=kge;function Nge(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"dynamodb",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var Mge=t=>{let e=[];switch(t.operation){default:e.push(Nge(t))}return e};bo.defaultDynamoDBHttpAuthSchemeProvider=Mge;var Lge=t=>{let e=(0,Oge.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,EC.normalizeProvider)(t.authSchemePreference??[])})};bo.resolveHttpAuthSchemeConfig=Lge});var Ij=b((I2e,$ge)=>{$ge.exports={name:"@aws-sdk/client-dynamodb",description:"AWS SDK for JavaScript Dynamodb Client for Node.js, Browser and React Native",version:"3.975.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-dynamodb","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo dynamodb","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.1","@aws-sdk/credential-provider-node":"^3.972.1","@aws-sdk/dynamodb-codec":"^3.972.2","@aws-sdk/middleware-endpoint-discovery":"^3.972.1","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.2","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.1","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.11","@smithy/middleware-retry":"^4.4.27","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.12","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.26","@smithy/util-defaults-mode-node":"^4.2.29","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.8",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-dynamodb",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-dynamodb"}}});var kj=b(Oj=>{"use strict";var CC=(Kn(),K(Kc)),Aj=(ye(),K(Ji)),xj=Z(),Pj=Xe(),_C=class extends CC.JsonCodec{constructor(){super({timestampFormat:{useTrait:!0,default:7},jsonName:!1})}createSerializer(){let e=new TC(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new wC(this.settings);return e.setSerdeContext(this.serdeContext),e}},Dj="com.amazonaws.dynamodb#AttributeValue",TC=class extends CC.JsonShapeSerializer{_write(e,r,n){let s=Aj.NormalizedSchema.of(e);if(s.isStructSchema()&&s.getName(!0)===Dj&&r&&typeof r=="object"){let o=r,i=xj._json(o),a=this.serdeContext?.base64Encoder??Pj.toBase64;if(o.B instanceof Uint8Array&&(i.B=a(o.B)),Array.isArray(o.BS)&&(i.BS=o.BS.map(a)),Array.isArray(o.L)&&(i.L=o.L.filter(c=>c!=null).map(c=>this._write(s,c,n))),o.M&&typeof o.M=="object"){i.M={};for(let[c,u]of Object.entries(o.M))u!=null&&(i.M[c]=this._write(s,u,n))}return i}return super._write(s,r,n)}},wC=class extends CC.JsonShapeDeserializer{_read(e,r){let n=Aj.NormalizedSchema.of(e);if(n.isStructSchema()&&n.getName(!0)===Dj&&r&&typeof r=="object"){let s=r,o=xj._json(s),i=this.serdeContext?.base64Decoder??Pj.fromBase64;if(typeof s.B=="string"&&(o.B=i(s.B)),Array.isArray(s.BS)&&(o.BS=s.BS.map(i)),Array.isArray(s.L)&&(o.L=s.L.map(a=>this._read(n,a))),s.M&&typeof s.M=="object"){o.M={};for(let[a,c]of Object.entries(s.M))o.M[a]=this._read(n,c)}return o}return super._read(n,r)}};Oj.DynamoDBJsonCodec=_C});var s4=b(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.ruleSet=void 0;var IC="required",z="type",Ke="rules",Re="conditions",F="fn",q="argv",le="ref",Nm="assign",Sn="url",En="properties",bn="headers",t4="metricValues",Bge=!1,Qe="error",Ot="stringEquals",Nj="https://dynamodb.{Region}.{PartitionResult#dualStackDnsSuffix}",Zt="endpoint",tt="tree",AC="dynamodb",rl={[IC]:!1,[z]:"string"},Mj={[IC]:!0,default:!1,[z]:"boolean"},Lj={[F]:"isSet",[q]:[{[le]:"Endpoint"}]},Uge={[le]:"Endpoint"},$j={[F]:"isSet",[q]:[{[le]:"Region"}]},r4={[le]:"Region"},Bj={[F]:"aws.partition",[q]:[r4],[Nm]:"PartitionResult"},Uj={[Re]:[{[F]:"booleanEquals",[q]:[{[le]:"UseFIPS"},!0]}],[Qe]:"Invalid Configuration: FIPS and custom endpoint are not supported",[z]:Qe},Ha={[F]:"booleanEquals",[q]:[{[le]:"UseFIPS"},!0]},Fj={[Re]:[{[F]:"booleanEquals",[q]:[{[le]:"UseDualStack"},!0]}],[Qe]:"Invalid Configuration: Dualstack and custom endpoint are not supported",[z]:Qe},n4={[F]:"booleanEquals",[q]:[{[le]:"UseDualStack"},!0]},qj={[Zt]:{[Sn]:"{Endpoint}",[En]:{},[bn]:{}},[z]:Zt},ns={},Gj={[F]:"booleanEquals",[q]:[{[F]:"getAttr",[q]:[{[le]:"PartitionResult"},"supportsFIPS"]},!0]},jj={[F]:"booleanEquals",[q]:[{[F]:"getAttr",[q]:[{[le]:"PartitionResult"},"supportsDualStack"]},!0]},vC={[Re]:[{[F]:"isSet",[q]:[{[le]:"AccountIdEndpointMode"}]},{[F]:Ot,[q]:[{[le]:"AccountIdEndpointMode"},"required"]}],[Ke]:[{[Qe]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[z]:Qe}],[z]:tt},nl={[F]:"getAttr",[q]:[{[le]:"PartitionResult"},"name"]},Hj={[Zt]:{[Sn]:"https://dynamodb.{Region}.{PartitionResult#dnsSuffix}",[En]:{},[bn]:{}},[z]:Zt},Vj={[Sn]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[En]:{[t4]:["O"]},[bn]:{}},RC={[t4]:["O"]},zj={[Qe]:"Credentials-sourced account ID parameter is invalid",[z]:Qe},Wj={[Re]:[{[F]:"isSet",[q]:[{[le]:"AccountIdEndpointMode"}]},{[F]:Ot,[q]:[{[le]:"AccountIdEndpointMode"},"required"]}],[Ke]:[{[Re]:[{[F]:"not",[q]:[Ha]}],[Ke]:[{[Re]:[{[F]:Ot,[q]:[nl,"aws"]}],[Ke]:[{[Qe]:"AccountIdEndpointMode is required but no AccountID was provided or able to be loaded",[z]:Qe}],[z]:tt},{[Qe]:"Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition",[z]:Qe}],[z]:tt},{[Qe]:"Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported",[z]:Qe}],[z]:tt},Kj={[Sn]:"https://{ParsedArn#accountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[En]:RC,[bn]:{}},Qj=[Ha],Yj=[n4],Xj=[{[F]:"isSet",[q]:[{[le]:"AccountIdEndpointMode"}]},{[F]:"not",[q]:[{[F]:Ot,[q]:[{[le]:"AccountIdEndpointMode"},"disabled"]}]},{[F]:Ot,[q]:[nl,"aws"]},{[F]:"not",[q]:[Ha]},{[F]:"isSet",[q]:[{[le]:"ResourceArn"}]},{[F]:"aws.parseArn",[q]:[{[le]:"ResourceArn"}],[Nm]:"ParsedArn"},{[F]:Ot,[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"service"]},AC]},{[F]:"isValidHostLabel",[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"region"]},!1]},{[F]:Ot,[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"region"]},"{Region}"]},{[F]:"isValidHostLabel",[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"accountId"]},!1]}],Jj=[{[F]:"isSet",[q]:[{[le]:"AccountIdEndpointMode"}]},{[F]:"not",[q]:[{[F]:Ot,[q]:[{[le]:"AccountIdEndpointMode"},"disabled"]}]},{[F]:Ot,[q]:[nl,"aws"]},{[F]:"not",[q]:[Ha]},{[F]:"isSet",[q]:[{[le]:"ResourceArnList"}]},{[F]:"getAttr",[q]:[{[le]:"ResourceArnList"},"[0]"],[Nm]:"FirstArn"},{[F]:"aws.parseArn",[q]:[{[le]:"FirstArn"}],[Nm]:"ParsedArn"},{[F]:Ot,[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"service"]},AC]},{[F]:"isValidHostLabel",[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"region"]},!1]},{[F]:Ot,[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"region"]},"{Region}"]},{[F]:"isValidHostLabel",[q]:[{[F]:"getAttr",[q]:[{[le]:"ParsedArn"},"accountId"]},!1]}],Zj=[{[F]:"isSet",[q]:[{[le]:"AccountIdEndpointMode"}]},{[F]:"not",[q]:[{[F]:Ot,[q]:[{[le]:"AccountIdEndpointMode"},"disabled"]}]},{[F]:Ot,[q]:[nl,"aws"]},{[F]:"not",[q]:[Ha]},{[F]:"isSet",[q]:[{[le]:"AccountId"}]}],e4=[{[F]:"isValidHostLabel",[q]:[{[le]:"AccountId"},!1]}],Fge={version:"1.0",parameters:{Region:rl,UseDualStack:Mj,UseFIPS:Mj,Endpoint:rl,AccountId:rl,AccountIdEndpointMode:rl,ResourceArn:rl,ResourceArnList:{[IC]:Bge,[z]:"stringArray"}},[Ke]:[{[Re]:[Lj,$j,Bj],[Ke]:[Uj,Fj,{[Re]:[{[F]:Ot,[q]:[Uge,Nj]}],error:"Endpoint override is not supported for dual-stack endpoints. Please enable dual-stack functionality by enabling the configuration. For more details, see: https://docs.aws.amazon.com/sdkref/latest/guide/feature-endpoints.html",[z]:Qe},qj],[z]:tt},{[Re]:[Lj],[Ke]:[Uj,Fj,qj],[z]:tt},{[Re]:[$j],[Ke]:[{[Re]:[Bj],[Ke]:[{[Re]:[{[F]:Ot,[q]:[r4,"local"]}],[Ke]:[{[Re]:Qj,error:"Invalid Configuration: FIPS and local endpoint are not supported",[z]:Qe},{[Re]:Yj,error:"Invalid Configuration: Dualstack and local endpoint are not supported",[z]:Qe},{endpoint:{[Sn]:"http://localhost:8000",[En]:{authSchemes:[{name:"sigv4",signingRegion:"us-east-1",signingName:AC}]},[bn]:ns},[z]:Zt}],[z]:tt},{[Re]:[Ha,n4],[Ke]:[{[Re]:[Gj,jj],[Ke]:[vC,{endpoint:{[Sn]:"https://dynamodb-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[En]:ns,[bn]:ns},[z]:Zt}],[z]:tt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[z]:Qe}],[z]:tt},{[Re]:Qj,[Ke]:[{[Re]:[Gj],[Ke]:[{[Re]:[{[F]:Ot,[q]:[nl,"aws-us-gov"]}],[Ke]:[vC,Hj],[z]:tt},vC,{endpoint:{[Sn]:"https://dynamodb-fips.{Region}.{PartitionResult#dnsSuffix}",[En]:ns,[bn]:ns},[z]:Zt}],[z]:tt},{error:"FIPS is enabled but this partition does not support FIPS",[z]:Qe}],[z]:tt},{[Re]:Yj,[Ke]:[{[Re]:[jj],[Ke]:[{[Re]:Xj,endpoint:Vj,[z]:Zt},{[Re]:Jj,endpoint:Vj,[z]:Zt},{[Re]:Zj,[Ke]:[{[Re]:e4,[Ke]:[{endpoint:{[Sn]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dualStackDnsSuffix}",[En]:RC,[bn]:ns},[z]:Zt}],[z]:tt},zj],[z]:tt},Wj,{endpoint:{[Sn]:Nj,[En]:ns,[bn]:ns},[z]:Zt}],[z]:tt},{error:"DualStack is enabled but this partition does not support DualStack",[z]:Qe}],[z]:tt},{[Re]:Xj,endpoint:Kj,[z]:Zt},{[Re]:Jj,endpoint:Kj,[z]:Zt},{[Re]:Zj,[Ke]:[{[Re]:e4,[Ke]:[{endpoint:{[Sn]:"https://{AccountId}.ddb.{Region}.{PartitionResult#dnsSuffix}",[En]:RC,[bn]:ns},[z]:Zt}],[z]:tt},zj],[z]:tt},Wj,Hj],[z]:tt}],[z]:tt},{error:"Invalid Configuration: Missing Region",[z]:Qe}]};Mm.ruleSet=Fge});var o4=b(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.defaultEndpointResolver=void 0;var qge=Ns(),xC=Fn(),Gge=s4(),jge=new xC.EndpointCache({size:50,params:["AccountId","AccountIdEndpointMode","Endpoint","Region","ResourceArn","ResourceArnList","UseDualStack","UseFIPS"]}),Hge=(t,e={})=>jge.get(t,()=>(0,xC.resolveEndpoint)(Gge.ruleSet,{endpointParams:t,logger:e.logger}));Lm.defaultEndpointResolver=Hge;xC.customEndpointFunctions.aws=qge.awsEndpointFunctions});var c4=b($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.getRuntimeConfig=void 0;var Vge=(Je(),K(Br)),zge=(Kn(),K(Kc)),Wge=kj(),Kge=Z(),Qge=on(),i4=Xe(),a4=rt(),Yge=bC(),Xge=o4(),Jge=t=>({apiVersion:"2012-08-10",base64Decoder:t?.base64Decoder??i4.fromBase64,base64Encoder:t?.base64Encoder??i4.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Xge.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Yge.defaultDynamoDBHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Vge.AwsSdkSigV4Signer}],logger:t?.logger??new Kge.NoOpLogger,protocol:t?.protocol??zge.AwsJson1_0Protocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.dynamodb",xmlNamespace:"http://dynamodb.amazonaws.com/doc/2012-08-10/",version:"2012-08-10",serviceTarget:"DynamoDB_20120810",jsonCodec:new Wge.DynamoDBJsonCodec},serviceId:t?.serviceId??"DynamoDB",urlParser:t?.urlParser??Qge.parseUrl,utf8Decoder:t?.utf8Decoder??a4.fromUtf8,utf8Encoder:t?.utf8Encoder??a4.toUtf8});$m.getRuntimeConfig=Jge});var h4=b(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.getRuntimeConfig=void 0;var Zge=(na(),K(ra)),eye=Zge.__importDefault(Ij()),u4=(Je(),K(Br)),tye=(lC(),K(uC)),rye=Xw(),nye=SC(),l4=ei(),Bm=Rt(),sye=ti(),d4=ar(),ss=Ur(),p4=Ln(),f4=Z(),oye=ri(),iye=ni(),aye=eo(),cye=c4(),uye=t=>{(0,f4.emitWarningIfUnsupportedVersion)(process.version);let e=(0,iye.resolveDefaultsModeConfig)(t),r=()=>e().then(f4.loadConfigsForDefaultMode),n=(0,cye.getRuntimeConfig)(t);(0,u4.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,accountIdEndpointMode:t?.accountIdEndpointMode??(0,ss.loadConfig)(tye.NODE_ACCOUNT_ID_ENDPOINT_MODE_CONFIG_OPTIONS,s),authSchemePreference:t?.authSchemePreference??(0,ss.loadConfig)(u4.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??oye.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??rye.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,l4.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:eye.default.version}),endpointDiscoveryEnabledProvider:t?.endpointDiscoveryEnabledProvider??(0,ss.loadConfig)(nye.NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS,s),maxAttempts:t?.maxAttempts??(0,ss.loadConfig)(d4.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,ss.loadConfig)(Bm.NODE_REGION_CONFIG_OPTIONS,{...Bm.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:p4.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,ss.loadConfig)({...d4.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||aye.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??sye.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??p4.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,ss.loadConfig)(Bm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,ss.loadConfig)(Bm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,ss.loadConfig)(l4.NODE_APP_ID_CONFIG_OPTIONS,s)}};Um.getRuntimeConfig=uye});var S4=b(Gt=>{"use strict";var Fm=()=>{let t=new WeakSet;return(e,r)=>{if(typeof r=="object"&&r!==null){if(t.has(r))return"[Circular]";t.add(r)}return r}},lye=t=>new Promise(e=>setTimeout(e,t*1e3)),y4={minDelay:2,maxDelay:120};Gt.WaiterState=void 0;(function(t){t.ABORTED="ABORTED",t.FAILURE="FAILURE",t.SUCCESS="SUCCESS",t.RETRY="RETRY",t.TIMEOUT="TIMEOUT"})(Gt.WaiterState||(Gt.WaiterState={}));var dye=t=>{if(t.state===Gt.WaiterState.ABORTED){let e=new Error(`${JSON.stringify({...t,reason:"Request was aborted"},Fm())}`);throw e.name="AbortError",e}else if(t.state===Gt.WaiterState.TIMEOUT){let e=new Error(`${JSON.stringify({...t,reason:"Waiter has timed out"},Fm())}`);throw e.name="TimeoutError",e}else if(t.state!==Gt.WaiterState.SUCCESS)throw new Error(`${JSON.stringify(t,Fm())}`);return t},pye=(t,e,r,n)=>{if(n>r)return e;let s=t*2**(n-1);return fye(t,s)},fye=(t,e)=>t+Math.random()*(e-t),hye=async({minDelay:t,maxDelay:e,maxWaitTime:r,abortController:n,client:s,abortSignal:o},i,a)=>{let c={},{state:u,reason:d}=await a(s,i);if(d){let S=m4(d);c[S]|=0,c[S]+=1}if(u!==Gt.WaiterState.RETRY)return{state:u,reason:d,observedResponses:c};let l=1,g=Date.now()+r*1e3,y=Math.log(e/t)/Math.log(2)+1;for(;;){if(n?.signal?.aborted||o?.aborted){let I="AbortController signal aborted.";return c[I]|=0,c[I]+=1,{state:Gt.WaiterState.ABORTED,observedResponses:c}}let S=pye(t,e,y,l);if(Date.now()+S*1e3>g)return{state:Gt.WaiterState.TIMEOUT,observedResponses:c};await lye(S);let{state:w,reason:A}=await a(s,i);if(A){let I=m4(A);c[I]|=0,c[I]+=1}if(w!==Gt.WaiterState.RETRY)return{state:w,reason:A,observedResponses:c};l+=1}},m4=t=>t?.$responseBodyText?`Deserialization error for body: ${t.$responseBodyText}`:t?.$metadata?.httpStatusCode?t.$response||t.message?`${t.$response.statusCode??t.$metadata.httpStatusCode??"Unknown"}: ${t.message}`:`${t.$metadata.httpStatusCode}: OK`:String(t?.message??JSON.stringify(t,Fm())??"Unknown"),mye=t=>{if(t.maxWaitTime<=0)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(t.minDelay<=0)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(t.maxDelay<=0)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(t.maxWaitTime<=t.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${t.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`);if(t.maxDelay<t.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${t.maxDelay}] must be greater than WaiterConfiguration.minDelay [${t.minDelay}] for this waiter`)},g4=t=>{let e,r=new Promise(n=>{e=()=>n({state:Gt.WaiterState.ABORTED}),typeof t.addEventListener=="function"?t.addEventListener("abort",e):t.onabort=e});return{clearListener(){typeof t.removeEventListener=="function"&&t.removeEventListener("abort",e)},aborted:r}},gye=async(t,e,r)=>{let n={...y4,...t};mye(n);let s=[hye(n,e,r)],o=[];if(t.abortSignal){let{aborted:i,clearListener:a}=g4(t.abortSignal);o.push(a),s.push(i)}if(t.abortController?.signal){let{aborted:i,clearListener:a}=g4(t.abortController.signal);o.push(a),s.push(i)}return Promise.race(s).then(i=>{for(let a of o)a();return i})};Gt.checkExceptions=dye;Gt.createWaiter=gye;Gt.waiterServiceDefaults=y4});var jK=b(p=>{"use strict";var yye=(lC(),K(uC)),Sye=SC(),E4=No(),Eye=Mo(),bye=Lo(),b4=Ys(),_ye=Rt(),os=(_t(),K(zo)),ce=(ye(),K(Ji)),Tye=Xo(),G=Fr(),_4=ar(),$=Z(),T4=bC(),wye=h4(),w4=io(),C4=be(),de=S4(),Cye=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"dynamodb"}),j={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},AccountId:{type:"builtInParams",name:"accountId"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"},AccountIdEndpointMode:{type:"builtInParams",name:"accountIdEndpointMode"}},ie=class t extends $.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},qm=class t extends ie{name="BackupInUseException";$fault="client";constructor(e){super({name:"BackupInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Gm=class t extends ie{name="BackupNotFoundException";$fault="client";constructor(e){super({name:"BackupNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},jm=class t extends ie{name="InternalServerError";$fault="server";constructor(e){super({name:"InternalServerError",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype)}},Hm=class t extends ie{name="RequestLimitExceeded";$fault="client";ThrottlingReasons;constructor(e){super({name:"RequestLimitExceeded",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.ThrottlingReasons=e.ThrottlingReasons}},Vm=class t extends ie{name="ThrottlingException";$fault="client";throttlingReasons;constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.throttlingReasons=e.throttlingReasons}},zm=class t extends ie{name="InvalidEndpointException";$fault="client";Message;constructor(e){super({name:"InvalidEndpointException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Wm=class t extends ie{name="ProvisionedThroughputExceededException";$fault="client";ThrottlingReasons;constructor(e){super({name:"ProvisionedThroughputExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.ThrottlingReasons=e.ThrottlingReasons}},Km=class t extends ie{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Qm=class t extends ie{name="ItemCollectionSizeLimitExceededException";$fault="client";constructor(e){super({name:"ItemCollectionSizeLimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ym=class t extends ie{name="ReplicatedWriteConflictException";$fault="client";$retryable={};constructor(e){super({name:"ReplicatedWriteConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Xm=class t extends ie{name="ContinuousBackupsUnavailableException";$fault="client";constructor(e){super({name:"ContinuousBackupsUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Jm=class t extends ie{name="LimitExceededException";$fault="client";constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Zm=class t extends ie{name="TableInUseException";$fault="client";constructor(e){super({name:"TableInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},eg=class t extends ie{name="TableNotFoundException";$fault="client";constructor(e){super({name:"TableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},tg=class t extends ie{name="GlobalTableAlreadyExistsException";$fault="client";constructor(e){super({name:"GlobalTableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},rg=class t extends ie{name="ResourceInUseException";$fault="client";constructor(e){super({name:"ResourceInUseException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ng=class t extends ie{name="TransactionConflictException";$fault="client";constructor(e){super({name:"TransactionConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},sg=class t extends ie{name="PolicyNotFoundException";$fault="client";constructor(e){super({name:"PolicyNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},og=class t extends ie{name="ExportNotFoundException";$fault="client";constructor(e){super({name:"ExportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ig=class t extends ie{name="GlobalTableNotFoundException";$fault="client";constructor(e){super({name:"GlobalTableNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ag=class t extends ie{name="ImportNotFoundException";$fault="client";constructor(e){super({name:"ImportNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},cg=class t extends ie{name="DuplicateItemException";$fault="client";constructor(e){super({name:"DuplicateItemException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ug=class t extends ie{name="IdempotentParameterMismatchException";$fault="client";Message;constructor(e){super({name:"IdempotentParameterMismatchException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},lg=class t extends ie{name="TransactionInProgressException";$fault="client";Message;constructor(e){super({name:"TransactionInProgressException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},dg=class t extends ie{name="ExportConflictException";$fault="client";constructor(e){super({name:"ExportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},pg=class t extends ie{name="InvalidExportTimeException";$fault="client";constructor(e){super({name:"InvalidExportTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},fg=class t extends ie{name="PointInTimeRecoveryUnavailableException";$fault="client";constructor(e){super({name:"PointInTimeRecoveryUnavailableException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},hg=class t extends ie{name="ImportConflictException";$fault="client";constructor(e){super({name:"ImportConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},mg=class t extends ie{name="TableAlreadyExistsException";$fault="client";constructor(e){super({name:"TableAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},gg=class t extends ie{name="InvalidRestoreTimeException";$fault="client";constructor(e){super({name:"InvalidRestoreTimeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},yg=class t extends ie{name="ReplicaAlreadyExistsException";$fault="client";constructor(e){super({name:"ReplicaAlreadyExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Sg=class t extends ie{name="ReplicaNotFoundException";$fault="client";constructor(e){super({name:"ReplicaNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Eg=class t extends ie{name="IndexNotFoundException";$fault="client";constructor(e){super({name:"IndexNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},bg=class t extends ie{name="ConditionalCheckFailedException";$fault="client";Item;constructor(e){super({name:"ConditionalCheckFailedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Item=e.Item}},_g=class t extends ie{name="TransactionCanceledException";$fault="client";Message;CancellationReasons;constructor(e){super({name:"TransactionCanceledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message,this.CancellationReasons=e.CancellationReasons}},vye="Action",Rye="ArchivalBackupArn",PC="ApproximateCreationDateTimePrecision",Iye="AttributeDefinition",Aye="ArchivalDateTime",ml="AttributeDefinitions",xye="AttributeMap",Pye="AccountMaxReadCapacityUnits",Dye="AccountMaxWriteCapacityUnits",hy="AttributeName",Oye="ArchivalReason",R4="ArchivalSummary",I4="AutoScalingDisabled",kye="AutoScalingPolicyDescription",Nye="AutoScalingPolicyDescriptionList",Mye="AutoScalingPolicyUpdate",A4="AutoScalingRoleArn",Lye="AutoScalingSettingsDescription",$ye="AutoScalingSettingsUpdate",Bye="AutoScalingTargetTrackingScalingPolicyConfigurationDescription",Uye="AutoScalingTargetTrackingScalingPolicyConfigurationUpdate",Fye="AttributeType",my="AttributesToGet",x4="AttributeUpdates",qye="AttributeValue",DC="AttributeValueList",Gye="AttributeValueUpdate",jye="Address",OC="Attributes",Hye="Backfilling",gl="BackupArn",P4="BackupCreationDateTime",kC="BackupDescription",NC="BackupDetails",D4="BackupExpiryDateTime",Vye="BatchExecuteStatement",zye="BatchExecuteStatementInput",Wye="BatchExecuteStatementOutput",Kye="BatchGetItem",Qye="BatchGetItemInput",Yye="BatchGetItemOutput",Xye="BatchGetResponseMap",Jye="BatchGetRequestMap",Zye="BackupInUseException",yl="BillingMode",O4="BillingModeOverride",k4="BillingModeSummary",MC="BackupName",eSe="BackupNotFoundException",tSe="BOOL",N4="BackupStatus",M4="BackupSizeBytes",rSe="BilledSizeBytes",nSe="BatchStatementError",sSe="BatchStatementRequest",oSe="BatchStatementResponse",iSe="BS",aSe="BackupSummary",L4="BackupSummaries",LC="BackupType",cSe="BatchWriteItem",uSe="BatchWriteItemInput",lSe="BatchWriteItemOutput",dSe="BatchWriteItemRequestMap",pSe="B",$4="Code",fSe="CreateBackup",$C="ContinuousBackupsDescription",hSe="CreateBackupInput",mSe="CreateBackupOutput",gSe="ContinuousBackupsStatus",ySe="ContinuousBackupsUnavailableException",er="ConsumedCapacity",SSe="ConditionalCheckFailedException",ESe="ConsumedCapacityMultiple",B4="ConditionCheck",U4="CreationDateTime",Ei="ConditionExpression",bSe="CreateGlobalSecondaryIndexAction",_Se="CreateGlobalTable",TSe="CreateGlobalTableInput",wSe="CreateGlobalTableOutput",CSe="CreateGlobalTableWitnessGroupMemberAction",vSe="ContributorInsightsAction",gy="ContributorInsightsMode",RSe="ContributorInsightsRuleList",ISe="ContributorInsightsSummary",BC="ContributorInsightsStatus",F4="ContributorInsightsSummaries",q4="ComparisonOperator",Sl="ConditionalOperator",ASe="CsvOptions",xSe="CachePeriodInMinutes",za="ConsistentRead",PSe="CreateReplicaAction",DSe="CreateReplicationGroupMemberAction",OSe="CancellationReasonList",kSe="ConfirmRemoveSelfResourceAccess",G4="ClientRequestToken",NSe="CancellationReason",MSe="CancellationReasons",yy="ClientToken",LSe="CreateTableInput",$Se="CreateTableOutput",BSe="CreateTable",j4="CapacityUnits",H4="CloudWatchLogGroupArn",USe="Capacity",FSe="Condition",V4="Count",Sy="Create",qSe="Csv",GSe="Delimiter",jSe="DeleteBackup",HSe="DeleteBackupInput",VSe="DescribeBackupInput",zSe="DeleteBackupOutput",WSe="DescribeBackupOutput",KSe="DescribeBackup",QSe="DescribeContinuousBackups",YSe="DescribeContinuousBackupsInput",XSe="DescribeContinuousBackupsOutput",JSe="DescribeContributorInsights",ZSe="DescribeContributorInsightsInput",eEe="DescribeContributorInsightsOutput",tEe="DescribeEndpoints",rEe="DescribeExportInput",nEe="DescribeExportOutput",sEe="DescribeEndpointsRequest",oEe="DescribeEndpointsResponse",iEe="DescribeExport",aEe="DeleteGlobalSecondaryIndexAction",cEe="DescribeGlobalTable",uEe="DescribeGlobalTableInput",lEe="DescribeGlobalTableOutput",dEe="DescribeGlobalTableSettings",pEe="DescribeGlobalTableSettingsInput",fEe="DescribeGlobalTableSettingsOutput",hEe="DeleteGlobalTableWitnessGroupMemberAction",mEe="DeleteItem",gEe="DuplicateItemException",yEe="DeleteItemInput",SEe="DescribeImportInput",EEe="DeleteItemOutput",bEe="DescribeImportOutput",_Ee="DescribeImport",TEe="DescribeKinesisStreamingDestination",wEe="DescribeKinesisStreamingDestinationInput",CEe="DescribeKinesisStreamingDestinationOutput",vEe="DisableKinesisStreamingDestination",REe="DescribeLimits",IEe="DescribeLimitsInput",AEe="DescribeLimitsOutput",UC="DeletionProtectionEnabled",z4="DeleteRequest",xEe="DeleteReplicaAction",PEe="DeleteReplicationGroupMemberAction",DEe="DeleteResourcePolicy",OEe="DeleteResourcePolicyInput",kEe="DeleteResourcePolicyOutput",FC="DestinationStatus",NEe="DestinationStatusDescription",W4="DisableScaleIn",MEe="DeleteTable",LEe="DeleteTableInput",$Ee="DescribeTableInput",BEe="DeleteTableOutput",UEe="DescribeTableOutput",FEe="DescribeTableReplicaAutoScaling",qEe="DescribeTableReplicaAutoScalingInput",GEe="DescribeTableReplicaAutoScalingOutput",jEe="DescribeTimeToLive",HEe="DescribeTimeToLiveInput",VEe="DescribeTimeToLiveOutput",zEe="DescribeTable",Wa="Delete",WEe="Error",qC="ExportArn",KEe="ExpectedAttributeMap",xr="ExpressionAttributeNames",as="ExpressionAttributeValues",QEe="ExpressionAttributeValueMap",YEe="ExpectedAttributeValue",XEe="ErrorCount",JEe="ExportConflictException",GC="ExportDescription",ZEe="ExceptionDescription",K4="ExportFormat",ebe="ExportFromTime",jC="EnableKinesisStreamingConfiguration",tbe="EnableKinesisStreamingDestination",rbe="ExportManifest",nbe="ExceptionName",sbe="ExportNotFoundException",obe="EarliestRestorableDateTime",Q4="ExpectedRevisionId",Y4="ExportStatus",ibe="ExclusiveStartBackupArn",abe="ExclusiveStartGlobalTableName",cbe="ExecuteStatementInput",X4="ExclusiveStartKey",ube="ExecuteStatementOutput",lbe="ExclusiveStartTableName",dbe="ExportSummary",pbe="ExecuteStatement",J4="ExportSummaries",HC="EndTime",fbe="ExecuteTransactionInput",hbe="ExecuteTransactionOutput",mbe="ExportToTime",gbe="ExportTableToPointInTime",ybe="ExportTableToPointInTimeInput",Sbe="ExportTableToPointInTimeOutput",Z4="ExportTime",Ebe="ExecuteTransaction",VC="ExportType",bbe="ExportViewType",eH="Endpoints",tH="Enabled",_be="Endpoint",zC="Expected",Tbe="Exists",rH="FailureCode",wbe="FilterConditionMap",nH="FailureException",sH="FilterExpression",oH="FailureMessage",iH="Get",Cbe="GetItem",vbe="GetItemInput",Rbe="GetItemOutput",Ibe="GetResourcePolicy",Abe="GetResourcePolicyInput",xbe="GetResourcePolicyOutput",Tn="GlobalSecondaryIndexes",Pbe="GlobalSecondaryIndexAutoScalingUpdate",Dbe="GlobalSecondaryIndexAutoScalingUpdateList",Obe="GlobalSecondaryIndexDescription",kbe="GlobalSecondaryIndexDescriptionList",Nbe="GlobalSecondaryIndexInfo",Mbe="GlobalSecondaryIndexList",aH="GlobalSecondaryIndexOverride",Lbe="GlobalSecondaryIndexUpdate",$be="GlobalSecondaryIndexUpdateList",cH="GlobalSecondaryIndexUpdates",Bbe="GlobalSecondaryIndexWarmThroughputDescription",Ube="GlobalSecondaryIndex",Fbe="GlobalTable",qbe="GlobalTableArn",Gbe="GlobalTableAlreadyExistsException",jbe="GlobalTableBillingMode",Ey="GlobalTableDescription",uH="GlobalTableGlobalSecondaryIndexSettingsUpdate",Hbe="GlobalTableGlobalSecondaryIndexSettingsUpdateList",Vbe="GlobalTableList",cs="GlobalTableName",zbe="GlobalTableNotFoundException",Wbe="GlobalTableProvisionedWriteCapacityAutoScalingSettingsUpdate",Kbe="GlobalTableProvisionedWriteCapacityUnits",Qbe="GlobalTableStatus",Ybe="GlobalTableVersion",Xbe="GlobalTableWitnesses",Jbe="GlobalTableWitnessDescription",Zbe="GlobalTableWitnessDescriptionList",e0e="GlobalTableWitnessGroupUpdate",t0e="GlobalTableWitnessGroupUpdateList",r0e="GlobalTableWitnessUpdates",n0e="GlobalTables",s0e="HeaderList",us="Item",WC="ImportArn",lH="IndexArn",El="ItemCount",o0e="ImportConflictException",i0e="ItemCollectionKey",a0e="ItemCollectionKeyAttributeMap",Ka="ItemCollectionMetrics",c0e="ItemCollectionMetricsMultiple",u0e="ItemCollectionMetricsPerTable",l0e="ItemCollectionSizeLimitExceededException",dH="InputCompressionType",d0e="InaccessibleEncryptionDateTime",p0e="InvalidEndpointException",KC="IncrementalExportSpecification",f0e="InvalidExportTimeException",QC="InputFormat",YC="InputFormatOptions",h0e="ImportedItemCount",m0e="ItemList",$e="IndexName",g0e="ImportNotFoundException",y0e="IndexNotFoundException",S0e="IdempotentParameterMismatchException",E0e="ItemResponse",b0e="ItemResponseList",_0e="InvalidRestoreTimeException",XC="IndexStatus",pH="IndexSizeBytes",T0e="InternalServerError",fH="ImportSummaryList",w0e="ImportSummary",hH="ImportStatus",C0e="ImportTable",JC="ImportTableDescription",v0e="ImportTableInput",R0e="ImportTableOutput",ZC="Items",wn="Key",I0e="KeysAndAttributes",mH="KeyConditions",A0e="KeyConditionExpression",gH="KinesisDataStreamDestinations",x0e="KinesisDataStreamDestination",P0e="KeyList",D0e="KMSMasterKeyArn",by="KMSMasterKeyId",Pr="KeySchema",O0e="KinesisStreamingDestinationInput",k0e="KinesisStreamingDestinationOutput",N0e="KeySchemaElement",M0e="KeyType",L0e="Keys",Qa="Limit",$0e="ListAttributeValue",B0e="ListBackups",U0e="ListBackupsInput",F0e="ListBackupsOutput",q0e="ListContributorInsights",G0e="ListContributorInsightsInput",j0e="ListContributorInsightsOutput",H0e="LastDecreaseDateTime",V0e="ListExports",z0e="LastEvaluatedBackupArn",W0e="LimitExceededException",K0e="LastEvaluatedGlobalTableName",Q0e="ListExportsInput",ev="LastEvaluatedKey",Y0e="ListExportsOutput",X0e="LastEvaluatedTableName",J0e="ListGlobalTables",Z0e="ListGlobalTablesInput",e_e="ListGlobalTablesOutput",t_e="ListImports",r_e="LastIncreaseDateTime",n_e="ListImportsInput",s_e="ListImportsOutput",o_e="LatestRestorableDateTime",i_e="LatestStreamArn",bl="LocalSecondaryIndexes",a_e="LocalSecondaryIndexDescription",c_e="LocalSecondaryIndexDescriptionList",u_e="LocalSecondaryIndexInfo",l_e="LocalSecondaryIndexList",yH="LocalSecondaryIndexOverride",d_e="LocalSecondaryIndex",p_e="LatestStreamLabel",f_e="ListTables",h_e="ListTablesInput",m_e="ListTablesOutput",g_e="ListTagsOfResource",y_e="ListTagsOfResourceInput",S_e="ListTagsOfResourceOutput",SH="LastUpdateDateTime",E_e="LastUpdateToPayPerRequestDateTime",b_e="L",Ya="Message",__e="MapAttributeValue",EH="MaxResults",bH="MultiRegionConsistency",_H="MaxReadRequestUnits",TH="MinimumUnits",wH="MaximumUnits",T_e="MaxWriteRequestUnits",w_e="M",C_e="N",v_e="NonKeyAttributes",R_e="NumberOfDecreasesToday",I_e="NS",Cn="NextToken",A_e="NULL",Kr="OnDemandThroughput",_o="OnDemandThroughputOverride",tv="Parameters",_l="ProjectionExpression",x_e="PutItem",P_e="ProcessedItemCount",D_e="PutItemInput",O_e="PutItemInputAttributeMap",k_e="PutItemOutput",CH="PointInTimeRecoveryDescription",N_e="PointInTimeRecoveryEnabled",M_e="PointInTimeRecoveryStatus",vH="PointInTimeRecoverySpecification",L_e="PointInTimeRecoveryUnavailableException",RH="PolicyName",$_e="PolicyNotFoundException",B_e="PartiQLBatchRequest",U_e="PartiQLBatchResponse",IH="PutRequest",AH="ProvisionedReadCapacityAutoScalingSettings",F_e="ProvisionedReadCapacityAutoScalingSettingsUpdate",q_e="ProvisionedReadCapacityAutoScalingUpdate",xH="ProvisionedReadCapacityUnits",G_e="PutResourcePolicy",j_e="PutResourcePolicyInput",H_e="PutResourcePolicyOutput",V_e="PageSize",z_e="ProcessedSizeBytes",W_e="PreparedStatementParameters",K_e="ParameterizedStatement",Q_e="ParameterizedStatements",Qr="ProvisionedThroughput",Y_e="ProvisionedThroughputDescription",X_e="ProvisionedThroughputExceededException",To="ProvisionedThroughputOverride",J_e="ProjectionType",PH="ProvisionedWriteCapacityAutoScalingSettings",Z_e="ProvisionedWriteCapacityAutoScalingSettingsUpdate",DH="ProvisionedWriteCapacityAutoScalingUpdate",OH="ProvisionedWriteCapacityUnits",kH="Policy",wo="Projection",NH="Put",eTe="Query",tTe="QueryFilter",rTe="QueryInput",nTe="QueryOutput",_y="Responses",Xa="ResourceArn",sTe="ReplicaAlreadyExistsException",oTe="ReplicaAutoScalingDescription",iTe="ReplicaAutoScalingDescriptionList",aTe="ReplicaAutoScalingUpdate",cTe="ReplicaAutoScalingUpdateList",uTe="ReplicaBillingModeSummary",pr="ReturnConsumedCapacity",Tl="ReadCapacityUnits",lTe="ReplicaDescription",dTe="ReplicaDescriptionList",MH="RestoreDateTime",rv="ReplicationGroup",pTe="ReplicaGlobalSecondaryIndex",fTe="ReplicaGlobalSecondaryIndexAutoScalingDescription",hTe="ReplicaGlobalSecondaryIndexAutoScalingDescriptionList",mTe="ReplicaGlobalSecondaryIndexAutoScalingUpdate",gTe="ReplicaGlobalSecondaryIndexAutoScalingUpdateList",yTe="ReplicaGlobalSecondaryIndexDescription",STe="ReplicaGlobalSecondaryIndexDescriptionList",ETe="ReplicaGlobalSecondaryIndexList",bTe="ReplicaGlobalSecondaryIndexSettings",_Te="ReplicaGlobalSecondaryIndexSettingsDescription",TTe="ReplicaGlobalSecondaryIndexSettingsDescriptionList",LH="ReplicaGlobalSecondaryIndexSettingsUpdate",wTe="ReplicaGlobalSecondaryIndexSettingsUpdateList",CTe="ReplicaGlobalSecondaryIndexUpdates",vTe="ReplicationGroupUpdate",RTe="ReplicationGroupUpdateList",$H="RequestItems",wl="ReturnItemCollectionMetrics",ITe="ReplicaInaccessibleDateTime",ATe="RestoreInProgress",xTe="ResourceInUseException",nv="RevisionId",PTe="ReplicaList",DTe="RequestLimitExceeded",jt="RegionName",OTe="ReplicaNotFoundException",kTe="ResourceNotFoundException",NTe="ResourcePolicy",BH="RecoveryPeriodInDays",UH="ReplicaProvisionedReadCapacityAutoScalingSettings",MTe="ReplicaProvisionedReadCapacityAutoScalingSettingsUpdate",LTe="ReplicaProvisionedReadCapacityAutoScalingUpdate",FH="ReplicaProvisionedReadCapacityUnits",qH="ReplicaProvisionedWriteCapacityAutoScalingSettings",$Te="ReplicaProvisionedWriteCapacityUnits",GH="ReplicaSettings",BTe="ReplicaStatusDescription",UTe="ReplicaSettingsDescriptionList",FTe="ReplicaSettingsDescription",qTe="ReplicaStatusPercentProgress",jH="ReplicaSettingsUpdate",GTe="ReplicaSettingsUpdateList",sv="ReplicaStatus",HH="RestoreSummary",jTe="ReplicaTableClass",VH="ReplicaTableClassSummary",HTe="RestoreTableFromBackup",VTe="RestoreTableFromBackupInput",zTe="RestoreTableFromBackupOutput",WTe="RestoreTableToPointInTime",KTe="RestoreTableToPointInTimeInput",QTe="RestoreTableToPointInTimeOutput",YTe="ReplicaUpdate",XTe="ReplicaUpdateList",ov="ReadUnitsPerSecond",iv="ReplicaUpdates",av="ReturnValues",vn="ReturnValuesOnConditionCheckFailure",JTe="ReplicatedWriteConflictException",ZTe="Replica",zH="Replicas",ewe="Statements",Cl="StreamArn",cv="S3Bucket",twe="SourceBackupArn",uv="S3BucketOwner",Ty="S3BucketSource",WH="ScannedCount",rwe="StreamDescription",nwe="StreamEnabled",swe="SizeEstimateRangeGB",owe="ScanFilter",iwe="ScanInput",KH="ScaleInCooldown",awe="SecondaryIndexesCapacityMap",cwe="ScanIndexForward",uwe="S3KeyPrefix",lwe="ScanOutput",QH="ScaleOutCooldown",dwe="ScalingPolicies",pwe="ScalingPolicyUpdate",YH="S3Prefix",wy="StreamSpecification",XH="S3SseAlgorithm",lv="SSEDescription",Cy="SSESpecification",JH="SSESpecificationOverride",ZH="SSEType",eV="S3SseKmsKeyId",fwe="SS",dv="StartTime",tV="SourceTableArn",rV="SourceTableDetails",nV="SourceTableFeatureDetails",hwe="SourceTableName",mwe="StreamViewType",gwe="S",ywe="Scan",sV="Select",Swe="Segment",pv="Statement",fv="Status",oV="Table",ls="TableArn",Ewe="TableAlreadyExistsException",hv="TableAutoScalingDescription",mv="TableClass",bwe="TableCreationDateTime",_we="TransactionCanceledException",Twe="TransactionConflictException",iV="TableClassOverride",gv="TableCreationParameters",aV="TableClassSummary",Ja="TableDescription",wwe="ThrottlingException",Cwe="TransactGetItem",vwe="TransactGetItemsInput",Rwe="TransactGetItemList",Iwe="TransactGetItemsOutput",Awe="TransactGetItems",vl="TableId",xwe="TransactionInProgressException",Pwe="TableInUseException",cV="TransactItems",Dwe="TagKeys",Owe="TagList",kwe="TableMaxReadCapacityUnits",Nwe="TableMaxWriteCapacityUnits",ee="TableName",Mwe="TableNotFoundException",Lwe="TableNames",uV="ThrottlingReasons",$we="TagResourceInput",Bwe="ThrottlingReasonList",Uwe="TimeRangeLowerBound",Fwe="TimeRangeUpperBound",qwe="TagResource",Gwe="ThrottlingReason",jwe="TransactStatements",lV="TableSizeBytes",dV="TableStatus",Hwe="TotalSegments",yv="TimeToLiveDescription",Vwe="TimeToLiveStatus",Sv="TimeToLiveSpecification",pV="TargetTableName",fV="TargetTrackingScalingPolicyConfiguration",hV="TargetValue",zwe="TransactWriteItem",Wwe="TransactWriteItemsInput",Kwe="TransactWriteItemList",Qwe="TransactWriteItemsOutput",Ywe="TransactWriteItems",Xwe="TableWarmThroughputDescription",Ev="Tags",Jwe="Tag",vy="Update",Zwe="UpdateContinuousBackups",eCe="UpdateContinuousBackupsInput",tCe="UpdateContinuousBackupsOutput",rCe="UpdateContributorInsights",nCe="UpdateContributorInsightsInput",sCe="UpdateContributorInsightsOutput",mV="UpdateExpression",oCe="UpdateGlobalSecondaryIndexAction",iCe="UpdateGlobalTable",aCe="UpdateGlobalTableInput",cCe="UpdateGlobalTableOutput",uCe="UpdateGlobalTableSettings",lCe="UpdateGlobalTableSettingsInput",dCe="UpdateGlobalTableSettingsOutput",pCe="UnprocessedItems",fCe="UpdateItemInput",hCe="UpdateItemOutput",mCe="UpdateItem",gCe="UnprocessedKeys",bv="UpdateKinesisStreamingConfiguration",yCe="UpdateKinesisStreamingDestination",SCe="UpdateKinesisStreamingDestinationInput",ECe="UpdateKinesisStreamingDestinationOutput",bCe="UseLatestRestorableTime",_Ce="UntagResource",TCe="UpdateReplicationGroupMemberAction",wCe="UntagResourceInput",CCe="UpdateTable",vCe="UpdateTableInput",RCe="UpdateTableOutput",ICe="UpdateTableReplicaAutoScaling",ACe="UpdateTableReplicaAutoScalingInput",xCe="UpdateTableReplicaAutoScalingOutput",PCe="UpdateTimeToLive",DCe="UpdateTimeToLiveInput",OCe="UpdateTimeToLiveOutput",_v="Value",Ry="WriteCapacityUnits",kCe="WriteRequest",NCe="WriteRequests",MCe="WitnessStatus",Rn="WarmThroughput",Tv="WriteUnitsPerSecond",LCe="awsQueryError",me="client",fe="error",gV="httpError",$Ce="httpHeader",Ee="message",BCe="reason",UCe="resource",FCe="server",yV="smithy.ts.sdk.synthetic.com.amazonaws.dynamodb",qCe="throttlingReasons",GCe="x-amz-confirm-remove-self-resource-access",f="com.amazonaws.dynamodb",SV=[3,f,R4,0,[Aye,Oye,Rye],[4,0,0]],EV=[3,f,Iye,0,[hy,Fye],[0,0],2],bV=[3,f,Gye,0,[_v,vye],[()=>Dr,0]],_V=[3,f,kye,0,[RH,fV],[0,()=>wV]],TV=[3,f,Mye,0,[fV,RH],[()=>CV,0],1],is=[3,f,Lye,0,[TH,wH,I4,A4,dwe],[1,1,2,0,()=>jCe]],ds=[3,f,$ye,0,[TH,wH,I4,A4,pwe],[1,1,2,0,()=>TV]],wV=[3,f,Bye,0,[hV,W4,KH,QH],[1,2,1,1],1],CV=[3,f,Uye,0,[hV,W4,KH,QH],[1,2,1,1],1],wv=[3,f,kC,0,[NC,rV,nV],[()=>Cv,()=>M8,()=>L8]],Cv=[3,f,NC,0,[gl,MC,N4,LC,P4,M4,D4],[0,0,0,0,4,1,4],5],vV=[-3,f,Zye,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(vV,qm);var RV=[-3,f,eSe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(RV,Gm);var IV=[3,f,aSe,0,[ee,vl,ls,gl,MC,P4,D4,N4,LC,M4],[0,0,0,0,0,4,4,0,0,1]],AV=[3,f,zye,0,[ewe,pr],[()=>dve,0],1],xV=[3,f,Wye,0,[_y,er],[()=>pve,()=>nc]],PV=[3,f,Qye,0,[$H,pr],[()=>PW,0],1],DV=[3,f,Yye,0,[_y,gCe,er],[()=>Ive,()=>PW,()=>nc]],OV=[3,f,nSe,0,[$4,Ya,us],[0,0,()=>In]],kV=[3,f,sSe,0,[pv,tv,za,vn],[0,()=>zv,2,0],1],NV=[3,f,oSe,0,[WEe,ee,us],[()=>OV,0,()=>In]],MV=[3,f,uSe,0,[$H,pr,wl],[()=>DW,0,0],1],LV=[3,f,lSe,0,[pCe,Ka,er],[()=>DW,()=>kW,()=>nc]],vv=[3,f,k4,0,[yl,E_e],[0,4]],$V=[3,f,NSe,0,[us,$4,Ya],[()=>In,0,0]],Rv=[3,f,USe,0,[Tl,Ry,j4],[1,1,1]],Iv=[3,f,FSe,0,[q4,DC],[0,()=>CW],1],BV=[-3,f,SSe,{[fe]:me},[Ee,us],[0,()=>In]];ce.TypeRegistry.for(f).registerError(BV,bg);var UV=[3,f,B4,0,[wn,ee,Ei,xr,as,vn],[()=>tr,0,0,128,()=>fs,0],3],ps=[3,f,er,0,[ee,j4,Tl,Ry,oV,bl,Tn],[0,1,1,1,()=>Rv,()=>v4,()=>v4]],Av=[3,f,$C,0,[gSe,CH],[0,()=>Q6],1],FV=[-3,f,ySe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(FV,Xm);var qV=[3,f,ISe,0,[ee,$e,BC,gy],[0,0,0,0]],GV=[3,f,hSe,0,[ee,MC],[0,0],2],jV=[3,f,mSe,0,[NC],[()=>Cv]],HV=[3,f,bSe,0,[$e,Pr,wo,Qr,Kr,Rn],[0,()=>Xr,()=>Co,()=>Yr,()=>fr,()=>rc],3],VV=[3,f,TSe,0,[cs,rv],[0,()=>AW],2],zV=[3,f,wSe,0,[Ey],[()=>Iy]],WV=[3,f,CSe,0,[jt],[0],1],KV=[3,f,PSe,0,[jt],[0],1],QV=[3,f,DSe,0,[jt,by,To,_o,Tn,iV],[0,0,()=>ec,()=>Za,()=>IW,0],1],YV=[3,f,LSe,0,[ml,ee,Pr,bl,Tn,yl,Qr,wy,Cy,Ev,mv,UC,Rn,NTe,Kr],[()=>Py,0,()=>Xr,()=>Vv,()=>Dy,0,()=>Yr,()=>Il,()=>tc,()=>Wv,0,2,()=>rc,0,()=>fr],3],XV=[3,f,$Se,0,[Ja],[()=>bi]],JV=[3,f,ASe,0,[GSe,s0e],[0,64]],ZV=[3,f,Wa,0,[wn,ee,Ei,xr,as,vn],[()=>tr,0,0,128,()=>fs,0],2],ez=[3,f,HSe,0,[gl],[0],1],tz=[3,f,zSe,0,[kC],[()=>wv]],rz=[3,f,aEe,0,[$e],[0],1],nz=[3,f,hEe,0,[jt],[0],1],sz=[3,f,yEe,0,[ee,wn,zC,Sl,av,pr,wl,Ei,xr,as,vn],[0,()=>tr,()=>Qv,0,0,0,0,0,128,()=>fs,0],2],oz=[3,f,EEe,0,[OC,er,Ka],[()=>In,()=>ps,()=>Rl]],iz=[3,f,xEe,0,[jt],[0],1],az=[3,f,PEe,0,[jt],[0],1],cz=[3,f,z4,0,[wn],[()=>tr],1],uz=[3,f,OEe,0,[Xa,Q4],[0,0],1],lz=[3,f,kEe,0,[nv],[0]],dz=[3,f,LEe,0,[ee],[0],1],pz=[3,f,BEe,0,[Ja],[()=>bi]],fz=[3,f,VSe,0,[gl],[0],1],hz=[3,f,WSe,0,[kC],[()=>wv]],mz=[3,f,YSe,0,[ee],[0],1],gz=[3,f,XSe,0,[$C],[()=>Av]],yz=[3,f,ZSe,0,[ee,$e],[0,0],1],Sz=[3,f,eEe,0,[ee,$e,RSe,BC,SH,nH,gy],[0,0,64,0,4,()=>Xz,0]],Ez=[3,f,sEe,0,[],[]],bz=[3,f,oEe,0,[eH],[()=>WCe],1],_z=[3,f,rEe,0,[qC],[0],1],Tz=[3,f,nEe,0,[GC],[()=>Pv]],wz=[3,f,uEe,0,[cs],[0],1],Cz=[3,f,lEe,0,[Ey],[()=>Iy]],vz=[3,f,pEe,0,[cs],[0],1],Rz=[3,f,fEe,0,[cs,GH],[0,()=>xW]],Iz=[3,f,SEe,0,[WC],[0],1],Az=[3,f,bEe,0,[JC],[()=>Ov],1],xz=[3,f,wEe,0,[ee],[0],1],Pz=[3,f,CEe,0,[ee,gH],[0,()=>ive]],Dz=[3,f,IEe,0,[],[]],Oz=[3,f,AEe,0,[Pye,Dye,kwe,Nwe],[1,1,1,1]],kz=[3,f,$Ee,0,[ee],[0],1],Nz=[3,f,UEe,0,[oV],[()=>bi]],Mz=[3,f,qEe,0,[ee],[0],1],Lz=[3,f,GEe,0,[hv],[()=>Uv]],$z=[3,f,HEe,0,[ee],[0],1],Bz=[3,f,VEe,0,[yv],[()=>Gv]],Uz=[-3,f,gEe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(Uz,cg);var xv=[3,f,jC,0,[PC],[0]],Fz=[3,f,_be,0,[jye,xSe],[0,1],2],qz=[3,f,cbe,0,[pv,tv,za,Cn,pr,Qa,vn],[0,()=>zv,2,0,0,1,0],1],Gz=[3,f,ube,0,[ZC,Cn,er,ev],[()=>Oy,0,()=>ps,()=>tr]],jz=[3,f,fbe,0,[jwe,G4,pr],[()=>lve,[0,4],0],1],Hz=[3,f,hbe,0,[_y,er],[()=>vW,()=>nc]],Vz=[3,f,YEe,0,[_v,Tbe,q4,DC],[()=>Dr,2,0,()=>CW]],zz=[-3,f,JEe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(zz,dg);var Pv=[3,f,GC,0,[qC,Y4,dv,HC,rbe,ls,vl,Z4,yy,cv,uv,YH,XH,eV,rH,oH,K4,rSe,El,VC,KC],[0,0,4,4,0,0,0,4,0,0,0,0,0,0,0,0,0,1,1,0,()=>kv]],Wz=[-3,f,sbe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(Wz,og);var Kz=[3,f,dbe,0,[qC,Y4,VC],[0,0,0]],Qz=[3,f,ybe,0,[ls,cv,Z4,yy,uv,YH,XH,eV,K4,VC,KC],[0,0,4,[0,4],0,0,0,0,0,0,()=>kv],2],Yz=[3,f,Sbe,0,[GC],[()=>Pv]],Xz=[3,f,nH,0,[nbe,ZEe],[0,0]],Jz=[3,f,iH,0,[wn,ee,_l,xr],[()=>tr,0,0,128],2],Zz=[3,f,vbe,0,[ee,wn,my,za,pr,_l,xr],[0,()=>tr,64,2,0,0,128],2],e6=[3,f,Rbe,0,[us,er],[()=>In,()=>ps]],t6=[3,f,Abe,0,[Xa],[0],1],r6=[3,f,xbe,0,[kH,nv],[0,0]],n6=[3,f,Ube,0,[$e,Pr,wo,Qr,Kr,Rn],[0,()=>Xr,()=>Co,()=>Yr,()=>fr,()=>rc],3],s6=[3,f,Pbe,0,[$e,DH],[0,()=>ds]],o6=[3,f,Obe,0,[$e,Pr,wo,XC,Hye,Qr,pH,El,lH,Kr,Rn],[0,()=>Xr,()=>Co,0,2,()=>$v,1,1,0,()=>fr,()=>Dv]],i6=[3,f,Nbe,0,[$e,Pr,wo,Qr,Kr],[0,()=>Xr,()=>Co,()=>Yr,()=>fr]],a6=[3,f,Lbe,0,[vy,Sy,Wa],[()=>oW,()=>HV,()=>rz]],Dv=[3,f,Bbe,0,[ov,Tv,fv],[1,1,0]],c6=[3,f,Fbe,0,[cs,rv],[0,()=>AW]],u6=[-3,f,Gbe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(u6,tg);var Iy=[3,f,Ey,0,[rv,qbe,U4,Qbe,cs],[()=>RW,0,4,0,0]],l6=[3,f,uH,0,[$e,OH,Z_e],[0,1,()=>ds],1],d6=[-3,f,zbe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(d6,ig);var p6=[3,f,Jbe,0,[jt,MCe],[0,0]],f6=[3,f,e0e,0,[Sy,Wa],[()=>WV,()=>nz]],h6=[-3,f,S0e,{[fe]:me},[Ya],[0]];ce.TypeRegistry.for(f).registerError(h6,ug);var m6=[-3,f,o0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(m6,hg);var g6=[-3,f,g0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(g6,ag);var y6=[3,f,w0e,0,[WC,hH,ls,Ty,H4,QC,dv,HC],[0,0,0,()=>Ay,0,0,4,4]],Ov=[3,f,JC,0,[WC,hH,ls,vl,yy,Ty,XEe,H4,QC,YC,dH,gv,dv,HC,z_e,P_e,h0e,rH,oH],[0,0,0,0,0,()=>Ay,1,0,0,()=>Nv,0,()=>Fv,4,4,1,1,1,0,0]],S6=[3,f,v0e,0,[Ty,QC,gv,yy,YC,dH],[()=>Ay,0,()=>Fv,[0,4],()=>Nv,0],3],E6=[3,f,R0e,0,[JC],[()=>Ov],1],kv=[3,f,KC,0,[ebe,mbe,bbe],[4,4,0]],b6=[-3,f,y0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(b6,Eg);var Nv=[3,f,YC,0,[qSe],[()=>JV]],_6=[-3,f,T0e,{[fe]:FCe},[Ee],[0]];ce.TypeRegistry.for(f).registerError(_6,jm);var T6=[-3,f,p0e,{[fe]:me,[gV]:421},[Ya],[0]];ce.TypeRegistry.for(f).registerError(T6,zm);var w6=[-3,f,f0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(w6,pg);var C6=[-3,f,_0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(C6,gg);var Rl=[3,f,Ka,0,[i0e,swe],[()=>Ave,65]],v6=[-3,f,l0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(v6,Qm);var R6=[3,f,E0e,0,[us],[()=>In]],I6=[3,f,I0e,0,[L0e,my,za,_l,xr],[()=>ove,64,2,0,128],1],A6=[3,f,N0e,0,[hy,M0e],[0,0],2],x6=[3,f,x0e,0,[Cl,FC,NEe,PC],[0,0,0,0]],Mv=[3,f,O0e,0,[ee,Cl,jC],[0,0,()=>xv],2],Lv=[3,f,k0e,0,[ee,Cl,FC,jC],[0,0,0,()=>xv]],P6=[-3,f,W0e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(P6,Jm);var D6=[3,f,U0e,0,[ee,Qa,Uwe,Fwe,ibe,LC],[0,1,4,4,0,0]],O6=[3,f,F0e,0,[L4,z0e],[()=>HCe,0]],k6=[3,f,G0e,0,[ee,Cn,EH],[0,0,1]],N6=[3,f,j0e,0,[F4,Cn],[()=>zCe,0]],M6=[3,f,Q0e,0,[ls,EH,Cn],[0,1,0]],L6=[3,f,Y0e,0,[J4,Cn],[()=>KCe,0]],$6=[3,f,Z0e,0,[abe,Qa,jt],[0,1,0]],B6=[3,f,e_e,0,[n0e,K0e],[()=>eve,0]],U6=[3,f,n_e,0,[ls,V_e,Cn],[0,1,0]],F6=[3,f,s_e,0,[fH,Cn],[()=>nve,0]],q6=[3,f,h_e,0,[lbe,Qa],[0,1]],G6=[3,f,m_e,0,[Lwe,X0e],[64,0]],j6=[3,f,y_e,0,[Xa,Cn],[0,0],1],H6=[3,f,S_e,0,[Ev,Cn],[()=>Wv,0]],V6=[3,f,d_e,0,[$e,Pr,wo],[0,()=>Xr,()=>Co],3],z6=[3,f,a_e,0,[$e,Pr,wo,pH,El,lH],[0,()=>Xr,()=>Co,1,1,0]],W6=[3,f,u_e,0,[$e,Pr,wo],[0,()=>Xr,()=>Co]],fr=[3,f,Kr,0,[_H,T_e],[1,1]],Za=[3,f,_o,0,[_H],[1]],K6=[3,f,K_e,0,[pv,tv,vn],[0,()=>zv,0],1],Q6=[3,f,CH,0,[M_e,BH,obe,o_e],[0,1,4,4]],Y6=[3,f,vH,0,[N_e,BH],[2,1],1],X6=[-3,f,L_e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(X6,fg);var J6=[-3,f,$_e,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(J6,sg);var Co=[3,f,wo,0,[J_e,v_e],[0,64]],Yr=[3,f,Qr,0,[Tl,Ry],[1,1],2],$v=[3,f,Y_e,0,[r_e,H0e,R_e,Tl,Ry],[4,4,1,1,1]],Z6=[-3,f,X_e,{[fe]:me},[Ee,uV],[0,()=>Kv]];ce.TypeRegistry.for(f).registerError(Z6,Wm);var ec=[3,f,To,0,[Tl],[1]],e8=[3,f,NH,0,[us,ee,Ei,xr,as,vn],[()=>Yv,0,0,128,()=>fs,0],2],t8=[3,f,D_e,0,[ee,us,zC,av,pr,wl,Sl,Ei,xr,as,vn],[0,()=>Yv,()=>Qv,0,0,0,0,0,128,()=>fs,0],2],r8=[3,f,k_e,0,[OC,er,Ka],[()=>In,()=>ps,()=>Rl]],n8=[3,f,IH,0,[us],[()=>Yv],1],s8=[3,f,j_e,0,[Xa,kH,Q4,kSe],[0,0,0,[2,{[$Ce]:GCe}]],2],o8=[3,f,H_e,0,[nv],[0]],i8=[3,f,rTe,0,[ee,$e,sV,my,Qa,za,mH,tTe,Sl,cwe,X4,pr,_l,sH,A0e,xr,as],[0,0,0,64,1,2,()=>xve,()=>OW,0,2,()=>tr,0,0,0,0,128,()=>fs],1],a8=[3,f,nTe,0,[ZC,V4,WH,ev,er],[()=>Oy,1,1,()=>tr,()=>ps]],c8=[3,f,ZTe,0,[jt],[0]],u8=[-3,f,sTe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(u8,yg);var l8=[3,f,oTe,0,[jt,Tn,UH,qH,sv],[0,()=>mve,()=>is,()=>is,0]],d8=[3,f,aTe,0,[jt,CTe,LTe],[0,()=>gve,()=>ds],1],p8=[3,f,lTe,0,[jt,sv,BTe,qTe,by,To,_o,Rn,Tn,ITe,VH],[0,0,0,0,0,()=>ec,()=>Za,()=>qv,()=>yve,4,()=>xy]],f8=[3,f,pTe,0,[$e,To,_o],[0,()=>ec,()=>Za],1],h8=[3,f,fTe,0,[$e,XC,AH,PH],[0,0,()=>is,()=>is]],m8=[3,f,mTe,0,[$e,q_e],[0,()=>ds]],g8=[3,f,yTe,0,[$e,To,_o,Rn],[0,()=>ec,()=>Za,()=>Dv]],y8=[3,f,_Te,0,[$e,XC,xH,AH,OH,PH],[0,0,1,()=>is,1,()=>is],1],S8=[3,f,LH,0,[$e,xH,F_e],[0,1,()=>ds],1],E8=[-3,f,OTe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(E8,Sg);var b8=[3,f,FTe,0,[jt,sv,uTe,FH,UH,$Te,qH,bTe,VH],[0,0,()=>vv,1,()=>is,1,()=>is,()=>Sve,()=>xy],1],_8=[3,f,jH,0,[jt,FH,MTe,LH,jTe],[0,1,()=>ds,()=>Eve,0],1],T8=[-3,f,JTe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(T8,Ym);var w8=[3,f,vTe,0,[Sy,vy,Wa],[()=>QV,()=>hW,()=>az]],C8=[3,f,YTe,0,[Sy,Wa],[()=>KV,()=>iz]],v8=[-3,f,DTe,{[fe]:me},[Ee,uV],[0,()=>Kv]];ce.TypeRegistry.for(f).registerError(v8,Hm);var R8=[-3,f,xTe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(R8,rg);var I8=[-3,f,kTe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(I8,Km);var A8=[3,f,HH,0,[MH,ATe,twe,tV],[4,2,0,0],2],x8=[3,f,VTe,0,[pV,gl,O4,aH,yH,To,_o,JH],[0,0,0,()=>Dy,()=>Vv,()=>Yr,()=>fr,()=>tc],2],P8=[3,f,zTe,0,[Ja],[()=>bi]],D8=[3,f,KTe,0,[pV,tV,hwe,bCe,MH,O4,aH,yH,To,_o,JH],[0,0,0,2,4,0,()=>Dy,()=>Vv,()=>Yr,()=>fr,()=>tc],1],O8=[3,f,QTe,0,[Ja],[()=>bi]],Ay=[3,f,Ty,0,[cv,uv,uwe],[0,0,0],1],k8=[3,f,iwe,0,[ee,$e,my,Qa,sV,owe,Sl,X4,pr,Hwe,Swe,_l,sH,xr,as,za],[0,0,64,1,0,()=>OW,0,()=>tr,0,1,1,0,0,128,()=>fs,2],1],N8=[3,f,lwe,0,[ZC,V4,WH,ev,er],[()=>Oy,1,1,()=>tr,()=>ps]],M8=[3,f,rV,0,[ee,vl,Pr,bwe,Qr,ls,lV,Kr,El,yl],[0,0,()=>Xr,4,()=>Yr,0,1,()=>fr,1,0],5],L8=[3,f,nV,0,[bl,Tn,rwe,yv,lv],[()=>uve,()=>XCe,()=>Il,()=>Gv,()=>Bv]],Bv=[3,f,lv,0,[fv,ZH,D0e,d0e],[0,0,0,4]],tc=[3,f,Cy,0,[tH,ZH,by],[2,0,0]],Il=[3,f,wy,0,[nwe,mwe],[2,0],1],$8=[-3,f,Ewe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError($8,mg);var Uv=[3,f,hv,0,[ee,dV,zH],[0,0,()=>fve]],xy=[3,f,aV,0,[mv,SH],[0,4]],Fv=[3,f,gv,0,[ee,ml,Pr,yl,Qr,Kr,Cy,Tn],[0,()=>Py,()=>Xr,0,()=>Yr,()=>fr,()=>tc,()=>Dy],3],bi=[3,f,Ja,0,[ml,ee,Pr,dV,U4,Qr,lV,El,ls,vl,k4,bl,Tn,wy,p_e,i_e,Ybe,zH,Xbe,HH,lv,R4,aV,UC,Kr,Rn,bH],[()=>Py,0,()=>Xr,0,4,()=>$v,1,1,0,0,()=>vv,()=>cve,()=>YCe,()=>Il,0,0,0,()=>RW,()=>tve,()=>A8,()=>Bv,()=>SV,()=>xy,2,()=>fr,()=>qv,0]],B8=[-3,f,Pwe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(B8,Zm);var U8=[-3,f,Mwe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(U8,eg);var qv=[3,f,Xwe,0,[ov,Tv,fv],[1,1,0]],F8=[3,f,Jwe,0,[wn,_v],[0,0],2],q8=[3,f,$we,0,[Xa,Ev],[0,()=>Wv],2],G8=[-3,f,wwe,{[LCe]:["Throttling",400],[fe]:me,[gV]:400},[Ee,qCe],[0,()=>Kv]];ce.TypeRegistry.for(f).registerError(G8,Vm);var j8=[3,f,Gwe,0,[BCe,UCe],[0,0]],Gv=[3,f,yv,0,[Vwe,hy],[0,0]],jv=[3,f,Sv,0,[tH,hy],[2,0],2],H8=[3,f,Cwe,0,[iH],[()=>Jz],1],V8=[3,f,vwe,0,[cV,pr],[()=>wve,0],1],z8=[3,f,Iwe,0,[er,_y],[()=>nc,()=>vW]],W8=[-3,f,_we,{[fe]:me},[Ya,MSe],[0,()=>VCe]];ce.TypeRegistry.for(f).registerError(W8,_g);var K8=[-3,f,Twe,{[fe]:me},[Ee],[0]];ce.TypeRegistry.for(f).registerError(K8,ng);var Q8=[-3,f,xwe,{[fe]:me},[Ya],[0]];ce.TypeRegistry.for(f).registerError(Q8,lg);var Y8=[3,f,zwe,0,[B4,NH,Wa,vy],[()=>UV,()=>e8,()=>ZV,()=>eW]],X8=[3,f,Wwe,0,[cV,pr,wl,G4],[()=>Cve,0,0,[0,4]],1],J8=[3,f,Qwe,0,[er,Ka],[()=>nc,()=>kW]],Z8=[3,f,wCe,0,[Xa,Dwe],[0,64],2],eW=[3,f,vy,0,[wn,mV,ee,Ei,xr,as,vn],[()=>tr,0,0,0,128,()=>fs,0],3],tW=[3,f,eCe,0,[ee,vH],[0,()=>Y6],2],rW=[3,f,tCe,0,[$C],[()=>Av]],nW=[3,f,nCe,0,[ee,vSe,$e,gy],[0,0,0,0],2],sW=[3,f,sCe,0,[ee,$e,BC,gy],[0,0,0,0]],oW=[3,f,oCe,0,[$e,Qr,Kr,Rn],[0,()=>Yr,()=>fr,()=>rc],1],iW=[3,f,aCe,0,[cs,iv],[0,()=>Tve],2],aW=[3,f,cCe,0,[Ey],[()=>Iy]],cW=[3,f,lCe,0,[cs,jbe,Kbe,Wbe,uH,jH],[0,0,1,()=>ds,()=>ZCe,()=>bve],1],uW=[3,f,dCe,0,[cs,GH],[0,()=>xW]],lW=[3,f,fCe,0,[ee,wn,x4,zC,Sl,av,pr,wl,mV,Ei,xr,as,vn],[0,()=>tr,()=>Rve,()=>Qv,0,0,0,0,0,0,128,()=>fs,0],2],dW=[3,f,hCe,0,[OC,er,Ka],[()=>In,()=>ps,()=>Rl]],Hv=[3,f,bv,0,[PC],[0]],pW=[3,f,SCe,0,[ee,Cl,bv],[0,0,()=>Hv],2],fW=[3,f,ECe,0,[ee,Cl,FC,bv],[0,0,0,()=>Hv]],hW=[3,f,TCe,0,[jt,by,To,_o,Tn,iV],[0,0,()=>ec,()=>Za,()=>IW,0],1],mW=[3,f,vCe,0,[ee,ml,yl,Qr,cH,wy,Cy,iv,mv,UC,bH,r0e,Kr,Rn],[0,()=>Py,0,()=>Yr,()=>JCe,()=>Il,()=>tc,()=>_ve,0,2,0,()=>rve,()=>fr,()=>rc],1],gW=[3,f,RCe,0,[Ja],[()=>bi]],yW=[3,f,ACe,0,[ee,cH,DH,iv],[0,()=>QCe,()=>ds,()=>hve],1],SW=[3,f,xCe,0,[hv],[()=>Uv]],EW=[3,f,DCe,0,[ee,Sv],[0,()=>jv],2],bW=[3,f,OCe,0,[Sv],[()=>jv]],rc=[3,f,Rn,0,[ov,Tv],[1,1]],_W=[3,f,kCe,0,[IH,z4],[()=>n8,()=>cz]],TW="unit",wW=[-3,yV,"DynamoDBServiceException",0,[],[]];ce.TypeRegistry.for(yV).registerError(wW,ie);var Py=[1,f,ml,0,()=>EV],CW=[1,f,DC,0,()=>Dr],jCe=[1,f,Nye,0,()=>_V],HCe=[1,f,L4,0,()=>IV],VCe=[1,f,OSe,0,()=>$V],nc=[1,f,ESe,0,()=>ps],zCe=[1,f,F4,0,()=>qV],WCe=[1,f,eH,0,()=>Fz],KCe=[1,f,J4,0,()=>Kz],QCe=[1,f,Dbe,0,()=>s6],YCe=[1,f,kbe,0,()=>o6],XCe=[1,f,Tn,0,()=>i6],Dy=[1,f,Mbe,0,()=>n6],JCe=[1,f,$be,0,()=>a6],ZCe=[1,f,Hbe,0,()=>l6],eve=[1,f,Vbe,0,()=>c6],tve=[1,f,Zbe,0,()=>p6],rve=[1,f,t0e,0,()=>f6],nve=[1,f,fH,0,()=>y6],sve=[1,f,c0e,0,()=>Rl],Oy=[1,f,m0e,0,()=>In],vW=[1,f,b0e,0,()=>R6],ove=[1,f,P0e,0,()=>tr],Xr=[1,f,Pr,0,()=>A6],ive=[1,f,gH,0,()=>x6],ave=[1,f,$0e,0,()=>Dr],cve=[1,f,c_e,0,()=>z6],uve=[1,f,bl,0,()=>W6],Vv=[1,f,l_e,0,()=>V6],lve=[1,f,Q_e,0,()=>K6],dve=[1,f,B_e,0,()=>kV],pve=[1,f,U_e,0,()=>NV],zv=[1,f,W_e,0,()=>Dr],fve=[1,f,iTe,0,()=>l8],hve=[1,f,cTe,0,()=>d8],RW=[1,f,dTe,0,()=>p8],mve=[1,f,hTe,0,()=>h8],gve=[1,f,gTe,0,()=>m8],yve=[1,f,STe,0,()=>g8],IW=[1,f,ETe,0,()=>f8],Sve=[1,f,TTe,0,()=>y8],Eve=[1,f,wTe,0,()=>S8],AW=[1,f,PTe,0,()=>c8],xW=[1,f,UTe,0,()=>b8],bve=[1,f,GTe,0,()=>_8],_ve=[1,f,RTe,0,()=>w8],Tve=[1,f,XTe,0,()=>C8],Wv=[1,f,Owe,0,()=>F8],Kv=[1,f,Bwe,0,()=>j8],wve=[1,f,Rwe,0,()=>H8],Cve=[1,f,Kwe,0,()=>Y8],vve=[1,f,NCe,0,()=>_W],In=[2,f,xye,0,0,()=>Dr],Rve=[2,f,x4,0,0,()=>bV],PW=[2,f,Jye,0,0,()=>I6],Ive=[2,f,Xye,0,0,()=>Oy],DW=[2,f,dSe,0,0,()=>vve],Qv=[2,f,KEe,0,0,()=>Vz],fs=[2,f,QEe,0,0,()=>Dr],OW=[2,f,wbe,0,0,()=>Iv],Ave=[2,f,a0e,0,0,()=>Dr],kW=[2,f,u0e,0,0,()=>sve],tr=[2,f,wn,0,0,()=>Dr],xve=[2,f,mH,0,0,()=>Iv],Pve=[2,f,__e,0,0,()=>Dr],Yv=[2,f,O_e,0,0,()=>Dr],v4=[2,f,awe,0,0,()=>Rv],Dr=[4,f,qye,0,[gwe,C_e,pSe,fwe,I_e,iSe,w_e,b_e,A_e,tSe],[0,0,21,64,64,85,()=>Pve,()=>ave,2,2]],NW=[9,f,Vye,0,()=>AV,()=>xV],MW=[9,f,Kye,0,()=>PV,()=>DV],LW=[9,f,cSe,0,()=>MV,()=>LV],$W=[9,f,fSe,0,()=>GV,()=>jV],BW=[9,f,_Se,0,()=>VV,()=>zV],UW=[9,f,BSe,0,()=>YV,()=>XV],FW=[9,f,jSe,0,()=>ez,()=>tz],qW=[9,f,mEe,0,()=>sz,()=>oz],GW=[9,f,DEe,0,()=>uz,()=>lz],jW=[9,f,MEe,0,()=>dz,()=>pz],HW=[9,f,KSe,0,()=>fz,()=>hz],VW=[9,f,QSe,0,()=>mz,()=>gz],zW=[9,f,JSe,0,()=>yz,()=>Sz],WW=[9,f,tEe,0,()=>Ez,()=>bz],KW=[9,f,iEe,0,()=>_z,()=>Tz],QW=[9,f,cEe,0,()=>wz,()=>Cz],YW=[9,f,dEe,0,()=>vz,()=>Rz],XW=[9,f,_Ee,0,()=>Iz,()=>Az],JW=[9,f,TEe,0,()=>xz,()=>Pz],ZW=[9,f,REe,0,()=>Dz,()=>Oz],eK=[9,f,zEe,0,()=>kz,()=>Nz],tK=[9,f,FEe,0,()=>Mz,()=>Lz],rK=[9,f,jEe,0,()=>$z,()=>Bz],nK=[9,f,vEe,0,()=>Mv,()=>Lv],sK=[9,f,tbe,0,()=>Mv,()=>Lv],oK=[9,f,pbe,0,()=>qz,()=>Gz],iK=[9,f,Ebe,0,()=>jz,()=>Hz],aK=[9,f,gbe,0,()=>Qz,()=>Yz],cK=[9,f,Cbe,0,()=>Zz,()=>e6],uK=[9,f,Ibe,0,()=>t6,()=>r6],lK=[9,f,C0e,0,()=>S6,()=>E6],dK=[9,f,B0e,0,()=>D6,()=>O6],pK=[9,f,q0e,0,()=>k6,()=>N6],fK=[9,f,V0e,0,()=>M6,()=>L6],hK=[9,f,J0e,0,()=>$6,()=>B6],mK=[9,f,t_e,0,()=>U6,()=>F6],gK=[9,f,f_e,0,()=>q6,()=>G6],yK=[9,f,g_e,0,()=>j6,()=>H6],SK=[9,f,x_e,0,()=>t8,()=>r8],EK=[9,f,G_e,0,()=>s8,()=>o8],bK=[9,f,eTe,0,()=>i8,()=>a8],_K=[9,f,HTe,0,()=>x8,()=>P8],TK=[9,f,WTe,0,()=>D8,()=>O8],wK=[9,f,ywe,0,()=>k8,()=>N8],CK=[9,f,qwe,0,()=>q8,()=>TW],vK=[9,f,Awe,0,()=>V8,()=>z8],RK=[9,f,Ywe,0,()=>X8,()=>J8],IK=[9,f,_Ce,0,()=>Z8,()=>TW],AK=[9,f,Zwe,0,()=>tW,()=>rW],xK=[9,f,rCe,0,()=>nW,()=>sW],PK=[9,f,iCe,0,()=>iW,()=>aW],DK=[9,f,uCe,0,()=>cW,()=>uW],OK=[9,f,mCe,0,()=>lW,()=>dW],kK=[9,f,yCe,0,()=>pW,()=>fW],NK=[9,f,CCe,0,()=>mW,()=>gW],MK=[9,f,ICe,0,()=>yW,()=>SW],LK=[9,f,PCe,0,()=>EW,()=>bW],sl=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeEndpoints",{}).n("DynamoDBClient","DescribeEndpointsCommand").sc(WW).build(){},Dve=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Ove=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),kve=(t,e)=>{let r=Object.assign(w4.getAwsRegionExtensionConfiguration(t),$.getDefaultExtensionConfiguration(t),C4.getHttpHandlerExtensionConfiguration(t),Dve(t));return e.forEach(n=>n.configure(r)),Object.assign(t,w4.resolveAwsRegionExtensionConfiguration(r),$.resolveDefaultRuntimeConfig(r),C4.resolveHttpHandlerRuntimeConfig(r),Ove(r))},_n=class extends $.Client{config;constructor(...[e]){let r=wye.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=Cye(r),s=yye.resolveAccountIdEndpointModeConfig(n),o=b4.resolveUserAgentConfig(s),i=_4.resolveRetryConfig(o),a=_ye.resolveRegionConfig(i),c=E4.resolveHostHeaderConfig(a),u=G.resolveEndpointConfig(c),d=T4.resolveHttpAuthSchemeConfig(u),l=Sye.resolveEndpointDiscoveryConfig(d,{endpointDiscoveryCommandCtor:sl}),g=kve(l,e?.extensions||[]);this.config=g,this.middlewareStack.use(ce.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(b4.getUserAgentPlugin(this.config)),this.middlewareStack.use(_4.getRetryPlugin(this.config)),this.middlewareStack.use(Tye.getContentLengthPlugin(this.config)),this.middlewareStack.use(E4.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Eye.getLoggerPlugin(this.config)),this.middlewareStack.use(bye.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(os.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:T4.defaultDynamoDBHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async y=>new os.DefaultIdentityProviderConfig({"aws.auth#sigv4":y.credentials})})),this.middlewareStack.use(os.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Tg=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchExecuteStatement",{}).n("DynamoDBClient","BatchExecuteStatementCommand").sc(NW).build(){},wg=class extends $.Command.classBuilder().ep({...j,ResourceArnList:{type:"operationContextParams",get:e=>Object.keys(e?.RequestItems??{})}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchGetItem",{}).n("DynamoDBClient","BatchGetItemCommand").sc(MW).build(){},Cg=class extends $.Command.classBuilder().ep({...j,ResourceArnList:{type:"operationContextParams",get:e=>Object.keys(e?.RequestItems??{})}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","BatchWriteItem",{}).n("DynamoDBClient","BatchWriteItemCommand").sc(LW).build(){},vg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateBackup",{}).n("DynamoDBClient","CreateBackupCommand").sc($W).build(){},Rg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"GlobalTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateGlobalTable",{}).n("DynamoDBClient","CreateGlobalTableCommand").sc(BW).build(){},Ig=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","CreateTable",{}).n("DynamoDBClient","CreateTableCommand").sc(UW).build(){},Ag=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"BackupArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteBackup",{}).n("DynamoDBClient","DeleteBackupCommand").sc(FW).build(){},xg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteItem",{}).n("DynamoDBClient","DeleteItemCommand").sc(qW).build(){},Pg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteResourcePolicy",{}).n("DynamoDBClient","DeleteResourcePolicyCommand").sc(GW).build(){},Dg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DeleteTable",{}).n("DynamoDBClient","DeleteTableCommand").sc(jW).build(){},Og=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"BackupArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeBackup",{}).n("DynamoDBClient","DescribeBackupCommand").sc(HW).build(){},kg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeContinuousBackups",{}).n("DynamoDBClient","DescribeContinuousBackupsCommand").sc(VW).build(){},ol=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeContributorInsights",{}).n("DynamoDBClient","DescribeContributorInsightsCommand").sc(zW).build(){},il=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ExportArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeExport",{}).n("DynamoDBClient","DescribeExportCommand").sc(KW).build(){},Ng=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"GlobalTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeGlobalTable",{}).n("DynamoDBClient","DescribeGlobalTableCommand").sc(QW).build(){},Mg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"GlobalTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeGlobalTableSettings",{}).n("DynamoDBClient","DescribeGlobalTableSettingsCommand").sc(YW).build(){},al=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ImportArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeImport",{}).n("DynamoDBClient","DescribeImportCommand").sc(XW).build(){},cl=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeKinesisStreamingDestination",{}).n("DynamoDBClient","DescribeKinesisStreamingDestinationCommand").sc(JW).build(){},Lg=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeLimits",{}).n("DynamoDBClient","DescribeLimitsCommand").sc(ZW).build(){},Va=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTable",{}).n("DynamoDBClient","DescribeTableCommand").sc(eK).build(){},$g=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTableReplicaAutoScaling",{}).n("DynamoDBClient","DescribeTableReplicaAutoScalingCommand").sc(tK).build(){},Bg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DescribeTimeToLive",{}).n("DynamoDBClient","DescribeTimeToLiveCommand").sc(rK).build(){},Ug=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","DisableKinesisStreamingDestination",{}).n("DynamoDBClient","DisableKinesisStreamingDestinationCommand").sc(nK).build(){},Fg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","EnableKinesisStreamingDestination",{}).n("DynamoDBClient","EnableKinesisStreamingDestinationCommand").sc(sK).build(){},qg=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExecuteStatement",{}).n("DynamoDBClient","ExecuteStatementCommand").sc(oK).build(){},Gg=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExecuteTransaction",{}).n("DynamoDBClient","ExecuteTransactionCommand").sc(iK).build(){},jg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ExportTableToPointInTime",{}).n("DynamoDBClient","ExportTableToPointInTimeCommand").sc(aK).build(){},Hg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetItem",{}).n("DynamoDBClient","GetItemCommand").sc(cK).build(){},Vg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","GetResourcePolicy",{}).n("DynamoDBClient","GetResourcePolicyCommand").sc(uK).build(){},zg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"operationContextParams",get:e=>e?.TableCreationParameters?.TableName}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ImportTable",{}).n("DynamoDBClient","ImportTableCommand").sc(lK).build(){},Wg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListBackups",{}).n("DynamoDBClient","ListBackupsCommand").sc(dK).build(){},ul=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListContributorInsights",{}).n("DynamoDBClient","ListContributorInsightsCommand").sc(pK).build(){},ll=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListExports",{}).n("DynamoDBClient","ListExportsCommand").sc(fK).build(){},Kg=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListGlobalTables",{}).n("DynamoDBClient","ListGlobalTablesCommand").sc(hK).build(){},dl=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListImports",{}).n("DynamoDBClient","ListImportsCommand").sc(mK).build(){},pl=class extends $.Command.classBuilder().ep(j).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListTables",{}).n("DynamoDBClient","ListTablesCommand").sc(gK).build(){},Qg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","ListTagsOfResource",{}).n("DynamoDBClient","ListTagsOfResourceCommand").sc(yK).build(){},Yg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutItem",{}).n("DynamoDBClient","PutItemCommand").sc(SK).build(){},Xg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","PutResourcePolicy",{}).n("DynamoDBClient","PutResourcePolicyCommand").sc(EK).build(){},fl=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Query",{}).n("DynamoDBClient","QueryCommand").sc(bK).build(){},Jg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TargetTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","RestoreTableFromBackup",{}).n("DynamoDBClient","RestoreTableFromBackupCommand").sc(_K).build(){},Zg=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TargetTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","RestoreTableToPointInTime",{}).n("DynamoDBClient","RestoreTableToPointInTimeCommand").sc(TK).build(){},hl=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","Scan",{}).n("DynamoDBClient","ScanCommand").sc(wK).build(){},ey=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TagResource",{}).n("DynamoDBClient","TagResourceCommand").sc(CK).build(){},ty=class extends $.Command.classBuilder().ep({...j,ResourceArnList:{type:"operationContextParams",get:e=>e?.TransactItems?.map(r=>r?.Get?.TableName)}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactGetItems",{}).n("DynamoDBClient","TransactGetItemsCommand").sc(vK).build(){},ry=class extends $.Command.classBuilder().ep({...j,ResourceArnList:{type:"operationContextParams",get:e=>e?.TransactItems?.map(r=>[r?.ConditionCheck?.TableName,r?.Put?.TableName,r?.Delete?.TableName,r?.Update?.TableName].filter(n=>n)).flat()}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","TransactWriteItems",{}).n("DynamoDBClient","TransactWriteItemsCommand").sc(RK).build(){},ny=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"ResourceArn"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UntagResource",{}).n("DynamoDBClient","UntagResourceCommand").sc(IK).build(){},sy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateContinuousBackups",{}).n("DynamoDBClient","UpdateContinuousBackupsCommand").sc(AK).build(){},oy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateContributorInsights",{}).n("DynamoDBClient","UpdateContributorInsightsCommand").sc(xK).build(){},iy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"GlobalTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateGlobalTable",{}).n("DynamoDBClient","UpdateGlobalTableCommand").sc(PK).build(){},ay=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"GlobalTableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateGlobalTableSettings",{}).n("DynamoDBClient","UpdateGlobalTableSettingsCommand").sc(DK).build(){},cy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateItem",{}).n("DynamoDBClient","UpdateItemCommand").sc(OK).build(){},uy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateKinesisStreamingDestination",{}).n("DynamoDBClient","UpdateKinesisStreamingDestinationCommand").sc(kK).build(){},ly=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTable",{}).n("DynamoDBClient","UpdateTableCommand").sc(NK).build(){},dy=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTableReplicaAutoScaling",{}).n("DynamoDBClient","UpdateTableReplicaAutoScalingCommand").sc(MK).build(){},py=class extends $.Command.classBuilder().ep({...j,ResourceArn:{type:"contextParams",name:"TableName"}}).m(function(e,r,n,s){return[G.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("DynamoDB_20120810","UpdateTimeToLive",{}).n("DynamoDBClient","UpdateTimeToLiveCommand").sc(LK).build(){},Nve={BatchExecuteStatementCommand:Tg,BatchGetItemCommand:wg,BatchWriteItemCommand:Cg,CreateBackupCommand:vg,CreateGlobalTableCommand:Rg,CreateTableCommand:Ig,DeleteBackupCommand:Ag,DeleteItemCommand:xg,DeleteResourcePolicyCommand:Pg,DeleteTableCommand:Dg,DescribeBackupCommand:Og,DescribeContinuousBackupsCommand:kg,DescribeContributorInsightsCommand:ol,DescribeEndpointsCommand:sl,DescribeExportCommand:il,DescribeGlobalTableCommand:Ng,DescribeGlobalTableSettingsCommand:Mg,DescribeImportCommand:al,DescribeKinesisStreamingDestinationCommand:cl,DescribeLimitsCommand:Lg,DescribeTableCommand:Va,DescribeTableReplicaAutoScalingCommand:$g,DescribeTimeToLiveCommand:Bg,DisableKinesisStreamingDestinationCommand:Ug,EnableKinesisStreamingDestinationCommand:Fg,ExecuteStatementCommand:qg,ExecuteTransactionCommand:Gg,ExportTableToPointInTimeCommand:jg,GetItemCommand:Hg,GetResourcePolicyCommand:Vg,ImportTableCommand:zg,ListBackupsCommand:Wg,ListContributorInsightsCommand:ul,ListExportsCommand:ll,ListGlobalTablesCommand:Kg,ListImportsCommand:dl,ListTablesCommand:pl,ListTagsOfResourceCommand:Qg,PutItemCommand:Yg,PutResourcePolicyCommand:Xg,QueryCommand:fl,RestoreTableFromBackupCommand:Jg,RestoreTableToPointInTimeCommand:Zg,ScanCommand:hl,TagResourceCommand:ey,TransactGetItemsCommand:ty,TransactWriteItemsCommand:ry,UntagResourceCommand:ny,UpdateContinuousBackupsCommand:sy,UpdateContributorInsightsCommand:oy,UpdateGlobalTableCommand:iy,UpdateGlobalTableSettingsCommand:ay,UpdateItemCommand:cy,UpdateKinesisStreamingDestinationCommand:uy,UpdateTableCommand:ly,UpdateTableReplicaAutoScalingCommand:dy,UpdateTimeToLiveCommand:py},fy=class extends _n{};$.createAggregatedClient(Nve,fy);var Mve=os.createPaginator(_n,ul,"NextToken","NextToken","MaxResults"),Lve=os.createPaginator(_n,ll,"NextToken","NextToken","MaxResults"),$ve=os.createPaginator(_n,dl,"NextToken","NextToken","PageSize"),Bve=os.createPaginator(_n,pl,"ExclusiveStartTableName","LastEvaluatedTableName","Limit"),Uve=os.createPaginator(_n,fl,"ExclusiveStartKey","LastEvaluatedKey","Limit"),Fve=os.createPaginator(_n,hl,"ExclusiveStartKey","LastEvaluatedKey","Limit"),$K=async(t,e)=>{let r;try{let n=await t.send(new ol(e));r=n;try{if(n.ContributorInsightsStatus==="ENABLED")return{state:de.WaiterState.SUCCESS,reason:r}}catch{}try{if(n.ContributorInsightsStatus==="FAILED")return{state:de.WaiterState.FAILURE,reason:r}}catch{}}catch(n){r=n}return{state:de.WaiterState.RETRY,reason:r}},qve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,$K)},Gve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,$K);return de.checkExceptions(n)},BK=async(t,e)=>{let r;try{let n=await t.send(new il(e));r=n;try{if(n.ExportDescription.ExportStatus==="COMPLETED")return{state:de.WaiterState.SUCCESS,reason:r}}catch{}try{if(n.ExportDescription.ExportStatus==="FAILED")return{state:de.WaiterState.FAILURE,reason:r}}catch{}}catch(n){r=n}return{state:de.WaiterState.RETRY,reason:r}},jve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,BK)},Hve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,BK);return de.checkExceptions(n)},UK=async(t,e)=>{let r;try{let n=await t.send(new al(e));r=n;try{if(n.ImportTableDescription.ImportStatus==="COMPLETED")return{state:de.WaiterState.SUCCESS,reason:r}}catch{}try{if(n.ImportTableDescription.ImportStatus==="FAILED")return{state:de.WaiterState.FAILURE,reason:r}}catch{}try{if(n.ImportTableDescription.ImportStatus==="CANCELLED")return{state:de.WaiterState.FAILURE,reason:r}}catch{}}catch(n){r=n}return{state:de.WaiterState.RETRY,reason:r}},Vve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,UK)},zve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,UK);return de.checkExceptions(n)},FK=async(t,e)=>{let r;try{let n=await t.send(new cl(e));r=n;try{let s=()=>[].concat(...n.KinesisDataStreamDestinations).map(a=>a.DestinationStatus);for(let o of s())if(o=="ACTIVE")return{state:de.WaiterState.SUCCESS,reason:r}}catch{}try{if((()=>{let o=n.KinesisDataStreamDestinations.filter(i=>(i.DestinationStatus=="DISABLED"||i.DestinationStatus=="ENABLE_FAILED")&&(i.DestinationStatus=="ENABLE_FAILED"||i.DestinationStatus=="DISABLED"));return n.KinesisDataStreamDestinations.length>0&&o.length==n.KinesisDataStreamDestinations.length})()==!0)return{state:de.WaiterState.FAILURE,reason:r}}catch{}}catch(n){r=n}return{state:de.WaiterState.RETRY,reason:r}},Wve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,FK)},Kve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,FK);return de.checkExceptions(n)},qK=async(t,e)=>{let r;try{let n=await t.send(new Va(e));r=n;try{if(n.Table.TableStatus==="ACTIVE")return{state:de.WaiterState.SUCCESS,reason:r}}catch{}}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:de.WaiterState.RETRY,reason:r}}return{state:de.WaiterState.RETRY,reason:r}},Qve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,qK)},Yve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,qK);return de.checkExceptions(n)},GK=async(t,e)=>{let r;try{r=await t.send(new Va(e))}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:de.WaiterState.SUCCESS,reason:r}}return{state:de.WaiterState.RETRY,reason:r}},Xve=async(t,e)=>{let r={minDelay:20,maxDelay:120};return de.createWaiter({...r,...t},e,GK)},Jve=async(t,e)=>{let r={minDelay:20,maxDelay:120},n=await de.createWaiter({...r,...t},e,GK);return de.checkExceptions(n)},Zve={MICROSECOND:"MICROSECOND",MILLISECOND:"MILLISECOND"},eRe={ADD:"ADD",DELETE:"DELETE",PUT:"PUT"},tRe={B:"B",N:"N",S:"S"},rRe={AVAILABLE:"AVAILABLE",CREATING:"CREATING",DELETED:"DELETED"},nRe={AWS_BACKUP:"AWS_BACKUP",SYSTEM:"SYSTEM",USER:"USER"},sRe={PAY_PER_REQUEST:"PAY_PER_REQUEST",PROVISIONED:"PROVISIONED"},oRe={HASH:"HASH",RANGE:"RANGE"},iRe={ALL:"ALL",INCLUDE:"INCLUDE",KEYS_ONLY:"KEYS_ONLY"},aRe={AES256:"AES256",KMS:"KMS"},cRe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING",UPDATING:"UPDATING"},uRe={KEYS_ONLY:"KEYS_ONLY",NEW_AND_OLD_IMAGES:"NEW_AND_OLD_IMAGES",NEW_IMAGE:"NEW_IMAGE",OLD_IMAGE:"OLD_IMAGE"},lRe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING"},dRe={ALL:"ALL",AWS_BACKUP:"AWS_BACKUP",SYSTEM:"SYSTEM",USER:"USER"},pRe={INDEXES:"INDEXES",NONE:"NONE",TOTAL:"TOTAL"},fRe={ALL_OLD:"ALL_OLD",NONE:"NONE"},hRe={AccessDenied:"AccessDenied",ConditionalCheckFailed:"ConditionalCheckFailed",DuplicateItem:"DuplicateItem",InternalServerError:"InternalServerError",ItemCollectionSizeLimitExceeded:"ItemCollectionSizeLimitExceeded",ProvisionedThroughputExceeded:"ProvisionedThroughputExceeded",RequestLimitExceeded:"RequestLimitExceeded",ResourceNotFound:"ResourceNotFound",ThrottlingError:"ThrottlingError",TransactionConflict:"TransactionConflict",ValidationError:"ValidationError"},mRe={NONE:"NONE",SIZE:"SIZE"},gRe={BEGINS_WITH:"BEGINS_WITH",BETWEEN:"BETWEEN",CONTAINS:"CONTAINS",EQ:"EQ",GE:"GE",GT:"GT",IN:"IN",LE:"LE",LT:"LT",NE:"NE",NOT_CONTAINS:"NOT_CONTAINS",NOT_NULL:"NOT_NULL",NULL:"NULL"},yRe={AND:"AND",OR:"OR"},SRe={DISABLED:"DISABLED",ENABLED:"ENABLED"},ERe={DISABLED:"DISABLED",ENABLED:"ENABLED"},bRe={DISABLE:"DISABLE",ENABLE:"ENABLE"},_Re={ACCESSED_AND_THROTTLED_KEYS:"ACCESSED_AND_THROTTLED_KEYS",THROTTLED_KEYS:"THROTTLED_KEYS"},TRe={DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLED:"ENABLED",ENABLING:"ENABLING",FAILED:"FAILED"},wRe={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},CRe={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},vRe={ACTIVE:"ACTIVE",ARCHIVED:"ARCHIVED",ARCHIVING:"ARCHIVING",CREATING:"CREATING",CREATION_FAILED:"CREATION_FAILED",DELETING:"DELETING",INACCESSIBLE_ENCRYPTION_CREDENTIALS:"INACCESSIBLE_ENCRYPTION_CREDENTIALS",REGION_DISABLED:"REGION_DISABLED",REPLICATION_NOT_AUTHORIZED:"REPLICATION_NOT_AUTHORIZED",UPDATING:"UPDATING"},RRe={STANDARD:"STANDARD",STANDARD_INFREQUENT_ACCESS:"STANDARD_INFREQUENT_ACCESS"},IRe={ACTIVE:"ACTIVE",ARCHIVED:"ARCHIVED",ARCHIVING:"ARCHIVING",CREATING:"CREATING",DELETING:"DELETING",INACCESSIBLE_ENCRYPTION_CREDENTIALS:"INACCESSIBLE_ENCRYPTION_CREDENTIALS",REPLICATION_NOT_AUTHORIZED:"REPLICATION_NOT_AUTHORIZED",UPDATING:"UPDATING"},ARe={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING"},xRe={EVENTUAL:"EVENTUAL",STRONG:"STRONG"},PRe={ALL_NEW:"ALL_NEW",ALL_OLD:"ALL_OLD",NONE:"NONE",UPDATED_NEW:"UPDATED_NEW",UPDATED_OLD:"UPDATED_OLD"},DRe={DYNAMODB_JSON:"DYNAMODB_JSON",ION:"ION"},ORe={COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS"},kRe={FULL_EXPORT:"FULL_EXPORT",INCREMENTAL_EXPORT:"INCREMENTAL_EXPORT"},NRe={NEW_AND_OLD_IMAGES:"NEW_AND_OLD_IMAGES",NEW_IMAGE:"NEW_IMAGE"},MRe={AES256:"AES256",KMS:"KMS"},LRe={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS"},$Re={GZIP:"GZIP",NONE:"NONE",ZSTD:"ZSTD"},BRe={CSV:"CSV",DYNAMODB_JSON:"DYNAMODB_JSON",ION:"ION"},URe={ACTIVE:"ACTIVE",DISABLED:"DISABLED",DISABLING:"DISABLING",ENABLE_FAILED:"ENABLE_FAILED",ENABLING:"ENABLING",UPDATING:"UPDATING"},FRe={ALL_ATTRIBUTES:"ALL_ATTRIBUTES",ALL_PROJECTED_ATTRIBUTES:"ALL_PROJECTED_ATTRIBUTES",COUNT:"COUNT",SPECIFIC_ATTRIBUTES:"SPECIFIC_ATTRIBUTES"};Object.defineProperty(p,"$Command",{enumerable:!0,get:function(){return $.Command}});Object.defineProperty(p,"__Client",{enumerable:!0,get:function(){return $.Client}});p.ApproximateCreationDateTimePrecision=Zve;p.ArchivalSummary$=SV;p.AttributeAction=eRe;p.AttributeDefinition$=EV;p.AttributeValue$=Dr;p.AttributeValueUpdate$=bV;p.AutoScalingPolicyDescription$=_V;p.AutoScalingPolicyUpdate$=TV;p.AutoScalingSettingsDescription$=is;p.AutoScalingSettingsUpdate$=ds;p.AutoScalingTargetTrackingScalingPolicyConfigurationDescription$=wV;p.AutoScalingTargetTrackingScalingPolicyConfigurationUpdate$=CV;p.BackupDescription$=wv;p.BackupDetails$=Cv;p.BackupInUseException=qm;p.BackupInUseException$=vV;p.BackupNotFoundException=Gm;p.BackupNotFoundException$=RV;p.BackupStatus=rRe;p.BackupSummary$=IV;p.BackupType=nRe;p.BackupTypeFilter=dRe;p.BatchExecuteStatement$=NW;p.BatchExecuteStatementCommand=Tg;p.BatchExecuteStatementInput$=AV;p.BatchExecuteStatementOutput$=xV;p.BatchGetItem$=MW;p.BatchGetItemCommand=wg;p.BatchGetItemInput$=PV;p.BatchGetItemOutput$=DV;p.BatchStatementError$=OV;p.BatchStatementErrorCodeEnum=hRe;p.BatchStatementRequest$=kV;p.BatchStatementResponse$=NV;p.BatchWriteItem$=LW;p.BatchWriteItemCommand=Cg;p.BatchWriteItemInput$=MV;p.BatchWriteItemOutput$=LV;p.BillingMode=sRe;p.BillingModeSummary$=vv;p.CancellationReason$=$V;p.Capacity$=Rv;p.ComparisonOperator=gRe;p.Condition$=Iv;p.ConditionCheck$=UV;p.ConditionalCheckFailedException=bg;p.ConditionalCheckFailedException$=BV;p.ConditionalOperator=yRe;p.ConsumedCapacity$=ps;p.ContinuousBackupsDescription$=Av;p.ContinuousBackupsStatus=SRe;p.ContinuousBackupsUnavailableException=Xm;p.ContinuousBackupsUnavailableException$=FV;p.ContributorInsightsAction=bRe;p.ContributorInsightsMode=_Re;p.ContributorInsightsStatus=TRe;p.ContributorInsightsSummary$=qV;p.CreateBackup$=$W;p.CreateBackupCommand=vg;p.CreateBackupInput$=GV;p.CreateBackupOutput$=jV;p.CreateGlobalSecondaryIndexAction$=HV;p.CreateGlobalTable$=BW;p.CreateGlobalTableCommand=Rg;p.CreateGlobalTableInput$=VV;p.CreateGlobalTableOutput$=zV;p.CreateGlobalTableWitnessGroupMemberAction$=WV;p.CreateReplicaAction$=KV;p.CreateReplicationGroupMemberAction$=QV;p.CreateTable$=UW;p.CreateTableCommand=Ig;p.CreateTableInput$=YV;p.CreateTableOutput$=XV;p.CsvOptions$=JV;p.Delete$=ZV;p.DeleteBackup$=FW;p.DeleteBackupCommand=Ag;p.DeleteBackupInput$=ez;p.DeleteBackupOutput$=tz;p.DeleteGlobalSecondaryIndexAction$=rz;p.DeleteGlobalTableWitnessGroupMemberAction$=nz;p.DeleteItem$=qW;p.DeleteItemCommand=xg;p.DeleteItemInput$=sz;p.DeleteItemOutput$=oz;p.DeleteReplicaAction$=iz;p.DeleteReplicationGroupMemberAction$=az;p.DeleteRequest$=cz;p.DeleteResourcePolicy$=GW;p.DeleteResourcePolicyCommand=Pg;p.DeleteResourcePolicyInput$=uz;p.DeleteResourcePolicyOutput$=lz;p.DeleteTable$=jW;p.DeleteTableCommand=Dg;p.DeleteTableInput$=dz;p.DeleteTableOutput$=pz;p.DescribeBackup$=HW;p.DescribeBackupCommand=Og;p.DescribeBackupInput$=fz;p.DescribeBackupOutput$=hz;p.DescribeContinuousBackups$=VW;p.DescribeContinuousBackupsCommand=kg;p.DescribeContinuousBackupsInput$=mz;p.DescribeContinuousBackupsOutput$=gz;p.DescribeContributorInsights$=zW;p.DescribeContributorInsightsCommand=ol;p.DescribeContributorInsightsInput$=yz;p.DescribeContributorInsightsOutput$=Sz;p.DescribeEndpoints$=WW;p.DescribeEndpointsCommand=sl;p.DescribeEndpointsRequest$=Ez;p.DescribeEndpointsResponse$=bz;p.DescribeExport$=KW;p.DescribeExportCommand=il;p.DescribeExportInput$=_z;p.DescribeExportOutput$=Tz;p.DescribeGlobalTable$=QW;p.DescribeGlobalTableCommand=Ng;p.DescribeGlobalTableInput$=wz;p.DescribeGlobalTableOutput$=Cz;p.DescribeGlobalTableSettings$=YW;p.DescribeGlobalTableSettingsCommand=Mg;p.DescribeGlobalTableSettingsInput$=vz;p.DescribeGlobalTableSettingsOutput$=Rz;p.DescribeImport$=XW;p.DescribeImportCommand=al;p.DescribeImportInput$=Iz;p.DescribeImportOutput$=Az;p.DescribeKinesisStreamingDestination$=JW;p.DescribeKinesisStreamingDestinationCommand=cl;p.DescribeKinesisStreamingDestinationInput$=xz;p.DescribeKinesisStreamingDestinationOutput$=Pz;p.DescribeLimits$=ZW;p.DescribeLimitsCommand=Lg;p.DescribeLimitsInput$=Dz;p.DescribeLimitsOutput$=Oz;p.DescribeTable$=eK;p.DescribeTableCommand=Va;p.DescribeTableInput$=kz;p.DescribeTableOutput$=Nz;p.DescribeTableReplicaAutoScaling$=tK;p.DescribeTableReplicaAutoScalingCommand=$g;p.DescribeTableReplicaAutoScalingInput$=Mz;p.DescribeTableReplicaAutoScalingOutput$=Lz;p.DescribeTimeToLive$=rK;p.DescribeTimeToLiveCommand=Bg;p.DescribeTimeToLiveInput$=$z;p.DescribeTimeToLiveOutput$=Bz;p.DestinationStatus=URe;p.DisableKinesisStreamingDestination$=nK;p.DisableKinesisStreamingDestinationCommand=Ug;p.DuplicateItemException=cg;p.DuplicateItemException$=Uz;p.DynamoDB=fy;p.DynamoDBClient=_n;p.DynamoDBServiceException=ie;p.DynamoDBServiceException$=wW;p.EnableKinesisStreamingConfiguration$=xv;p.EnableKinesisStreamingDestination$=sK;p.EnableKinesisStreamingDestinationCommand=Fg;p.Endpoint$=Fz;p.ExecuteStatement$=oK;p.ExecuteStatementCommand=qg;p.ExecuteStatementInput$=qz;p.ExecuteStatementOutput$=Gz;p.ExecuteTransaction$=iK;p.ExecuteTransactionCommand=Gg;p.ExecuteTransactionInput$=jz;p.ExecuteTransactionOutput$=Hz;p.ExpectedAttributeValue$=Vz;p.ExportConflictException=dg;p.ExportConflictException$=zz;p.ExportDescription$=Pv;p.ExportFormat=DRe;p.ExportNotFoundException=og;p.ExportNotFoundException$=Wz;p.ExportStatus=ORe;p.ExportSummary$=Kz;p.ExportTableToPointInTime$=aK;p.ExportTableToPointInTimeCommand=jg;p.ExportTableToPointInTimeInput$=Qz;p.ExportTableToPointInTimeOutput$=Yz;p.ExportType=kRe;p.ExportViewType=NRe;p.FailureException$=Xz;p.Get$=Jz;p.GetItem$=cK;p.GetItemCommand=Hg;p.GetItemInput$=Zz;p.GetItemOutput$=e6;p.GetResourcePolicy$=uK;p.GetResourcePolicyCommand=Vg;p.GetResourcePolicyInput$=t6;p.GetResourcePolicyOutput$=r6;p.GlobalSecondaryIndex$=n6;p.GlobalSecondaryIndexAutoScalingUpdate$=s6;p.GlobalSecondaryIndexDescription$=o6;p.GlobalSecondaryIndexInfo$=i6;p.GlobalSecondaryIndexUpdate$=a6;p.GlobalSecondaryIndexWarmThroughputDescription$=Dv;p.GlobalTable$=c6;p.GlobalTableAlreadyExistsException=tg;p.GlobalTableAlreadyExistsException$=u6;p.GlobalTableDescription$=Iy;p.GlobalTableGlobalSecondaryIndexSettingsUpdate$=l6;p.GlobalTableNotFoundException=ig;p.GlobalTableNotFoundException$=d6;p.GlobalTableStatus=wRe;p.GlobalTableWitnessDescription$=p6;p.GlobalTableWitnessGroupUpdate$=f6;p.IdempotentParameterMismatchException=ug;p.IdempotentParameterMismatchException$=h6;p.ImportConflictException=hg;p.ImportConflictException$=m6;p.ImportNotFoundException=ag;p.ImportNotFoundException$=g6;p.ImportStatus=LRe;p.ImportSummary$=y6;p.ImportTable$=lK;p.ImportTableCommand=zg;p.ImportTableDescription$=Ov;p.ImportTableInput$=S6;p.ImportTableOutput$=E6;p.IncrementalExportSpecification$=kv;p.IndexNotFoundException=Eg;p.IndexNotFoundException$=b6;p.IndexStatus=CRe;p.InputCompressionType=$Re;p.InputFormat=BRe;p.InputFormatOptions$=Nv;p.InternalServerError=jm;p.InternalServerError$=_6;p.InvalidEndpointException=zm;p.InvalidEndpointException$=T6;p.InvalidExportTimeException=pg;p.InvalidExportTimeException$=w6;p.InvalidRestoreTimeException=gg;p.InvalidRestoreTimeException$=C6;p.ItemCollectionMetrics$=Rl;p.ItemCollectionSizeLimitExceededException=Qm;p.ItemCollectionSizeLimitExceededException$=v6;p.ItemResponse$=R6;p.KeySchemaElement$=A6;p.KeyType=oRe;p.KeysAndAttributes$=I6;p.KinesisDataStreamDestination$=x6;p.KinesisStreamingDestinationInput$=Mv;p.KinesisStreamingDestinationOutput$=Lv;p.LimitExceededException=Jm;p.LimitExceededException$=P6;p.ListBackups$=dK;p.ListBackupsCommand=Wg;p.ListBackupsInput$=D6;p.ListBackupsOutput$=O6;p.ListContributorInsights$=pK;p.ListContributorInsightsCommand=ul;p.ListContributorInsightsInput$=k6;p.ListContributorInsightsOutput$=N6;p.ListExports$=fK;p.ListExportsCommand=ll;p.ListExportsInput$=M6;p.ListExportsOutput$=L6;p.ListGlobalTables$=hK;p.ListGlobalTablesCommand=Kg;p.ListGlobalTablesInput$=$6;p.ListGlobalTablesOutput$=B6;p.ListImports$=mK;p.ListImportsCommand=dl;p.ListImportsInput$=U6;p.ListImportsOutput$=F6;p.ListTables$=gK;p.ListTablesCommand=pl;p.ListTablesInput$=q6;p.ListTablesOutput$=G6;p.ListTagsOfResource$=yK;p.ListTagsOfResourceCommand=Qg;p.ListTagsOfResourceInput$=j6;p.ListTagsOfResourceOutput$=H6;p.LocalSecondaryIndex$=V6;p.LocalSecondaryIndexDescription$=z6;p.LocalSecondaryIndexInfo$=W6;p.MultiRegionConsistency=xRe;p.OnDemandThroughput$=fr;p.OnDemandThroughputOverride$=Za;p.ParameterizedStatement$=K6;p.PointInTimeRecoveryDescription$=Q6;p.PointInTimeRecoverySpecification$=Y6;p.PointInTimeRecoveryStatus=ERe;p.PointInTimeRecoveryUnavailableException=fg;p.PointInTimeRecoveryUnavailableException$=X6;p.PolicyNotFoundException=sg;p.PolicyNotFoundException$=J6;p.Projection$=Co;p.ProjectionType=iRe;p.ProvisionedThroughput$=Yr;p.ProvisionedThroughputDescription$=$v;p.ProvisionedThroughputExceededException=Wm;p.ProvisionedThroughputExceededException$=Z6;p.ProvisionedThroughputOverride$=ec;p.Put$=e8;p.PutItem$=SK;p.PutItemCommand=Yg;p.PutItemInput$=t8;p.PutItemOutput$=r8;p.PutRequest$=n8;p.PutResourcePolicy$=EK;p.PutResourcePolicyCommand=Xg;p.PutResourcePolicyInput$=s8;p.PutResourcePolicyOutput$=o8;p.Query$=bK;p.QueryCommand=fl;p.QueryInput$=i8;p.QueryOutput$=a8;p.Replica$=c8;p.ReplicaAlreadyExistsException=yg;p.ReplicaAlreadyExistsException$=u8;p.ReplicaAutoScalingDescription$=l8;p.ReplicaAutoScalingUpdate$=d8;p.ReplicaDescription$=p8;p.ReplicaGlobalSecondaryIndex$=f8;p.ReplicaGlobalSecondaryIndexAutoScalingDescription$=h8;p.ReplicaGlobalSecondaryIndexAutoScalingUpdate$=m8;p.ReplicaGlobalSecondaryIndexDescription$=g8;p.ReplicaGlobalSecondaryIndexSettingsDescription$=y8;p.ReplicaGlobalSecondaryIndexSettingsUpdate$=S8;p.ReplicaNotFoundException=Sg;p.ReplicaNotFoundException$=E8;p.ReplicaSettingsDescription$=b8;p.ReplicaSettingsUpdate$=_8;p.ReplicaStatus=vRe;p.ReplicaUpdate$=C8;p.ReplicatedWriteConflictException=Ym;p.ReplicatedWriteConflictException$=T8;p.ReplicationGroupUpdate$=w8;p.RequestLimitExceeded=Hm;p.RequestLimitExceeded$=v8;p.ResourceInUseException=rg;p.ResourceInUseException$=R8;p.ResourceNotFoundException=Km;p.ResourceNotFoundException$=I8;p.RestoreSummary$=A8;p.RestoreTableFromBackup$=_K;p.RestoreTableFromBackupCommand=Jg;p.RestoreTableFromBackupInput$=x8;p.RestoreTableFromBackupOutput$=P8;p.RestoreTableToPointInTime$=TK;p.RestoreTableToPointInTimeCommand=Zg;p.RestoreTableToPointInTimeInput$=D8;p.RestoreTableToPointInTimeOutput$=O8;p.ReturnConsumedCapacity=pRe;p.ReturnItemCollectionMetrics=mRe;p.ReturnValue=PRe;p.ReturnValuesOnConditionCheckFailure=fRe;p.S3BucketSource$=Ay;p.S3SseAlgorithm=MRe;p.SSEDescription$=Bv;p.SSESpecification$=tc;p.SSEStatus=cRe;p.SSEType=aRe;p.ScalarAttributeType=tRe;p.Scan$=wK;p.ScanCommand=hl;p.ScanInput$=k8;p.ScanOutput$=N8;p.Select=FRe;p.SourceTableDetails$=M8;p.SourceTableFeatureDetails$=L8;p.StreamSpecification$=Il;p.StreamViewType=uRe;p.TableAlreadyExistsException=mg;p.TableAlreadyExistsException$=$8;p.TableAutoScalingDescription$=Uv;p.TableClass=RRe;p.TableClassSummary$=xy;p.TableCreationParameters$=Fv;p.TableDescription$=bi;p.TableInUseException=Zm;p.TableInUseException$=B8;p.TableNotFoundException=eg;p.TableNotFoundException$=U8;p.TableStatus=IRe;p.TableWarmThroughputDescription$=qv;p.Tag$=F8;p.TagResource$=CK;p.TagResourceCommand=ey;p.TagResourceInput$=q8;p.ThrottlingException=Vm;p.ThrottlingException$=G8;p.ThrottlingReason$=j8;p.TimeToLiveDescription$=Gv;p.TimeToLiveSpecification$=jv;p.TimeToLiveStatus=lRe;p.TransactGetItem$=H8;p.TransactGetItems$=vK;p.TransactGetItemsCommand=ty;p.TransactGetItemsInput$=V8;p.TransactGetItemsOutput$=z8;p.TransactWriteItem$=Y8;p.TransactWriteItems$=RK;p.TransactWriteItemsCommand=ry;p.TransactWriteItemsInput$=X8;p.TransactWriteItemsOutput$=J8;p.TransactionCanceledException=_g;p.TransactionCanceledException$=W8;p.TransactionConflictException=ng;p.TransactionConflictException$=K8;p.TransactionInProgressException=lg;p.TransactionInProgressException$=Q8;p.UntagResource$=IK;p.UntagResourceCommand=ny;p.UntagResourceInput$=Z8;p.Update$=eW;p.UpdateContinuousBackups$=AK;p.UpdateContinuousBackupsCommand=sy;p.UpdateContinuousBackupsInput$=tW;p.UpdateContinuousBackupsOutput$=rW;p.UpdateContributorInsights$=xK;p.UpdateContributorInsightsCommand=oy;p.UpdateContributorInsightsInput$=nW;p.UpdateContributorInsightsOutput$=sW;p.UpdateGlobalSecondaryIndexAction$=oW;p.UpdateGlobalTable$=PK;p.UpdateGlobalTableCommand=iy;p.UpdateGlobalTableInput$=iW;p.UpdateGlobalTableOutput$=aW;p.UpdateGlobalTableSettings$=DK;p.UpdateGlobalTableSettingsCommand=ay;p.UpdateGlobalTableSettingsInput$=cW;p.UpdateGlobalTableSettingsOutput$=uW;p.UpdateItem$=OK;p.UpdateItemCommand=cy;p.UpdateItemInput$=lW;p.UpdateItemOutput$=dW;p.UpdateKinesisStreamingConfiguration$=Hv;p.UpdateKinesisStreamingDestination$=kK;p.UpdateKinesisStreamingDestinationCommand=uy;p.UpdateKinesisStreamingDestinationInput$=pW;p.UpdateKinesisStreamingDestinationOutput$=fW;p.UpdateReplicationGroupMemberAction$=hW;p.UpdateTable$=NK;p.UpdateTableCommand=ly;p.UpdateTableInput$=mW;p.UpdateTableOutput$=gW;p.UpdateTableReplicaAutoScaling$=MK;p.UpdateTableReplicaAutoScalingCommand=dy;p.UpdateTableReplicaAutoScalingInput$=yW;p.UpdateTableReplicaAutoScalingOutput$=SW;p.UpdateTimeToLive$=LK;p.UpdateTimeToLiveCommand=py;p.UpdateTimeToLiveInput$=EW;p.UpdateTimeToLiveOutput$=bW;p.WarmThroughput$=rc;p.WitnessStatus=ARe;p.WriteRequest$=_W;p.paginateListContributorInsights=Mve;p.paginateListExports=Lve;p.paginateListImports=$ve;p.paginateListTables=Bve;p.paginateQuery=Uve;p.paginateScan=Fve;p.waitForContributorInsightsEnabled=qve;p.waitForExportCompleted=jve;p.waitForImportCompleted=Vve;p.waitForKinesisStreamingDestinationActive=Wve;p.waitForTableExists=Qve;p.waitForTableNotExists=Xve;p.waitUntilContributorInsightsEnabled=Gve;p.waitUntilExportCompleted=Hve;p.waitUntilImportCompleted=zve;p.waitUntilKinesisStreamingDestinationActive=Kve;p.waitUntilTableExists=Yve;p.waitUntilTableNotExists=Jve});var VRe={};yt(VRe,{handler:()=>HRe});module.exports=K(VRe);var gr=v(BS(),1),LIe=gr.default.Client,eA=gr.default.Pool,$Ie=gr.default.Connection,BIe=gr.default.types,UIe=gr.default.Query,FIe=gr.default.DatabaseError,qIe=gr.default.escapeIdentifier,GIe=gr.default.escapeLiteral,jIe=gr.default.Result,HIe=gr.default.TypeOverrides,VIe=gr.default.defaults;var VK=v(eP()),ky=v(rj()),zK=v(jK()),Xv=null,Jv=null,qRe=new ky.SecretsManagerClient({}),$2e=new zK.DynamoDBClient({});async function GRe(){let t=new ky.GetSecretValueCommand({SecretId:process.env.DB_SECRET_ARN}),e=await qRe.send(t);return JSON.parse(e.SecretString||"{}")}async function jRe(){if(!Xv){let t=await GRe();Xv=new eA({host:t.host,port:t.port,database:t.dbname||"smuppy",user:t.username,password:t.password,ssl:{rejectUnauthorized:!1},max:20,idleTimeoutMillis:3e4})}return Xv}function HK(){return!Jv&&process.env.REDIS_ENDPOINT&&(Jv=new VK.default({host:process.env.REDIS_ENDPOINT,port:6379,maxRetriesPerRequest:3,lazyConnect:!0})),Jv}async function HRe(t){let e={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type,Authorization","Cache-Control":"private, max-age=60"};try{let r=t.requestContext.authorizer?.claims?.sub,n=Math.min(parseInt(t.queryStringParameters?.limit||"20"),50),s=t.queryStringParameters?.cursor;if(!r)return{statusCode:401,headers:e,body:JSON.stringify({message:"Unauthorized"})};let o=await jRe(),i=`feed:${r}:${s||"start"}`,a=null;if(process.env.REDIS_ENDPOINT)try{if(a=await HK().get(i),a)return{statusCode:200,headers:e,body:a}}catch(I){console.warn("Redis cache miss:",I)}let u=(await o.query("SELECT following_id FROM follows WHERE follower_id = $1 AND status = 'accepted'",[r])).rows.map(I=>I.following_id),d=[r,...u],l="",g=[d];s&&(l="AND p.created_at < $2",g.push(new Date(s))),g.push(n+1);let y=await o.query(`SELECT
        p.*,
        json_build_object(
          'id', pr.id,
          'username', pr.username,
          'full_name', pr.full_name,
          'avatar_url', pr.avatar_url,
          'is_verified', pr.is_verified,
          'account_type', pr.account_type
        ) as author,
        EXISTS(SELECT 1 FROM likes l WHERE l.post_id = p.id AND l.user_id = $${g.length+1}) as is_liked
      FROM posts p
      LEFT JOIN profiles pr ON p.author_id = pr.id
      WHERE p.author_id = ANY($1)
        AND (p.visibility = 'public' OR p.author_id = $${g.length+1})
        ${l}
      ORDER BY p.created_at DESC
      LIMIT $${l?3:2}`,[...g,r]),S=y.rows.length>n,w=y.rows.slice(0,n),A={data:w.map(I=>({id:I.id,authorId:I.author_id,content:I.content,mediaUrls:I.media_urls||[],mediaType:I.media_type,likesCount:I.likes_count||0,commentsCount:I.comments_count||0,createdAt:I.created_at,isLiked:I.is_liked,author:I.author})),nextCursor:S?w[w.length-1].created_at:null,hasMore:S,total:w.length};if(process.env.REDIS_ENDPOINT)try{await HK().setex(i,60,JSON.stringify(A))}catch(I){console.warn("Redis cache write error:",I)}return{statusCode:200,headers:e,body:JSON.stringify(A)}}catch(r){return console.error("Error getting feed:",r),{statusCode:500,headers:e,body:JSON.stringify({message:"Internal server error"})}}}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
