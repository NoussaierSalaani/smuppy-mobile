# ============================================
# SonarCloud Configuration — Smuppy Mobile
# ============================================

# Project identification
sonar.organization=noussaiersalaani
sonar.projectKey=NoussaierSalaani_smuppy-mobile
sonar.projectName=Smuppy Mobile

# ============================================
# Source paths
# ============================================
# Frontend (React Native) + Backend (Lambda)
sonar.sources=src,aws-migration/lambda/api,aws-migration/lambda/shared,aws-migration/lambda/websocket,aws-migration/lambda/triggers,aws-migration/lambda/graphql

# Test sources
sonar.tests=src/__tests__,aws-migration/lambda/api/__tests__,e2e

# ============================================
# Exclusions — reduce noise from non-project code
# ============================================
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/.expo/**,\
  **/cdk.out/**,\
  **/ios/**,\
  **/android/**,\
  aws-migration/lambda/_archived/**,\
  aws-migration/lambda/layers/**,\
  aws-migration/lambda/clamav-scanner/**,\
  aws-migration/infrastructure/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/__tests__/**,\
  **/__mocks__/**,\
  **/jest.setup.*,\
  **/jest.config.*,\
  **/metro.config.*,\
  **/babel.config.*,\
  **/*.config.js,\
  **/*.config.mjs,\
  **/*.config.ts,\
  **/docs/**,\
  **/*.md,\
  **/*.json,\
  **/*.lock

# Don't analyze test files for coverage/duplication
sonar.test.inclusions=\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/__tests__/**

# ============================================
# Coverage — Jest lcov output
# ============================================
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ============================================
# Language & encoding
# ============================================
sonar.sourceEncoding=UTF-8
sonar.typescript.tsconfigPaths=tsconfig.json,aws-migration/lambda/api/tsconfig.json

# ============================================
# Quality Gate — non-blocking for now
# ============================================
# SonarCloud default gate requires 80% coverage on new code + 100% hotspots reviewed.
# Re-enable once new code coverage is above 80% and hotspots are triaged on sonarcloud.io.
sonar.qualitygate.wait=false
sonar.qualitygate.timeout=300

# ============================================
# Duplication — ignore small blocks
# ============================================
sonar.cpd.minimumTokens=100
sonar.cpd.minimumLines=10

# CPD exclusions — data-only files (static arrays/objects, no logic to deduplicate)
sonar.cpd.exclusions=src/config/interests.ts,src/config/expertise.ts,src/config/theme.ts
