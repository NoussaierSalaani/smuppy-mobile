{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.236.0"},"children":{"SmuppyStack-staging":{"id":"SmuppyStack-staging","path":"SmuppyStack-staging","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.236.0"},"children":{"SmuppyVPC":{"id":"SmuppyVPC","path":"SmuppyStack-staging/SmuppyVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/20","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPublicSubnet1RouteTableF94DAA55"},"subnetId":{"Ref":"SmuppyVPCPublicSubnet1Subnet9EB0C3AC"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SmuppyVPCIGWAFDBB158"},"routeTableId":{"Ref":"SmuppyVPCPublicSubnet1RouteTableF94DAA55"}}}},"EIP":{"id":"EIP","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["SmuppyVPCPublicSubnet1EIP387FD4F5","AllocationId"]},"subnetId":{"Ref":"SmuppyVPCPublicSubnet1Subnet9EB0C3AC"},"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.16.0/20","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPublicSubnet2RouteTable0576E3F9"},"subnetId":{"Ref":"SmuppyVPCPublicSubnet2Subnet669010A6"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SmuppyVPCIGWAFDBB158"},"routeTableId":{"Ref":"SmuppyVPCPublicSubnet2RouteTable0576E3F9"}}}}}},"PublicSubnet3":{"id":"PublicSubnet3","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1c","cidrBlock":"10.0.32.0/20","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPublicSubnet3RouteTableDD80D8EF"},"subnetId":{"Ref":"SmuppyVPCPublicSubnet3SubnetF2765776"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PublicSubnet3/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SmuppyVPCIGWAFDBB158"},"routeTableId":{"Ref":"SmuppyVPCPublicSubnet3RouteTableDD80D8EF"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.48.0/20","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet1RouteTable18CD344C"},"subnetId":{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SmuppyVPCPublicSubnet1NATGateway165598A0"},"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet1RouteTable18CD344C"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.64.0/20","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet2RouteTableF256A16E"},"subnetId":{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SmuppyVPCPublicSubnet1NATGateway165598A0"},"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet2RouteTableF256A16E"}}}}}},"PrivateSubnet3":{"id":"PrivateSubnet3","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1c","cidrBlock":"10.0.80.0/20","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet3RouteTable323B23FF"},"subnetId":{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SmuppyVPCPublicSubnet1NATGateway165598A0"},"routeTableId":{"Ref":"SmuppyVPCPrivateSubnet3RouteTable323B23FF"}}}}}},"IsolatedSubnet1":{"id":"IsolatedSubnet1","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.96.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCIsolatedSubnet1RouteTableB4DC6E5F"},"subnetId":{"Ref":"SmuppyVPCIsolatedSubnet1SubnetC965E000"}}}}}},"IsolatedSubnet2":{"id":"IsolatedSubnet2","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.97.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCIsolatedSubnet2RouteTable0A635D33"},"subnetId":{"Ref":"SmuppyVPCIsolatedSubnet2SubnetD76398DB"}}}}}},"IsolatedSubnet3":{"id":"IsolatedSubnet3","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.236.0"},"children":{"Subnet":{"id":"Subnet","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1c","cidrBlock":"10.0.98.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"Acl":{"id":"Acl","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"RouteTable":{"id":"RouteTable","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SmuppyVPCIsolatedSubnet3RouteTableFBBA5170"},"subnetId":{"Ref":"SmuppyVPCIsolatedSubnet3Subnet16F39602"}}}}}},"IGW":{"id":"IGW","path":"SmuppyStack-staging/SmuppyVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC"}]}}},"VPCGW":{"id":"VPCGW","path":"SmuppyStack-staging/SmuppyVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"SmuppyVPCIGWAFDBB158"},"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"FlowLog":{"id":"FlowLog","path":"SmuppyStack-staging/SmuppyVPC/FlowLog","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.FlowLog","version":"2.236.0"},"children":{"IAMRole":{"id":"IAMRole","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"vpc-flow-logs.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/FlowLog"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:DescribeLogStreams","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SmuppyVPCFlowLogLogGroup8444842C","Arn"]}}],"Version":"2012-10-17"},"policyName":"SmuppyVPCFlowLogIAMRoleDefaultPolicyCEF335E0","roles":[{"Ref":"SmuppyVPCFlowLogIAMRoleEDF7E34F"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731,"tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/FlowLog"}]}}}}},"FlowLog":{"id":"FlowLog","path":"SmuppyStack-staging/SmuppyVPC/FlowLog/FlowLog","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnFlowLog","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::FlowLog","aws:cdk:cloudformation:props":{"deliverLogsPermissionArn":{"Fn::GetAtt":["SmuppyVPCFlowLogIAMRoleEDF7E34F","Arn"]},"logDestinationType":"cloud-watch-logs","logGroupName":{"Ref":"SmuppyVPCFlowLogLogGroup8444842C"},"resourceId":{"Ref":"SmuppyVPCC8507FB3"},"resourceType":"VPC","tags":[{"key":"Name","value":"SmuppyStack-staging/SmuppyVPC/FlowLog"}],"trafficType":"ALL"}}}}}}},"SmuppyUserPool":{"id":"SmuppyUserPool","path":"SmuppyStack-staging/SmuppyUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"temporaryPasswordValidityDays":3,"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"account_type","attributeDataType":"String","mutable":true},{"name":"is_verified","attributeDataType":"Boolean","mutable":true},{"name":"bio","attributeDataType":"String","stringAttributeConstraints":{"maxLength":"500"},"mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolAddOns":{"advancedSecurityMode":"AUDIT"},"userPoolName":"smuppy-users-staging","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"SmuppyUserPoolClient":{"id":"SmuppyUserPoolClient","path":"SmuppyStack-staging/SmuppyUserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyUserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["smuppy://auth/callback"],"clientName":"smuppy-mobile-app","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"idTokenValidity":60,"logoutUrLs":["smuppy://auth/logout"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"SmuppyUserPoolB59D12A3"}}}}}},"SmuppyIdentityPool":{"id":"SmuppyIdentityPool","path":"SmuppyStack-staging/SmuppyIdentityPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"cognitoIdentityProviders":[{"clientId":{"Ref":"SmuppyUserPoolClientA58AA0F4"},"providerName":{"Fn::GetAtt":["SmuppyUserPoolB59D12A3","ProviderName"]}}],"identityPoolName":"smuppy_identity_staging"}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"SmuppyStack-staging/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Aurora PostgreSQL","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"from SmuppyStackstagingLambdaSecurityGroup9D425EA4:5432":{"id":"from SmuppyStackstagingLambdaSecurityGroup9D425EA4:5432","path":"SmuppyStack-staging/DBSecurityGroup/from SmuppyStackstagingLambdaSecurityGroup9D425EA4:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow PostgreSQL from Lambda only","fromPort":5432,"groupId":{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]},"toPort":5432}}}}},"LambdaSecurityGroup":{"id":"LambdaSecurityGroup","path":"SmuppyStack-staging/LambdaSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/LambdaSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Lambda functions","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}}}},"DBCredentials":{"id":"DBCredentials","path":"SmuppyStack-staging/DBCredentials","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DBCredentials/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"smuppy_admin\"}","generateStringKey":"password","excludePunctuation":true,"passwordLength":32},"name":"smuppy-db-credentials-staging"}}},"Attachment":{"id":"Attachment","path":"SmuppyStack-staging/DBCredentials/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DBCredentials/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBCredentialsCBF39AE9"},"targetId":{"Ref":"SmuppyDatabase28802365"},"targetType":"AWS::RDS::DBCluster"}}}}}}},"SmuppyDatabase":{"id":"SmuppyDatabase","path":"SmuppyStack-staging/SmuppyDatabase","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseCluster","version":"2.236.0"},"children":{"Subnets":{"id":"Subnets","path":"SmuppyStack-staging/SmuppyDatabase/Subnets","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"SmuppyStack-staging/SmuppyDatabase/Subnets/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnets for SmuppyDatabase database","subnetIds":[{"Ref":"SmuppyVPCIsolatedSubnet1SubnetC965E000"},{"Ref":"SmuppyVPCIsolatedSubnet2SubnetD76398DB"},{"Ref":"SmuppyVPCIsolatedSubnet3Subnet16F39602"}]}}}}},"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup":{"id":"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","path":"SmuppyStack-staging/SmuppyDatabase/AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyDatabase/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBCluster","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBCluster","aws:cdk:cloudformation:props":{"backupRetentionPeriod":7,"copyTagsToSnapshot":true,"databaseName":"smuppy","dbClusterParameterGroupName":"default.aurora-postgresql15","dbSubnetGroupName":{"Ref":"SmuppyDatabaseSubnets9036C03F"},"deletionProtection":false,"engine":"aurora-postgresql","engineVersion":"15.14","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBCredentialsCBF39AE9"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBCredentialsCBF39AE9"},":SecretString:password::}}"]]},"performanceInsightsEnabled":true,"performanceInsightsRetentionPeriod":7,"port":5432,"preferredBackupWindow":"03:00-04:00","serverlessV2ScalingConfiguration":{"minCapacity":0.5,"maxCapacity":16},"storageEncrypted":true,"vpcSecurityGroupIds":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}},"writer":{"id":"writer","path":"SmuppyStack-staging/SmuppyDatabase/writer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyDatabase/writer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"autoMinorVersionUpgrade":true,"dbClusterIdentifier":{"Ref":"SmuppyDatabase28802365"},"dbInstanceClass":"db.serverless","engine":"aurora-postgresql","promotionTier":0,"publiclyAccessible":false}}}}}}},"RedisSecurityGroup":{"id":"RedisSecurityGroup","path":"SmuppyStack-staging/RedisSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/RedisSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Redis","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"SmuppyVPCC8507FB3"}}}},"from SmuppyStackstagingLambdaSecurityGroup9D425EA4:6379":{"id":"from SmuppyStackstagingLambdaSecurityGroup9D425EA4:6379","path":"SmuppyStack-staging/RedisSecurityGroup/from SmuppyStackstagingLambdaSecurityGroup9D425EA4:6379","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Redis from Lambda only","fromPort":6379,"groupId":{"Fn::GetAtt":["RedisSecurityGroupB05951F6","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]},"toPort":6379}}}}},"RedisSubnetGroup":{"id":"RedisSubnetGroup","path":"SmuppyStack-staging/RedisSubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticache.CfnSubnetGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElastiCache::SubnetGroup","aws:cdk:cloudformation:props":{"cacheSubnetGroupName":"smuppy-redis-staging","description":"Subnet group for Redis","subnetIds":[{"Ref":"SmuppyVPCIsolatedSubnet1SubnetC965E000"},{"Ref":"SmuppyVPCIsolatedSubnet2SubnetD76398DB"},{"Ref":"SmuppyVPCIsolatedSubnet3Subnet16F39602"}]}}},"RedisCluster":{"id":"RedisCluster","path":"SmuppyStack-staging/RedisCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticache.CfnReplicationGroup","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElastiCache::ReplicationGroup","aws:cdk:cloudformation:props":{"atRestEncryptionEnabled":true,"automaticFailoverEnabled":false,"autoMinorVersionUpgrade":true,"cacheNodeType":"cache.t3.medium","cacheSubnetGroupName":"smuppy-redis-staging","engine":"redis","engineVersion":"7.0","multiAzEnabled":false,"numNodeGroups":1,"replicasPerNodeGroup":0,"replicationGroupDescription":"Smuppy Redis cluster for caching and sessions","securityGroupIds":[{"Fn::GetAtt":["RedisSecurityGroupB05951F6","GroupId"]}],"transitEncryptionEnabled":true}}},"MediaBucket":{"id":"MediaBucket","path":"SmuppyStack-staging/MediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}},"SharedLayer":{"id":"SharedLayer","path":"SmuppyStack-staging/SharedLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.236.0"},"children":{"Code":{"id":"Code","path":"SmuppyStack-staging/SharedLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/SharedLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/SharedLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SharedLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["nodejs20.x"],"content":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"879a8aed1af2468752e47dd77a0c983634ad4ba4e1840e09c3988df717817797.zip"},"description":"Shared utilities for Smuppy Lambda functions"}}}}},"PostsListFunction":{"id":"PostsListFunction","path":"SmuppyStack-staging/PostsListFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/PostsListFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsListFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/PostsListFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsListFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"PostsListFunctionServiceRoleDefaultPolicyA7390DF5","roles":[{"Ref":"PostsListFunctionServiceRole4F93E01C"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/PostsListFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/PostsListFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/PostsListFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsListFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"652a8fbc7b8b681e14bc5b597c985f2c3ebcf4e8e37a0d289b10deafd89d6c01.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["PostsListFunctionServiceRole4F93E01C","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/PostsListFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsListFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/PostsListFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Code":{"id":"Code","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"PostsGetFunction":{"id":"PostsGetFunction","path":"SmuppyStack-staging/PostsGetFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/PostsGetFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsGetFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/PostsGetFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsGetFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"PostsGetFunctionServiceRoleDefaultPolicyF80102F4","roles":[{"Ref":"PostsGetFunctionServiceRoleDE50ED3A"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/PostsGetFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/PostsGetFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/PostsGetFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsGetFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"06493ab79544f4ae36541d77f3358f192bee45e9b7ea1d1f5922960dcccba5fd.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PostsGetFunctionServiceRoleDE50ED3A","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/PostsGetFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsGetFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/PostsGetFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"PostsCreateFunction":{"id":"PostsCreateFunction","path":"SmuppyStack-staging/PostsCreateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/PostsCreateFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsCreateFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/PostsCreateFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsCreateFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"PostsCreateFunctionServiceRoleDefaultPolicyAFAA5D81","roles":[{"Ref":"PostsCreateFunctionServiceRoleC1D765CD"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/PostsCreateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/PostsCreateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/PostsCreateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsCreateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"0025d9333452455a0fb8703c5f5dcd06e02824738f43466a505d3436f4849285.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PostsCreateFunctionServiceRoleC1D765CD","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/PostsCreateFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/PostsCreateFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/PostsCreateFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"ProfilesGetFunction":{"id":"ProfilesGetFunction","path":"SmuppyStack-staging/ProfilesGetFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/ProfilesGetFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesGetFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/ProfilesGetFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesGetFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"ProfilesGetFunctionServiceRoleDefaultPolicyC8F125A0","roles":[{"Ref":"ProfilesGetFunctionServiceRole50E65A25"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/ProfilesGetFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/ProfilesGetFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/ProfilesGetFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesGetFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"572bff222554bc58152ee3266406f6ffce07f056c25a247dfeda7b1a441e3329.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ProfilesGetFunctionServiceRole50E65A25","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/ProfilesGetFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesGetFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/ProfilesGetFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"ProfilesSearchFunction":{"id":"ProfilesSearchFunction","path":"SmuppyStack-staging/ProfilesSearchFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/ProfilesSearchFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesSearchFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/ProfilesSearchFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesSearchFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"ProfilesSearchFunctionServiceRoleDefaultPolicyF41417B5","roles":[{"Ref":"ProfilesSearchFunctionServiceRoleFBCC6BA8"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/ProfilesSearchFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/ProfilesSearchFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/ProfilesSearchFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesSearchFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"27b2eaeb91f8aa4717dcb1362e0e8536d7579f170d62208c88f5b1e35f296c75.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["ProfilesSearchFunctionServiceRoleFBCC6BA8","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/ProfilesSearchFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/ProfilesSearchFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/ProfilesSearchFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"FeedGetFunction":{"id":"FeedGetFunction","path":"SmuppyStack-staging/FeedGetFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/FeedGetFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FeedGetFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/FeedGetFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FeedGetFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"FeedGetFunctionServiceRoleDefaultPolicyCC5222C6","roles":[{"Ref":"FeedGetFunctionServiceRole38503FC8"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/FeedGetFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/FeedGetFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/FeedGetFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/FeedGetFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"c8cbfd66d34f579b15bba9d539dce5e5f9143783ef8bbc76fc9bba6365ad309b.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":2048,"role":{"Fn::GetAtt":["FeedGetFunctionServiceRole38503FC8","Arn"]},"runtime":"nodejs20.x","timeout":60,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/FeedGetFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FeedGetFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/FeedGetFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"FollowsCreateFunction":{"id":"FollowsCreateFunction","path":"SmuppyStack-staging/FollowsCreateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/FollowsCreateFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FollowsCreateFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/FollowsCreateFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FollowsCreateFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":["arn:aws:s3:::smuppy-media","arn:aws:s3:::smuppy-media/*"]}],"Version":"2012-10-17"},"policyName":"FollowsCreateFunctionServiceRoleDefaultPolicy02AA2150","roles":[{"Ref":"FollowsCreateFunctionServiceRole855CF958"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/FollowsCreateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/FollowsCreateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/FollowsCreateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/FollowsCreateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"7e7a22cf1f3442e1c2e6d80b8a7f39d9314e5458ede0fab05fe9edd573c75b02.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["FollowsCreateFunctionServiceRole855CF958","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/FollowsCreateFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/FollowsCreateFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/FollowsCreateFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"AdminMigrationFunction":{"id":"AdminMigrationFunction","path":"SmuppyStack-staging/AdminMigrationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/AdminMigrationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/AdminMigrationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/AdminMigrationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/AdminMigrationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}}],"Version":"2012-10-17"},"policyName":"AdminMigrationFunctionServiceRoleDefaultPolicy816302B0","roles":[{"Ref":"AdminMigrationFunctionServiceRole4166D8B7"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/AdminMigrationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/AdminMigrationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/AdminMigrationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/AdminMigrationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"02890de713263c2cb9df4636313361cb590aa32ee77b7f25e1e27aa680b5e945.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps","ADMIN_KEY":"smuppy-migration-secret-key-2026"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AdminMigrationFunctionServiceRole4166D8B7","Arn"]},"runtime":"nodejs20.x","timeout":300,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/AdminMigrationFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/AdminMigrationFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/AdminMigrationFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"DataMigrationFunction":{"id":"DataMigrationFunction","path":"SmuppyStack-staging/DataMigrationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/DataMigrationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DataMigrationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/DataMigrationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DataMigrationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}}],"Version":"2012-10-17"},"policyName":"DataMigrationFunctionServiceRoleDefaultPolicyCAB4E443","roles":[{"Ref":"DataMigrationFunctionServiceRoleBBAA6FF1"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/DataMigrationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/DataMigrationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/DataMigrationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/DataMigrationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"16b730fe8ed36bc2e283f32964c113d3c8e3f78fb3bf55d79ac1848514e66e14.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps","ADMIN_KEY":"smuppy-migration-secret-key-2026"}},"handler":"index.handler","memorySize":2048,"role":{"Fn::GetAtt":["DataMigrationFunctionServiceRoleBBAA6FF1","Arn"]},"runtime":"nodejs20.x","timeout":900,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/DataMigrationFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/DataMigrationFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/DataMigrationFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"CheckProfilesFunction":{"id":"CheckProfilesFunction","path":"SmuppyStack-staging/CheckProfilesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/CheckProfilesFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/CheckProfilesFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/CheckProfilesFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/CheckProfilesFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}}],"Version":"2012-10-17"},"policyName":"CheckProfilesFunctionServiceRoleDefaultPolicy0DBF2BF5","roles":[{"Ref":"CheckProfilesFunctionServiceRole70139678"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/CheckProfilesFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/CheckProfilesFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/CheckProfilesFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/CheckProfilesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"76510fb150826ebd865756bb777cf43cc9ed749dd9e3ee144cc10865ec74d974.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["CheckProfilesFunctionServiceRole70139678","Arn"]},"runtime":"nodejs20.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}}}},"UserMigrationFunction":{"id":"UserMigrationFunction","path":"SmuppyStack-staging/UserMigrationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.236.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SmuppyStack-staging/UserMigrationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/UserMigrationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SmuppyStack-staging/UserMigrationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/UserMigrationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DBCredentialsCBF39AE9"}},{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminGetUser","cognito-idp:AdminSetUserPassword","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SmuppyUserPoolB59D12A3","Arn"]}}],"Version":"2012-10-17"},"policyName":"UserMigrationFunctionServiceRoleDefaultPolicy647E497D","roles":[{"Ref":"UserMigrationFunctionServiceRoleF15206BE"}]}}}}}}},"Code":{"id":"Code","path":"SmuppyStack-staging/UserMigrationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.236.0"},"children":{"Stage":{"id":"Stage","path":"SmuppyStack-staging/UserMigrationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"AssetBucket":{"id":"AssetBucket","path":"SmuppyStack-staging/UserMigrationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.236.0"}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/UserMigrationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-471112656108-us-east-1","s3Key":"c96fb0edf9243f396c30ef5896e065126044b9d708948d45d418b1c62eddb955.zip"},"environment":{"variables":{"DB_HOST":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SmuppyDatabase28802365","Endpoint.Port"]},"DB_NAME":"smuppy","DB_SECRET_ARN":{"Ref":"DBCredentialsCBF39AE9"},"REDIS_HOST":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Address"]},"REDIS_PORT":{"Fn::GetAtt":["RedisCluster","PrimaryEndPoint.Port"]},"USER_POOL_ID":{"Ref":"SmuppyUserPoolB59D12A3"},"MEDIA_BUCKET":"smuppy-media","ENVIRONMENT":"staging","NODE_OPTIONS":"--enable-source-maps","ADMIN_KEY":"smuppy-migration-secret-key-2026"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["UserMigrationFunctionServiceRoleF15206BE","Arn"]},"runtime":"nodejs20.x","timeout":900,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"SmuppyVPCPrivateSubnet1SubnetF3794B16"},{"Ref":"SmuppyVPCPrivateSubnet2Subnet89020D78"},{"Ref":"SmuppyVPCPrivateSubnet3Subnet315EB7E7"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/UserMigrationFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/UserMigrationFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/UserMigrationFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"SmuppyAPI":{"id":"SmuppyAPI","path":"SmuppyStack-staging/SmuppyAPI","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"binaryMediaTypes":["image/*","video/*"],"description":"Smuppy REST API - Auto-scaling Social Network","name":"smuppy-api-staging"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"SmuppyStack-staging/SmuppyAPI/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"SmuppyStack-staging/SmuppyAPI/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["SmuppyAPICloudWatchRoleE30D8814","Arn"]}}}},"Deployment":{"id":"Deployment","path":"SmuppyStack-staging/SmuppyAPI/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Smuppy REST API - Auto-scaling Social Network","restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"DeploymentStage.staging":{"id":"DeploymentStage.staging","path":"SmuppyStack-staging/SmuppyAPI/DeploymentStage.staging","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/DeploymentStage.staging/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"cacheClusterEnabled":false,"deploymentId":{"Ref":"SmuppyAPIDeployment7DF64D7327ddf6e8b4b4c56bb4a46ccb5c3c2bef"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","cachingEnabled":false,"dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":500,"throttlingRateLimit":1000}],"restApiId":{"Ref":"SmuppyAPI522869CB"},"stageName":"staging"}}}}},"Endpoint":{"id":"Endpoint","path":"SmuppyStack-staging/SmuppyAPI/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"Default":{"id":"Default","path":"SmuppyStack-staging/SmuppyAPI/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.236.0"},"children":{"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"posts":{"id":"posts","path":"SmuppyStack-staging/SmuppyAPI/Default/posts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"pathPart":"posts","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIposts4690FF05"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"GET":{"id":"GET","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsListFunctionC67E5479","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/GET/posts"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsListFunctionC67E5479","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/GET/posts"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PostsListFunctionC67E5479","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIposts4690FF05"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"POST":{"id":"POST","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsCreateFunction05741974","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/POST/posts"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsCreateFunction05741974","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/POST/posts"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/posts/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PostsCreateFunction05741974","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIposts4690FF05"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}},"profiles":{"id":"profiles","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"pathPart":"profiles","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIprofilesE145C226"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"GET":{"id":"GET","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProfilesSearchFunction955B6C6F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/GET/profiles"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProfilesSearchFunction955B6C6F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/GET/profiles"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProfilesSearchFunction955B6C6F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIprofilesE145C226"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"{id}":{"id":"{id}","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SmuppyAPIprofilesE145C226"},"pathPart":"{id}","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIprofilesid8D522476"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"GET":{"id":"GET","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProfilesGetFunctionA4D69A50","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/GET/profiles/*"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProfilesGetFunctionA4D69A50","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/GET/profiles/*"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ProfilesGetFunctionA4D69A50","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIprofilesid8D522476"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}}}},"feed":{"id":"feed","path":"SmuppyStack-staging/SmuppyAPI/Default/feed","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"pathPart":"feed","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIfeedE675CAE0"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"GET":{"id":"GET","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FeedGetFunction14FA861F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/GET/feed"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FeedGetFunction14FA861F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/GET/feed"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/feed/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["FeedGetFunction14FA861F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIfeedE675CAE0"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}},"follows":{"id":"follows","path":"SmuppyStack-staging/SmuppyAPI/Default/follows","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"pathPart":"follows","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIfollowsAB82C934"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"POST":{"id":"POST","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FollowsCreateFunctionF0669F53","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/POST/follows"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FollowsCreateFunctionF0669F53","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/POST/follows"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/follows/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["FollowsCreateFunctionF0669F53","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIfollowsAB82C934"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}},"admin":{"id":"admin","path":"SmuppyStack-staging/SmuppyAPI/Default/admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SmuppyAPI522869CB","RootResourceId"]},"pathPart":"admin","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIadmin0963F1F7"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"migrate":{"id":"migrate","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SmuppyAPIadmin0963F1F7"},"pathPart":"migrate","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIadminmigrateA11F622E"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"POST":{"id":"POST","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminMigrationFunction4134AACE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/POST/admin/migrate"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminMigrationFunction4134AACE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/POST/admin/migrate"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminMigrationFunction4134AACE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SmuppyAPIadminmigrateA11F622E"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}},"migrate-data":{"id":"migrate-data","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SmuppyAPIadmin0963F1F7"},"pathPart":"migrate-data","restApiId":{"Ref":"SmuppyAPI522869CB"}}}},"OPTIONS":{"id":"OPTIONS","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Max-Age":"'86400'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"SmuppyAPIadminmigratedataA2C83E9F"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}},"POST":{"id":"POST","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.236.0"},"children":{"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data":{"id":"ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DataMigrationFunction313678B9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/",{"Ref":"SmuppyAPIDeploymentStagestaging91880277"},"/POST/admin/migrate-data"]]}}}},"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data":{"id":"ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DataMigrationFunction313678B9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:471112656108:",{"Ref":"SmuppyAPI522869CB"},"/test-invoke-stage/POST/admin/migrate-data"]]}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DataMigrationFunction313678B9","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"SmuppyAPIadminmigratedataA2C83E9F"},"restApiId":{"Ref":"SmuppyAPI522869CB"}}}}}}}}}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"SmuppyStack-staging/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"identitySource":"method.request.header.Authorization","name":"SmuppyStackstagingCognitoAuthorizer1E979614","providerArns":[{"Fn::GetAtt":["SmuppyUserPoolB59D12A3","Arn"]}],"restApiId":{"Ref":"SmuppyAPI522869CB"},"type":"COGNITO_USER_POOLS"}}}}},"SmuppyGraphQL":{"id":"SmuppyGraphQL","path":"SmuppyStack-staging/SmuppyGraphQL","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.236.0"},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"SmuppyStack-staging/SmuppyGraphQL/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyGraphQL/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}]}}}}},"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyGraphQL/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"additionalAuthenticationProviders":[{"authenticationType":"AWS_IAM"}],"authenticationType":"AMAZON_COGNITO_USER_POOLS","logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["SmuppyGraphQLApiLogsRole31540BD0","Arn"]},"excludeVerboseContent":true,"fieldLogLevel":"ERROR"},"name":"smuppy-graphql-staging","userPoolConfig":{"userPoolId":{"Ref":"SmuppyUserPoolB59D12A3"},"awsRegion":"us-east-1","defaultAction":"ALLOW"},"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"SmuppyStack-staging/SmuppyGraphQL/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["SmuppyGraphQL690F381D","ApiId"]},"definition":"# ============================================\n# Smuppy GraphQL Schema for AppSync\n# Handles Realtime subscriptions (Chat, Notifications)\n# ============================================\n\n# ============================================\n# Types\n# ============================================\n\ntype User {\n  id: ID!\n  username: String!\n  fullName: String\n  avatarUrl: String\n  isVerified: Boolean!\n  accountType: AccountType!\n  createdAt: AWSDateTime!\n}\n\nenum AccountType {\n  PERSONAL\n  PRO_CREATOR\n  PRO_LOCAL\n}\n\ntype Message {\n  id: ID!\n  conversationId: ID!\n  senderId: ID!\n  sender: User\n  content: String!\n  mediaUrl: String\n  mediaType: MediaType\n  readAt: AWSDateTime\n  createdAt: AWSDateTime!\n}\n\nenum MediaType {\n  IMAGE\n  VIDEO\n  AUDIO\n}\n\ntype Conversation {\n  id: ID!\n  participants: [User!]!\n  lastMessage: Message\n  unreadCount: Int!\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\ntype Notification {\n  id: ID!\n  userId: ID!\n  type: NotificationType!\n  title: String!\n  body: String!\n  data: AWSJSON\n  read: Boolean!\n  createdAt: AWSDateTime!\n}\n\nenum NotificationType {\n  NEW_FOLLOWER\n  NEW_LIKE\n  NEW_COMMENT\n  NEW_MESSAGE\n  MENTION\n  SYSTEM\n}\n\ntype Post {\n  id: ID!\n  authorId: ID!\n  author: User\n  content: String\n  mediaUrls: [String!]\n  mediaType: MediaType\n  likesCount: Int!\n  commentsCount: Int!\n  createdAt: AWSDateTime!\n}\n\ntype Comment {\n  id: ID!\n  postId: ID!\n  authorId: ID!\n  author: User\n  content: String!\n  likesCount: Int!\n  createdAt: AWSDateTime!\n}\n\ntype Peak {\n  id: ID!\n  authorId: ID!\n  author: User\n  videoUrl: String!\n  thumbnailUrl: String\n  caption: String\n  viewsCount: Int!\n  likesCount: Int!\n  createdAt: AWSDateTime!\n}\n\n# ============================================\n# Inputs\n# ============================================\n\ninput SendMessageInput {\n  conversationId: ID!\n  content: String!\n  mediaUrl: String\n  mediaType: MediaType\n}\n\ninput CreateConversationInput {\n  participantIds: [ID!]!\n  initialMessage: String\n}\n\ninput MarkAsReadInput {\n  conversationId: ID!\n  messageId: ID!\n}\n\n# ============================================\n# Queries\n# ============================================\n\ntype Query {\n  # Conversations\n  getConversation(id: ID!): Conversation\n  listConversations(limit: Int, nextToken: String): ConversationConnection!\n\n  # Messages\n  listMessages(conversationId: ID!, limit: Int, nextToken: String): MessageConnection!\n\n  # Notifications\n  listNotifications(limit: Int, nextToken: String): NotificationConnection!\n  getUnreadCount: Int!\n}\n\ntype ConversationConnection {\n  items: [Conversation!]!\n  nextToken: String\n}\n\ntype MessageConnection {\n  items: [Message!]!\n  nextToken: String\n}\n\ntype NotificationConnection {\n  items: [Notification!]!\n  nextToken: String\n}\n\n# ============================================\n# Mutations\n# ============================================\n\ntype Mutation {\n  # Messages\n  sendMessage(input: SendMessageInput!): Message!\n  markAsRead(input: MarkAsReadInput!): MessageReadReceipt!\n\n  # Conversations\n  createConversation(input: CreateConversationInput!): Conversation!\n  deleteConversation(id: ID!): Boolean!\n\n  # Notifications\n  createNotification(\n    userId: ID!\n    type: NotificationType!\n    title: String!\n    body: String!\n    data: AWSJSON\n  ): Notification!\n  markNotificationRead(id: ID!): Boolean!\n  markAllNotificationsRead: Boolean!\n\n  # Typing indicator\n  setTyping(conversationId: ID!, isTyping: Boolean!): TypingIndicator!\n}\n\n# ============================================\n# Subscriptions (Realtime)\n# ============================================\n\ntype Subscription {\n  # Real-time message updates\n  onNewMessage(conversationId: ID!): Message\n    @aws_subscribe(mutations: [\"sendMessage\"])\n\n  # Real-time notification updates\n  onNotification(userId: ID!): Notification\n    @aws_subscribe(mutations: [\"createNotification\"])\n\n  # Typing indicator\n  onTyping(conversationId: ID!): TypingIndicator\n    @aws_subscribe(mutations: [\"setTyping\"])\n\n  # Message read receipts\n  onMessageRead(conversationId: ID!): MessageReadReceipt\n    @aws_subscribe(mutations: [\"markAsRead\"])\n}\n\ntype TypingIndicator {\n  conversationId: ID!\n  userId: ID!\n  isTyping: Boolean!\n  timestamp: AWSDateTime!\n}\n\ntype MessageReadReceipt {\n  conversationId: ID!\n  messageId: ID!\n  userId: ID!\n  readAt: AWSDateTime!\n}\n\n# ============================================\n# Schema\n# ============================================\n\nschema {\n  query: Query\n  mutation: Mutation\n  subscription: Subscription\n}\n"}}},"LogRetention":{"id":"LogRetention","path":"SmuppyStack-staging/SmuppyGraphQL/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyStack-staging/SmuppyGraphQL/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"LogGroup":{"id":"LogGroup","path":"SmuppyStack-staging/SmuppyGraphQL/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"UserPoolId":{"id":"UserPoolId","path":"SmuppyStack-staging/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"SmuppyStack-staging/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"IdentityPoolId":{"id":"IdentityPoolId","path":"SmuppyStack-staging/IdentityPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"ApiEndpoint":{"id":"ApiEndpoint","path":"SmuppyStack-staging/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"GraphQLEndpoint":{"id":"GraphQLEndpoint","path":"SmuppyStack-staging/GraphQLEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"SmuppyStack-staging/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"RedisEndpoint":{"id":"RedisEndpoint","path":"SmuppyStack-staging/RedisEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"DeploymentInfo":{"id":"DeploymentInfo","path":"SmuppyStack-staging/DeploymentInfo","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SmuppyStack-staging/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"SmuppyStack-staging/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SmuppyStack-staging/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.236.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SmuppyStack-staging/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.236.0"}}}},"SmuppyGlobal-staging":{"id":"SmuppyGlobal-staging","path":"SmuppyGlobal-staging","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.236.0"},"children":{"MediaBucket":{"id":"MediaBucket","path":"SmuppyGlobal-staging/MediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/MediaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"smuppy-media-staging-471112656108","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"intelligentTieringConfigurations":[{"id":"AutoTiering","status":"Enabled","tierings":[{"accessTier":"ARCHIVE_ACCESS","days":90},{"accessTier":"DEEP_ARCHIVE_ACCESS","days":180}]}],"lifecycleConfiguration":{"rules":[{"abortIncompleteMultipartUpload":{"daysAfterInitiation":1},"id":"DeleteIncompleteUploads","status":"Enabled"},{"id":"TransitionOldMedia","status":"Enabled","transitions":[{"storageClass":"INTELLIGENT_TIERING","transitionInDays":30}]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"SmuppyGlobal-staging/MediaBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/MediaBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"MediaBucketBCBB02BA"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["MediaBucketBCBB02BA","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"SmuppyGlobal-staging/MediaBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.236.0"},"children":{"Default":{"id":"Default","path":"SmuppyGlobal-staging/MediaBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"SmuppyGlobal-staging/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.236.0"},"children":{"Staging":{"id":"Staging","path":"SmuppyGlobal-staging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.236.0"}},"Role":{"id":"Role","path":"SmuppyGlobal-staging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}},"Handler":{"id":"Handler","path":"SmuppyGlobal-staging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"GlobalWAF":{"id":"GlobalWAF","path":"SmuppyGlobal-staging/GlobalWAF","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"rules":[{"name":"AWSManagedRulesCommonRuleSet","priority":1,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesCommonRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"CommonRuleSet","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesKnownBadInputsRuleSet","priority":2,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesKnownBadInputsRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"KnownBadInputs","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesSQLiRuleSet","priority":3,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesSQLiRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"SQLiRuleSet","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesBotControlRuleSet","priority":4,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesBotControlRuleSet","managedRuleGroupConfigs":[{"awsManagedRulesBotControlRuleSet":{"inspectionLevel":"COMMON"}}]}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"BotControl","sampledRequestsEnabled":true}},{"name":"RateLimitRule","priority":5,"action":{"block":{}},"statement":{"rateBasedStatement":{"limit":2000,"aggregateKeyType":"IP"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"RateLimit","sampledRequestsEnabled":true}},{"name":"GeoBlockRule","priority":6,"action":{"block":{}},"statement":{"geoMatchStatement":{"countryCodes":["KP","IR","SY","CU"]}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"GeoBlock","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesAnonymousIpList","priority":7,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesAnonymousIpList"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"AnonymousIPList","sampledRequestsEnabled":true}},{"name":"AWSManagedRulesAmazonIpReputationList","priority":8,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesAmazonIpReputationList"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"IPReputationList","sampledRequestsEnabled":true}}],"scope":"CLOUDFRONT","visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"SmuppyGlobalWAF","sampledRequestsEnabled":true}}}},"OAI":{"id":"OAI","path":"SmuppyGlobal-staging/OAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/OAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"OAI for Smuppy staging"}}}}}},"APICachePolicy":{"id":"APICachePolicy","path":"SmuppyGlobal-staging/APICachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/APICachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"smuppy-api-cache-staging","comment":"Cache policy for API responses","minTtl":0,"maxTtl":1,"defaultTtl":0,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"whitelist","headers":["Authorization","Origin","Accept"]},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"all"}}}}}}}},"MediaCachePolicy":{"id":"MediaCachePolicy","path":"SmuppyGlobal-staging/MediaCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/MediaCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"smuppy-media-cache-staging","comment":"Cache policy for media files","minTtl":86400,"maxTtl":31536000,"defaultTtl":2592000,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"CDN":{"id":"CDN","path":"SmuppyGlobal-staging/CDN","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.236.0"},"children":{"Origin1":{"id":"Origin1","path":"SmuppyGlobal-staging/CDN/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Origin2":{"id":"Origin2","path":"SmuppyGlobal-staging/CDN/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Origin3":{"id":"Origin3","path":"SmuppyGlobal-staging/CDN/Origin3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Origin4":{"id":"Origin4","path":"SmuppyGlobal-staging/CDN/Origin4","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/CDN/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["MediaBucketBCBB02BA","RegionalDomainName"]},"id":"SmuppyGlobalstagingCDNOrigin1B3FDB7D5","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}},{"domainName":"api.smuppy.com","id":"SmuppyGlobalstagingCDNOrigin2736FBF76","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}},{"domainName":"graphql.smuppy.com","id":"SmuppyGlobalstagingCDNOrigin30860B072","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}},{"domainName":{"Fn::GetAtt":["MediaBucketBCBB02BA","RegionalDomainName"]},"id":"SmuppyGlobalstagingCDNOrigin45BE18C08","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"SmuppyGlobalstagingCDNOrigin1B3FDB7D5","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":{"Ref":"MediaCachePolicy367B1FB9"},"compress":true,"responseHeadersPolicyId":"eaab4381-ed33-4a86-88ca-d9558dc6cd63","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/api/*","targetOriginId":"SmuppyGlobalstagingCDNOrigin2736FBF76","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":{"Ref":"APICachePolicy78B398E1"},"compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","viewerProtocolPolicy":"https-only"},{"pathPattern":"/graphql","targetOriginId":"SmuppyGlobalstagingCDNOrigin30860B072","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":{"Ref":"APICachePolicy78B398E1"},"compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","viewerProtocolPolicy":"https-only"},{"pathPattern":"/media/*","targetOriginId":"SmuppyGlobalstagingCDNOrigin45BE18C08","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":{"Ref":"MediaCachePolicy367B1FB9"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"comment":"Smuppy Global CDN - staging","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":403,"responseCode":404,"responsePagePath":"/404.html"},{"errorCachingMinTtl":300,"errorCode":404,"responseCode":404,"responsePagePath":"/404.html"}],"httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","webAclId":{"Fn::GetAtt":["GlobalWAF","Arn"]}}}}}}},"FeedTable":{"id":"FeedTable","path":"SmuppyGlobal-staging/FeedTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/FeedTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"},{"attributeName":"authorId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"byAuthor","keySchema":[{"attributeName":"authorId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"sseSpecification":{"sseEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"smuppy-feeds-staging","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"SmuppyGlobal-staging/FeedTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"LikesTable":{"id":"LikesTable","path":"SmuppyGlobal-staging/LikesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/LikesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"itemId","attributeType":"S"},{"attributeName":"userId","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"byUser","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"itemId","keyType":"HASH"},{"attributeName":"userId","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"smuppy-likes-staging"}}},"ScalingRole":{"id":"ScalingRole","path":"SmuppyGlobal-staging/LikesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"AnalyticsTable":{"id":"AnalyticsTable","path":"SmuppyGlobal-staging/AnalyticsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/AnalyticsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true},"tableName":"smuppy-analytics-staging","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"SmuppyGlobal-staging/AnalyticsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"SessionsTable":{"id":"SessionsTable","path":"SmuppyGlobal-staging/SessionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/SessionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"sessionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"sessionId","keyType":"HASH"}],"sseSpecification":{"sseEnabled":true},"tableName":"smuppy-sessions-staging","timeToLiveSpecification":{"attributeName":"expiresAt","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"SmuppyGlobal-staging/SessionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"NotificationsTable":{"id":"NotificationsTable","path":"SmuppyGlobal-staging/NotificationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.236.0"},"children":{"Resource":{"id":"Resource","path":"SmuppyGlobal-staging/NotificationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.236.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true},"streamSpecification":{"streamViewType":"NEW_IMAGE"},"tableName":"smuppy-notifications-staging","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"SmuppyGlobal-staging/NotificationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.236.0"}}}},"CDNDomain":{"id":"CDNDomain","path":"SmuppyGlobal-staging/CDNDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDNDistributionId":{"id":"CDNDistributionId","path":"SmuppyGlobal-staging/CDNDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"MediaBucketName":{"id":"MediaBucketName","path":"SmuppyGlobal-staging/MediaBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"FeedTableName":{"id":"FeedTableName","path":"SmuppyGlobal-staging/FeedTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"LikesTableName":{"id":"LikesTableName","path":"SmuppyGlobal-staging/LikesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.236.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SmuppyGlobal-staging/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"SmuppyGlobal-staging/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.236.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SmuppyGlobal-staging/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.236.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SmuppyGlobal-staging/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.236.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}