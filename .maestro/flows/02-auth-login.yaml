# Test: Login Flow
appId: com.nou09.Smuppy
name: "Auth - Login Flow"
tags:
  - auth
  - critical
---

- launchApp:
    clearState: true

# Step 1: Connect to Metro dev server from Expo launcher
- waitForAnimationToEnd:
    timeout: 3000
- tapOn:
    text: "http://localhost:8081"
    optional: true

# Step 2: Wait for JS bundle to load
- waitForAnimationToEnd:
    timeout: 10000

# Step 3: Dismiss Expo dev menu â€” tap X button (top-right of modal)
- tapOn:
    text: "Continue"
    optional: true
- tapOn:
    point: "87%,28%"
    optional: true
- tapOn:
    text: "Go home"
    optional: true
- waitForAnimationToEnd:
    timeout: 5000

# Wait for welcome screen
- extendedWaitUntil:
    visible:
      id: "welcome-screen"
    timeout: 30000

- takeScreenshot: "02-welcome-screen"

# Tap login
- tapOn:
    id: "login-button"

# Wait for login screen
- extendedWaitUntil:
    visible:
      id: "login-screen"
    timeout: 10000

- takeScreenshot: "02-login-screen"

# Enter credentials
- tapOn:
    id: "email-input"
- inputText: "${TEST_EMAIL}"

- tapOn:
    id: "password-input"
- inputText: "${TEST_PASSWORD}"

- takeScreenshot: "02-credentials-entered"

# Submit login
- tapOn:
    id: "submit-login-button"

# Wait for feed
- extendedWaitUntil:
    visible: "Fan"
    timeout: 15000

- takeScreenshot: "02-login-success"
