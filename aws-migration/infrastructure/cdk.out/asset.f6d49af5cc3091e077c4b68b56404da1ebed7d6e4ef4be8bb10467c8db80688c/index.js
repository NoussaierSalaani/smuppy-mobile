var Hq=Object.create;var wc=Object.defineProperty;var zq=Object.getOwnPropertyDescriptor;var Vq=Object.getOwnPropertyNames;var Gq=Object.getPrototypeOf,Qq=Object.prototype.hasOwnProperty;var E=(t,e)=>()=>(t&&(e=t(t=0)),e);var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ot=(t,e)=>{for(var r in e)wc(t,r,{get:e[r],enumerable:!0})},p0=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Vq(e))!Qq.call(t,n)&&n!==r&&wc(t,n,{get:()=>e[n],enumerable:!(s=zq(e,n))||s.enumerable});return t};var v=(t,e,r)=>(r=t!=null?Hq(Gq(t)):{},p0(e||!t||!t.__esModule?wc(r,"default",{value:t,enumerable:!0}):r,t)),J=t=>p0(wc({},"__esModule",{value:!0}),t);var Mp=S(h0=>{"use strict";h0.parse=function(t,e){return new Dp(t,e).parse()};var Dp=class t{constructor(e,r){this.source=e,this.transform=r||Wq,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,s,n;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!n)this.dimension++,this.dimension>1&&(s=new t(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);else if(r.value==="}"&&!n){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(n&&this.newEntry(!0),n=!n):r.value===","&&!n?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function Wq(t){return t}});var Lp=S(($te,m0)=>{var Kq=Mp();m0.exports={create:function(t,e){return{parse:function(){return Kq.parse(t,e)}}}}});var S0=S((jte,y0)=>{"use strict";var Yq=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Xq=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Jq=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,Zq=/^-?infinity$/;y0.exports=function(e){if(Zq.test(e))return Number(e.replace("i","I"));var r=Yq.exec(e);if(!r)return eB(e)||null;var s=!!r[8],n=parseInt(r[1],10);s&&(n=g0(n));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),d=r[7];d=d?1e3*parseFloat(d):0;var l,h=tB(e);return h!=null?(l=new Date(Date.UTC(n,i,o,a,c,u,d)),Fp(n)&&l.setUTCFullYear(n),h!==0&&l.setTime(l.getTime()-h)):(l=new Date(n,i,o,a,c,u,d),Fp(n)&&l.setFullYear(n)),l};function eB(t){var e=Xq.exec(t);if(e){var r=parseInt(e[1],10),s=!!e[4];s&&(r=g0(r));var n=parseInt(e[2],10)-1,i=e[3],o=new Date(r,n,i);return Fp(r)&&o.setFullYear(r),o}}function tB(t){if(t.endsWith("+00"))return 0;var e=Jq.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var s=r==="-"?-1:1,n=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return n*s*1e3}}function g0(t){return-(t-1)}function Fp(t){return t>=0&&t<100}});var E0=S((Hte,b0)=>{b0.exports=sB;var rB=Object.prototype.hasOwnProperty;function sB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)rB.call(r,s)&&(t[s]=r[s])}return t}});var v0=S((zte,w0)=>{"use strict";var nB=E0();w0.exports=Yn;function Yn(t){if(!(this instanceof Yn))return new Yn(t);nB(this,gB(t))}var iB=["seconds","minutes","hours","days","months","years"];Yn.prototype.toPostgres=function(){var t=iB.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var oB={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},aB=["years","months","days"],cB=["hours","minutes","seconds"];Yn.prototype.toISOString=Yn.prototype.toISO=function(){var t=aB.map(r,this).join(""),e=cB.map(r,this).join("");return"P"+t+"T"+e;function r(s){var n=this[s]||0;return s==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),n+oB[s]}};var qp="([+-]?\\d+)",uB=qp+"\\s+years?",lB=qp+"\\s+mons?",dB=qp+"\\s+days?",fB="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",pB=new RegExp([uB,lB,dB,fB].map(function(t){return"("+t+")?"}).join("\\s*")),_0={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},hB=["hours","minutes","seconds","milliseconds"];function mB(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function gB(t){if(!t)return{};var e=pB.exec(t),r=e[8]==="-";return Object.keys(_0).reduce(function(s,n){var i=_0[n],o=e[i];return!o||(o=n==="milliseconds"?mB(o):parseInt(o,10),!o)||(r&&~hB.indexOf(n)&&(o*=-1),s[n]=o),s},{})}});var T0=S((Vte,R0)=>{"use strict";var C0=Buffer.from||Buffer;R0.exports=function(e){if(/^\\x/.test(e))return C0(e.substr(2),"hex");for(var r="",s=0;s<e.length;)if(e[s]!=="\\")r+=e[s],++s;else if(/[0-7]{3}/.test(e.substr(s+1,3)))r+=String.fromCharCode(parseInt(e.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<e.length&&e[s+n]==="\\";)n++;for(var i=0;i<Math.floor(n/2);++i)r+="\\";s+=Math.floor(n/2)*2}return C0(r,"binary")}});var N0=S((Gte,O0)=>{var Ro=Mp(),To=Lp(),vc=S0(),A0=v0(),P0=T0();function Cc(t){return function(r){return r===null?r:t(r)}}function I0(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function yB(t){return t?Ro.parse(t,I0):null}function SB(t){return parseInt(t,10)}function Bp(t){return t?Ro.parse(t,Cc(SB)):null}function bB(t){return t?Ro.parse(t,Cc(function(e){return k0(e).trim()})):null}var EB=function(t){if(!t)return null;var e=To.create(t,function(r){return r!==null&&(r=Hp(r)),r});return e.parse()},Up=function(t){if(!t)return null;var e=To.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},Ft=function(t){if(!t)return null;var e=To.create(t);return e.parse()},$p=function(t){if(!t)return null;var e=To.create(t,function(r){return r!==null&&(r=vc(r)),r});return e.parse()},_B=function(t){if(!t)return null;var e=To.create(t,function(r){return r!==null&&(r=A0(r)),r});return e.parse()},wB=function(t){return t?Ro.parse(t,Cc(P0)):null},jp=function(t){return parseInt(t,10)},k0=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},x0=function(t){return t?Ro.parse(t,Cc(JSON.parse)):null},Hp=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},vB=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",s=!1,n=2;n<t.length-1;n++){if(s||(e+=t[n]),t[n]===")"){s=!0;continue}else if(!s)continue;t[n]!==","&&(r+=t[n])}var i=Hp(e);return i.radius=parseFloat(r),i},CB=function(t){t(20,k0),t(21,jp),t(23,jp),t(26,jp),t(700,parseFloat),t(701,parseFloat),t(16,I0),t(1082,vc),t(1114,vc),t(1184,vc),t(600,Hp),t(651,Ft),t(718,vB),t(1e3,yB),t(1001,wB),t(1005,Bp),t(1007,Bp),t(1028,Bp),t(1016,bB),t(1017,EB),t(1021,Up),t(1022,Up),t(1231,Up),t(1014,Ft),t(1015,Ft),t(1008,Ft),t(1009,Ft),t(1040,Ft),t(1041,Ft),t(1115,$p),t(1182,$p),t(1185,$p),t(1186,A0),t(1187,_B),t(17,P0),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,x0),t(3807,x0),t(3907,Ft),t(2951,Ft),t(791,Ft),t(1183,Ft),t(1270,Ft)};O0.exports={init:CB}});var M0=S((Qte,D0)=>{"use strict";var bt=1e6;function RB(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),s="";e<0&&(e=~e+(r===0),r=~r+1>>>0,s="-");var n="",i,o,a,c,u,d;{if(i=e%bt,e=e/bt>>>0,o=4294967296*i+r,r=o/bt>>>0,a=""+(o-bt*r),r===0&&e===0)return s+a+n;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";n=c+a+n}{if(i=e%bt,e=e/bt>>>0,o=4294967296*i+r,r=o/bt>>>0,a=""+(o-bt*r),r===0&&e===0)return s+a+n;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";n=c+a+n}{if(i=e%bt,e=e/bt>>>0,o=4294967296*i+r,r=o/bt>>>0,a=""+(o-bt*r),r===0&&e===0)return s+a+n;for(c="",u=6-a.length,d=0;d<u;d++)c+="0";n=c+a+n}return i=e%bt,o=4294967296*i+r,a=""+o%bt,s+a+n}D0.exports=RB});var U0=S((Wte,B0)=>{var TB=M0(),_e=function(t,e,r,s,n){r=r||0,s=s||!1,n=n||function(m,g,w){return m*Math.pow(2,w)+g};var i=r>>3,o=function(m){return s?~m&255:m},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=n(0,o(t[i])&a,c));for(var d=e+r>>3,l=i+1;l<d;l++)u=n(u,o(t[l]),8);var h=(e+r)%8;return h>0&&(u=n(u,o(t[d])>>8-h,h)),u},q0=function(t,e,r){var s=Math.pow(2,r-1)-1,n=_e(t,1),i=_e(t,r,1);if(i===0)return 0;var o=1,a=function(u,d,l){u===0&&(u=1);for(var h=1;h<=l;h++)o/=2,(d&1<<l-h)>0&&(u+=o);return u},c=_e(t,e,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?n===0?1/0:-1/0:NaN:(n===0?1:-1)*Math.pow(2,i-s)*c},xB=function(t){return _e(t,1)==1?-1*(_e(t,15,1,!0)+1):_e(t,15,1)},L0=function(t){return _e(t,1)==1?-1*(_e(t,31,1,!0)+1):_e(t,31,1)},AB=function(t){return q0(t,23,8)},PB=function(t){return q0(t,52,11)},IB=function(t){var e=_e(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,_e(t,16,16)),s=0,n=[],i=_e(t,16),o=0;o<i;o++)s+=_e(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,_e(t,16,48));return(e===0?1:-1)*Math.round(s*a)/a},F0=function(t,e){var r=_e(e,1),s=_e(e,63,1),n=new Date((r===0?1:-1)*s/1e3+9466848e5);return t||n.setTime(n.getTime()+n.getTimezoneOffset()*6e4),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(i){this.usec=i},n.getUTCMicroSeconds=function(){return this.usec},n},xo=function(t){for(var e=_e(t,32),r=_e(t,32,32),s=_e(t,32,64),n=96,i=[],o=0;o<e;o++)i[o]=_e(t,32,n),n+=32,n+=32;var a=function(u){var d=_e(t,32,n);if(n+=32,d==4294967295)return null;var l;if(u==23||u==20)return l=_e(t,d*8,n),n+=d*8,l;if(u==25)return l=t.toString(this.encoding,n>>3,(n+=d<<3)>>3),l;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,d){var l=[],h;if(u.length>1){var m=u.shift();for(h=0;h<m;h++)l[h]=c(u,d);u.unshift(m)}else for(h=0;h<u[0];h++)l[h]=a(d);return l};return c(i,s)},kB=function(t){return t.toString("utf8")},OB=function(t){return t===null?null:_e(t,8)>0},NB=function(t){t(20,TB),t(21,xB),t(23,L0),t(26,L0),t(1700,IB),t(700,AB),t(701,PB),t(16,OB),t(1114,F0.bind(null,!1)),t(1184,F0.bind(null,!0)),t(1e3,xo),t(1007,xo),t(1016,xo),t(1008,xo),t(1009,xo),t(25,kB)};B0.exports={init:NB}});var j0=S((Kte,$0)=>{$0.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Io=S(Po=>{var DB=N0(),MB=U0(),LB=Lp(),FB=j0();Po.getTypeParser=qB;Po.setTypeParser=BB;Po.arrayParser=LB;Po.builtins=FB;var Ao={text:{},binary:{}};function H0(t){return String(t)}function qB(t,e){return e=e||"text",Ao[e]&&Ao[e][t]||H0}function BB(t,e,r){typeof e=="function"&&(r=e,e="text"),Ao[e][t]=r}DB.init(function(t,e){Ao.text[t]=e});MB.init(function(t,e){Ao.binary[t]=e})});var ko=S((Xte,zp)=>{"use strict";var z0;try{z0=process.platform==="win32"?process.env.USERNAME:process.env.USER}catch{}zp.exports={host:"localhost",user:z0,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Xn=Io(),UB=Xn.getTypeParser(20,"text"),$B=Xn.getTypeParser(1016,"text");zp.exports.__defineSetter__("parseInt8",function(t){Xn.setTypeParser(20,"text",t?Xn.getTypeParser(23,"text"):UB),Xn.setTypeParser(1016,"text",t?Xn.getTypeParser(1007,"text"):$B)})});var Jn=S((Jte,Q0)=>{"use strict";var jB=ko(),V0=require("util"),{isDate:HB}=V0.types||V0;function zB(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function G0(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+G0(t[r]);else if(ArrayBuffer.isView(t[r])){let s=t[r];if(!(s instanceof Buffer)){let n=Buffer.from(s.buffer,s.byteOffset,s.byteLength);n.length===s.byteLength?s=n:s=n.slice(s.byteOffset,s.byteOffset+s.byteLength)}e+="\\\\x"+s.toString("hex")}else e+=zB(Rc(t[r]));return e=e+"}",e}var Rc=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return HB(t)?jB.parseInputDatesAsUTC?QB(t):GB(t):Array.isArray(t)?G0(t):VB(t,e)}return t.toString()};function VB(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Rc(t.toPostgres(Rc),e)}return JSON.stringify(t)}function GB(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),s=r<1;s&&(r=Math.abs(r)+1);let n=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(n+="-",e*=-1):n+="+",n+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),s&&(n+=" BC"),n}function QB(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let s=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return s+="+00:00",r&&(s+=" BC"),s}function WB(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var KB=function(t){return'"'+t.replace(/"/g,'""')+'"'},YB=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let s=0;s<t.length;s++){let n=t[s];n==="'"?r+=n+n:n==="\\"?(r+=n+n,e=!0):r+=n}return r+="'",e===!0&&(r=" E"+r),r};Q0.exports={prepareValue:function(e){return Rc(e)},normalizeQueryConfig:WB,escapeIdentifier:KB,escapeLiteral:YB}});var K0=S((Zte,W0)=>{"use strict";var Zn=require("crypto");function Vp(t){return Zn.createHash("md5").update(t,"utf-8").digest("hex")}function XB(t,e,r){let s=Vp(e+t);return"md5"+Vp(Buffer.concat([Buffer.from(s),r]))}function JB(t){return Zn.createHash("sha256").update(t).digest()}function ZB(t,e){return t=t.replace(/(\D)-/,"$1"),Zn.createHash(t).update(e).digest()}function eU(t,e){return Zn.createHmac("sha256",t).update(e).digest()}async function tU(t,e,r){return Zn.pbkdf2Sync(t,e,r,32,"sha256")}W0.exports={postgresMd5PasswordHash:XB,randomBytes:Zn.randomBytes,deriveKey:tU,sha256:JB,hashByName:ZB,hmacSha256:eU,md5:Vp}});var Z0=S((ere,J0)=>{var Y0=require("crypto");J0.exports={postgresMd5PasswordHash:sU,randomBytes:rU,deriveKey:aU,sha256:nU,hashByName:iU,hmacSha256:oU,md5:Gp};var X0=Y0.webcrypto||globalThis.crypto,un=X0.subtle,Qp=new TextEncoder;function rU(t){return X0.getRandomValues(Buffer.alloc(t))}async function Gp(t){try{return Y0.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?Qp.encode(t):t,s=await un.digest("MD5",r);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}}async function sU(t,e,r){let s=await Gp(e+t);return"md5"+await Gp(Buffer.concat([Buffer.from(s),r]))}async function nU(t){return await un.digest("SHA-256",t)}async function iU(t,e){return await un.digest(t,e)}async function oU(t,e){let r=await un.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await un.sign("HMAC",r,Qp.encode(e))}async function aU(t,e,r){let s=await un.importKey("raw",Qp.encode(t),"PBKDF2",!1,["deriveBits"]),n={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await un.deriveBits(n,s,256,["deriveBits"])}});var Kp=S((tre,Wp)=>{"use strict";var cU=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;cU?Wp.exports=K0():Wp.exports=Z0()});var r_=S((rre,t_)=>{function ln(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function Yp(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let s=r&127;if(s>4)throw ln("bad length",t);r=0;for(let n=0;n<s;n++)r=r<<8|t[e++];return{length:r,index:e}}function e_(t,e){if(t[e++]!==6)throw ln("non-OID data",t);let{length:r,index:s}=Yp(t,e);e=s;let n=e+r,i=t[e++],o=(i/40>>0)+"."+i%40;for(;e<n;){let a=0;for(;e<n;){let c=t[e++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:e}}function Oo(t,e){if(t[e++]!==48)throw ln("non-sequence data",t);return Yp(t,e)}function uU(t,e){e===void 0&&(e=0),e=Oo(t,e).index;let{length:r,index:s}=Oo(t,e);e=s+r,e=Oo(t,e).index;let{oid:n,index:i}=e_(t,e);switch(n){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=i,e=Oo(t,e).index,t[e++]!==160)throw ln("non-tag data",t);e=Yp(t,e).index,e=Oo(t,e).index;let{oid:o}=e_(t,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw ln("unknown hash OID "+o,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw ln("Ed448 certificate channel binding is not currently supported by Postgres")}throw ln("unknown OID "+n,t)}t_.exports={signatureAlgorithmHashFromCertificate:uU}});var o_=S((sre,i_)=>{"use strict";var ns=Kp(),{signatureAlgorithmHashFromCertificate:lU}=r_();function dU(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let s=r.find(o=>t.includes(o));if(!s)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(s==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let n=ns.randomBytes(18).toString("base64");return{mechanism:s,clientNonce:n,response:(s==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+n,message:"SASLInitialResponse"}}async function fU(t,e,r,s){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=mU(r);if(n.nonce.startsWith(t.clientNonce)){if(n.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+t.clientNonce,o="r="+n.nonce+",s="+n.salt+",i="+n.iteration,a=s?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let P=s.getPeerCertificate().raw,D=lU(P);(D==="MD5"||D==="SHA-1")&&(D="SHA-256");let M=await ns.hashByName(D,P);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(M)]).toString("base64")}let c="c="+a+",r="+n.nonce,u=i+","+o+","+c,d=Buffer.from(n.salt,"base64"),l=await ns.deriveKey(e,d,n.iteration),h=await ns.hmacSha256(l,"Client Key"),m=await ns.sha256(h),g=await ns.hmacSha256(m,u),w=yU(Buffer.from(h),Buffer.from(g)).toString("base64"),R=await ns.hmacSha256(l,"Server Key"),x=await ns.hmacSha256(R,u);t.message="SASLResponse",t.serverSignature=Buffer.from(x).toString("base64"),t.response=c+",p="+w}function pU(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=gU(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function hU(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function s_(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function n_(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],s=e.substring(2);return[r,s]}))}function mU(t){let e=n_(t),r=e.get("r");if(r){if(!hU(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let s=e.get("s");if(s){if(!s_(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let n=e.get("i");if(n){if(!/^[1-9][0-9]*$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(n,10);return{nonce:r,salt:s,iteration:i}}function gU(t){let r=n_(t).get("v");if(r){if(!s_(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function yU(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,s)=>t[s]^e[s]))}i_.exports={startSession:dU,continueSession:fU,finalizeSession:pU}});var xc=S((nre,a_)=>{"use strict";var SU=Io();function Tc(t){this._types=t||SU,this.text={},this.binary={}}Tc.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Tc.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Tc.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};a_.exports=Tc});var l_=S((ire,u_)=>{"use strict";var{emitWarning:bU}=require("process");function ei(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},s,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{s=new URL(t,"postgres://base")}catch{s=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),n=!0}}catch(c){throw c.input&&(c.input="*****REDACTED*****"),c}for(let c of s.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(s.username),r.password=r.password||decodeURIComponent(s.password),s.protocol=="socket:")return r.host=decodeURI(s.pathname),r.database=s.searchParams.get("db"),r.client_encoding=s.searchParams.get("encoding"),r;let i=n?"":s.hostname;r.host?i&&/^%2f/i.test(i)&&(s.pathname=i+s.pathname):r.host=decodeURIComponent(i),r.port||(r.port=s.port);let o=s.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":{r.sslmode!=="verify-full"&&Xp(r.sslmode);break}case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function EU(t){return Object.entries(t).reduce((r,[s,n])=>(n!=null&&(r[s]=n),r),{})}function c_(t){return Object.entries(t).reduce((r,[s,n])=>{if(s==="ssl"){let i=n;typeof i=="boolean"&&(r[s]=i),typeof i=="object"&&(r[s]=EU(i))}else if(n!=null)if(s==="port"){if(n!==""){let i=parseInt(n,10);if(isNaN(i))throw new Error(`Invalid ${s}: ${n}`);r[s]=i}}else r[s]=n;return r},{})}function _U(t){return c_(ei(t))}function Xp(t){Xp.warned||(Xp.warned=!0,bU(`SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=${t}'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.`))}u_.exports=ei;ei.parse=ei;ei.toClientConfig=c_;ei.parseIntoClientConfig=_U});var Zp=S((ore,p_)=>{"use strict";var wU=require("dns"),f_=ko(),d_=l_().parse,at=function(t,e,r){return e[t]?e[t]:(r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),r||f_[t])},vU=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return f_.ssl},ti=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},qt=function(t,e,r){let s=e[r];s!=null&&t.push(r+"="+ti(s))},Jp=class{constructor(e){e=typeof e=="string"?d_(e):e||{},e.connectionString&&(e=Object.assign({},e,d_(e.connectionString))),this.user=at("user",e),this.database=at("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(at("port",e),10),this.host=at("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:at("password",e)}),this.binary=at("binary",e),this.options=at("options",e),this.ssl=typeof e.ssl>"u"?vU():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=at("client_encoding",e),this.replication=at("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=at("application_name",e,"PGAPPNAME"),this.fallback_application_name=at("fallback_application_name",e,!1),this.statement_timeout=at("statement_timeout",e,!1),this.lock_timeout=at("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=at("idle_in_transaction_session_timeout",e,!1),this.query_timeout=at("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];qt(r,this,"user"),qt(r,this,"password"),qt(r,this,"port"),qt(r,this,"application_name"),qt(r,this,"fallback_application_name"),qt(r,this,"connect_timeout"),qt(r,this,"options");let s=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(qt(r,s,"sslmode"),qt(r,s,"sslca"),qt(r,s,"sslkey"),qt(r,s,"sslcert"),qt(r,s,"sslrootcert"),this.database&&r.push("dbname="+ti(this.database)),this.replication&&r.push("replication="+ti(this.replication)),this.host&&r.push("host="+ti(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+ti(this.client_encoding)),wU.lookup(this.host,function(n,i){return n?e(n,null):(r.push("hostaddr="+ti(i)),e(null,r.join(" ")))})}};p_.exports=Jp});var th=S((are,m_)=>{"use strict";var CU=Io(),h_=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,eh=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=h_.exec(e.text):r=h_.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let s=0,n=e.length;s<n;s++){let i=e[s];i!==null?r[s]=this._parsers[s](i):r[s]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let s=0,n=e.length;s<n;s++){let i=e[s],o=this.fields[s].name;if(i!==null){let a=this.fields[s].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[s](a)}else r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let s=0;s<e.length;s++){let n=e[s];r[n.name]=null,this._types?this._parsers[s]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[s]=CU.getTypeParser(n.dataTypeID,n.format||"text")}this._prebuiltEmptyResultObject={...r}}};m_.exports=eh});var b_=S((cre,S_)=>{"use strict";var{EventEmitter:RU}=require("events"),g_=th(),y_=Jn(),rh=class extends RU{constructor(e,r,s){super(),e=y_.normalizeQueryConfig(e,r,s),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new g_(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new g_(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(s){this._canceledDueToError=s;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:y_.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};S_.exports=rh});var yh=S(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.NoticeMessage=U.DataRowMessage=U.CommandCompleteMessage=U.ReadyForQueryMessage=U.NotificationResponseMessage=U.BackendKeyDataMessage=U.AuthenticationMD5Password=U.ParameterStatusMessage=U.ParameterDescriptionMessage=U.RowDescriptionMessage=U.Field=U.CopyResponse=U.CopyDataMessage=U.DatabaseError=U.copyDone=U.emptyQuery=U.replicationStart=U.portalSuspended=U.noData=U.closeComplete=U.bindComplete=U.parseComplete=void 0;U.parseComplete={name:"parseComplete",length:5};U.bindComplete={name:"bindComplete",length:5};U.closeComplete={name:"closeComplete",length:5};U.noData={name:"noData",length:5};U.portalSuspended={name:"portalSuspended",length:5};U.replicationStart={name:"replicationStart",length:4};U.emptyQuery={name:"emptyQuery",length:4};U.copyDone={name:"copyDone",length:4};var sh=class extends Error{constructor(e,r,s){super(e),this.length=r,this.name=s}};U.DatabaseError=sh;var nh=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};U.CopyDataMessage=nh;var ih=class{constructor(e,r,s,n){this.length=e,this.name=r,this.binary=s,this.columnTypes=new Array(n)}};U.CopyResponse=ih;var oh=class{constructor(e,r,s,n,i,o,a){this.name=e,this.tableID=r,this.columnID=s,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};U.Field=oh;var ah=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};U.RowDescriptionMessage=ah;var ch=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};U.ParameterDescriptionMessage=ch;var uh=class{constructor(e,r,s){this.length=e,this.parameterName=r,this.parameterValue=s,this.name="parameterStatus"}};U.ParameterStatusMessage=uh;var lh=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};U.AuthenticationMD5Password=lh;var dh=class{constructor(e,r,s){this.length=e,this.processID=r,this.secretKey=s,this.name="backendKeyData"}};U.BackendKeyDataMessage=dh;var fh=class{constructor(e,r,s,n){this.length=e,this.processId=r,this.channel=s,this.payload=n,this.name="notification"}};U.NotificationResponseMessage=fh;var ph=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};U.ReadyForQueryMessage=ph;var hh=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};U.CommandCompleteMessage=hh;var mh=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};U.DataRowMessage=mh;var gh=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};U.NoticeMessage=gh});var E_=S(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.Writer=void 0;var Sh=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let s=this.buffer,n=s.length+(s.length>>1)+e;this.buffer=Buffer.allocUnsafe(n),s.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Ac.Writer=Sh});var w_=S(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.serialize=void 0;var bh=E_(),ye=new bh.Writer,TU=t=>{ye.addInt16(3).addInt16(0);for(let s of Object.keys(t))ye.addCString(s).addCString(t[s]);ye.addCString("client_encoding").addCString("UTF8");let e=ye.addCString("").flush(),r=e.length+4;return new bh.Writer().addInt32(r).add(e).flush()},xU=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},AU=t=>ye.addCString(t).flush(112),PU=function(t,e){return ye.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),ye.flush(112)},IU=function(t){return ye.addString(t).flush(112)},kU=t=>ye.addCString(t).flush(81),__=[],OU=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||__,s=r.length,n=ye.addCString(e).addCString(t.text).addInt16(s);for(let i=0;i<s;i++)n.addInt32(r[i]);return ye.flush(80)},ri=new bh.Writer,NU=function(t,e){for(let r=0;r<t.length;r++){let s=e?e(t[r],r):t[r];s==null?(ye.addInt16(0),ri.addInt32(-1)):s instanceof Buffer?(ye.addInt16(1),ri.addInt32(s.length),ri.add(s)):(ye.addInt16(0),ri.addInt32(Buffer.byteLength(s)),ri.addString(s))}},DU=(t={})=>{let e=t.portal||"",r=t.statement||"",s=t.binary||!1,n=t.values||__,i=n.length;return ye.addCString(e).addCString(r),ye.addInt16(i),NU(n,t.valueMapper),ye.addInt16(i),ye.add(ri.flush()),ye.addInt16(1),ye.addInt16(s?1:0),ye.flush(66)},MU=Buffer.from([69,0,0,0,9,0,0,0,0,0]),LU=t=>{if(!t||!t.portal&&!t.rows)return MU;let e=t.portal||"",r=t.rows||0,s=Buffer.byteLength(e),n=4+s+1+4,i=Buffer.allocUnsafe(1+n);return i[0]=69,i.writeInt32BE(n,1),i.write(e,5,"utf-8"),i[s+5]=0,i.writeUInt32BE(r,i.length-4),i},FU=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},Eh=(t,e)=>{let s=4+Buffer.byteLength(e)+1,n=Buffer.allocUnsafe(1+s);return n[0]=t,n.writeInt32BE(s,1),n.write(e,5,"utf-8"),n[s]=0,n},qU=ye.addCString("P").flush(68),BU=ye.addCString("S").flush(68),UU=t=>t.name?Eh(68,`${t.type}${t.name||""}`):t.type==="P"?qU:BU,$U=t=>{let e=`${t.type}${t.name||""}`;return Eh(67,e)},jU=t=>ye.add(t).flush(100),HU=t=>Eh(102,t),Pc=t=>Buffer.from([t,0,0,0,4]),zU=Pc(72),VU=Pc(83),GU=Pc(88),QU=Pc(99),WU={startup:TU,password:AU,requestSsl:xU,sendSASLInitialResponseMessage:PU,sendSCRAMClientFinalMessage:IU,query:kU,parse:OU,bind:DU,execute:LU,describe:UU,close:$U,flush:()=>zU,sync:()=>VU,end:()=>GU,copyData:jU,copyDone:()=>QU,copyFail:HU,cancel:FU};Ic.serialize=WU});var v_=S(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.BufferReader=void 0;var KU=Buffer.allocUnsafe(0),_h=class{constructor(e=0){this.offset=e,this.buffer=KU,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};kc.BufferReader=_h});var x_=S(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.Parser=void 0;var we=yh(),YU=v_(),vh=1,XU=4,C_=vh+XU,At=-1,wh=Buffer.allocUnsafe(0),Ch=class{constructor(e){if(this.buffer=wh,this.bufferLength=0,this.bufferOffset=0,this.reader=new YU.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let s=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+C_<=s;){let i=this.buffer[n],o=this.buffer.readUInt32BE(n+vh),a=vh+o;if(a+n<=s){let c=this.handlePacket(n+C_,i,o,this.buffer);r(c),n+=a}else break}n===s?(this.buffer=wh,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let n;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)n=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;n=Buffer.allocUnsafe(i)}this.buffer.copy(n,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=n,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,s,n){let{reader:i}=this;i.setBuffer(e,n);let o;switch(r){case 50:o=we.bindComplete;break;case 49:o=we.parseComplete;break;case 51:o=we.closeComplete;break;case 110:o=we.noData;break;case 115:o=we.portalSuspended;break;case 99:o=we.copyDone;break;case 87:o=we.replicationStart;break;case 73:o=we.emptyQuery;break;case 68:o=a$(i);break;case 67:o=ZU(i);break;case 90:o=JU(i);break;case 65:o=s$(i);break;case 82:o=l$(i,s);break;case 83:o=c$(i);break;case 75:o=u$(i);break;case 69:o=R_(i,"error");break;case 78:o=R_(i,"notice");break;case 84:o=n$(i);break;case 116:o=o$(i);break;case 71:o=t$(i);break;case 72:o=r$(i);break;case 100:o=e$(i,s);break;default:return new we.DatabaseError("received invalid response: "+r.toString(16),s,"error")}return i.setBuffer(0,wh),o.length=s,o}};Oc.Parser=Ch;var JU=t=>{let e=t.string(1);return new we.ReadyForQueryMessage(At,e)},ZU=t=>{let e=t.cstring();return new we.CommandCompleteMessage(At,e)},e$=(t,e)=>{let r=t.bytes(e-4);return new we.CopyDataMessage(At,r)},t$=t=>T_(t,"copyInResponse"),r$=t=>T_(t,"copyOutResponse"),T_=(t,e)=>{let r=t.byte()!==0,s=t.int16(),n=new we.CopyResponse(At,e,r,s);for(let i=0;i<s;i++)n.columnTypes[i]=t.int16();return n},s$=t=>{let e=t.int32(),r=t.cstring(),s=t.cstring();return new we.NotificationResponseMessage(At,e,r,s)},n$=t=>{let e=t.int16(),r=new we.RowDescriptionMessage(At,e);for(let s=0;s<e;s++)r.fields[s]=i$(t);return r},i$=t=>{let e=t.cstring(),r=t.uint32(),s=t.int16(),n=t.uint32(),i=t.int16(),o=t.int32(),a=t.int16()===0?"text":"binary";return new we.Field(e,r,s,n,i,o,a)},o$=t=>{let e=t.int16(),r=new we.ParameterDescriptionMessage(At,e);for(let s=0;s<e;s++)r.dataTypeIDs[s]=t.int32();return r},a$=t=>{let e=t.int16(),r=new Array(e);for(let s=0;s<e;s++){let n=t.int32();r[s]=n===-1?null:t.string(n)}return new we.DataRowMessage(At,r)},c$=t=>{let e=t.cstring(),r=t.cstring();return new we.ParameterStatusMessage(At,e,r)},u$=t=>{let e=t.int32(),r=t.int32();return new we.BackendKeyDataMessage(At,e,r)},l$=(t,e)=>{let r=t.int32(),s={name:"authenticationOk",length:e};switch(r){case 0:break;case 3:s.length===8&&(s.name="authenticationCleartextPassword");break;case 5:if(s.length===12){s.name="authenticationMD5Password";let n=t.bytes(4);return new we.AuthenticationMD5Password(At,n)}break;case 10:{s.name="authenticationSASL",s.mechanisms=[];let n;do n=t.cstring(),n&&s.mechanisms.push(n);while(n)}break;case 11:s.name="authenticationSASLContinue",s.data=t.string(e-8);break;case 12:s.name="authenticationSASLFinal",s.data=t.string(e-8);break;default:throw new Error("Unknown authenticationOk message type "+r)}return s},R_=(t,e)=>{let r={},s=t.string(1);for(;s!=="\0";)r[s]=t.cstring(),s=t.string(1);let n=r.M,i=e==="notice"?new we.NoticeMessage(At,n):new we.DatabaseError(n,At,e);return i.severity=r.S,i.code=r.C,i.detail=r.D,i.hint=r.H,i.position=r.P,i.internalPosition=r.p,i.internalQuery=r.q,i.where=r.W,i.schema=r.s,i.table=r.t,i.column=r.c,i.dataType=r.d,i.constraint=r.n,i.file=r.F,i.line=r.L,i.routine=r.R,i}});var Rh=S(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.DatabaseError=is.serialize=is.parse=void 0;var d$=yh();Object.defineProperty(is,"DatabaseError",{enumerable:!0,get:function(){return d$.DatabaseError}});var f$=w_();Object.defineProperty(is,"serialize",{enumerable:!0,get:function(){return f$.serialize}});var p$=x_();function h$(t,e){let r=new p$.Parser;return t.on("data",s=>r.parse(s,e)),new Promise(s=>t.on("end",()=>s()))}is.parse=h$});var A_=S(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.default={}});var I_=S((gre,P_)=>{var{getStream:m$,getSecureStream:g$}=E$();P_.exports={getStream:m$,getSecureStream:g$};function y$(){function t(r){let s=require("net");return new s.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function S$(){function t(r){let{CloudflareSocket:s}=A_();return new s(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function b$(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function E$(){return b$()?S$():y$()}});var Ah=S((yre,k_)=>{"use strict";var _$=require("events").EventEmitter,{parse:w$,serialize:De}=Rh(),{getStream:v$,getSecureStream:C$}=I_(),R$=De.flush(),T$=De.sync(),x$=De.end(),xh=class extends _${constructor(e){super(),e=e||{},this.stream=e.stream||v$(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(s){s==="message"&&(r._emitMessage=!0)})}connect(e,r){let s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")});let n=function(i){s._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||s.emit("error",i)};if(this.stream.on("error",n),this.stream.on("close",function(){s.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:s.stream};s.ssl!==!0&&(Object.assign(a,s.ssl),"key"in s.ssl&&(a.key=s.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{s.stream=C$(a)}catch(u){return s.emit("error",u)}s.attachListeners(s.stream),s.stream.on("error",n),s.emit("sslconnect")})}attachListeners(e){w$(e,r=>{let s=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(s,r)})}requestSsl(){this.stream.write(De.requestSsl())}startup(e){this.stream.write(De.startup(e))}cancel(e,r){this._send(De.cancel(e,r))}password(e){this._send(De.password(e))}sendSASLInitialResponseMessage(e,r){this._send(De.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(De.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(De.query(e))}parse(e){this._send(De.parse(e))}bind(e){this._send(De.bind(e))}execute(e){this._send(De.execute(e))}flush(){this.stream.writable&&this.stream.write(R$)}sync(){this._ending=!0,this._send(T$)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(x$,()=>{this.stream.end()})}close(e){this._send(De.close(e))}describe(e){this._send(De.describe(e))}sendCopyFromChunk(e){this._send(De.copyData(e))}endCopyFrom(){this._send(De.copyDone())}sendCopyFail(e){this._send(De.copyFail(e))}};k_.exports=xh});var M_=S((Sre,D_)=>{"use strict";var{Transform:A$}=require("stream"),{StringDecoder:P$}=require("string_decoder"),os=Symbol("last"),Nc=Symbol("decoder");function I$(t,e,r){let s;if(this.overflow){if(s=this[Nc].write(t).split(this.matcher),s.length===1)return r();s.shift(),this.overflow=!1}else this[os]+=this[Nc].write(t),s=this[os].split(this.matcher);this[os]=s.pop();for(let n=0;n<s.length;n++)try{N_(this,this.mapper(s[n]))}catch(i){return r(i)}if(this.overflow=this[os].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function k$(t){if(this[os]+=this[Nc].end(),this[os])try{N_(this,this.mapper(this[os]))}catch(e){return t(e)}t()}function N_(t,e){e!==void 0&&t.push(e)}function O_(t){return t}function O$(t,e,r){switch(t=t||/\r?\n/,e=e||O_,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=O_)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=I$,r.flush=k$,r.readableObjectMode=!0;let s=new A$(r);return s[os]="",s[Nc]=new P$("utf8"),s.matcher=t,s.mapper=e,s.maxLength=r.maxLength,s.skipOverflow=r.skipOverflow||!1,s.overflow=!1,s._destroy=function(n,i){this._writableState.errorEmitted=!1,i(n)},s}D_.exports=O$});var q_=S((bre,kr)=>{"use strict";var L_=require("path"),N$=require("stream").Stream,D$=M_(),F_=require("util"),M$=5432,Dc=process.platform==="win32",No=process.stderr,L$=56,F$=7,q$=61440,B$=32768;function U$(t){return(t&q$)==B$}var si=["host","port","database","user","password"],Ph=si.length,$$=si[Ph-1];function Ih(){var t=No instanceof N$&&No.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);No.write(F_.format.apply(F_,e))}}Object.defineProperty(kr.exports,"isWin",{get:function(){return Dc},set:function(t){Dc=t}});kr.exports.warnTo=function(t){var e=No;return No=t,e};kr.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(Dc?L_.join(e.APPDATA||"./","postgresql","pgpass.conf"):L_.join(e.HOME||"./",".pgpass"));return r};kr.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Dc?!0:(e=e||"<unkn>",U$(t.mode)?t.mode&(L$|F$)?(Ih('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Ih('WARNING: password file "%s" is not a plain file',e),!1))};var j$=kr.exports.match=function(t,e){return si.slice(0,-1).reduce(function(r,s,n){return n==1&&Number(t[s]||M$)===Number(e[s])?r&&!0:r&&(e[s]==="*"||e[s]===t[s])},!0)};kr.exports.getPassword=function(t,e,r){var s,n=e.pipe(D$());function i(c){var u=H$(c);u&&z$(u)&&j$(t,u)&&(s=u[$$],n.end())}var o=function(){e.destroy(),r(s)},a=function(c){e.destroy(),Ih("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),n.on("data",i).on("end",o).on("error",a)};var H$=kr.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",s=0,n=0,i=0,o={},a=!1,c=function(d,l,h){var m=t.substring(l,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),o[si[d]]=m},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=s==Ph-1,a){c(s,n);break}u>=0&&e==":"&&r!=="\\"&&(c(s,n,u+1),n=u+2,s+=1)}return o=Object.keys(o).length===Ph?o:null,o},z$=kr.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<si.length;r+=1){var s=e[r],n=t[si[r]]||"",i=s(n);if(!i)return!1}return!0}});var U_=S((_re,kh)=>{"use strict";var Ere=require("path"),B_=require("fs"),Mc=q_();kh.exports=function(t,e){var r=Mc.getFileName();B_.stat(r,function(s,n){if(s||!Mc.usePgPass(n,r))return e(void 0);var i=B_.createReadStream(r);Mc.getPassword(t,i,e)})};kh.exports.warnTo=Mc.warnTo});var V_=S((wre,z_)=>{"use strict";var V$=require("events").EventEmitter,$_=Jn(),Fc=require("util"),Oh=o_(),G$=xc(),Q$=Zp(),H_=b_(),W$=ko(),K$=Ah(),Y$=Kp(),j_=Fc.deprecate(()=>{},"Client.activeQuery is deprecated and will be removed in a future version."),X$=Fc.deprecate(()=>{},"Client.queryQueue is deprecated and will be removed in a future version."),J$=Fc.deprecate(()=>{},"pgpass support is deprecated and will be removed in a future version. You can provide an async function as the password property to the Client/Pool constructor that returns a password instead. Within this funciton you can call the pgpass module in your own code."),Z$=Fc.deprecate(()=>{},"Passing a custom Promise implementation to the Client/Pool constructor is deprecated and will be removed in a future version."),Lc=class extends V${constructor(e){super(),this.connectionParameters=new Q$(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};r.Promise&&Z$(),this._Promise=r.Promise||global.Promise,this._types=new G$(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this._activeQuery=null,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new K$({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this._queryQueue=[],this.binary=r.binary||W$.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}get activeQuery(){return j_(),this._activeQuery}set activeQuery(e){j_(),this._activeQuery=e}_getActiveQuery(){return this._activeQuery}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})},s=this._getActiveQuery();s&&(r(s),this._activeQuery=null),this._queryQueue.forEach(r),this._queryQueue.length=0}_connect(e){let r=this,s=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(n)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){r.ssl?s.requestSsl():s.startup(r.getStartupConf())}),s.on("sslconnect",function(){s.startup(r.getStartupConf())}),this._attachListeners(s),s.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,s)=>{this._connect(n=>{n?s(n):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_getPassword(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(s=>{if(s!==void 0){if(typeof s!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;e()}).catch(s=>{r.emit("error",s)});else if(this.password!==null)e();else try{U_()(this.connectionParameters,n=>{n!==void 0&&(J$(),this.connectionParameters.password=this.password=n),e()})}catch(s){this.emit("error",s)}}_handleAuthCleartextPassword(e){this._getPassword(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._getPassword(async()=>{try{let r=await Y$.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._getPassword(()=>{try{this.saslSession=Oh.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await Oh.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{Oh.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let r=this._getActiveQuery();this._activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this._getActiveQuery();if(!r){this._handleErrorEvent(e);return}this._activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this._getActiveQuery().handleRowDescription(e)}_handleDataRow(e){this._getActiveQuery().handleDataRow(e)}_handlePortalSuspended(e){this._getActiveQuery().handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this._getActiveQuery().handleEmptyQuery(this.connection)}_handleCommandComplete(e){let r=this._getActiveQuery();if(r==null){let s=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(s);return}r.handleCommandComplete(e,this.connection)}_handleParseComplete(){let e=this._getActiveQuery();if(e==null){let r=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(r);return}e.name&&(this.connection.parsedStatements[e.name]=e.text)}_handleCopyInResponse(e){this._getActiveQuery().handleCopyInResponse(this.connection)}_handleCopyData(e){this._getActiveQuery().handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},s=e.application_name||e.fallback_application_name;return s&&(r.application_name=s),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let s=this.connection;this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){s.cancel(e.processID,e.secretKey)})}else e._queryQueue.indexOf(r)!==-1&&e._queryQueue.splice(e._queryQueue.indexOf(r),1)}setTypeParser(e,r,s){return this._types.setTypeParser(e,r,s)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return $_.escapeIdentifier(e)}escapeLiteral(e){return $_.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0){this._activeQuery=this._queryQueue.shift();let e=this._getActiveQuery();if(e){this.readyForQuery=!1,this.hasExecuted=!0;let r=e.submit(this.connection);r&&process.nextTick(()=>{e.handleError(r,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this._activeQuery=null,this.emit("drain"))}}query(e,r,s){let n,i,o,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,typeof r=="function"&&(n.callback=n.callback||r)):(o=e.query_timeout||this.connectionParameters.query_timeout,n=new H_(e,r,s),n.callback||(i=new this._Promise((u,d)=>{n.callback=(l,h)=>l?d(l):u(h)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=n.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),c(u),n.callback=()=>{};let d=this._queryQueue.indexOf(n);d>-1&&this._queryQueue.splice(d,1),this._pulseQueryQueue()},o),n.callback=(u,d)=>{clearTimeout(a),c(u,d)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this._getActiveQuery()||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}get queryQueue(){return X$(),this._queryQueue}};Lc.Query=H_;z_.exports=Lc});var K_=S((vre,W_)=>{"use strict";var e3=require("events").EventEmitter,G_=function(){},Q_=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},Nh=class{constructor(e,r,s){this.client=e,this.idleListener=r,this.timeoutId=s}},ni=class{constructor(e){this.callback=e}};function t3(){throw new Error("Release called on client which has already been released to the pool.")}function qc(t,e){if(e)return{callback:e,result:void 0};let r,s,n=function(o,a){o?r(o):s(a)},i=new t(function(o,a){s=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:n,result:i}}function r3(t,e){return function r(s){s.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",s)}),t._remove(e),t.emit("error",s,e)}}var Dh=class extends e3{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Mh().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let s=r.client;s.ref&&s.ref();let n=r.idleListener;return this._acquireClient(s,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let s=Q_(this._idle,i=>i.client===e);s!==void 0&&clearTimeout(s.timeoutId),this._clients=this._clients.filter(i=>i!==e);let n=this;e.end(()=>{n.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return e?e(n):this.Promise.reject(n)}let r=qc(this.Promise,e),s=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ni(r.callback)),s;let n=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new ni(n),o=setTimeout(()=>{Q_(this._pendingQueue,a=>a.callback===n),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),s}return this.newClient(new ni(r.callback)),s}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let s=r3(this,r);this.log("checking client timeout");let n,i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(n&&clearTimeout(n),r.on("error",s),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,G_);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new ni((u,d,l)=>l()),s,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,s,!0)}})}_acquireClient(e,r,s,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,s),e.removeListener("error",s),r.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,G_);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let s=!1;return n=>{s&&t3(),s=!0,this._release(e,r,n)}}_release(e,r,s){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",s,e),s||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this._isAboveMin()&&(this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this)))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Nh(e,r,i)),this._pulseQueue()}query(e,r,s){if(typeof e=="function"){let i=qc(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(s=r,r=void 0);let n=qc(this.Promise,s);return s=n.callback,this.connect((i,o)=>{if(i)return s(i);let a=!1,c=u=>{a||(a=!0,o.release(u),s(u))};o.once("error",c),this.log("dispatching query");try{o.query(e,r,(u,d)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?s(u):s(void 0,d)})}catch(u){return o.release(u),s(u)}}),n.result}end(e){if(this.log("ending"),this.ending){let s=new Error("Called end on pool more than once");return e?e(s):this.Promise.reject(s)}this.ending=!0;let r=qc(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};W_.exports=Dh});var J_=S((Cre,X_)=>{"use strict";var Y_=require("events").EventEmitter,s3=require("util"),Lh=Jn(),ii=X_.exports=function(t,e,r){Y_.call(this),t=Lh.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(s){s==="row"&&(this._emitRowEvents=!0)}.bind(this))};s3.inherits(ii,Y_);var n3={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};ii.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let s=n3[r]||r;t[s]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};ii.prototype.then=function(t,e){return this._getPromise().then(t,e)};ii.prototype.catch=function(t){return this._getPromise().catch(t)};ii.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};ii.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(s,n,i){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),s)return e.handleError(s);e._emitRowEvents&&(i.length>1?n.forEach((o,a)=>{o.forEach(c=>{e.emit("row",c,i[a])})}):n.forEach(function(o){e.emit("row",o,i)})),e.state="end",e.emit("end",i),e.callback&&e.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let s=(this.values||[]).map(Lh.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let n=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(n)}return t.native.execute(this.name,s,r)}return t.native.prepare(this.name,this.text,s.length,function(n){return n?r(n):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,s,r))})}else if(this.values){if(!Array.isArray(this.values)){let n=new Error("Query values must be an array");return r(n)}let s=this.values.map(Lh.prepareValue);t.native.query(this.text,s,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var sw=S((Rre,rw)=>{"use strict";var Z_;try{Z_=require("pg-native")}catch(t){throw t}var i3=xc(),ew=require("events").EventEmitter,o3=require("util"),a3=Zp(),tw=J_(),Et=rw.exports=function(t){ew.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new i3(t.types),this.native=new Z_({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new a3(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};Et.Query=tw;o3.inherits(Et,ew);Et.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};Et.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,s){if(e.connectionParameters.nativeConnectionString&&(s=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(s,function(n){if(n)return e.native.end(),t(n);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};Et.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(s=>{s?r(s):e()})})};Et.prototype.query=function(t,e,r){let s,n,i,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,n=s=t,typeof e=="function"&&(t.callback=e);else if(i=t.query_timeout||this.connectionParameters.query_timeout,s=new tw(t,e,r),!s.callback){let c,u;n=new this._Promise((d,l)=>{c=d,u=l}).catch(d=>{throw Error.captureStackTrace(d),d}),s.callback=(d,l)=>d?u(d):c(l)}return i&&(a=s.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{s.handleError(c,this.connection)}),a(c),s.callback=()=>{};let u=this._queryQueue.indexOf(s);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),s.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(s),this._pulseQueryQueue(),n):(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};Et.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(s,n){t=i=>i?n(i):s()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};Et.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Et.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};Et.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};Et.prototype.ref=function(){};Et.prototype.unref=function(){};Et.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};Et.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Fh=S((Tre,nw)=>{"use strict";nw.exports=sw()});var Mh=S((Are,Bc)=>{"use strict";var c3=V_(),u3=ko(),l3=Ah(),d3=th(),f3=Jn(),p3=K_(),h3=xc(),{DatabaseError:m3}=Rh(),{escapeIdentifier:g3,escapeLiteral:y3}=Jn(),S3=t=>class extends p3{constructor(r){super(r,t)}},iw=function(t){this.defaults=u3,this.Client=t,this.Query=this.Client.Query,this.Pool=S3(this.Client),this._pools=[],this.Connection=l3,this.types=Io(),this.DatabaseError=m3,this.TypeOverrides=h3,this.escapeIdentifier=g3,this.escapeLiteral=y3,this.Result=d3,this.utils=f3},ow=c3,aw=!1;try{aw=!!process.env.NODE_PG_FORCE_NATIVE}catch{}aw&&(ow=Fh());Bc.exports=new iw(ow);Object.defineProperty(Bc.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new iw(Fh())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Bc.exports,"native",{value:t}),t}})});var uw=S((Ure,b3)=>{b3.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var oi=S(Pt=>{"use strict";var E3=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.getKeyIndexes=Pt.hasFlag=Pt.exists=Pt.list=void 0;var Uc=E3(uw());Pt.list=Object.keys(Uc.default);var qh={};Pt.list.forEach(t=>{qh[t]=Uc.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function _3(t,e){return t=e?.caseInsensitive?String(t).toLowerCase():t,!!Uc.default[t]}Pt.exists=_3;function w3(t,e,r){if(t=r?.nameCaseInsensitive?String(t).toLowerCase():t,!qh[t])throw new Error("Unknown command "+t);return!!qh[t][e]}Pt.hasFlag=w3;function v3(t,e,r){t=r?.nameCaseInsensitive?String(t).toLowerCase():t;let s=Uc.default[t];if(!s)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let n=[],i=!!(r&&r.parseExternalKey),o=(c,u)=>{let d=[],l=Number(c[u]);for(let h=0;h<l;h++)d.push(h+u+1);return d},a=(c,u,d)=>{for(let l=u;l<c.length-1;l+=1)if(String(c[l]).toLowerCase()===d.toLowerCase())return l+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":n.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":n.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{n.push(...o(e,0));break}case"georadius":{n.push(0);let c=a(e,5,"STORE");c&&n.push(c);let u=a(e,5,"STOREDIST");u&&n.push(u);break}case"georadiusbymember":{n.push(0);let c=a(e,4,"STORE");c&&n.push(c);let u=a(e,4,"STOREDIST");u&&n.push(u);break}case"sort":case"sort_ro":n.push(0);for(let c=1;c<e.length-1;c++){let u=e[c];if(typeof u!="string")continue;let d=u.toUpperCase();d==="GET"?(c+=1,u=e[c],u!=="#"&&(i?n.push([c,lw(u)]):n.push(c))):d==="BY"?(c+=1,i?n.push([c,lw(e[c])]):n.push(c)):d==="STORE"&&(c+=1,n.push(c))}break;case"migrate":if(e[2]==="")for(let c=5;c<e.length-1;c++){let u=e[c];if(typeof u=="string"&&u.toUpperCase()==="KEYS"){for(let d=c+1;d<e.length;d++)n.push(d);break}}else n.push(2);break;case"xreadgroup":case"xread":for(let c=t==="xread"?0:3;c<e.length-1;c++)if(String(e[c]).toUpperCase()==="STREAMS"){for(let u=c+1;u<=c+(e.length-1-c)/2;u++)n.push(u);break}break;default:if(s.step>0){let c=s.keyStart-1,u=s.keyStop>0?s.keyStop:e.length+s.keyStop+1;for(let d=c;d<u;d+=s.step)n.push(d)}break}return n}Pt.getKeyIndexes=v3;function lw(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var dw=S(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.tryCatch=as.errorObj=void 0;as.errorObj={e:{}};var Bh;function C3(t,e){try{let r=Bh;return Bh=null,r.apply(this,arguments)}catch(r){return as.errorObj.e=r,as.errorObj}}function R3(t){return Bh=t,C3}as.tryCatch=R3});var cs=S(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});var ai=dw();function fw(t){setTimeout(function(){throw t},0)}function T3(t,e,r){return typeof e=="function"&&t.then(s=>{let n;r!==void 0&&Object(r).spread&&Array.isArray(s)?n=ai.tryCatch(e).apply(void 0,[null].concat(s)):n=s===void 0?ai.tryCatch(e)(null):ai.tryCatch(e)(null,s),n===ai.errorObj&&fw(n.e)},s=>{if(!s){let i=new Error(s+"");Object.assign(i,{cause:s}),s=i}let n=ai.tryCatch(e)(s);n===ai.errorObj&&fw(n.e)}),t}Uh.default=T3});var mw=S((zre,hw)=>{"use strict";var pw=require("assert"),Do=require("util");function ci(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}Do.inherits(ci,Error);Object.defineProperty(ci.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function $h(t,e,r){pw(e),pw.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let s=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=s,this.offset=r,this.buffer=e}Do.inherits($h,ci);Object.defineProperty($h.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function jh(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}Do.inherits(jh,ci);Object.defineProperty(jh.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function $c(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}Do.inherits($c,ci);Object.defineProperty($c.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function Hh(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}Do.inherits(Hh,$c);Object.defineProperty(Hh.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});hw.exports={RedisError:ci,ParserError:$h,ReplyError:jh,AbortError:$c,InterruptError:Hh}});var Sw=S((Vre,yw)=>{"use strict";var gw=require("assert"),ui=class extends Error{get name(){return this.constructor.name}},zh=class extends ui{constructor(e,r,s){gw(r),gw.strictEqual(typeof s,"number");let n=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=n,this.offset=s,this.buffer=r}get name(){return this.constructor.name}},Vh=class extends ui{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},jc=class extends ui{get name(){return this.constructor.name}},Gh=class extends jc{get name(){return this.constructor.name}};yw.exports={RedisError:ui,ParserError:zh,ReplyError:Vh,AbortError:jc,InterruptError:Gh}});var dn=S((Gre,bw)=>{"use strict";var x3=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?mw():Sw();bw.exports=x3});var Mo=S((Qre,Qh)=>{var Ew=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],A3=function(e){for(var r,s=0,n=0,i=[],o=e.length;s<o;s++)r=e.charCodeAt(s),r<128?i[n++]=r:r<2048?(i[n++]=r>>6|192,i[n++]=r&63|128):(r&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++s)&1023),i[n++]=r>>18|240,i[n++]=r>>12&63|128,i[n++]=r>>6&63|128,i[n++]=r&63|128):(i[n++]=r>>12|224,i[n++]=r>>6&63|128,i[n++]=r&63|128);return i},_w=Qh.exports=function(e){for(var r,s=0,n=-1,i=0,o=0,a=typeof e=="string"?A3(e):e,c=a.length;s<c;){if(r=a[s++],n===-1)r===123&&(n=s);else if(r!==125)o=Ew[(r^o>>8)&255]^o<<8;else if(s-1!==n)return o&16383;i=Ew[(r^i>>8)&255]^i<<8}return i&16383};Qh.exports.generateMulti=function(e){for(var r=1,s=e.length,n=_w(e[0]);r<s;)if(_w(e[r++])!==n)return-1;return n}});var Pw=S((Wre,Aw)=>{var vw=9007199254740991,P3="[object Arguments]",I3="[object Function]",k3="[object GeneratorFunction]",O3=/^(?:0|[1-9]\d*)$/;function Cw(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function N3(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}var Lo=Object.prototype,Fo=Lo.hasOwnProperty,Rw=Lo.toString,D3=Lo.propertyIsEnumerable,ww=Math.max;function M3(t,e){var r=V3(t)||z3(t)?N3(t.length,String):[],s=r.length,n=!!s;for(var i in t)(e||Fo.call(t,i))&&!(n&&(i=="length"||xw(i,s)))&&r.push(i);return r}function L3(t,e,r,s){return t===void 0||Wh(t,Lo[r])&&!Fo.call(s,r)?e:t}function F3(t,e,r){var s=t[e];(!(Fo.call(t,e)&&Wh(s,r))||r===void 0&&!(e in t))&&(t[e]=r)}function q3(t){if(!Yh(t))return H3(t);var e=j3(t),r=[];for(var s in t)s=="constructor"&&(e||!Fo.call(t,s))||r.push(s);return r}function Tw(t,e){return e=ww(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=ww(r.length-e,0),i=Array(n);++s<n;)i[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i,Cw(t,this,o)}}function B3(t,e,r,s){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n],a=s?s(r[o],t[o],o,r,t):void 0;F3(r,o,a===void 0?t[o]:a)}return r}function U3(t){return Tw(function(e,r){var s=-1,n=r.length,i=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(n--,i):void 0,o&&$3(r[0],r[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++s<n;){var a=r[s];a&&t(e,a,s,i)}return e})}function xw(t,e){return e=e??vw,!!e&&(typeof t=="number"||O3.test(t))&&t>-1&&t%1==0&&t<e}function $3(t,e,r){if(!Yh(r))return!1;var s=typeof e;return(s=="number"?Kh(r)&&xw(e,r.length):s=="string"&&e in r)?Wh(r[e],t):!1}function j3(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Lo;return t===r}function H3(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Wh(t,e){return t===e||t!==t&&e!==e}function z3(t){return G3(t)&&Fo.call(t,"callee")&&(!D3.call(t,"callee")||Rw.call(t)==P3)}var V3=Array.isArray;function Kh(t){return t!=null&&W3(t.length)&&!Q3(t)}function G3(t){return K3(t)&&Kh(t)}function Q3(t){var e=Yh(t)?Rw.call(t):"";return e==I3||e==k3}function W3(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vw}function Yh(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function K3(t){return!!t&&typeof t=="object"}var Y3=U3(function(t,e,r,s){B3(e,J3(e),t,s)}),X3=Tw(function(t){return t.push(void 0,L3),Cw(Y3,void 0,t)});function J3(t){return Kh(t)?M3(t,!0):q3(t)}Aw.exports=X3});var Ow=S((Kre,kw)=>{var Z3=9007199254740991,ej="[object Arguments]",tj="[object Function]",rj="[object GeneratorFunction]",Xh=Object.prototype,sj=Xh.hasOwnProperty,Iw=Xh.toString,nj=Xh.propertyIsEnumerable;function ij(t){return aj(t)&&sj.call(t,"callee")&&(!nj.call(t,"callee")||Iw.call(t)==ej)}function oj(t){return t!=null&&uj(t.length)&&!cj(t)}function aj(t){return dj(t)&&oj(t)}function cj(t){var e=lj(t)?Iw.call(t):"";return e==tj||e==rj}function uj(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Z3}function lj(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function dj(t){return!!t&&typeof t=="object"}kw.exports=ij});var Hc=S(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.isArguments=us.defaults=us.noop=void 0;var fj=Pw();us.defaults=fj;var pj=Ow();us.isArguments=pj;function hj(){}us.noop=hj});var Dw=S((Xre,Nw)=>{var li=1e3,di=li*60,fi=di*60,fn=fi*24,mj=fn*7,gj=fn*365.25;Nw.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return yj(t);if(r==="number"&&isFinite(t))return e.long?bj(t):Sj(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function yj(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*gj;case"weeks":case"week":case"w":return r*mj;case"days":case"day":case"d":return r*fn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*fi;case"minutes":case"minute":case"mins":case"min":case"m":return r*di;case"seconds":case"second":case"secs":case"sec":case"s":return r*li;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Sj(t){var e=Math.abs(t);return e>=fn?Math.round(t/fn)+"d":e>=fi?Math.round(t/fi)+"h":e>=di?Math.round(t/di)+"m":e>=li?Math.round(t/li)+"s":t+"ms"}function bj(t){var e=Math.abs(t);return e>=fn?zc(t,e,fn,"day"):e>=fi?zc(t,e,fi,"hour"):e>=di?zc(t,e,di,"minute"):e>=li?zc(t,e,li,"second"):t+" ms"}function zc(t,e,r,s){var n=e>=r*1.5;return Math.round(t/r)+" "+s+(n?"s":"")}});var Jh=S((Jre,Mw)=>{function Ej(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=n,r.enabled=a,r.humanize=Dw(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let l=0;for(let h=0;h<d.length;h++)l=(l<<5)-l+d.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(d){let l,h=null,m,g;function w(...R){if(!w.enabled)return;let x=w,P=Number(new Date),D=P-(l||P);x.diff=D,x.prev=l,x.curr=P,l=P,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let M=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(W,Ee)=>{if(W==="%%")return"%";M++;let z=r.formatters[Ee];if(typeof z=="function"){let X=R[M];W=z.call(x,X),R.splice(M,1),M--}return W}),r.formatArgs.call(x,R),(x.log||r.log).apply(x,R)}return w.namespace=d,w.useColors=r.useColors(),w.color=r.selectColor(d),w.extend=s,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(d)),g),set:R=>{h=R}}),typeof r.init=="function"&&r.init(w),w}function s(d,l){let h=r(this.namespace+(typeof l>"u"?":":l)+d);return h.log=this.log,h}function n(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let l=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of l)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function i(d,l){let h=0,m=0,g=-1,w=0;for(;h<d.length;)if(m<l.length&&(l[m]===d[h]||l[m]==="*"))l[m]==="*"?(g=m,w=h,m++):(h++,m++);else if(g!==-1)m=g+1,w++,h=w;else return!1;for(;m<l.length&&l[m]==="*";)m++;return m===l.length}function o(){let d=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),d}function a(d){for(let l of r.skips)if(i(d,l))return!1;for(let l of r.names)if(i(d,l))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Mw.exports=Ej});var Lw=S((_t,Vc)=>{_t.formatArgs=wj;_t.save=vj;_t.load=Cj;_t.useColors=_j;_t.storage=Rj();_t.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _j(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wj(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Vc.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),t.splice(s,0,e)}_t.log=console.debug||console.log||(()=>{});function vj(t){try{t?_t.storage.setItem("debug",t):_t.storage.removeItem("debug")}catch{}}function Cj(){let t;try{t=_t.storage.getItem("debug")||_t.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Rj(){try{return localStorage}catch{}}Vc.exports=Jh()(_t);var{formatters:Tj}=Vc.exports;Tj.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var qw=S((Zre,Fw)=>{"use strict";Fw.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",s=e.indexOf(r+t),n=e.indexOf("--");return s!==-1&&(n===-1?!0:s<n)}});var Uw=S((ese,Bw)=>{"use strict";var xj=require("os"),Jt=qw(),We=process.env,pi;Jt("no-color")||Jt("no-colors")||Jt("color=false")?pi=!1:(Jt("color")||Jt("colors")||Jt("color=true")||Jt("color=always"))&&(pi=!0);"FORCE_COLOR"in We&&(pi=We.FORCE_COLOR.length===0||parseInt(We.FORCE_COLOR,10)!==0);function Aj(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Pj(t){if(pi===!1)return 0;if(Jt("color=16m")||Jt("color=full")||Jt("color=truecolor"))return 3;if(Jt("color=256"))return 2;if(t&&!t.isTTY&&pi!==!0)return 0;let e=pi?1:0;if(process.platform==="win32"){let r=xj.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in We)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in We)||We.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in We)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(We.TEAMCITY_VERSION)?1:0;if(We.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in We){let r=parseInt((We.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(We.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(We.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(We.TERM)||"COLORTERM"in We?1:(We.TERM==="dumb",e)}function Zh(t){let e=Pj(t);return Aj(e)}Bw.exports={supportsColor:Zh,stdout:Zh(process.stdout),stderr:Zh(process.stderr)}});var jw=S((Me,Qc)=>{var Ij=require("tty"),Gc=require("util");Me.init=Fj;Me.log=Dj;Me.formatArgs=Oj;Me.save=Mj;Me.load=Lj;Me.useColors=kj;Me.destroy=Gc.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Me.colors=[6,2,3,4,5,1];try{let t=Uw();t&&(t.stderr||t).level>=2&&(Me.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Me.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[e];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),t[r]=s,t},{});function kj(){return"colors"in Me.inspectOpts?!!Me.inspectOpts.colors:Ij.isatty(process.stderr.fd)}function Oj(t){let{namespace:e,useColors:r}=this;if(r){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(n+"m+"+Qc.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Nj()+e+" "+t[0]}function Nj(){return Me.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Dj(...t){return process.stderr.write(Gc.formatWithOptions(Me.inspectOpts,...t)+`
`)}function Mj(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Lj(){return process.env.DEBUG}function Fj(t){t.inspectOpts={};let e=Object.keys(Me.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Me.inspectOpts[e[r]]}Qc.exports=Jh()(Me);var{formatters:$w}=Qc.exports;$w.o=function(t){return this.inspectOpts.colors=this.useColors,Gc.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};$w.O=function(t){return this.inspectOpts.colors=this.useColors,Gc.inspect(t,this.inspectOpts)}});var Hw=S((tse,em)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?em.exports=Lw():em.exports=jw()});var Gw=S(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.genRedactedString=Or.getStringValue=Or.MAX_ARGUMENT_LENGTH=void 0;var qj=Hw(),tm=200;Or.MAX_ARGUMENT_LENGTH=tm;var Bj="ioredis";function zw(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}Or.getStringValue=zw;function Vw(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}Or.genRedactedString=Vw;function Uj(t){let e=(0,qj.default)(`${Bj}:${t}`);function r(...s){if(e.enabled){for(let n=1;n<s.length;n++){let i=zw(s[n]);typeof i=="string"&&i.length>tm&&(s[n]=Vw(i,tm))}return e.apply(null,s)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(s){e.log=s}}}),r}Or.default=Uj});var Ww=S(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var Qw=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,$j={RedisCloudFixed:{ca:Qw},RedisCloudFlexible:{ca:Qw}};rm.default=$j});var Le=S(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.noop=G.defaults=G.Debug=G.getPackageMeta=G.zipMap=G.CONNECTION_CLOSED_ERROR_MSG=G.shuffle=G.sample=G.resolveTLSProfile=G.parseURL=G.optimizeErrorStack=G.toArg=G.convertMapToArray=G.convertObjectToArray=G.timeout=G.packObject=G.isInt=G.wrapMultiResult=G.convertBufferToString=void 0;var jj=require("fs"),Hj=require("path"),Kw=require("url"),sm=Hc();Object.defineProperty(G,"defaults",{enumerable:!0,get:function(){return sm.defaults}});Object.defineProperty(G,"noop",{enumerable:!0,get:function(){return sm.noop}});var zj=Gw();G.Debug=zj.default;var Vj=Ww();function Yw(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,s=Array(r);for(let n=0;n<r;++n)s[n]=t[n]instanceof Buffer&&e==="utf8"?t[n].toString():Yw(t[n],e);return s}return t}G.convertBufferToString=Yw;function Gj(t){if(!t)return null;let e=[],r=t.length;for(let s=0;s<r;++s){let n=t[s];n instanceof Error?e.push([n]):e.push([null,n])}return e}G.wrapMultiResult=Gj;function Xw(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}G.isInt=Xw;function Qj(t){let e={},r=t.length;for(let s=1;s<r;s+=2)e[t[s-1]]=t[s];return e}G.packObject=Qj;function Wj(t,e){let r=null,s=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(s,e,new Error("timeout")),s}G.timeout=Wj;function Kj(t){let e=[],r=Object.keys(t);for(let s=0,n=r.length;s<n;s++)e.push(r[s],t[r[s]]);return e}G.convertObjectToArray=Kj;function Yj(t){let e=[],r=0;return t.forEach(function(s,n){e[r]=n,e[r+1]=s,r+=2}),e}G.convertMapToArray=Yj;function Xj(t){return t===null||typeof t>"u"?"":String(t)}G.toArg=Xj;function Jj(t,e,r){let s=e.split(`
`),n="",i;for(i=1;i<s.length&&s[i].indexOf(r)!==-1;++i);for(let o=i;o<s.length;++o)n+=`
`+s[o];if(t.stack){let o=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,o)+n}return t}G.optimizeErrorStack=Jj;function Zj(t){if(Xw(t))return{port:t};let e=(0,Kw.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,Kw.parse)(t,!0,!0));let r=e.query||{},s={};if(e.auth){let n=e.auth.indexOf(":");s.username=n===-1?e.auth:e.auth.slice(0,n),s.password=n===-1?"":e.auth.slice(n+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(s.db=e.pathname.slice(1)):s.path=e.pathname),e.host&&(s.host=e.hostname),e.port&&(s.port=e.port),typeof r.family=="string"){let n=Number.parseInt(r.family,10);Number.isNaN(n)||(s.family=n)}return(0,sm.defaults)(s,r),s}G.parseURL=Zj;function eH(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=Vj.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}G.resolveTLSProfile=eH;function tH(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}G.sample=tH;function rH(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}G.shuffle=rH;G.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function sH(t,e){let r=new Map;return t.forEach((s,n)=>{r.set(s,e[n])}),r}G.zipMap=sH;var hi=null;async function nH(){if(hi)return hi;try{let t=(0,Hj.resolve)(__dirname,"..","..","package.json"),e=await jj.promises.readFile(t,"utf8");return hi={version:JSON.parse(e).version},hi}catch{return hi={version:"error-fetching-version"},hi}}G.getPackageMeta=nH});var Jw=S(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.parseBlockOption=mi.parseSecondsArgument=void 0;var nm=t=>{if(typeof t=="number")return t;if(Buffer.isBuffer(t))return nm(t.toString());if(typeof t=="string"){let e=Number(t);return Number.isFinite(e)?e:void 0}},iH=t=>{if(typeof t=="string")return t;if(Buffer.isBuffer(t))return t.toString()},oH=t=>{let e=nm(t);if(e!==void 0)return e<=0?0:e*1e3};mi.parseSecondsArgument=oH;var aH=t=>{for(let e=0;e<t.length;e++){let r=iH(t[e]);if(r&&r.toLowerCase()==="block"){let s=nm(t[e+1]);return s===void 0?void 0:s<=0?0:s}}return null};mi.parseBlockOption=aH});var Nr=S(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});var Zw=oi(),cH=Mo(),uH=cs(),pn=Le(),im=Jw(),pr=class t{constructor(e,r=[],s={},n){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=s.replyEncoding,this.errorStack=s.errorStack,this.args=r.flat(),this.callback=n,this.initPromise(),s.keyPrefix){let i=s.keyPrefix instanceof Buffer,o=i?s.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(s.keyPrefix)),Buffer.concat([o,a])):i?Buffer.concat([s.keyPrefix,Buffer.from(String(a))]):s.keyPrefix+a)}s.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return r=r.toLowerCase(),!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(s=>{e[r][s]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:cH(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,s="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let n=new om;n.push(s);for(let i=0;i<this.args.length;++i){let o=this.args[i];o instanceof Buffer?o.length===0?n.push(`$0\r
\r
`):(n.push("$"+o.length+`\r
`),n.push(o),n.push(`\r
`)):n.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}r=n.toBuffer()}else{r=s;for(let n=0;n<this.args.length;++n){let i=this.args[n];r+="$"+Buffer.byteLength(i)+`\r
`+i+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,pn.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,pn.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}setBlockingTimeout(e){if(e<=0)return;this._blockingTimeoutTimer&&(clearTimeout(this._blockingTimeoutTimer),this._blockingTimeoutTimer=void 0);let r=Date.now();this._blockingDeadline===void 0&&(this._blockingDeadline=r+e);let s=this._blockingDeadline-r;if(s<=0){this.resolve(null);return}this._blockingTimeoutTimer=setTimeout(()=>{if(this.isResolved){this._blockingTimeoutTimer=void 0;return}this._blockingTimeoutTimer=void 0,this.resolve(null)},s)}extractBlockingTimeout(){let e=this.args;if(!e||e.length===0)return;let r=this.name.toLowerCase();if(t.checkFlag("LAST_ARG_TIMEOUT_COMMANDS",r))return(0,im.parseSecondsArgument)(e[e.length-1]);if(t.checkFlag("FIRST_ARG_TIMEOUT_COMMANDS",r))return(0,im.parseSecondsArgument)(e[0]);if(t.checkFlag("BLOCK_OPTION_COMMANDS",r))return(0,im.parseBlockOption)(e)}_clearTimers(){let e=this._commandTimeoutTimer;e&&(clearTimeout(e),delete this._commandTimeoutTimer);let r=this._blockingTimeoutTimer;r&&(clearTimeout(r),delete this._blockingTimeoutTimer)}initPromise(){let e=new Promise((r,s)=>{if(!this.transformed){this.transformed=!0;let n=t._transformer.argument[this.name];n&&(this.args=n(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.reject=n=>{this._clearTimers(),this.errorStack?s((0,pn.optimizeErrorStack)(n,this.errorStack.stack,__dirname)):s(n)}});this.promise=(0,uH.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,Zw.exists)(this.name,{caseInsensitive:!0}))){let r=(0,Zw.getKeyIndexes)(this.name,this.args,{nameCaseInsensitive:!0});for(let s of r)this.args[s]=e(this.args[s]),this.keys.push(this.args[s])}return this.keys}_convertValue(e){return r=>{try{this._clearTimers(),e(this.transformReply(r)),this.isResolved=!0}catch(s){this.reject(s)}return this.promise}}};am.default=pr;pr.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"],BLOCKING_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax","bzmpop","blmpop","xread","xreadgroup"],LAST_ARG_TIMEOUT_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax"],FIRST_ARG_TIMEOUT_COMMANDS:["bzmpop","blmpop"],BLOCK_OPTION_COMMANDS:["xread","xreadgroup"]};pr._transformer={argument:{},reply:{}};var ev=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,pn.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,pn.convertObjectToArray)(t[0])}return t},tv=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,pn.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,pn.convertObjectToArray)(t[1]))}return t};pr.setArgumentTransformer("mset",ev);pr.setArgumentTransformer("msetnx",ev);pr.setArgumentTransformer("hset",tv);pr.setArgumentTransformer("hmset",tv);pr.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let s=t[r],n=t[r+1];s in e?Object.defineProperty(e,s,{value:n,configurable:!0,enumerable:!0,writable:!0}):e[s]=n}return e}return t});var om=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let s of this.items){let n=Buffer.byteLength(s);Buffer.isBuffer(s)?s.copy(e,r):e.write(s,r,n),r+=n}return e}}});var rv=S(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});var lH=dn(),Wc=class extends lH.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};cm.default=Wc;Wc.defaultMessage="Failed to refresh slots cache."});var Kc=S(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});var dH=require("stream"),um=class extends dH.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,s)=>{if(r){this.emit("error",r);return}this._redisCursor=s[0]instanceof Buffer?s[0].toString():s[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(s[1])})}close(){this._redisDrained=!0}};lm.default=um});var cv=S(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.executeWithAutoPipelining=Te.getFirstValueInFlattenedArray=Te.shouldUseAutoPipelining=Te.notAllowedAutoPipelineCommands=Te.kCallbacks=Te.kExec=void 0;var nv=Hc(),fH=Mo(),sv=cs();Te.kExec=Symbol("exec");Te.kCallbacks=Symbol("callbacks");Te.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function iv(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let s=r[Te.kCallbacks];r[Te.kCallbacks]=null,r.exec(function(n,i){if(t._runningAutoPipelines.delete(e),n)for(let o=0;o<s.length;o++)process.nextTick(s[o],n);else for(let o=0;o<s.length;o++)process.nextTick(s[o],...i[o]);t._autoPipelines.has(e)&&iv(t,e)})}function pH(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!Te.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}Te.shouldUseAutoPipelining=pH;function ov(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,nv.isArguments)(r)){if(r.length===0)continue;return r[0]}let s=[r].flat();if(s.length>0)return s[0]}}Te.getFirstValueInFlattenedArray=ov;function av(t,e,r,s,n){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(nv.noop),(0,sv.default)(new Promise(function(u,d){t.delayUntilReady(l=>{if(l){d(l);return}av(t,e,r,s,null).then(u,d)})}),n);let i=t.options.keyPrefix||"",o=t.isCluster?t.slots[fH(`${i}${ov(s)}`)].join(","):"main";if(!t._autoPipelines.has(o)){let u=t.pipeline();u[Te.kExec]=!1,u[Te.kCallbacks]=[],t._autoPipelines.set(o,u)}let a=t._autoPipelines.get(o);a[Te.kExec]||(a[Te.kExec]=!0,setImmediate(iv,t,o));let c=new Promise(function(u,d){a[Te.kCallbacks].push(function(l,h){if(l){d(l);return}u(h)}),e==="call"&&s.unshift(r),a[e](...s)});return(0,sv.default)(c,n)}Te.executeWithAutoPipelining=av});var uv=S(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});var hH=require("crypto"),mH=Nr(),gH=cs(),dm=class{constructor(e,r=null,s="",n=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=s,this.readOnly=n,this.sha=(0,hH.createHash)("sha1").update(e).digest("hex");let i=this.sha,o=new WeakSet;this.Command=class extends mH.default{toWritable(c){let u=this.reject;return this.reject=d=>{d.message.indexOf("NOSCRIPT")!==-1&&o.delete(c),u.call(this,d)},o.has(c)?this.name==="eval"&&(this.name="evalsha",this.args[0]=i):(o.add(c),this.name="eval",this.args[0]=e),super.toWritable(c)}}}execute(e,r,s,n){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(s.keyPrefix=this.keyPrefix),this.readOnly&&(s.readOnly=!0);let i=new this.Command("evalsha",[this.sha,...r],s);return i.promise=i.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...r],s);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,gH.default)(i.promise,n),e.sendCommand(i)}};fm.default=dm});var Xc=S(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});var yH=oi(),Yc=cv(),SH=Nr(),bH=uv(),Dr=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return pm.slice(0)}createBuiltinCommand(e){return{string:ls(null,e,"utf8"),buffer:ls(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=ls(e,e,"utf8"),this[e+"Buffer"]=ls(e+"Buffer",e,null)}defineCommand(e,r){let s=new bH.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=s,this[e]=lv(e,e,s,"utf8"),this[e+"Buffer"]=lv(e+"Buffer",e,s,null)}sendCommand(e,r,s){throw new Error('"sendCommand" is not implemented')}},pm=yH.list.filter(t=>t!=="monitor");pm.push("sentinel");pm.forEach(function(t){Dr.prototype[t]=ls(t,t,"utf8"),Dr.prototype[t+"Buffer"]=ls(t+"Buffer",t,null)});Dr.prototype.call=ls("call","utf8");Dr.prototype.callBuffer=ls("callBuffer",null);Dr.prototype.send_command=Dr.prototype.call;function ls(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...s){let n=e||s.shift(),i=s[s.length-1];typeof i=="function"?s.pop():i=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,Yc.shouldUseAutoPipelining)(this,t,n)?(0,Yc.executeWithAutoPipelining)(this,t,n,s,i):this.sendCommand(new SH.default(n,s,o,i))}}function lv(t,e,r,s){return function(...n){let i=typeof n[n.length-1]=="function"?n.pop():void 0,o={replyEncoding:s};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,Yc.shouldUseAutoPipelining)(this,t,e)?(0,Yc.executeWithAutoPipelining)(this,t,e,n,i):r.execute(this,n,o,i)}}hm.default=Dr});var ym=S(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});var mm=Mo(),dv=oi(),fv=cs(),EH=require("util"),_H=Nr(),wH=Le(),vH=Xc();function CH(t,e){let r=mm(e[0]),s=t._groupsBySlot[r];for(let n=1;n<e.length;n++)if(t._groupsBySlot[mm(e[n])]!==s)return-1;return r}var ds=class extends vH.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(s=>{let n=e.scriptsSet[s];this._shaToScript[n.sha]=n,this[s]=e[s],this[s+"Buffer"]=e[s+"Buffer"]}),e.addedBuiltinSet.forEach(s=>{this[s]=e[s],this[s+"Buffer"]=e[s+"Buffer"]}),this.promise=new Promise((s,n)=>{this.resolve=s,this.reject=n});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let n=e[1].length;for(let i=0;i<n;i++){if(e[1][i]instanceof Error)continue;let o=this._queue[r-(n-i)];try{e[1][i]=o.transformReply(e[1][i])}catch(a){e[1][i]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let n=!0,i;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],c=this._queue[o];if(a){if(c.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!i)i={name:a.name,message:a.message};else if(i.name!==a.name||i.message!==a.message){n=!1;break}}else if(!c.inTransaction&&!((0,dv.exists)(c.name,{caseInsensitive:!0})&&(0,dv.hasFlag)(c.name,"readonly",{nameCaseInsensitive:!0}))){n=!1;break}}if(i&&n){let o=this,a=i.message.split(" "),c=this._queue,u=!1;this._queue=[];for(let m=0;m<c.length;++m){if(a[0]==="ASK"&&!u&&c[m].name!=="asking"&&(!c[m-1]||c[m-1].name!=="asking")){let g=new _H.default("asking");g.ignore=!0,this.sendCommand(g)}c[m].initPromise(),this.sendCommand(c[m]),u=c[m].inTransaction}let d=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let l=function(){o.exec()},h=this.redis;if(h.handleError(i,this.leftRedirections,{moved:function(m,g){o.preferKey=g,h.slots[a[1]]=[g],h._groupsBySlot[a[1]]=h._groupsIds[h.slots[a[1]].join(";")],h.refreshSlotsCache(),o.exec()},ask:function(m,g){o.preferKey=g,o.exec()},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:()=>{d=!1},defaults:()=>{d=!1}}),d)return}}let s=0;for(let n=0;n<this._queue.length-s;++n)this._queue[n+s].ignore&&(s+=1),this._result[n]=this._result[n+s];this.resolve(this._result.slice(0,this._result.length-s))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(s=>{this.fillResult([null,s],r)}).catch(s=>{this.fillResult([s],r)}),this._queue.push(e),this}addBatch(e){let r,s,n;for(let i=0;i<e.length;++i)r=e[i],s=r[0],n=r.slice(1),this[s].apply(this,n);return this}};gm.default=ds;var RH=ds.prototype.multi;ds.prototype.multi=function(){return this._transactions+=1,RH.apply(this,arguments)};var pv=ds.prototype.execBuffer;ds.prototype.execBuffer=(0,EH.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),pv.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");ds.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(wH.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,fv.default)(this.promise,t)),this.redis.delayUntilReady(n=>{if(n){this.reject(n);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,pv.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,fv.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let n=[];for(let i=0;i<this._queue.length;i++){let o=this._queue[i].getKeys();if(o.length&&n.push(o[0]),o.length&&mm.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(n.length){if(e=CH(this.redis,n),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return s(),this.promise;function s(){let n=r.replyPending=r._queue.length,i;r.isCluster&&(i={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a,c={isPipeline:!0,destination:r.isCluster?i:{redis:r.redis},write(u){typeof u!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(u)):o+=u,--n||(a?(o&&a.push(Buffer.from(o,"utf8")),c.destination.redis.stream.write(Buffer.concat(a))):c.destination.redis.stream.write(o),n=r._queue.length,o="",a=void 0)}};for(let u=0;u<r._queue.length;++u)r.redis.sendCommand(r._queue[u],c,i);return r.promise}}});var Em=S(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.addTransactionSupport=void 0;var Sm=Le(),bm=cs(),hv=ym();function TH(t){t.pipeline=function(s){let n=new hv.default(this);return Array.isArray(s)&&n.addBatch(s),n};let{multi:e}=t;t.multi=function(s,n){if(typeof n>"u"&&!Array.isArray(s)&&(n=s,s=null),n&&n.pipeline===!1)return e.call(this);let i=new hv.default(this);i.multi(),Array.isArray(s)&&i.addBatch(s);let o=i.exec;i.exec=function(c){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Sm.noop),(0,bm.default)(new Promise((d,l)=>{this.redis.delayUntilReady(h=>{if(h){l(h);return}this.exec(i).then(d,l)})}),c);if(this._transactions>0&&o.call(i),this.nodeifiedPromise)return o.call(i);let u=o.call(i);return(0,bm.default)(u.then(function(d){let l=d[d.length-1];if(typeof l>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(l[0]){l[0].previousErrors=[];for(let h=0;h<d.length-1;++h)d[h][0]&&l[0].previousErrors.push(d[h][0]);throw l[0]}return(0,Sm.wrapMultiResult)(l[1])}),c)};let{execBuffer:a}=i;return i.execBuffer=function(c){return this._transactions>0&&a.call(i),i.exec(c)},i};let{exec:r}=t;t.exec=function(s){return(0,bm.default)(r.call(this).then(function(n){return Array.isArray(n)&&(n=(0,Sm.wrapMultiResult)(n)),n}),s)}}Jc.addTransactionSupport=TH});var wm=S(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});function xH(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}_m.default=xH});var gv=S(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.DEFAULT_CLUSTER_OPTIONS=void 0;var mv=require("dns");Zc.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:mv.resolveSrv,dnsLookup:mv.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var gi=S(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.getConnectionName=Ke.weightSrvRecords=Ke.groupSrvRecords=Ke.getUniqueHostnamesFromOptions=Ke.normalizeNodeOptions=Ke.nodeKeyToRedisOptions=Ke.getNodeKey=void 0;var yv=Le(),AH=require("net");function PH(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}Ke.getNodeKey=PH;function IH(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}Ke.nodeKeyToRedisOptions=IH;function kH(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,yv.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,yv.resolveTLSProfile)(r)})}Ke.normalizeNodeOptions=kH;function OH(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,AH.isIP)(r))}Ke.getUniqueHostnamesFromOptions=OH;function NH(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}Ke.groupSrvRecords=NH;function DH(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[s,n]of t.records.entries())if(r+=1+n.weight,r>e)return t.totalWeight-=n.weight,t.records.splice(s,1),n}Ke.weightSrvRecords=DH;function MH(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}Ke.getConnectionName=MH});var bv=S(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});var Sv=gi(),vm=Le(),LH=Mr(),hr=(0,vm.Debug)("cluster:subscriber"),Cm=class{constructor(e,r,s=!1){this.connectionPool=e,this.emitter=r,this.isSharded=s,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){hr("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}hr("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,i)=>{!this.started||!this.subscriber||(0,Sv.getNodeKey)(this.subscriber.options)===i&&(hr("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(hr("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),hr("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,vm.sample)(this.connectionPool.getNodes());if(!r){hr("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:s}=r;hr("selected a subscriber %s:%s",s.host,s.port);let n="subscriber";this.isSharded&&(n="ssubscriber"),this.subscriber=new LH.default({port:s.port,host:s.host,username:s.username,password:s.password,enableReadyCheck:!0,connectionName:(0,Sv.getConnectionName)(n,s.connectionName),lazyConnect:!0,tls:s.tls,retryStrategy:null}),this.subscriber.on("error",vm.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let i={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let o=e.condition||e.prevCondition;o&&o.subscriber&&(i.subscribe=o.subscriber.channels("subscribe"),i.psubscribe=o.subscriber.channels("psubscribe"),i.ssubscribe=o.subscriber.channels("ssubscribe"))}if(i.subscribe.length||i.psubscribe.length||i.ssubscribe.length){let o=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let c=i[a];if(c.length!=0)if(hr("%s %d channels",a,c.length),a==="ssubscribe")for(let u of c)o+=1,this.subscriber[a](u).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{hr("failed to ssubscribe to channel: %s",u)});else o+=1,this.subscriber[a](c).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{hr("failed to %s %d channels",a,c.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let o of["message","messageBuffer"])this.subscriber.on(o,(a,c)=>{this.emitter.emit(o,a,c)});for(let o of["pmessage","pmessageBuffer"])this.subscriber.on(o,(a,c,u)=>{this.emitter.emit(o,a,c,u)});if(this.isSharded==!0)for(let o of["smessage","smessageBuffer"])this.subscriber.on(o,(a,c)=>{this.emitter.emit(o,a,c)})}};Rm.default=Cm});var Ev=S(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});var FH=require("events"),eu=Le(),Tm=gi(),qH=Mr(),qo=(0,eu.Debug)("cluster:connectionPool"),xm=class extends FH.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(s=>r[s])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),s=(0,eu.sample)(r);return this.nodes[e][s]}addMasterNode(e){let r=(0,Tm.getNodeKey)(e.options),s=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=s,this.nodes.master[r]=s,!0)}createRedisFromOptions(e,r){return new qH.default((0,eu.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let s=(0,Tm.getNodeKey)(e);r=!!r,this.specifiedOptions[s]?Object.assign(e,this.specifiedOptions[s]):this.specifiedOptions[s]=e;let n;return this.nodes.all[s]?(n=this.nodes.all[s],n.options.readOnly!==r&&(n.options.readOnly=r,qo("Change role of %s to %s",s,r?"slave":"master"),n[r?"readonly":"readwrite"]().catch(eu.noop),r?(delete this.nodes.master[s],this.nodes.slave[s]=n):(delete this.nodes.slave[s],this.nodes.master[s]=n))):(qo("Connecting to %s as %s",s,r?"slave":"master"),n=this.createRedisFromOptions(e,r),this.nodes.all[s]=n,this.nodes[r?"slave":"master"][s]=n,n.once("end",()=>{this.removeNode(s),this.emit("-node",n,s),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",n,s),n.on("error",function(i){this.emit("nodeError",i,s)})),n}reset(e){qo("Reset with %O",e);let r={};e.forEach(s=>{let n=(0,Tm.getNodeKey)(s);s.readOnly&&r[n]||(r[n]=s)}),Object.keys(this.nodes.all).forEach(s=>{r[s]||(qo("Disconnect %s because the node does not hold any slot",s),this.nodes.all[s].disconnect(),this.removeNode(s))}),Object.keys(r).forEach(s=>{let n=r[s];this.findOrCreate(n,n.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(qo("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};Am.default=xm});var tu=S((Ese,_v)=>{"use strict";function ve(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}ve.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var s=this.size();if(!(r>=s||r<-s))return r<0&&(r+=s),r=this._head+r&this._capacityMask,this._list[r]}};ve.prototype.get=function(e){return this.peekAt(e)};ve.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ve.prototype.peekFront=function(){return this.peek()};ve.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ve.prototype,"length",{get:function(){return this.size()}});ve.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ve.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ve.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ve.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ve.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var s=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),s}};ve.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var s=this.size(),n=this._list.length;if(!(r>=s||r<-s)){r<0&&(r+=s),r=this._head+r&this._capacityMask;var i=this._list[r],o;if(e<s/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(o=s-1-e;o>0;o--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return i}}};ve.prototype.remove=function(e,r){var s=e,n,i=r;if(s===(s|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(s>=o||s<-o||r<1)){if(s<0&&(s+=o),r===1||!r)return n=new Array(1),n[0]=this.removeOne(s),n;if(s===0&&s+r>=o)return n=this.toArray(),this.clear(),n;s+r>o&&(r=o-s);var c;for(n=new Array(r),c=0;c<r;c++)n[c]=this._list[this._head+s+c&this._capacityMask];if(s=this._head+s&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[s=s+1+a&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[s=s+1+a&this._capacityMask]=void 0;return n}if(s<o/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[s=s-1+a&this._capacityMask]);for(s=this._head-1+a&this._capacityMask;i>0;)this._list[s=s-1+a&this._capacityMask]=void 0,i--;e<0&&(this._tail=s)}else{for(this._tail=s,s=s+r+a&this._capacityMask,c=o-(r+e);c>0;c--)this.push(this._list[s++]);for(s=this._tail;i>0;)this._list[s=s+1+a&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}};ve.prototype.splice=function(e,r){var s=e;if(s===(s|0)){var n=this.size();if(s<0&&(s+=n),!(s>n))if(arguments.length>2){var i,o,a,c=arguments.length,u=this._list.length,d=2;if(!n||s<n/2){for(o=new Array(s),i=0;i<s;i++)o[i]=this._list[this._head+i&this._capacityMask];for(r===0?(a=[],s>0&&(this._head=this._head+s+u&this._capacityMask)):(a=this.remove(s,r),this._head=this._head+s+u&this._capacityMask);c>d;)this.unshift(arguments[--c]);for(i=s;i>0;i--)this.unshift(o[i-1])}else{o=new Array(n-(s+r));var l=o.length;for(i=0;i<l;i++)o[i]=this._list[this._head+s+r+i&this._capacityMask];for(r===0?(a=[],s!=n&&(this._tail=this._head+s+u&this._capacityMask)):(a=this.remove(s,r),this._tail=this._tail-l+u&this._capacityMask);d<c;)this.push(arguments[d++]);for(i=0;i<l;i++)this.push(o[i])}return a}else return this.remove(s,r)}};ve.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};ve.prototype.isEmpty=function(){return this._head===this._tail};ve.prototype.toArray=function(){return this._copyArray(!1)};ve.prototype._fromArray=function(e){var r=e.length,s=this._nextPowerOf2(r);this._list=new Array(s),this._capacityMask=s-1,this._tail=r;for(var n=0;n<r;n++)this._list[n]=e[n]};ve.prototype._copyArray=function(e,r){var s=this._list,n=s.length,i=this.length;if(r=r|i,r==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,c;if(e||this._head>this._tail){for(c=this._head;c<n;c++)o[a++]=s[c];for(c=0;c<this._tail;c++)o[a++]=s[c]}else for(c=this._head;c<this._tail;c++)o[a++]=s[c];return o};ve.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};ve.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ve.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),s=1<<r+1;return Math.max(s,4)};_v.exports=ve});var wv=S(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});var BH=Le(),UH=tu(),$H=(0,BH.Debug)("delayqueue"),Pm=class{constructor(){this.queues={},this.timeouts={}}push(e,r,s){let n=s.callback||process.nextTick;this.queues[e]||(this.queues[e]=new UH),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{n(()=>{this.timeouts[e]=null,this.execute(e)})},s.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:s}=r;if(s)for($H("send %d commands in %s queue",s,e),this.queues[e]=null;r.length>0;)r.shift()()}};Im.default=Pm});var Cv=S(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});var vv=gi(),jH=Le(),HH=Mr(),ru=(0,jH.Debug)("cluster:subscriberGroup:shardedSubscriber"),km=class{constructor(e,r){this.emitter=e,this.started=!1,this.instance=null,this.messageListeners=new Map,this.onEnd=()=>{this.started=!1,this.emitter.emit("-node",this.instance,this.nodeKey)},this.onError=s=>{this.emitter.emit("nodeError",s,this.nodeKey)},this.onMoved=()=>{this.emitter.emit("moved")},this.instance=new HH.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!1,offlineQueue:!0,connectionName:(0,vv.getConnectionName)("ssubscriber",r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.nodeKey=(0,vv.getNodeKey)(r),this.instance.once("end",this.onEnd),this.instance.on("error",this.onError),this.instance.on("moved",this.onMoved);for(let s of["smessage","smessageBuffer"]){let n=(...i)=>{this.emitter.emit(s,...i)};this.messageListeners.set(s,n),this.instance.on(s,n)}}async start(){if(this.started){ru("already started %s",this.nodeKey);return}try{await this.instance.connect(),ru("started %s",this.nodeKey),this.started=!0}catch(e){throw ru("failed to start %s: %s",this.nodeKey,e),this.started=!1,e}}stop(){this.started=!1,this.instance&&(this.instance.disconnect(),this.instance.removeAllListeners(),this.messageListeners.clear(),this.instance=null),ru("stopped %s",this.nodeKey)}isStarted(){return this.started}getInstance(){return this.instance}getNodeKey(){return this.nodeKey}};Om.default=km});var Rv=S(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});var zH=Le(),VH=gi(),su=Mo(),GH=Cv(),Zt=(0,zH.Debug)("cluster:subscriberGroup"),yi=class t{constructor(e){this.subscriberGroupEmitter=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,this.failedAttemptsByNode=new Map,this.isResetting=!1,this.pendingReset=null,this.handleSubscriberConnectFailed=(r,s)=>{let i=(this.failedAttemptsByNode.get(s)||0)+1;this.failedAttemptsByNode.set(s,i);let o=Math.min(i,t.MAX_RETRY_ATTEMPTS),a=Math.min(t.BASE_BACKOFF_MS*2**o,t.MAX_BACKOFF_MS),c=Math.floor((Math.random()-.5)*(a*.5)),u=Math.max(0,a+c);Zt("Failed to connect subscriber for %s. Refreshing slots in %dms",s,u),this.subscriberGroupEmitter.emit("subscriberConnectFailed",{delay:u,error:r})},this.handleSubscriberConnectSucceeded=r=>{this.failedAttemptsByNode.delete(r)}}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=su(e[0]);for(let n of e)if(su(n)!==r)return-1;let s=this.channels.get(r);return s?this.channels.set(r,s.concat(e)):this.channels.set(r,e),Array.from(this.channels.values()).reduce((n,i)=>n+i.length,0)}removeChannels(e){let r=su(e[0]);for(let n of e)if(su(n)!==r)return-1;let s=this.channels.get(r);if(s){let n=s.filter(i=>!e.includes(i));this.channels.set(r,n)}return Array.from(this.channels.values()).reduce((n,i)=>n+i.length,0)}stop(){for(let e of this.shardedSubscribers.values())e.stop();this.pendingReset=null,this.shardedSubscribers.clear(),this.subscriberToSlotsIndex.clear()}start(){let e=[];for(let r of this.shardedSubscribers.values())r.isStarted()||e.push(r.start().then(()=>{this.handleSubscriberConnectSucceeded(r.getNodeKey())}).catch(s=>{this.handleSubscriberConnectFailed(s,r.getNodeKey())}));return Promise.all(e)}async reset(e,r){if(this.isResetting){this.pendingReset={slots:e,nodes:r};return}this.isResetting=!0;try{let s=this._refreshSlots(e),n=this.hasUnhealthySubscribers();if(!s&&!n){Zt("No topology change detected or failed subscribers. Skipping reset.");return}for(let[o,a]of this.shardedSubscribers){if(this.subscriberToSlotsIndex.has(o)&&a.isStarted()){Zt("Skipping deleting subscriber for %s",o);continue}Zt("Removing subscriber for %s",o),a.stop(),this.shardedSubscribers.delete(o),this.subscriberGroupEmitter.emit("-subscriber")}let i=[];for(let[o,a]of this.subscriberToSlotsIndex){if(this.shardedSubscribers.has(o)){Zt("Skipping creating new subscriber for %s",o);continue}Zt("Creating new subscriber for %s",o);let c=r.find(d=>(0,VH.getNodeKey)(d.options)===o);if(!c){Zt("Failed to find node for key %s",o);continue}let u=new GH.default(this.subscriberGroupEmitter,c.options);this.shardedSubscribers.set(o,u),i.push(u.start().then(()=>{this.handleSubscriberConnectSucceeded(o)}).catch(d=>{this.handleSubscriberConnectFailed(d,o)})),this.subscriberGroupEmitter.emit("+subscriber")}await Promise.all(i),this._resubscribe(),this.subscriberGroupEmitter.emit("subscribersReady")}finally{if(this.isResetting=!1,this.pendingReset){let{slots:s,nodes:n}=this.pendingReset;this.pendingReset=null,await this.reset(s,n)}}}_refreshSlots(e){if(this._slotsAreEqual(e))return Zt("Nothing to refresh because the new cluster map is equal to the previous one."),!1;Zt("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.length;r++){let s=e[r][0];this.subscriberToSlotsIndex.has(s)||this.subscriberToSlotsIndex.set(s,[]),this.subscriberToSlotsIndex.get(s).push(Number(r))}return this.clusterSlots=JSON.parse(JSON.stringify(e)),!0}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let s=this.subscriberToSlotsIndex.get(r);s&&s.forEach(n=>{let i=e.getInstance(),o=this.channels.get(n);if(o&&o.length>0){if(i.status==="end")return;i.status==="ready"?i.ssubscribe(...o).catch(a=>{Zt("Failed to ssubscribe on node %s: %s",r,a)}):i.once("ready",()=>{i.ssubscribe(...o).catch(a=>{Zt("Failed to ssubscribe on node %s: %s",r,a)})})}})})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}hasUnhealthySubscribers(){let e=Array.from(this.shardedSubscribers.values()).some(s=>!s.isStarted()),r=Array.from(this.subscriberToSlotsIndex.keys()).some(s=>!this.shardedSubscribers.has(s));return e||r}};Nm.default=yi;yi.MAX_RETRY_ATTEMPTS=10;yi.MAX_BACKOFF_MS=2e3;yi.BASE_BACKOFF_MS=100});var Lm=S(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});var Tv=oi(),Dm=require("events"),Si=dn(),xv=cs(),Av=Nr(),nu=rv(),QH=Mr(),WH=Kc(),KH=Em(),It=Le(),YH=wm(),XH=Xc(),JH=gv(),ZH=bv(),e4=Ev(),t4=wv(),bi=gi(),Pv=tu(),r4=Rv(),he=(0,It.Debug)("cluster"),Iv=new WeakSet,Bo=class t extends XH.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new t4.default,this.offlineQueue=new Pv,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,Dm.EventEmitter.call(this),this.startupNodes=e,this.options=(0,It.defaults)({},r,JH.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers&&this.createShardedSubscriberGroup(),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new e4.default(this.options.redisOptions),this.connectionPool.on("-node",(s,n)=>{this.emit("-node",s)}),this.connectionPool.on("+node",s=>{this.emit("+node",s)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(s,n)=>{this.emit("node error",s,n)}),this.subscriber=new ZH.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([s,n])=>{this.defineCommand(s,n)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(s=>{he("connecting failed: %s",s)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let s=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(n=>{if(this.connectionEpoch!==s){he("discard connecting after resolving startup nodes because epoch not match: %d != %d",s,this.connectionEpoch),r(new Si.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){he("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new Si.RedisError("Connection is aborted"));return}this.connectionPool.reset(n),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(c=>{he("Error while starting subscribers: %s",c)});let i=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((c,u)=>{c||u?(he("Ready check failed (%s). Reconnecting...",c||u),this.status==="connect"&&this.disconnect(!0)):i()}):i()};o=()=>{let c=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(c),r(c)},this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(c=>{c&&c.message===nu.default.defaultMessage&&(QH.default.prototype.silentEmit.call(this,"error",c),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start().catch(c=>{he("Error while starting subscribers: %s",c)})}).catch(n=>{this.setStatus("close"),this.handleCloseEvent(n),this.invokeReadyDelayedCallbacks(n),r(n)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,he("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let s=(0,xv.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),s}return(0,xv.default)(Promise.all(this.nodes().map(s=>s.quit().catch(n=>{if(n.message===It.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw n}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let s=e.length>0?e:this.startupNodes.slice(0),n=Object.assign({},this.options,r);return new t(s,n)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,s=a=>{this.isRefreshing=!1;for(let c of this._refreshSlotsCacheCallbacks)c(a);this._refreshSlotsCacheCallbacks=[]},n=(0,It.shuffle)(this.connectionPool.getNodes()),i=null;function o(a){if(a===n.length){let d=new nu.default(nu.default.defaultMessage,i);return s(d)}let c=n[a],u=`${c.options.host}:${c.options.port}`;he("getting slot cache from %s",u),r.getInfoFromNode(c,function(d){switch(r.status){case"close":case"end":return s(new Error("Cluster is disconnected."));case"disconnecting":return s(new Error("Cluster is disconnecting."))}d?(r.emit("node error",d,u),i=d,o(a+1)):(r.emit("refresh"),s())})}o(0)}sendCommand(e,r,s){if(this.status==="wait"&&this.connect().catch(It.noop),this.status==="end")return e.reject(new Error(It.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let n=this.options.scaleReads;n!=="master"&&(e.isReadOnly||(0,Tv.exists)(e.name)&&(0,Tv.hasFlag)(e.name,"readonly")||(n="master"));let i=s?s.slot:e.getSlot(),o={},a=this;if(!s&&!Iv.has(e)){Iv.add(e);let u=e.reject;e.reject=function(d){let l=c.bind(null,!0);a.handleError(d,o,{moved:function(h,m){he("command %s is moved to %s",e.name,m),i=Number(h),a.slots[h]?a.slots[h][0]=m:a.slots[h]=[m],a._groupsBySlot[h]=a._groupsIds[a.slots[h].join(";")],a.connectionPool.findOrCreate(a.natMapper(m)),c(),he("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(h,m){he("command %s is required to ask %s:%s",e.name,m);let g=a.natMapper(m);a.connectionPool.findOrCreate(g),c(!1,`${g.host}:${g.port}`)},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:function(h){u.call(e,h)},defaults:function(){u.call(e,d)}})}}c();function c(u,d){if(a.status==="end"){e.reject(new Si.AbortError("Cluster is ended."));return}let l;if(a.status==="ready"||e.name==="cluster"){if(s&&s.redis)l=s.redis;else if(Av.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||Av.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let h=a.shardedSubscribers.getResponsibleSubscriber(i);if(!h){e.reject(new Si.AbortError(`No sharded subscriber for slot: ${i}`));return}let m=-1;e.name=="ssubscribe"&&(m=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(m=a.shardedSubscribers.removeChannels(e.getKeys())),m!==-1?l=h.getInstance():e.reject(new Si.AbortError("Possible CROSSSLOT error: All channels must hash to the same slot"))}else l=a.subscriber.getInstance();if(!l){e.reject(new Si.AbortError("No subscriber for the cluster"));return}}else{if(!u){if(typeof i=="number"&&a.slots[i]){let h=a.slots[i];if(typeof n=="function"){let m=h.map(function(g){return a.connectionPool.getInstanceByKey(g)});l=n(m,e),Array.isArray(l)&&(l=(0,It.sample)(l)),l||(l=m[0])}else{let m;n==="all"?m=(0,It.sample)(h):n==="slave"&&h.length>1?m=(0,It.sample)(h,1):m=h[0],l=a.connectionPool.getInstanceByKey(m)}}d&&(l=a.connectionPool.getInstanceByKey(d),l.asking())}l||(l=(typeof n=="function"?null:a.connectionPool.getSampleInstance(n))||a.connectionPool.getSampleInstance("all"))}s&&!s.redis&&(s.redis=l)}l?l.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:s}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,s){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){s.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let n=e.message.split(" ");if(n[0]==="MOVED"){let i=this.options.retryDelayOnMoved;i&&typeof i=="number"?this.delayQueue.push("moved",s.moved.bind(null,n[1],n[2]),{timeout:i}):s.moved(n[1],n[2])}else n[0]==="ASK"?s.ask(n[1],n[2]):n[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",s.tryagain,{timeout:this.options.retryDelayOnTryAgain}):n[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",s.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===It.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",s.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):s.defaults()}resetOfflineQueue(){this.offlineQueue=new Pv}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{he('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){he("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){var r;e&&he("closed because %s",e);let s;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(s=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof s=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,he("Cluster is disconnected. Retrying after %dms",s),this.connect().catch(function(n){he("Got error %s when reconnecting. Ignoring...",n)})},s)):(this.options.shardedSubscribers&&((r=this.subscriberGroupEmitter)===null||r===void 0||r.removeAllListeners()),this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){he("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,s=null;return this.options.natMap&&typeof this.options.natMap=="function"?s=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(s=this.options.natMap[r]),s?(he("NAT mapping %s -> %O",r,s),Object.assign({},s)):typeof e=="string"?(0,bi.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let s=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,bi.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});s.on("error",It.noop),s.cluster("SLOTS",(0,It.timeout)((n,i)=>{if(s.disconnect(),n)return he("error encountered running CLUSTER.SLOTS: %s",n),r(n);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){he("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",i.length,this.status),r();return}let o=[];he("cluster slots result count: %d",i.length);for(let c=0;c<i.length;++c){let u=i[c],d=u[0],l=u[1],h=[];for(let m=2;m<u.length;m++){if(!u[m][0])continue;let g=this.natMapper({host:u[m][0],port:u[m][1]});g.readOnly=m!==2,o.push(g),h.push(g.host+":"+g.port)}he("cluster slots result [%d]: slots %d~%d served by %s",c,d,l,h);for(let m=d;m<=l;m++)this.slots[m]=h}this._groupsIds=Object.create(null);let a=0;for(let c=0;c<16384;c++){let u=(this.slots[c]||[]).join(";");if(!u.length){this._groupsBySlot[c]=void 0;continue}this._groupsIds[u]||(this._groupsIds[u]=++a),this._groupsBySlot[c]=this._groupsIds[u]}this.connectionPool.reset(o),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(c=>{he("Error while starting subscribers: %s",c)}),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,s)=>{if(r)return e(r);if(typeof s!="string")return e();let n,i=s.split(`\r
`);for(let o=0;o<i.length;++o){let a=i[o].split(":");if(a[0]==="cluster_state"){n=a[1];break}}n==="fail"?(he("cluster state not ok (%s)",n),e(null,n)):e()})}resolveSrv(e){return new Promise((r,s)=>{this.options.resolveSrv(e,(n,i)=>{if(n)return s(n);let o=this,a=(0,bi.groupSrvRecords)(i),c=Object.keys(a).sort((d,l)=>parseInt(d)-parseInt(l));function u(d){if(!c.length)return s(d);let l=c[0],h=a[l],m=(0,bi.weightSrvRecords)(h);h.records.length||c.shift(),o.dnsLookup(m.name).then(g=>r({host:g,port:m.port}),u)}u()})})}dnsLookup(e){return new Promise((r,s)=>{this.options.dnsLookup(e,(n,i)=>{n?(he("failed to resolve hostname %s to IP: %s",e,n.message),s(n)):(he("resolved hostname %s to IP %s",e,i),r(i))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,bi.normalizeNodeOptions)(this.startupNodes),r=(0,bi.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let s=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),n=(0,It.zipMap)(r,s);return e.map(i=>{let o=n.get(i.host);return o?this.options.useSRVRecords?Object.assign({},i,o):Object.assign({},i,{host:o}):i})}createScanStream(e,{key:r,options:s={}}){return new WH.default({objectMode:!0,key:r,redis:this,command:e,...s})}createShardedSubscriberGroup(){this.subscriberGroupEmitter=new Dm.EventEmitter,this.shardedSubscribers=new r4.default(this.subscriberGroupEmitter);let e=r=>{r instanceof nu.default&&this.disconnect(!0)};this.subscriberGroupEmitter.on("-node",(r,s)=>{this.emit("-node",r,s),this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("subscriberConnectFailed",({delay:r,error:s})=>{this.emit("error",s),setTimeout(()=>{this.refreshSlotsCache(e)},r)}),this.subscriberGroupEmitter.on("moved",()=>{this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("-subscriber",()=>{this.emit("-subscriber")}),this.subscriberGroupEmitter.on("+subscriber",()=>{this.emit("+subscriber")}),this.subscriberGroupEmitter.on("nodeError",(r,s)=>{this.emit("nodeError",r,s)}),this.subscriberGroupEmitter.on("subscribersReady",()=>{this.emit("subscribersReady")});for(let r of["smessage","smessageBuffer"])this.subscriberGroupEmitter.on(r,(s,n,i)=>{this.emit(r,s,n,i)})}};(0,YH.default)(Bo,Dm.EventEmitter);(0,KH.addTransactionSupport)(Bo.prototype);Mm.default=Bo});var iu=S(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});var s4=Le(),n4=(0,s4.Debug)("AbstractConnector"),Fm=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{n4("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};qm.default=Fm});var kv=S(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});var i4=require("net"),o4=require("tls"),a4=Le(),c4=iu(),Bm=class extends c4.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let s;return"path"in r&&r.path?s={path:r.path}:(s={},"port"in r&&r.port!=null&&(s.port=r.port),"host"in r&&r.host!=null&&(s.host=r.host),"family"in r&&r.family!=null&&(s.family=r.family)),r.tls&&Object.assign(s,r.tls),new Promise((n,i)=>{process.nextTick(()=>{if(!this.connecting){i(new Error(a4.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,o4.connect)(s):this.stream=(0,i4.createConnection)(s)}catch(o){i(o);return}this.stream.once("error",o=>{this.firstError=o}),n(this.stream)})})}};Um.default=Bm});var Ov=S(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});function u4(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var $m=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(u4(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};jm.default=$m});var Dv=S(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.FailoverDetector=void 0;var l4=Le(),Hm=(0,l4.Debug)("FailoverDetector"),Nv="+switch-master",zm=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){Hm("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let s=r.client.subscribe(Nv).catch(n=>{Hm("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,n.message)});e.push(s),r.client.on("message",n=>{!this.isDisconnected&&n===Nv&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,Hm("Failover detected, disconnecting"),this.connector.disconnect()}};ou.FailoverDetector=zm});var au=S($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.SentinelIterator=void 0;var d4=require("net"),Uo=Le(),f4=require("tls"),Mv=Ov();$o.SentinelIterator=Mv.default;var p4=iu(),h4=Mr(),m4=Dv(),Ei=(0,Uo.Debug)("SentinelConnector"),Vm=class extends p4.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new Mv.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(Ei("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,s=async()=>{let n=this.sentinelIterator.next();if(n.done){this.sentinelIterator.reset(!1);let c=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,u=typeof c!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${c}ms.`;r&&(u+=` Last error: ${r.message}`),Ei(u);let d=new Error(u);if(typeof c=="number")return e("error",d),await new Promise(l=>setTimeout(l,c)),s();throw d}let i=null,o=null;try{i=await this.resolve(n.value)}catch(c){o=c}if(!this.connecting)throw new Error(Uo.CONNECTION_CLOSED_ERROR_MSG);let a=n.value.host+":"+n.value.port;if(i)return Ei("resolved: %s:%s from sentinel %s",i.host,i.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(i,this.options.tls),this.stream=(0,f4.connect)(i),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,d4.createConnection)(i),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",c=>{this.firstError=c}),this.stream;{let c=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+i;return Ei(c),e("sentinelError",new Error(c)),o&&(r=o),s()}};return s()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(Uo.packObject).forEach(s=>{if((s.flags?s.flags.split(","):[]).indexOf("disconnected")===-1&&s.ip&&s.port){let i=this.sentinelNatResolve(Lv(s));this.sentinelIterator.add(i)&&Ei("adding sentinel %s:%s",i.host,i.port)}}),Ei("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let s=r.map(Uo.packObject).filter(n=>n.flags&&!n.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(g4(s,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,s=e;return typeof this.options.natMap=="function"?s=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(s=this.options.natMap[r]||e),s}connectToSentinel(e,r){return new h4.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",y4);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:s,value:n}=this.sentinelIterator.next();if(s)break;let i=this.connectToSentinel(n,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});i.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),r.push({address:n,client:i})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new m4.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};$o.default=Vm;function g4(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let s=Array.isArray(e)?e:[e];s.sort((n,i)=>(n.prio||(n.prio=1),i.prio||(i.prio=1),n.prio<i.prio?-1:n.prio>i.prio?1:0));for(let n=0;n<s.length;n++){for(let i=0;i<t.length;i++){let o=t[i];if(o.ip===s[n].ip&&o.port===s[n].port){r=o;break}}if(r)break}}return r||(r=(0,Uo.sample)(t)),Lv(r)}function Lv(t){return{host:t.ip,port:Number(t.port)}}function y4(){}});var Fv=S(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.SentinelConnector=_i.StandaloneConnector=void 0;var S4=kv();_i.StandaloneConnector=S4.default;var b4=au();_i.SentinelConnector=b4.default});var qv=S(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});var E4=dn(),Gm=class extends E4.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Qm.default=Gm});var Bv=S(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.MaxRetriesPerRequestError=void 0;var _4=qv();cu.MaxRetriesPerRequestError=_4.default});var Gv=S((Nse,Vv)=>{"use strict";var Zm=require("buffer").Buffer,w4=require("string_decoder").StringDecoder,Wm=new w4,Uv=dn(),v4=Uv.ReplyError,C4=Uv.ParserError,er=Zm.allocUnsafe(32*1024),ct=0,uu=null,jo=0,Km=0;function R4(t){let e=t.buffer.length-1;var r=t.offset,s=0,n=1;for(t.buffer[r]===45&&(n=-1,r++);r<e;){let i=t.buffer[r++];if(i===13)return t.offset=r+1,n*s;s=s*10+(i-48)}}function T4(t){let e=t.buffer.length-1;var r=t.offset,s=0,n="";for(t.buffer[r]===45&&(n+="-",r++);r<e;){var i=t.buffer[r++];if(i===13)return t.offset=r+1,s!==0&&(n+=s),n;s>429496728?(n+=s*10+(i-48),s=0):i===48&&s===0?n+=0:s=s*10+(i-48)}}function $v(t){let e=t.offset,r=t.buffer,s=r.length-1;for(var n=e;n<s;)if(r[n++]===13)return t.offset=n+1,t.optionReturnBuffers===!0?t.buffer.slice(e,n-1):t.buffer.toString("utf8",e,n-1)}function jv(t){let e=t.buffer.length-1;for(var r=t.offset,s=0;r<e;){let n=t.buffer[r++];if(n===13)return t.offset=r+1,s;s=s*10+(n-48)}}function x4(t){return t.optionStringNumbers===!0?T4(t):R4(t)}function A4(t){let e=jv(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let s=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(s,r):t.buffer.toString("utf8",s,r)}function P4(t){var e=$v(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new v4(e)}function I4(t,e){let r=new C4("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function k4(t){let e=jv(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return Hv(t,r,0)}function Ym(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function Xm(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let s=Xm(t);if(s===void 0){Ym(t,e,r);return}e[r++]=s}return Hv(t,e,r)}function Hv(t,e,r){let s=t.buffer.length;for(;r<e.length;){let n=t.offset;if(t.offset>=s){Ym(t,e,r);return}let i=zv(t,t.buffer[t.offset++]);if(i===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=n),Ym(t,e,r);return}e[r]=i,r++}return e}function zv(t,e){switch(e){case 36:return A4(t);case 43:return $v(t);case 42:return k4(t);case 58:return x4(t);case 45:return P4(t);default:return I4(t,e)}}function O4(){if(er.length>50*1024)if(jo===1||Km>jo*2){let t=Math.floor(er.length/10),e=t<ct?ct:t;ct=0,er=er.slice(e,er.length)}else Km++,jo--;else clearInterval(uu),jo=0,Km=0,uu=null}function N4(t){if(er.length<t+ct){let e=t>78643200?2:3;ct>1024*1024*111&&(ct=1024*1024*50),er=Zm.allocUnsafe(t*e+ct),ct=0,jo++,uu===null&&(uu=setInterval(O4,50))}}function D4(t){let e=t.bufferCache,r=t.offset;var s=e.length,n=t.bigStrSize-t.totalChunkSize;if(t.offset=n,n<=2){if(s===2)return e[0].toString("utf8",r,e[0].length+n-2);s--,n=e[e.length-2].length+n}for(var i=Wm.write(e[0].slice(r)),o=1;o<s-1;o++)i+=Wm.write(e[o]);return i+=Wm.end(e[o].slice(0,n-2)),i}function M4(t){let e=t.bufferCache,r=t.offset,s=t.bigStrSize-r-2;var n=e.length,i=t.bigStrSize-t.totalChunkSize;if(t.offset=i,i<=2){if(n===2)return e[0].slice(r,e[0].length+i-2);n--,i=e[e.length-2].length+i}N4(s);let o=ct;e[0].copy(er,o,r,e[0].length),ct+=e[0].length-r;for(var a=1;a<n-1;a++)e[a].copy(er,ct),ct+=e[a].length;return e[a].copy(er,ct,0,i-2),ct+=i-2,er.slice(o,ct)}var Jm=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let s=this.buffer.length,n=s-this.offset,i=Zm.allocUnsafe(n+e.length);if(this.buffer.copy(i,0,this.offset,s),e.copy(i,n,0,e.length),this.buffer=i,this.offset=0,this.arrayCache.length){let o=Xm(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?M4(this):D4(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Xm(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let s=this.offset,n=this.buffer[this.offset++],i=zv(this,n);if(i===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=s);return}n===45?this.returnError(i):this.returnReply(i)}this.buffer=null}};Vv.exports=Jm});var Wv=S((Dse,Qv)=>{"use strict";Qv.exports=Gv()});var Kv=S(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});var tg=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[eg(e)][r]=!0}del(e,r){delete this.set[eg(e)][r]}channels(e){return Object.keys(this.set[eg(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};rg.default=tg;function eg(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var Zv=S(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});var Yv=Nr(),L4=Le(),F4=Wv(),q4=Kv(),B4=(0,L4.Debug)("dataHandler"),sg=class{constructor(e,r){this.redis=e;let s=new F4({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:n=>{this.returnError(n)},returnFatalError:n=>{this.returnFatalError(n)},returnReply:n=>{this.returnReply(n)}});e.stream.prependListener("data",n=>{s.execute(n)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(Yv.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new q4.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),Xv(r.command,e[2])||this.redis.commandQueue.unshift(r)):Yv.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?Jv(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(B4('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let s=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",s,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",s,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let s=e[1].toString();this.redis.condition.subscriber.add(r,s);let n=this.shiftCommand(e);if(!n)return;Xv(n.command,e[2])||this.redis.commandQueue.unshift(n);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let s=e[1]?e[1].toString():null;s&&this.redis.condition.subscriber.del(r,s);let n=e[2];Number(n)===0&&(this.redis.condition.subscriber=!1);let i=this.shiftCommand(e);if(!i)return;Jv(i.command,n)||this.redis.commandQueue.unshift(i);break}default:{let s=this.shiftCommand(e);if(!s)return;s.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let s=r.indexOf(" "),n=r.slice(0,s),i=r.indexOf('"'),o=r.slice(i+1,-1).split('" "').map(c=>c.replace(/\\"/g,'"')),a=r.slice(s+2,i-2).split(" ");return this.redis.emit("monitor",n,o,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let s="Command queue state error. If you can reproduce this, please report it.",n=new Error(s+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",n),null}return r}};ng.default=sg;var fs=new WeakMap;function Xv(t,e){let r=fs.has(t)?fs.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),fs.delete(t),!0):(fs.set(t,r),!1)}function Jv(t,e){let r=fs.has(t)?fs.get(t):t.args.length;return r===0?Number(e)===0?(fs.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(fs.set(t,r),!1))}});var eC=S(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.readyHandler=Ut.errorHandler=Ut.closeHandler=Ut.connectHandler=void 0;var U4=dn(),$4=Nr(),j4=Bv(),mr=Le(),H4=Zv(),je=(0,mr.Debug)("connection");function z4(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:s}=t;t.condition.auth&&t.auth(t.condition.auth,function(i){s===t.connectionEpoch&&i&&(i.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):i.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):i.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(i,i)))}),t.condition.select&&t.select(t.condition.select).catch(i=>{t.silentEmit("error",i)}),new H4.default(t,{stringNumbers:t.options.stringNumbers});let n=[];t.options.connectionName&&(je("set the connection name [%s]",t.options.connectionName),n.push(t.client("setname",t.options.connectionName).catch(mr.noop))),t.options.disableClientInfo||(je("set the client info"),n.push((0,mr.getPackageMeta)().then(i=>t.client("SETINFO","LIB-VER",i.version).catch(mr.noop)).catch(mr.noop)),n.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(mr.noop))),Promise.all(n).catch(mr.noop).finally(()=>{t.options.enableReadyCheck||Ut.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(i,o){s===t.connectionEpoch&&(i?r||t.recoverFromFatalError(new Error("Ready check failed: "+i.message),i):t.connector.check(o)?Ut.readyHandler(t)():t.disconnect(!0))})})}}Ut.connectHandler=z4;function ig(t){let e=new U4.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function V4(t){var e;let r=0;for(let s=0;s<t.length;){let n=(e=t.peekAt(s))===null||e===void 0?void 0:e.command,i=n.pipelineIndex;if((i===void 0||i===0)&&(r=0),i!==void 0&&i!==r++){t.remove(s,1),n.reject(ig(n));continue}s++}}function G4(t){var e;for(let r=0;r<t.length;){let s=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(s.name==="multi")break;if(s.name==="exec"){t.remove(r,1),s.reject(ig(s));break}s.inTransaction?(t.remove(r,1),s.reject(ig(s))):r++}}function Q4(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&V4(t.commandQueue),t.offlineQueue.length&&G4(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,je("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return je("skip reconnecting because `retryStrategy` is not a function"),e();let s=t.options.retryStrategy(++t.retryAttempts);if(typeof s!="number")return je("skip reconnecting because `retryStrategy` doesn't return a number"),e();je("reconnect in %sms",s),t.setStatus("reconnecting",s),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(mr.noop)},s);let{maxRetriesPerRequest:n}=t.options;typeof n=="number"&&(n<0?je("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(n+1)===0&&(je("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new j4.MaxRetriesPerRequestError(n))))};function e(){t.setStatus("end"),t.flushQueue(new Error(mr.CONNECTION_CLOSED_ERROR_MSG))}}Ut.closeHandler=Q4;function W4(t){return function(e){je("error: %s",e),t.silentEmit("error",e)}}Ut.errorHandler=W4;function K4(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),s=>t.emit("error",s));let{sendCommand:r}=t;t.sendCommand=function(s){return $4.default.checkFlag("VALID_IN_MONITOR_MODE",s.name)?r.call(t,s):(s.reject(new Error("Connection is in monitoring mode, can't process commands.")),s.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(je("set the connection to readonly mode"),t.readonly().catch(mr.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(je("connect to db [%d]",e),t.select(e));let s=r.subscriber.channels("subscribe");s.length&&(je("subscribe %d channels",s.length),t.subscribe(s));let n=r.subscriber.channels("psubscribe");n.length&&(je("psubscribe %d channels",n.length),t.psubscribe(n));let i=r.subscriber.channels("ssubscribe");if(i.length){je("ssubscribe %s",i.length);for(let o of i)t.ssubscribe(o)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(je("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){je("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let s=r.shift();s.select!==t.condition.select&&s.command.name!=="select"&&t.select(s.select),t.sendCommand(s.command,s.stream)}}t.condition.select!==e&&(je("connect to db [%d]",e),t.select(e))}}Ut.readyHandler=K4});var tC=S(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.DEFAULT_REDIS_OPTIONS=void 0;lu.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10,blockingTimeoutGrace:100}});var Mr=S(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});var rC=oi(),nC=require("events"),og=cs(),Y4=Lm(),hn=Nr(),X4=Fv(),J4=au(),ps=eC(),iC=tC(),Z4=Kc(),ez=Em(),mn=Le(),tz=wm(),rz=Xc(),hs=Hc(),sC=tu(),ms=(0,mn.Debug)("redis"),gs=class t extends rz.default{constructor(e,r,s){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,s),nC.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let n=new J4.default(this.options);n.emitter=this,this.connector=n}else this.connector=new X4.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,i])=>{this.defineCommand(n,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(hs.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((s,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:i}=this;this.condition={select:i.db,auth:i.username?[i.username,i.password]:i.password,subscriber:!1};let o=this;(0,og.default)(this.connector.connect(function(a,c){o.silentEmit(a,c)}),function(a,c){if(a){o.flushQueue(a),o.silentEmit("error",a),n(a),o.setStatus("end");return}let u=i.tls?"secureConnect":"connect";if("sentinels"in i&&i.sentinels&&!i.enableTLSForSentinelMode&&(u="connect"),o.stream=c,i.noDelay&&c.setNoDelay(!0),typeof i.keepAlive=="number"&&(c.connecting?c.once(u,()=>{c.setKeepAlive(!0,i.keepAlive)}):c.setKeepAlive(!0,i.keepAlive)),c.connecting){if(c.once(u,ps.connectHandler(o)),i.connectTimeout){let h=!1;c.setTimeout(i.connectTimeout,function(){if(h)return;c.setTimeout(0),c.destroy();let m=new Error("connect ETIMEDOUT");m.errorno="ETIMEDOUT",m.code="ETIMEDOUT",m.syscall="connect",ps.errorHandler(o)(m)}),c.once(u,function(){h=!0,c.setTimeout(0)})}}else if(c.destroyed){let h=o.connector.firstError;h&&process.nextTick(()=>{ps.errorHandler(o)(h)}),process.nextTick(ps.closeHandler(o))}else process.nextTick(ps.connectHandler(o));c.destroyed||(c.once("error",ps.errorHandler(o)),c.once("close",ps.closeHandler(o)));let d=function(){o.removeListener("close",l),s()};var l=function(){o.removeListener("ready",d),n(new Error(mn.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",d),o.once("close",l)})});return(0,og.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?ps.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,og.default)(new Promise(function(s,n){r.once("error",n),r.once("monitoring",function(){s(r)})}),e)}sendCommand(e,r){var s,n;if(this.status==="wait"&&this.connect().catch(hs.noop),this.status==="end")return e.reject(new Error(mn.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((s=this.condition)===null||s===void 0)&&s.subscriber&&!hn.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let i=this.getBlockingTimeoutInMs(e),o=this.status==="ready"||!r&&this.status==="connect"&&(0,rC.exists)(e.name,{caseInsensitive:!0})&&((0,rC.hasFlag)(e.name,"loading",{nameCaseInsensitive:!0})||hn.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)ms.enabled&&ms("write command[%s]: %d -> %s(%o)",this._getDescription(),(n=this.condition)===null||n===void 0?void 0:n.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),i!==void 0&&e.setBlockingTimeout(i),hn.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;if(ms.enabled&&ms("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select}),hn.default.checkFlag("BLOCKING_COMMANDS",e.name)){let a=this.getConfiguredBlockingTimeout();a!==void 0&&e.setBlockingTimeout(a)}}if(e.name==="select"&&(0,mn.isInt)(e.args[0])){let a=parseInt(e.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),ms("switch to db [%d]",this.condition.select))}return e.promise}getBlockingTimeoutInMs(e){var r;if(!hn.default.checkFlag("BLOCKING_COMMANDS",e.name))return;let s=this.getConfiguredBlockingTimeout();if(s===void 0)return;let n=e.extractBlockingTimeout();if(typeof n=="number")return n>0?n+((r=this.options.blockingTimeoutGrace)!==null&&r!==void 0?r:iC.DEFAULT_REDIS_OPTIONS.blockingTimeoutGrace):s;if(n===null)return s}getConfiguredBlockingTimeout(){if(typeof this.options.blockingTimeout=="number"&&this.options.blockingTimeout>0)return this.options.blockingTimeout}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let s;if(!(e==="error"&&(s=r,this.status==="end"||this.manuallyClosing&&s instanceof Error&&(s.message===mn.CONNECTION_CLOSED_ERROR_MSG||s.syscall==="connect"||s.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(s&&s instanceof Error&&console.error("[ioredis] Unhandled error event:",s.stack),!1)}recoverFromFatalError(e,r,s){this.flushQueue(r,s),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var s;let n=!1;switch(this.options.reconnectOnError&&!hn.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(n=this.options.reconnectOnError(e)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((s=this.condition)===null||s===void 0?void 0:s.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new sC}resetOfflineQueue(){this.offlineQueue=new sC}parseOptions(...e){let r={},s=!1;for(let n=0;n<e.length;++n){let i=e[n];if(!(i===null||typeof i>"u"))if(typeof i=="object")(0,hs.defaults)(r,i);else if(typeof i=="string")(0,hs.defaults)(r,(0,mn.parseURL)(i)),i.startsWith("rediss://")&&(s=!0);else if(typeof i=="number")r.port=i;else throw new Error("Invalid argument "+i)}s&&(0,hs.defaults)(r,{tls:!0}),(0,hs.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,mn.resolveTLSProfile)(r)}setStatus(e,r){ms.enabled&&ms("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:s={}}){return new Z4.default({objectMode:!0,key:r,redis:this,command:e,...s})}flushQueue(e,r){r=(0,hs.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let s;if(r.offlineQueue)for(;s=this.offlineQueue.shift();)s.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");s=this.commandQueue.shift();)s.command.reject(e)}_readyCheck(e){let r=this;this.info(function(s,n){if(s)return s.message&&s.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${s.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(s);if(typeof n!="string")return e(null,n);let i={},o=n.split(`\r
`);for(let a=0;a<o.length;++a){let[c,...u]=o[a].split(":"),d=u.join(":");d&&(i[c]=d)}if(!i.loading||i.loading==="0")e(null,i);else{let a=(i.loading_eta_seconds||1)*1e3,c=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;ms("Redis server still loading, trying again in "+c+"ms"),setTimeout(function(){r._readyCheck(e)},c)}}).catch(hs.noop)}};gs.Cluster=Y4.default;gs.Command=hn.default;gs.defaultOptions=iC.DEFAULT_REDIS_OPTIONS;(0,tz.default)(gs,nC.EventEmitter);(0,ez.addTransactionSupport)(gs.prototype);ag.default=gs});var cC=S((me,aC)=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.print=me.ReplyError=me.SentinelIterator=me.SentinelConnector=me.AbstractConnector=me.Pipeline=me.ScanStream=me.Command=me.Cluster=me.Redis=me.default=void 0;me=aC.exports=Mr().default;var sz=Mr();Object.defineProperty(me,"default",{enumerable:!0,get:function(){return sz.default}});var nz=Mr();Object.defineProperty(me,"Redis",{enumerable:!0,get:function(){return nz.default}});var iz=Lm();Object.defineProperty(me,"Cluster",{enumerable:!0,get:function(){return iz.default}});var oz=Nr();Object.defineProperty(me,"Command",{enumerable:!0,get:function(){return oz.default}});var az=Kc();Object.defineProperty(me,"ScanStream",{enumerable:!0,get:function(){return az.default}});var cz=ym();Object.defineProperty(me,"Pipeline",{enumerable:!0,get:function(){return cz.default}});var uz=iu();Object.defineProperty(me,"AbstractConnector",{enumerable:!0,get:function(){return uz.default}});var oC=au();Object.defineProperty(me,"SentinelConnector",{enumerable:!0,get:function(){return oC.default}});Object.defineProperty(me,"SentinelIterator",{enumerable:!0,get:function(){return oC.SentinelIterator}});me.ReplyError=dn().ReplyError;Object.defineProperty(me,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function lz(t,e){console.log(t?"Error: "+t:"Reply: "+e)}me.print=lz});var ys=S(fe=>{"use strict";fe.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(fe.HttpAuthLocation||(fe.HttpAuthLocation={}));fe.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(fe.HttpApiKeyAuthLocation||(fe.HttpApiKeyAuthLocation={}));fe.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(fe.EndpointURLScheme||(fe.EndpointURLScheme={}));fe.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(fe.AlgorithmId||(fe.AlgorithmId={}));var dz=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>fe.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>fe.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},fz=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},pz=t=>dz(t),hz=t=>fz(t);fe.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(fe.FieldPosition||(fe.FieldPosition={}));var mz="__smithy_context";fe.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(fe.IniSectionType||(fe.IniSectionType={}));fe.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(fe.RequestHandlerProtocol||(fe.RequestHandlerProtocol={}));fe.SMITHY_CONTEXT_KEY=mz;fe.getDefaultClientConfiguration=pz;fe.resolveDefaultRuntimeConfig=hz});var ue=S(Ss=>{"use strict";var gz=ys(),yz=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),Sz=t=>({httpHandler:t.httpHandler()}),cg=class{name;kind;values;constructor({name:e,kind:r=gz.FieldPosition.HEADER,values:s=[]}){this.name=e,this.kind=r,this.values=s}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},ug=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},lg=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=bz(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function bz(t){return Object.keys(t).reduce((e,r)=>{let s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}var dg=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Ez(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Ss.Field=cg;Ss.Fields=ug;Ss.HttpRequest=lg;Ss.HttpResponse=dg;Ss.getHttpHandlerExtensionConfiguration=yz;Ss.isValidHostname=Ez;Ss.resolveHttpHandlerRuntimeConfig=Sz});var wi=S(Ho=>{"use strict";var _z=ue();function wz(t){return t}var uC=t=>e=>async r=>{if(!_z.HttpRequest.isInstance(r.request))return e(r);let{request:s}=r,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let i=s.hostname;s.port!=null&&(i+=`:${s.port}`),s.headers.host=i}return e(r)},lC={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},vz=t=>({applyToStack:e=>{e.add(uC(t),lC)}});Ho.getHostHeaderPlugin=vz;Ho.hostHeaderMiddleware=uC;Ho.hostHeaderMiddlewareOptions=lC;Ho.resolveHostHeaderConfig=wz});var vi=S(du=>{"use strict";var dC=()=>(t,e)=>async r=>{try{let s=await t(r),{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,d=c??e.inputFilterSensitiveLog,l=u??e.outputFilterSensitiveLog,{$metadata:h,...m}=s.output;return o?.info?.({clientName:n,commandName:i,input:d(r.input),output:l(m),metadata:h}),s}catch(s){let{clientName:n,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:n,commandName:i,input:u(r.input),error:s,metadata:s.$metadata}),s}},fC={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Cz=t=>({applyToStack:e=>{e.add(dC(),fC)}});du.getLoggerPlugin=Cz;du.loggerMiddleware=dC;du.loggerMiddlewareOptions=fC});var pC={};ot(pC,{InvokeStore:()=>mg,InvokeStoreBase:()=>Vo});var zo,fg,Vo,pg,hg,mg,hC=E(()=>{zo={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},fg=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");fg||(globalThis.awslambda=globalThis.awslambda||{});Vo=class{static PROTECTED_KEYS=zo;isProtectedKey(e){return Object.values(zo).includes(e)}getRequestId(){return this.get(zo.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(zo.X_RAY_TRACE_ID)}getTenantId(){return this.get(zo.TENANT_ID)}},pg=class extends Vo{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=r}run(e,r){return this.currentContext=e,r()}},hg=class t extends Vo{als;static async create(){let e=new t,r=await import("node:async_hooks");return e.als=new r.AsyncLocalStorage,e}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,r){if(this.isProtectedKey(e))throw new Error(`Cannot modify protected Lambda context field: ${String(e)}`);let s=this.als.getStore();if(!s)throw new Error("No context available");s[e]=r}run(e,r){return this.als.run(e,r)}};(function(t){let e=null;async function r(){return e||(e=(async()=>{let n="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await hg.create():new pg;return!fg&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!fg&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=n),n)})()),e}t.getInstanceAsync=r,t._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{e=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={InvokeStore:void 0}}}:void 0})(mg||(mg={}))});var mC=S(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.recursionDetectionMiddleware=void 0;var Rz=(hC(),J(pC)),Tz=ue(),gg="X-Amzn-Trace-Id",xz="AWS_LAMBDA_FUNCTION_NAME",Az="_X_AMZN_TRACE_ID",Pz=()=>t=>async e=>{let{request:r}=e;if(!Tz.HttpRequest.isInstance(r))return t(e);let s=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===gg.toLowerCase())??gg;if(r.headers.hasOwnProperty(s))return t(e);let n=process.env[xz],i=process.env[Az],c=(await Rz.InvokeStore.getInstanceAsync())?.getXRayTraceId()??i,u=d=>typeof d=="string"&&d.length>0;return u(n)&&u(c)&&(r.headers[gg]=c),t({...e,request:r})};fu.recursionDetectionMiddleware=Pz});var Ci=S(pu=>{"use strict";var yg=mC(),Iz={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},kz=t=>({applyToStack:e=>{e.add(yg.recursionDetectionMiddleware(),Iz)}});pu.getRecursionDetectionPlugin=kz;Object.keys(yg).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(pu,t)&&Object.defineProperty(pu,t,{enumerable:!0,get:function(){return yg[t]}})})});var Sg,Oz,gC=E(()=>{Sg=v(ys()),Oz=t=>t[Sg.SMITHY_CONTEXT_KEY]||(t[Sg.SMITHY_CONTEXT_KEY]={})});var ut=S(bg=>{"use strict";var yC=ys(),Nz=t=>t[yC.SMITHY_CONTEXT_KEY]||(t[yC.SMITHY_CONTEXT_KEY]={}),Dz=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};bg.getSmithyContext=Nz;bg.normalizeProvider=Dz});var SC,bC=E(()=>{SC=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let s of e)for(let n of t)n.schemeId.split("#")[1]===s&&r.push(n);for(let s of t)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r}});function Mz(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var EC,Go,hu=E(()=>{EC=v(ut());bC();Go=(t,e)=>(r,s)=>async n=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,s,n.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=SC(i,o),c=Mz(t.httpAuthSchemes),u=(0,EC.getSmithyContext)(s),d=[];for(let l of a){let h=c.get(l.schemeId);if(!h){d.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await e.identityProviderConfigProvider(t));if(!m){d.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:w={}}=l.propertiesExtractor?.(t,s)||{};l.identityProperties=Object.assign(l.identityProperties||{},g),l.signingProperties=Object.assign(l.signingProperties||{},w),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await m(l.identityProperties),signer:h.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(n)}});var _C,gn,wC=E(()=>{hu();_C={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},gn=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Go(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),_C)}})});var _g=S(Ri=>{"use strict";var Lz=ue(),vC=(t,e)=>(r,s)=>async n=>{let{response:i}=await r(n);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!s.logger||s.logger?.constructor?.name==="NoOpLogger"?console.warn(a):s.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(Lz.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:Eg(/^x-[\w-]+-request-?id$/,u),extendedRequestId:Eg(/^x-[\w-]+-id-2$/,u),cfId:Eg(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},Eg=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],CC=(t,e)=>(r,s)=>async n=>{let i=t,o=s.endpointV2?.url&&i.urlParser?async()=>i.urlParser(s.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await e(n.input,{...t,endpoint:o});return r({...n,request:a})},RC={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},TC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Fz(t,e,r){return{applyToStack:s=>{s.add(vC(t,r),RC),s.add(CC(t,e),TC)}}}Ri.deserializerMiddleware=vC;Ri.deserializerMiddlewareOption=RC;Ri.getSerdePlugin=Fz;Ri.serializerMiddleware=CC;Ri.serializerMiddlewareOption=TC});var xC,AC,qz,PC=E(()=>{xC=v(_g());hu();AC={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:xC.serializerMiddlewareOption.name},qz=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Go(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),AC)}})});var IC=E(()=>{hu();wC();PC()});var kC,OC,Bz,Uz,wg,vg=E(()=>{kC=v(ue()),OC=v(ut()),Bz=t=>e=>{throw e},Uz=(t,e)=>{},wg=t=>(e,r)=>async s=>{if(!kC.HttpRequest.isInstance(s.request))return e(s);let i=(0,OC.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...s,request:await c.sign(s.request,a,o)}).catch((c.errorHandler||Bz)(o));return(c.successHandler||Uz)(u.response,o),u}});var NC,yn,DC=E(()=>{vg();NC={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},yn=t=>({applyToStack:e=>{e.addRelativeTo(wg(t),NC)}})});var MC=E(()=>{vg();DC()});var bs,LC=E(()=>{bs=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function FC(t,e,r,s,n){return async function*(o,a,...c){let u=a,d=o.startingToken??u[r],l=!0,h;for(;l;){if(u[r]=d,n&&(u[n]=u[n]??o.pageSize),o.client instanceof t)h=await $z(e,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield h;let m=d;d=jz(h,s),l=!!(d&&(!o.stopOnSameToken||d!==m))}return void 0}}var $z,jz,qC=E(()=>{$z=async(t,e,r,s=i=>i,...n)=>{let i=new t(r);return i=s(i)??i,await e.send(i,...n)};jz=(t,e)=>{let r=t,s=e.split(".");for(let n of s){if(!r||typeof r!="object")return;r=r[n]}return r}});var Cg=S(BC=>{"use strict";var Hz=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";BC.isArrayBuffer=Hz});var Ti=S(Tg=>{"use strict";var zz=Cg(),Rg=require("buffer"),Vz=(t,e=0,r=t.byteLength-e)=>{if(!zz.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Rg.Buffer.from(t,e,r)},Gz=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Rg.Buffer.from(t,e):Rg.Buffer.from(t)};Tg.fromArrayBuffer=Vz;Tg.fromString=Gz});var UC=S(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.fromBase64=void 0;var Qz=Ti(),Wz=/^[A-Za-z0-9+/]*={0,2}$/,Kz=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Wz.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,Qz.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};mu.fromBase64=Kz});var Fe=S(gu=>{"use strict";var $C=Ti(),jC=t=>{let e=$C.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Yz=t=>typeof t=="string"?jC(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Xz=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return $C.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};gu.fromUtf8=jC;gu.toUint8Array=Yz;gu.toUtf8=Xz});var HC=S(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.toBase64=void 0;var Jz=Ti(),Zz=Fe(),e6=t=>{let e;if(typeof t=="string"?e=(0,Zz.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Jz.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};yu.toBase64=e6});var qe=S(Qo=>{"use strict";var zC=UC(),VC=HC();Object.keys(zC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Qo,t)&&Object.defineProperty(Qo,t,{enumerable:!0,get:function(){return zC[t]}})});Object.keys(VC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Qo,t)&&Object.defineProperty(Qo,t,{enumerable:!0,get:function(){return VC[t]}})})});var Ag=S(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.ChecksumStream=void 0;var t6=qe(),r6=require("stream"),xg=class extends r6.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:s,checksumSourceLocation:n,base64Encoder:i}){if(super(),typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=i??t6.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=n,this.source.pipe(this)}_read(e){}_write(e,r,s){try{this.checksum.update(e),this.push(e)}catch(n){return s(n)}return s()}async _final(e){try{let r=await this.checksum.digest(),s=this.base64Encoder(r);if(this.expectedChecksum!==s)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};Su.ChecksumStream=xg});var Lr=S(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.isBlob=xi.isReadableStream=void 0;var s6=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);xi.isReadableStream=s6;var n6=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);xi.isBlob=n6});var GC=S(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.ChecksumStream=void 0;var i6=typeof ReadableStream=="function"?ReadableStream:function(){},Pg=class extends i6{};bu.ChecksumStream=Pg});var QC=S(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.createChecksumStream=void 0;var o6=qe(),a6=Lr(),c6=GC(),u6=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:s,base64Encoder:n})=>{if(!(0,a6.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=n??o6.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),d=i(u);if(t!==d){let l=new Error(`Checksum mismatch: expected "${t}" but received "${d}" in response header "${s}".`);c.error(l)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,c6.ChecksumStream.prototype),a};Eu.createChecksumStream=u6});var WC=S(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.createChecksumStream=p6;var l6=Lr(),d6=Ag(),f6=QC();function p6(t){return typeof ReadableStream=="function"&&(0,l6.isReadableStream)(t.source)?(0,f6.createChecksumStream)(t):new d6.ChecksumStream(t)}});var Og=S(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.ByteArrayCollector=void 0;var kg=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let s=this.byteArrays[0];return this.reset(),s}let e=this.allocByteArray(this.byteLength),r=0;for(let s=0;s<this.byteArrays.length;++s){let n=this.byteArrays[s];e.set(n,r),r+=n.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};_u.ByteArrayCollector=kg});var JC=S(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.createBufferedReadable=void 0;Fr.createBufferedReadableStream=KC;Fr.merge=YC;Fr.flush=wu;Fr.sizeOf=Ai;Fr.modeOf=XC;var h6=Og();function KC(t,e,r){let s=t.getReader(),n=!1,i=0,o=["",new h6.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:d,done:l}=await s.read(),h=d;if(l){if(a!==-1){let m=wu(o,a);Ai(m)>0&&u.enqueue(m)}u.close()}else{let m=XC(h,!1);if(a!==m&&(a>=0&&u.enqueue(wu(o,a)),a=m),a===-1){u.enqueue(h);return}let g=Ai(h);i+=g;let w=Ai(o[a]);if(g>=e&&w===0)u.enqueue(h);else{let R=YC(o,a,h);!n&&i>e*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${e}, automatically buffering.`)),R>=e?u.enqueue(wu(o,a)):await c(u)}}};return new ReadableStream({pull:c})}Fr.createBufferedReadable=KC;function YC(t,e,r){switch(e){case 0:return t[0]+=r,Ai(t[0]);case 1:case 2:return t[e].push(r),Ai(t[e])}}function wu(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Ai(t){return t?.byteLength??t?.length??0}function XC(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var eR=S(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.createBufferedReadable=y6;var m6=require("node:stream"),ZC=Og(),qr=JC(),g6=Lr();function y6(t,e,r){if((0,g6.isReadableStream)(t))return(0,qr.createBufferedReadableStream)(t,e,r);let s=new m6.Readable({read(){}}),n=!1,i=0,o=["",new ZC.ByteArrayCollector(c=>new Uint8Array(c)),new ZC.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,qr.modeOf)(c,!0);if(a!==u&&(a>=0&&s.push((0,qr.flush)(o,a)),a=u),a===-1){s.push(c);return}let d=(0,qr.sizeOf)(c);i+=d;let l=(0,qr.sizeOf)(o[a]);if(d>=e&&l===0)s.push(c);else{let h=(0,qr.merge)(o,a,c);!n&&i>e*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${d} is below threshold of ${e}, automatically buffering.`)),h>=e&&s.push((0,qr.flush)(o,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,qr.flush)(o,a);(0,qr.sizeOf)(c)>0&&s.push(c)}s.push(null)}),s}});var tR=S(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.getAwsChunkedEncodingStream=void 0;var S6=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:s,checksumAlgorithmFn:n,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&n!==void 0&&i!==void 0&&o!==void 0,c=a?o(n,t):void 0,u=t.getReader();return new ReadableStream({async pull(d){let{value:l,done:h}=await u.read();if(h){if(d.enqueue(`0\r
`),a){let m=r(await c);d.enqueue(`${i}:${m}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(s(l)||0).toString(16)}\r
${l}\r
`)}})};vu.getAwsChunkedEncodingStream=S6});var rR=S(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.getAwsChunkedEncodingStream=w6;var b6=require("node:stream"),E6=tR(),_6=Lr();function w6(t,e){let r=t,s=t;if((0,_6.isReadableStream)(s))return(0,E6.getAwsChunkedEncodingStream)(s,e);let{base64Encoder:n,bodyLengthChecker:i,checksumAlgorithmFn:o,checksumLocationName:a,streamHasher:c}=e,u=n!==void 0&&o!==void 0&&a!==void 0&&c!==void 0,d=u?c(o,r):void 0,l=new b6.Readable({read:()=>{}});return r.on("data",h=>{let m=i(h)||0;m!==0&&(l.push(`${m.toString(16)}\r
`),l.push(h),l.push(`\r
`))}),r.on("end",async()=>{if(l.push(`0\r
`),u){let h=n(await d);l.push(`${a}:${h}\r
`),l.push(`\r
`)}l.push(null)}),l}});var sR=S(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.headStream=v6;async function v6(t,e){let r=0,s=[],n=t.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await n.read();if(u&&(s.push(u),r+=u?.byteLength??0),r>=e)break;i=c}n.releaseLock();let o=new Uint8Array(Math.min(e,r)),a=0;for(let c of s){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var nR=S(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.headStream=void 0;var C6=require("stream"),R6=sR(),T6=Lr(),x6=(t,e)=>(0,T6.isReadableStream)(t)?(0,R6.headStream)(t,e):new Promise((r,s)=>{let n=new Lg;n.limit=e,t.pipe(n),t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});Cu.headStream=x6;var Lg=class extends C6.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,s){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let n=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-n),this.emit("finish")}s()}}});var qg=S(Fg=>{"use strict";var iR=t=>encodeURIComponent(t).replace(/[!'()*]/g,A6),A6=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,P6=t=>t.split("/").map(iR).join("/");Fg.escapeUri=iR;Fg.escapeUriPath=P6});var Ug=S(oR=>{"use strict";var Bg=qg();function I6(t){let e=[];for(let r of Object.keys(t).sort()){let s=t[r];if(r=Bg.escapeUri(r),Array.isArray(s))for(let n=0,i=s.length;n<i;n++)e.push(`${r}=${Bg.escapeUri(s[n])}`);else{let n=r;(s||typeof s=="string")&&(n+=`=${Bg.escapeUri(s)}`),e.push(n)}}return e.join("&")}oR.buildQueryString=I6});var Es=S(Wo=>{"use strict";var lR=ue(),dR=Ug(),Ru=require("http"),Tu=require("https"),fR=require("stream"),$g=require("http2"),k6=["ECONNRESET","EPIPE","ETIMEDOUT"],pR=t=>{let e={};for(let r of Object.keys(t)){let s=t[r];e[r]=Array.isArray(s)?s.join(","):s}return e},lt={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},aR=1e3,O6=(t,e,r=0)=>{if(!r)return-1;let s=n=>{let i=lt.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-n),o=a=>{a?.connecting?a.on("connect",()=>{lt.clearTimeout(i)}):lt.clearTimeout(i)};t.socket?o(t.socket):t.on("socket",o)};return r<2e3?(s(0),0):lt.setTimeout(s.bind(null,aR),aR)},N6=(t,e,r=0,s,n)=>r?lt.setTimeout(()=>{let i=`@smithy/node-http-handler - [${s?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(s){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(o),e(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(i)},r):-1,D6=3e3,M6=(t,{keepAlive:e,keepAliveMsecs:r},s=D6)=>{if(e!==!0)return-1;let n=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})};return s===0?(n(),0):lt.setTimeout(n,s)},cR=3e3,L6=(t,e,r=0)=>{let s=n=>{let i=r-n,o=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(i,o),t.on("close",()=>t.socket?.removeListener("timeout",o))):t.setTimeout(i,o)};return 0<r&&r<6e3?(s(0),0):lt.setTimeout(s.bind(null,r===0?0:cR),cR)},uR=6e3;async function hR(t,e,r=uR,s=!1){let n=e.headers??{},i=n.Expect||n.expect,o=-1,a=!0;!s&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(lt.setTimeout(()=>c(!0),Math.max(uR,r)))}),new Promise(c=>{t.on("continue",()=>{lt.clearTimeout(o),c(!0)}),t.on("response",()=>{lt.clearTimeout(o),c(!1)}),t.on("error",()=>{lt.clearTimeout(o),c(!1)})})])),a&&F6(t,e.body)}function F6(t,e){if(e instanceof fR.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var q6=0,jg=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,s=console){let{sockets:n,requests:i,maxSockets:o}=e;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(n&&i)for(let c in n){let u=n[c]?.length??0,d=i[c]?.length??0;if(u>=o&&d>=2*o)return s?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${d} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,s)=>{typeof e=="function"?e().then(n=>{r(this.resolveDefaultConfig(n))}).catch(s):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:s,socketTimeout:n,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,d=50;return{connectionTimeout:s,requestTimeout:r,socketTimeout:n,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof Ru.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new Ru.Agent({keepAlive:u,maxSockets:d,...o}),httpsAgent:a instanceof Tu.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Tu.Agent({keepAlive:u,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:s}={}){return this.config||(this.config=await this.configProvider),new Promise((n,i)=>{let o=this.config,a,c=[],u=async z=>{await a,c.forEach(lt.clearTimeout),n(z)},d=async z=>{await a,c.forEach(lt.clearTimeout),i(z)};if(r?.aborted){let z=new Error("Request aborted");z.name="AbortError",d(z);return}let l=e.protocol==="https:",h=e.headers??{},m=(h.Expect??h.expect)==="100-continue",g=l?o.httpsAgent:o.httpAgent;m&&!this.externalAgent&&(g=new(l?Tu.Agent:Ru.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(lt.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(g,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let w=dR.buildQueryString(e.query||{}),R;if(e.username!=null||e.password!=null){let z=e.username??"",X=e.password??"";R=`${z}:${X}`}let x=e.path;w&&(x+=`?${w}`),e.fragment&&(x+=`#${e.fragment}`);let P=e.hostname??"";P[0]==="["&&P.endsWith("]")?P=e.hostname.slice(1,-1):P=e.hostname;let D={headers:e.headers,host:P,method:e.method,path:x,port:e.port,agent:g,auth:R},j=(l?Tu.request:Ru.request)(D,z=>{let X=new lR.HttpResponse({statusCode:z.statusCode||-1,reason:z.statusMessage,headers:pR(z.headers),body:z});u({response:X})});if(j.on("error",z=>{k6.includes(z.code)?d(Object.assign(z,{name:"TimeoutError"})):d(z)}),r){let z=()=>{j.destroy();let X=new Error("Request aborted");X.name="AbortError",d(X)};if(typeof r.addEventListener=="function"){let X=r;X.addEventListener("abort",z,{once:!0}),j.once("close",()=>X.removeEventListener("abort",z))}else r.onabort=z}let W=s??o.requestTimeout;c.push(O6(j,d,o.connectionTimeout)),c.push(N6(j,d,W,o.throwOnRequestTimeout,o.logger??console)),c.push(L6(j,d,o.socketTimeout));let Ee=D.agent;typeof Ee=="object"&&"keepAlive"in Ee&&c.push(M6(j,{keepAlive:Ee.keepAlive,keepAliveMsecs:Ee.keepAliveMsecs})),a=hR(j,e,W,this.externalAgent).catch(z=>(c.forEach(lt.clearTimeout),i(z)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Hg=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},zg=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let s=this.getUrlString(e),n=this.sessionCache.get(s);if(n){let c=n.poll();if(c&&!this.config.disableConcurrency)return c}let i=$g.connect(s);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(s,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(s,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(s)||new Hg;return a.offerLast(i),this.sessionCache.set(s,a),i}deleteSession(e,r){let s=this.sessionCache.get(e);s&&s.contains(r)&&(s.remove(r),this.sessionCache.set(e,s))}release(e,r){let s=this.getUrlString(e);this.sessionCache.get(s)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let s of r)s.destroyed||s.destroy(),r.remove(s);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},Vg=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new zg({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,s)=>{typeof e=="function"?e().then(n=>{r(n||{})}).catch(s):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:i}=this.config,o=s??n;return new Promise((a,c)=>{let u=!1,d,l=async de=>{await d,a(de)},h=async de=>{await d,c(de)};if(r?.aborted){u=!0;let de=new Error("Request aborted");de.name="AbortError",h(de);return}let{hostname:m,method:g,port:w,protocol:R,query:x}=e,P="";if(e.username!=null||e.password!=null){let de=e.username??"",$e=e.password??"";P=`${de}:${$e}@`}let D=`${R}//${P}${m}${w?`:${w}`:""}`,M={destination:new URL(D)},j=this.connectionManager.lease(M,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),W=de=>{i&&this.destroySession(j),u=!0,h(de)},Ee=dR.buildQueryString(x||{}),z=e.path;Ee&&(z+=`?${Ee}`),e.fragment&&(z+=`#${e.fragment}`);let X=j.request({...e.headers,[$g.constants.HTTP2_HEADER_PATH]:z,[$g.constants.HTTP2_HEADER_METHOD]:g});if(j.ref(),X.on("response",de=>{let $e=new lR.HttpResponse({statusCode:de[":status"]||-1,headers:pR(de),body:X});u=!0,l({response:$e}),i&&(j.close(),this.connectionManager.deleteSession(D,j))}),o&&X.setTimeout(o,()=>{X.close();let de=new Error(`Stream timed out because of no activity for ${o} ms`);de.name="TimeoutError",W(de)}),r){let de=()=>{X.close();let $e=new Error("Request aborted");$e.name="AbortError",W($e)};if(typeof r.addEventListener=="function"){let $e=r;$e.addEventListener("abort",de,{once:!0}),X.once("close",()=>$e.removeEventListener("abort",de))}else r.onabort=de}X.on("frameError",(de,$e,St)=>{W(new Error(`Frame type id ${de} in stream id ${St} has failed with code ${$e}.`))}),X.on("error",W),X.on("aborted",()=>{W(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${X.rstCode}.`))}),X.on("close",()=>{j.unref(),i&&j.destroy(),u||W(new Error("Unexpected error: http2 request did not get a response"))}),d=hR(X,e,o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Gg=class extends fR.Writable{bufferedBytes=[];_write(e,r,s){this.bufferedBytes.push(e),s()}},B6=t=>U6(t)?$6(t):new Promise((e,r)=>{let s=new Gg;t.pipe(s),t.on("error",n=>{s.end(),r(n)}),s.on("error",r),s.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));e(n)})}),U6=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function $6(t){let e=[],r=t.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(e.push(c),n+=c.length),s=a}let i=new Uint8Array(n),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}Wo.DEFAULT_REQUEST_TIMEOUT=q6;Wo.NodeHttp2Handler=Vg;Wo.NodeHttpHandler=jg;Wo.streamCollector=B6});var yR=S(Au=>{"use strict";var mR=ue(),j6=Ug(),H6=qe();function gR(t,e){return new Request(t,e)}function z6(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let s=new Error(`Request did not complete within ${t} ms`);s.name="TimeoutError",r(s)},t)})}var xu={supported:void 0},Qg=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),xu.supported===void 0&&(xu.supported=typeof Request<"u"&&"keepalive"in gR("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider);let n=s??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let P=new Error("Request aborted");return P.name="AbortError",Promise.reject(P)}let a=e.path,c=j6.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let P=e.username??"",D=e.password??"";u=`${P}:${D}@`}let{port:d,method:l}=e,h=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${a}`,m=l==="GET"||l==="HEAD"?void 0:e.body,g={body:m,headers:new Headers(e.headers),method:l,credentials:o};this.config?.cache&&(g.cache=this.config.cache),m&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),xu.supported&&(g.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(e));let w=()=>{},R=gR(h,g),x=[fetch(R).then(P=>{let D=P.headers,M={};for(let W of D.entries())M[W[0]]=W[1];return P.body!=null?{response:new mR.HttpResponse({headers:M,reason:P.statusText,statusCode:P.status,body:P.body})}:P.blob().then(W=>({response:new mR.HttpResponse({headers:M,reason:P.statusText,statusCode:P.status,body:W})}))}),z6(n)];return r&&x.push(new Promise((P,D)=>{let M=()=>{let j=new Error("Request aborted");j.name="AbortError",D(j)};if(typeof r.addEventListener=="function"){let j=r;j.addEventListener("abort",M,{once:!0}),w=()=>j.removeEventListener("abort",M)}else r.onabort=M})),Promise.race(x).finally(w)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>(s[e]=r,s))}httpHandlerConfigs(){return this.config??{}}},V6=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):G6(t):Q6(t);async function G6(t){let e=await W6(t),r=H6.fromBase64(e);return new Uint8Array(r)}async function Q6(t){let e=[],r=t.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(e.push(c),n+=c.length),s=a}let i=new Uint8Array(n),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}function W6(t){return new Promise((e,r)=>{let s=new FileReader;s.onloadend=()=>{if(s.readyState!==2)return r(new Error("Reader aborted too early"));let n=s.result??"",i=n.indexOf(","),o=i>-1?i+1:n.length;e(n.substring(o))},s.onabort=()=>r(new Error("Read aborted")),s.onerror=()=>r(s.error),s.readAsDataURL(t)})}Au.FetchHttpHandler=Qg;Au.keepAliveSupport=xu;Au.streamCollector=V6});var Yg=S(Kg=>{"use strict";var SR={},Wg={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),SR[t]=e,Wg[e]=t}function K6(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let s=t.slice(r,r+2).toLowerCase();if(s in Wg)e[r/2]=Wg[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return e}function Y6(t){let e="";for(let r=0;r<t.byteLength;r++)e+=SR[t[r]];return e}Kg.fromHex=K6;Kg.toHex=Y6});var wR=S(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.sdkStreamMixin=void 0;var X6=yR(),J6=qe(),Z6=Yg(),eV=Fe(),bR=Lr(),ER="The stream has already been transformed.",tV=t=>{if(!_R(t)&&!(0,bR.isReadableStream)(t)){let n=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let e=!1,r=async()=>{if(e)throw new Error(ER);return e=!0,await(0,X6.streamCollector)(t)},s=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let i=await r();if(n==="base64")return(0,J6.toBase64)(i);if(n==="hex")return(0,Z6.toHex)(i);if(n===void 0||n==="utf8"||n==="utf-8")return(0,eV.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(ER);if(e=!0,_R(t))return s(t);if((0,bR.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};Pu.sdkStreamMixin=tV;var _R=t=>typeof Blob=="function"&&t instanceof Blob});var CR=S(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.sdkStreamMixin=void 0;var rV=Es(),sV=Ti(),Xg=require("stream"),nV=wR(),vR="The stream has already been transformed.",iV=t=>{if(!(t instanceof Xg.Readable))try{return(0,nV.sdkStreamMixin)(t)}catch{let n=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let e=!1,r=async()=>{if(e)throw new Error(vR);return e=!0,await(0,rV.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let n=await r();return s===void 0||Buffer.isEncoding(s)?(0,sV.fromArrayBuffer)(n.buffer,n.byteOffset,n.byteLength).toString(s):new TextDecoder(s).decode(n)},transformToWebStream:()=>{if(e)throw new Error(vR);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Xg.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,Xg.Readable.toWeb(t)}})};Iu.sdkStreamMixin=iV});var RR=S(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});Jg.splitStream=oV;async function oV(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var AR=S(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.splitStream=cV;var TR=require("stream"),aV=RR(),xR=Lr();async function cV(t){if((0,xR.isReadableStream)(t)||(0,xR.isBlob)(t))return(0,aV.splitStream)(t);let e=new TR.PassThrough,r=new TR.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var ku=S(Be=>{"use strict";var PR=qe(),IR=Fe(),kR=Ag(),OR=WC(),NR=eR(),DR=rR(),MR=nR(),LR=CR(),FR=AR(),qR=Lr(),ey=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(PR.fromBase64(e)):t.mutate(IR.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?PR.toBase64(this):IR.toUtf8(this)}};Object.defineProperty(Be,"isBlob",{enumerable:!0,get:function(){return qR.isBlob}});Object.defineProperty(Be,"isReadableStream",{enumerable:!0,get:function(){return qR.isReadableStream}});Be.Uint8ArrayBlobAdapter=ey;Object.keys(kR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return kR[t]}})});Object.keys(OR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return OR[t]}})});Object.keys(NR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return NR[t]}})});Object.keys(DR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return DR[t]}})});Object.keys(MR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return MR[t]}})});Object.keys(LR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return LR[t]}})});Object.keys(FR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Be,t)&&Object.defineProperty(Be,t,{enumerable:!0,get:function(){return FR[t]}})})});var Ou,$t,Nu=E(()=>{Ou=v(ku()),$t=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Ou.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Ou.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Ou.Uint8ArrayBlobAdapter.mutate(await r)}});function gr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Du=E(()=>{});var tr,ty=E(()=>{tr=t=>typeof t=="function"?t():t});var Ko,Mu=E(()=>{Ko=(t,e,r,s,n)=>({name:e,namespace:t,traits:r,input:s,output:n})});var BR,UR,$R,ry,jR=E(()=>{BR=v(ue()),UR=v(ut());Mu();$R=t=>(e,r)=>async s=>{let{response:n}=await e(s),{operationSchema:i}=(0,UR.getSmithyContext)(r),[,o,a,c,u,d]=i??[];try{let l=await t.protocol.deserializeResponse(Ko(o,a,c,u,d),{...t,...r},n);return{response:n,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(BR.HttpResponse.isInstance(n)){let{headers:m={}}=n,g=Object.entries(m);l.$metadata={httpStatusCode:n.statusCode,requestId:ry(/^x-[\w-]+-request-?id$/,g),extendedRequestId:ry(/^x-[\w-]+-id-2$/,g),cfId:ry(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw l}},ry=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var HR,zR,VR=E(()=>{HR=v(ut());Mu();zR=t=>(e,r)=>async s=>{let{operationSchema:n}=(0,HR.getSmithyContext)(r),[,i,o,a,c,u]=n??[],d=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(Ko(i,o,a,c,u),s.input,{...t,...r,endpoint:d});return e({...s,request:l})}});function Sn(t){return{applyToStack:e=>{e.add(zR(t),QR),e.add($R(t),GR),t.protocol.setSerdeContext(t)}}}var GR,QR,WR=E(()=>{jR();VR();GR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},QR={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Pe,_s=E(()=>{Pe=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Lu,uV,KR=E(()=>{_s();Lu=class t extends Pe{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},uV=(t,e,r,s)=>Pe.assign(new Lu,{name:e,namespace:t,traits:r,valueSchema:s})});var Fu,lV,YR=E(()=>{_s();Fu=class t extends Pe{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},lV=(t,e,r,s,n)=>Pe.assign(new Fu,{name:e,namespace:t,traits:r,keySchema:s,valueSchema:n})});var qu,dV,XR=E(()=>{_s();qu=class t extends Pe{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},dV=(t,e,r,s,n)=>Pe.assign(new qu,{name:e,namespace:t,traits:r,input:s,output:n})});var Pi,fV,sy=E(()=>{_s();Pi=class t extends Pe{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},fV=(t,e,r,s,n)=>Pe.assign(new Pi,{name:e,namespace:t,traits:r,memberNames:s,memberList:n})});var Bu,pV,JR=E(()=>{_s();sy();Bu=class t extends Pi{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},pV=(t,e,r,s,n,i)=>Pe.assign(new Bu,{name:e,namespace:t,traits:r,memberNames:s,memberList:n,ctor:null})});function yr(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[s]=1);return e}var ny=E(()=>{});function Yo(t,e){if(t instanceof L)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=L;return new r(t,e)}var ZR,L,iy,eT,tT=E(()=>{ty();ny();ZR={it:Symbol.for("@smithy/nor-struct-it")},L=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let s=[],n=e,i=e;for(this._isMemberSchema=!1;iy(n);)s.push(n[1]),n=n[0],i=tr(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let o=s.length-1;o>=0;--o){let a=s[o];Object.assign(this.memberTraits,yr(a))}}else this.memberTraits=0;if(i instanceof t){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=tr(i),eT(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=tr(e);if(r instanceof t)return r;if(iy(r)){let[s,n]=r;if(s instanceof t)return Object.assign(s.getMergedTraits(),yr(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return yr(this.memberTraits)}getOwnTraits(){return yr(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let s=this.getSchema(),n=e?15:s[4]??0;return Yo([n,0],"key")}getValueSchema(){let e=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(s||n)?e[3+e[0]]:r?15:void 0;if(i!=null)return Yo([i,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let s=r[4].indexOf(e),n=r[5][s];return Yo(iy(n)?n:[n,0],e)}if(this.isDocumentSchema())return Yo([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,s]of this.structIterator())e[r]=s}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema(),r=e[4].length,s=e[ZR.it];if(s&&r===s.length){yield*s;return}s=Array(r);for(let n=0;n<r;++n){let i=e[4][n],o=Yo([e[5][n],0],i);yield s[n]=[i,o]}e[ZR.it]=s}};iy=t=>Array.isArray(t)&&t.length===2,eT=t=>Array.isArray(t)&&t.length>=5});var Xo,hV,mV,rT=E(()=>{_s();Xo=class t extends Pe{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},hV=(t,e,r,s)=>Pe.assign(new Xo,{name:e,namespace:t,traits:s,schemaRef:r}),mV=(t,e,r,s)=>Pe.assign(new Xo,{name:e,namespace:t,traits:r,schemaRef:s})});var gV,sT=E(()=>{gV={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var B,nT=E(()=>{B=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,s=new Map){this.namespace=e,this.schemas=r,this.exceptions=s}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let s=this.normalizeShapeId(e);t.for(s.split("#")[0]).schemas.set(s,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let s=e,n=t.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,s]=e,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var Uu={};ot(Uu,{ErrorSchema:()=>Bu,ListSchema:()=>Lu,MapSchema:()=>Fu,NormalizedSchema:()=>L,OperationSchema:()=>qu,SCHEMA:()=>gV,Schema:()=>Pe,SimpleSchema:()=>Xo,StructureSchema:()=>Pi,TypeRegistry:()=>B,deref:()=>tr,deserializerMiddlewareOption:()=>GR,error:()=>pV,getSchemaSerdePlugin:()=>Sn,isStaticSchema:()=>eT,list:()=>uV,map:()=>lV,op:()=>dV,operation:()=>Ko,serializerMiddlewareOption:()=>QR,sim:()=>hV,simAdapter:()=>mV,struct:()=>fV,translateTraits:()=>yr});var se=E(()=>{ty();WR();KR();YR();XR();Mu();JR();tT();_s();rT();sy();sT();ny();nT()});var yV,iT=E(()=>{yV=(t,e,r=s=>s)=>t});var SV,bV,Jo,EV,$u,Zo,_V,oy,ay,cy,uy,wV,vV,oT,CV,RV,Hu,TV,ly,xV,Ii,dy,AV,PV,IV,aT,cT,kV,OV,bn,fy,ju,ea,py=E(()=>{SV=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},bV=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&ea.warn(ju(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&ea.warn(ju(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},Jo=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&ea.warn(ju(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},EV=Math.ceil(34028234663852886e22),$u=t=>{let e=Jo(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>EV)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Zo=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},_V=Zo,oy=t=>uy(t,32),ay=t=>uy(t,16),cy=t=>uy(t,8),uy=(t,e)=>{let r=Zo(t);if(r!==void 0&&wV(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},wV=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},vV=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},oT=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},CV=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return ea.warn(ju(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},RV=t=>{if(t==null)return;let e=oT(t),r=Object.entries(e).filter(([,s])=>s!=null).map(([s])=>s);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Hu=t=>Jo(typeof t=="string"?Ii(t):t),TV=Hu,ly=t=>$u(typeof t=="string"?Ii(t):t),xV=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ii=t=>{let e=t.match(xV);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},dy=t=>typeof t=="string"?aT(t):Jo(t),AV=dy,PV=dy,IV=t=>typeof t=="string"?aT(t):$u(t),aT=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},cT=t=>Zo(typeof t=="string"?Ii(t):t),kV=cT,OV=t=>oy(typeof t=="string"?Ii(t):t),bn=t=>ay(typeof t=="string"?Ii(t):t),fy=t=>cy(typeof t=="string"?Ii(t):t),ju=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),ea={warn:console.warn}});function ra(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),s=t.getUTCDay(),n=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=n<10?`0${n}`:`${n}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,l=a<10?`0${a}`:`${a}`;return`${NV[s]}, ${c} ${my[r]} ${e} ${u}:${d}:${l} GMT`}var NV,my,DV,MV,LV,gy,FV,qV,BV,yy,Sy,ta,UV,$V,jV,hy,HV,zV,VV,Sr,GV,QV,ki,uT=E(()=>{py();NV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],my=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];DV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),MV=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=DV.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,i,o,a,c,u]=e,d=bn(ki(s)),l=Sr(n,"month",1,12),h=Sr(i,"day",1,31);return ta(d,l,h,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},LV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),gy=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=LV.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,i,o,a,c,u,d]=e,l=bn(ki(s)),h=Sr(n,"month",1,12),m=Sr(i,"day",1,31),g=ta(l,h,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return d.toUpperCase()!="Z"&&g.setTime(g.getTime()-QV(d)),g},FV=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),qV=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),BV=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),yy=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=FV.exec(t);if(e){let[r,s,n,i,o,a,c,u]=e;return ta(bn(ki(i)),hy(n),Sr(s,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=qV.exec(t),e){let[r,s,n,i,o,a,c,u]=e;return jV(ta(UV(i),hy(n),Sr(s,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=BV.exec(t),e){let[r,s,n,i,o,a,c,u]=e;return ta(bn(ki(u)),hy(s),Sr(n.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Sy=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Hu(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},ta=(t,e,r,s)=>{let n=e-1;return zV(t,n,r),new Date(Date.UTC(t,n,r,Sr(s.hours,"hour",0,23),Sr(s.minutes,"minute",0,59),Sr(s.seconds,"seconds",0,60),GV(s.fractionalMilliseconds)))},UV=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+bn(ki(t));return r<e?r+100:r},$V=50*365*24*60*60*1e3,jV=t=>t.getTime()-new Date().getTime()>$V?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,hy=t=>{let e=my.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},HV=[31,28,31,30,31,30,31,31,30,31,30,31],zV=(t,e,r)=>{let s=HV[e];if(e===1&&VV(t)&&(s=29),r>s)throw new TypeError(`Invalid day for ${my[e]} in ${t}: ${r}`)},VV=t=>t%4===0&&(t%100!==0||t%400===0),Sr=(t,e,r,s)=>{let n=fy(ki(t));if(n<r||n>s)throw new TypeError(`${e} must be between ${r} and ${s}, inclusive`);return n},GV=t=>t==null?0:ly("0."+t)*1e3,QV=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let s=Number(t.substring(1,3)),n=Number(t.substring(4,6));return r*(s*60+n)*60*1e3},ki=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var sa={};ot(sa,{__addDisposableResource:()=>DT,__assign:()=>zu,__asyncDelegator:()=>TT,__asyncGenerator:()=>RT,__asyncValues:()=>xT,__await:()=>Oi,__awaiter:()=>bT,__classPrivateFieldGet:()=>kT,__classPrivateFieldIn:()=>NT,__classPrivateFieldSet:()=>OT,__createBinding:()=>Gu,__decorate:()=>fT,__disposeResources:()=>MT,__esDecorate:()=>hT,__exportStar:()=>_T,__extends:()=>lT,__generator:()=>ET,__importDefault:()=>IT,__importStar:()=>PT,__makeTemplateObject:()=>AT,__metadata:()=>ST,__param:()=>pT,__propKey:()=>gT,__read:()=>_y,__rest:()=>dT,__rewriteRelativeImportExtension:()=>LT,__runInitializers:()=>mT,__setFunctionName:()=>yT,__spread:()=>wT,__spreadArray:()=>CT,__spreadArrays:()=>vT,__values:()=>Vu,default:()=>YV});function lT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");by(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function dT(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r}function fT(t,e,r,s){var n=arguments.length,i=n<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(n<3?o(i):n>3?o(e,r,i):o(e,r))||i);return n>3&&i&&Object.defineProperty(e,r,i),i}function pT(t,e){return function(r,s){e(r,s,t)}}function hT(t,e,r,s,n,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?s.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),l,h=!1,m=r.length-1;m>=0;m--){var g={};for(var w in s)g[w]=w==="access"?{}:s[w];for(var w in s.access)g.access[w]=s.access[w];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var R=(0,r[m])(a==="accessor"?{get:d.get,set:d.set}:d[c],g);if(a==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(l=o(R.get))&&(d.get=l),(l=o(R.set))&&(d.set=l),(l=o(R.init))&&n.unshift(l)}else(l=o(R))&&(a==="field"?n.unshift(l):d[c]=l)}u&&Object.defineProperty(u,s.name,d),h=!0}function mT(t,e,r){for(var s=arguments.length>2,n=0;n<e.length;n++)r=s?e[n].call(t,r):e[n].call(t);return s?r:void 0}function gT(t){return typeof t=="symbol"?t:"".concat(t)}function yT(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ST(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function bT(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(l){o(l)}}function c(d){try{u(s.throw(d))}catch(l){o(l)}}function u(d){d.done?i(d.value):n(d.value).then(a,c)}u((s=s.apply(t,e||[])).next())})}function ET(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(s=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],n=0}finally{s=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function _T(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gu(e,t,r)}function Vu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _y(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,i=[],o;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function wT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_y(arguments[e]));return t}function vT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),n=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,n++)s[n]=i[o];return s}function CT(t,e,r){if(r||arguments.length===2)for(var s=0,n=e.length,i;s<n;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}function Oi(t){return this instanceof Oi?(this.v=t,this):new Oi(t)}function RT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),n[Symbol.asyncIterator]=function(){return this},n;function o(m){return function(g){return Promise.resolve(g).then(m,l)}}function a(m,g){s[m]&&(n[m]=function(w){return new Promise(function(R,x){i.push([m,w,R,x])>1||c(m,w)})},g&&(n[m]=g(n[m])))}function c(m,g){try{u(s[m](g))}catch(w){h(i[0][3],w)}}function u(m){m.value instanceof Oi?Promise.resolve(m.value.v).then(d,l):h(i[0][2],m)}function d(m){c("next",m)}function l(m){c("throw",m)}function h(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function TT(t){var e,r;return e={},s("next"),s("throw",function(n){throw n}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(n,i){e[n]=t[n]?function(o){return(r=!r)?{value:Oi(t[n](o)),done:!1}:i?i(o):o}:i}}function xT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Vu=="function"?Vu(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),n(a,c,o.done,o.value)})}}function n(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function AT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function PT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Ey(t),s=0;s<r.length;s++)r[s]!=="default"&&Gu(e,t,r[s]);return WV(e,t),e}function IT(t){return t&&t.__esModule?t:{default:t}}function kT(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function OT(t,e,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}function NT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function DT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}function MT(t){function e(i){t.error=t.hasError?new KV(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,s=0;function n(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(n);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(n,function(o){return e(o),n()})}else s|=1}catch(o){e(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function LT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,i,o){return s?e?".jsx":".js":n&&(!i||!o)?r:n+i+"."+o.toLowerCase()+"js"}):t}var by,zu,Gu,WV,Ey,KV,YV,na=E(()=>{by=function(t,e){return by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},by(t,e)};zu=function(){return zu=Object.assign||function(e){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zu.apply(this,arguments)};Gu=Object.create?(function(t,e,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,n)}):(function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]});WV=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Ey=function(t){return Ey=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},Ey(t)};KV=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};YV={__extends:lT,__assign:zu,__rest:dT,__decorate:fT,__param:pT,__esDecorate:hT,__runInitializers:mT,__propKey:gT,__setFunctionName:yT,__metadata:ST,__awaiter:bT,__generator:ET,__createBinding:Gu,__exportStar:_T,__values:Vu,__read:_y,__spread:wT,__spreadArrays:vT,__spreadArray:CT,__await:Oi,__asyncGenerator:RT,__asyncDelegator:TT,__asyncValues:xT,__makeTemplateObject:AT,__importStar:PT,__importDefault:IT,__classPrivateFieldGet:kT,__classPrivateFieldSet:OT,__classPrivateFieldIn:NT,__addDisposableResource:DT,__disposeResources:MT,__rewriteRelativeImportExtension:LT}});var qT=S(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.randomUUID=void 0;var XV=(na(),J(sa)),FT=XV.__importDefault(require("crypto"));Qu.randomUUID=FT.default.randomUUID.bind(FT.default)});var wy=S(UT=>{"use strict";var BT=qT(),Ye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),JV=()=>{if(BT.randomUUID)return BT.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Ye[t[0]]+Ye[t[1]]+Ye[t[2]]+Ye[t[3]]+"-"+Ye[t[4]]+Ye[t[5]]+"-"+Ye[t[6]]+Ye[t[7]]+"-"+Ye[t[8]]+Ye[t[9]]+"-"+Ye[t[10]]+Ye[t[11]]+Ye[t[12]]+Ye[t[13]]+Ye[t[14]]+Ye[t[15]]};UT.v4=JV});var jt,$T=E(()=>{jt=v(wy())});var dt,jT=E(()=>{dt=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};dt.from=t=>t&&typeof t=="object"&&(t instanceof dt||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?dt(String(t)):dt(JSON.stringify(t));dt.fromObject=dt.from});function vy(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var HT=E(()=>{});function Br(t,e,r){let s=Number(t);if(s<e||s>r)throw new Error(`Value ${s} out of range [${e}, ${r}]`)}var Cy,Ry,Ty,zT,VT,ZV,eG,tG,rG,sG,Ni,xy,Ay,GT=E(()=>{Cy="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Ry="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Ty="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",zT="(\\d?\\d)",VT="(\\d{4})",ZV=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),eG=new RegExp(`^${Cy}, ${zT} ${Ry} ${VT} ${Ty} GMT$`),tG=new RegExp(`^${Cy}, ${zT}-${Ry}-(\\d\\d) ${Ty} GMT$`),rG=new RegExp(`^${Cy} ${Ry} ( [1-9]|\\d\\d) ${Ty} ${VT}$`),sG=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ni=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},xy=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=ZV.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,s,n,i,o,a,,c,u]=e;Br(s,1,12),Br(n,1,31),Br(i,0,23),Br(o,0,59),Br(a,0,60);let d=new Date(Date.UTC(Number(r),Number(s)-1,Number(n),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(d.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,l,h,m]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],g=l==="-"?1:-1;d.setTime(d.getTime()+g*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return d},Ay=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,s,n,i,o,a,c;if((c=eG.exec(t))?[,e,r,s,n,i,o,a]=c:(c=tG.exec(t))?([,e,r,s,n,i,o,a]=c,s=(Number(s)+1900).toString()):(c=rG.exec(t))&&([,r,e,n,i,o,a,s]=c),s&&o){let u=Date.UTC(Number(s),sG.indexOf(r),Number(e),Number(n),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Br(e,1,31),Br(n,0,23),Br(i,0,59),Br(o,0,60);let d=new Date(u);return d.setUTCFullYear(Number(s)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function Py(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let s=t.split(e);if(r===1)return s;let n=[],i="";for(let o=0;o<s.length;o++)i===""?i=s[o]:i+=e+s[o],(o+1)%r===0&&(n.push(i),i="");return i!==""&&n.push(i),n}var QT=E(()=>{});var ia,WT=E(()=>{ia=t=>{let e=t.length,r=[],s=!1,n,i=0;for(let o=0;o<e;++o){let a=t[o];switch(a){case'"':n!=="\\"&&(s=!s);break;case",":s||(r.push(t.slice(i,o)),i=o+1);break;default:}n=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function Iy(t){return new ge(String(t),"bigDecimal")}var KT,ge,YT=E(()=>{KT=/^-?\d*(\.\d+)?$/,ge=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!KT.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&KT.test(r.string)}}});var XT={};ot(XT,{LazyJsonString:()=>dt,NumericValue:()=>ge,_parseEpochTimestamp:()=>Ni,_parseRfc3339DateTimeWithOffset:()=>xy,_parseRfc7231DateTime:()=>Ay,copyDocumentWithTransform:()=>yV,dateToUtcString:()=>ra,expectBoolean:()=>bV,expectByte:()=>cy,expectFloat32:()=>$u,expectInt:()=>_V,expectInt32:()=>oy,expectLong:()=>Zo,expectNonNull:()=>vV,expectNumber:()=>Jo,expectObject:()=>oT,expectShort:()=>ay,expectString:()=>CV,expectUnion:()=>RV,generateIdempotencyToken:()=>jt.v4,handleFloat:()=>AV,limitedParseDouble:()=>dy,limitedParseFloat:()=>PV,limitedParseFloat32:()=>IV,logger:()=>ea,nv:()=>Iy,parseBoolean:()=>SV,parseEpochTimestamp:()=>Sy,parseRfc3339DateTime:()=>MV,parseRfc3339DateTimeWithOffset:()=>gy,parseRfc7231DateTime:()=>yy,quoteHeader:()=>vy,splitEvery:()=>Py,splitHeader:()=>ia,strictParseByte:()=>fy,strictParseDouble:()=>Hu,strictParseFloat:()=>TV,strictParseFloat32:()=>ly,strictParseInt:()=>kV,strictParseInt32:()=>OV,strictParseLong:()=>cT,strictParseShort:()=>bn});var ft=E(()=>{iT();uT();$T();jT();py();HT();GT();QT();WT();YT()});var pt,Di=E(()=>{pt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var Wu,ky,JT=E(()=>{Wu=v(Fe()),ky=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:s,serdeContext:n,defaultContentType:i}){this.marshaller=e,this.serializer=r,this.deserializer=s,this.serdeContext=n,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s}){let n=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),d={async*[Symbol.asyncIterator](){if(s){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,s);let h=a.flush();yield{[u]:!0,headers:l,body:h}}for await(let l of e)yield l}};return n.serialize(d,l=>{if(l[u])return{headers:l.headers,body:l.body};let h=Object.keys(l).find(P=>P!=="__type")??"",{additionalHeaders:m,body:g,eventType:w,explicitPayloadContentType:R}=this.writeEventBody(h,o,l);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:R??c},...m},body:g}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s}){let n=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=n.deserialize(e.body,async h=>{let m=Object.keys(h).find(w=>w!=="__type")??"",g=h[m].body;if(m==="initial-response"){let w=await this.deserializer.read(r,g);return delete w[i],{[c]:!0,...w}}else if(m in a){let w=a[m];if(w.isStructSchema()){let R={},x=!1;for(let[P,D]of w.structIterator()){let{eventHeader:M,eventPayload:j}=D.getMergedTraits();if(x=x||!!(M||j),j)D.isBlobSchema()?R[P]=g:D.isStringSchema()?R[P]=(this.serdeContext?.utf8Encoder??Wu.toUtf8)(g):D.isStructSchema()&&(R[P]=await this.deserializer.read(D,g));else if(M){let W=h[m].headers[P]?.value;W!=null&&(D.isNumericSchema()?W&&typeof W=="object"&&"bytes"in W?R[P]=BigInt(W.toString()):R[P]=Number(W):R[P]=W)}}if(x)return{[m]:R};if(g.byteLength===0)return{[m]:{}}}return{[m]:await this.deserializer.read(w,g)}}else return{$unknown:h}}),d=u[Symbol.asyncIterator](),l=await d.next();if(l.done)return u;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(l.value))s[h]=m}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){let{done:h,value:m}=await d.next();if(h)break;yield m}}}}writeEventBody(e,r,s){let n=this.serializer,i=e,o=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let h=r.getMemberSchema(e);if(h.isStructSchema()){for(let[m,g]of h.structIterator()){let{eventHeader:w,eventPayload:R}=g.getMergedTraits();if(R)o=m;else if(w){let x=s[e][m],P="binary";g.isNumericSchema()?(-2)**31<=x&&x<=2**31-1?P="integer":P="long":g.isTimestampSchema()?P="timestamp":g.isStringSchema()?P="string":g.isBooleanSchema()&&(P="boolean"),x!=null&&(u[m]={type:P,value:x},delete s[e][m])}}if(o!==null){let m=h.getMemberSchema(o);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),n.write(m,s[e][o])}else n.write(h,s[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=s[e];i=h,n.write(15,m)}let d=n.flush();return{body:typeof d=="string"?(this.serdeContext?.utf8Decoder??Wu.fromUtf8)(d):d,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var ZT={};ot(ZT,{EventStreamSerde:()=>ky});var ex=E(()=>{JT()});var Ku,En,Yu=E(()=>{se();Ku=v(ue());Di();En=class extends pt{options;constructor(e){super(),this.options=e}getRequestType(){return Ku.HttpRequest}getResponseType(){return Ku.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[s,n]of r.url.searchParams.entries())e.query[s]=n;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,s){if(this.serdeContext?.disableHostPrefix)return;let n=L.of(r.input),i=yr(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){let a=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=s[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);o=o.replace(`{${c}}`,u)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(ex(),ZT));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,s,n,i){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var tx,rx,_n,sx=E(()=>{se();ft();tx=v(ue()),rx=v(ku());Nu();Du();Yu();_n=class extends En{async serializeRequest(e,r,s){let n={...r??{}},i=this.serializer,o={},a={},c=await s.endpoint(),u=L.of(e?.input),d=u.getSchema(),l=!1,h,m=new tx.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,e,n);let g=yr(e.traits);if(g.http){m.method=g.http[0];let[w,R]=g.http[1].split("?");m.path=="/"?m.path=w:m.path+=w;let x=new URLSearchParams(R??"");Object.assign(o,Object.fromEntries(x))}}for(let[g,w]of u.structIterator()){let R=w.getMergedTraits()??{},x=n[g];if(x==null&&!w.isIdempotencyToken()){if(R.httpLabel&&(m.path.includes(`{${g}+}`)||m.path.includes(`{${g}}`)))throw new Error(`No value provided for input HTTP label: ${g}.`);continue}if(R.httpPayload)w.isStreaming()?w.isStructSchema()?n[g]&&(h=await this.serializeEventStream({eventStream:n[g],requestSchema:u})):h=x:(i.write(w,x),h=i.flush()),delete n[g];else if(R.httpLabel){i.write(w,x);let P=i.flush();m.path.includes(`{${g}+}`)?m.path=m.path.replace(`{${g}+}`,P.split("/").map(gr).join("/")):m.path.includes(`{${g}}`)&&(m.path=m.path.replace(`{${g}}`,gr(P))),delete n[g]}else if(R.httpHeader)i.write(w,x),a[R.httpHeader.toLowerCase()]=String(i.flush()),delete n[g];else if(typeof R.httpPrefixHeaders=="string"){for(let[P,D]of Object.entries(x)){let M=R.httpPrefixHeaders+P;i.write([w.getValueSchema(),{httpHeader:M}],D),a[M.toLowerCase()]=i.flush()}delete n[g]}else R.httpQuery||R.httpQueryParams?(this.serializeQuery(w,x,o),delete n[g]):l=!0}return l&&n&&(i.write(d,n),h=i.flush()),m.headers=a,m.query=o,m.body=h,m}serializeQuery(e,r,s){let n=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in s)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,s)}return}if(e.isListSchema()){let o=!!e.getMergedTraits().sparse,a=[];for(let c of r){n.write([e.getValueSchema(),i],c);let u=n.flush();(o||u!==void 0)&&a.push(u)}s[i.httpQuery]=a}else n.write([e,i],r),s[i.httpQuery]=n.flush()}async deserializeResponse(e,r,s){let n=this.deserializer,i=L.of(e.output),o={};if(s.statusCode>=300){let c=await $t(s.body,r);throw c.byteLength>0&&Object.assign(o,await n.read(15,c)),await this.handleError(e,r,s,o,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in s.headers){let u=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,s,o);if(a.length){let c=await $t(s.body,r);if(c.byteLength>0){let u=await n.read(i,c);for(let d of a)o[d]=u[d]}}else a.discardResponseBody&&await $t(s.body,r);return o.$metadata=this.deserializeMetadata(s),o}async deserializeHttpMessage(e,r,s,n,i){let o;n instanceof Set?o=i:o=n;let a=!0,c=this.deserializer,u=L.of(e),d=[];for(let[l,h]of u.structIterator()){let m=h.getMemberTraits();if(m.httpPayload){if(a=!1,h.isStreaming())h.isStructSchema()?o[l]=await this.deserializeEventStream({response:s,responseSchema:u}):o[l]=(0,rx.sdkStreamMixin)(s.body);else if(s.body){let w=await $t(s.body,r);w.byteLength>0&&(o[l]=await c.read(h,w))}}else if(m.httpHeader){let g=String(m.httpHeader).toLowerCase(),w=s.headers[g];if(w!=null)if(h.isListSchema()){let R=h.getValueSchema();R.getMergedTraits().httpHeader=g;let x;R.isTimestampSchema()&&R.getSchema()===4?x=Py(w,",",2):x=ia(w);let P=[];for(let D of x)P.push(await c.read(R,D.trim()));o[l]=P}else o[l]=await c.read(h,w)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[g,w]of Object.entries(s.headers))if(g.startsWith(m.httpPrefixHeaders)){let R=h.getValueSchema();R.getMergedTraits().httpHeader=g,o[l][g.slice(m.httpPrefixHeaders.length)]=await c.read(R,w)}}else m.httpResponseCode?o[l]=s.statusCode:d.push(l)}return d.discardResponseBody=a,d}}});var nx,Ur,ix=E(()=>{se();nx=v(ue());Nu();Yu();Ur=class extends En{async serializeRequest(e,r,s){let n=this.serializer,i={},o={},a=await s.endpoint(),c=L.of(e?.input),u=c.getSchema(),d,l=new nx.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,e,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let g={};for(let[w,R]of c.structIterator())w!==m&&h[w]&&(n.write(R,h[w]),g[w]=n.flush());d=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:g})}}else n.write(u,h),d=n.flush()}return l.headers=o,l.query=i,l.body=d,l.method="POST",l}async deserializeResponse(e,r,s){let n=this.deserializer,i=L.of(e.output),o={};if(s.statusCode>=300){let c=await $t(s.body,r);throw c.byteLength>0&&Object.assign(o,await n.read(15,c)),await this.handleError(e,r,s,o,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in s.headers){let u=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:s,responseSchema:i,initialResponseContainer:o});else{let c=await $t(s.body,r);c.byteLength>0&&Object.assign(o,await n.read(i,c))}return o.$metadata=this.deserializeMetadata(s),o}}});var Oy,Ny=E(()=>{Du();Oy=(t,e,r,s,n,i)=>{if(e!=null&&e[r]!==void 0){let o=s();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(n,i?o.split("/").map(a=>gr(a)).join("/"):gr(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function Dy(t,e){return new Xu(t,e)}var ox,Xu,ax=E(()=>{ox=v(ue());Ny();Xu=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:s,path:n}=await this.context.endpoint();this.path=n;for(let i of this.resolvePathStack)i(this.path);return new ox.HttpRequest({protocol:r,hostname:this.hostname||e,port:s,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,s,n){return this.resolvePathStack.push(i=>{this.path=Oy(i,this.input,e,r,s,n)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function kt(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof s=="string"||n?6:i||r?5:void 0:void 0)??e.timestampFormat.default}var Ju=E(()=>{});var My,cx,wn,Ly=E(()=>{se();ft();My=v(qe()),cx=v(Fe());Di();Ju();wn=class extends pt{settings;constructor(e){super(),this.settings=e}read(e,r){let s=L.of(e);if(s.isListSchema())return ia(r).map(n=>this.read(s.getValueSchema(),n));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??My.fromBase64)(r);if(s.isTimestampSchema())switch(kt(s,this.settings)){case 5:return xy(r);case 6:return Ay(r);case 7:return Ni(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){let n=s.getMergedTraits().mediaType,i=r;if(n)return s.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(n==="application/json"||n.endsWith("+json"))&&(i=dt.from(i)),i}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new ge(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??cx.toUtf8)((this.serdeContext?.base64Decoder??My.fromBase64)(e))}}});var Zu,vn,ux=E(()=>{se();Zu=v(Fe());Di();Ly();vn=class extends pt{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new wn(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let s=L.of(e),n=s.getMergedTraits(),i=this.serdeContext?.utf8Encoder??Zu.toUtf8;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(s,i(r));if(n.httpPayload){if(s.isBlobSchema()){let o=this.serdeContext?.utf8Decoder??Zu.fromUtf8;return typeof r=="string"?o(r):r}else if(s.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(s,r)}}});var Fy,oa,qy=E(()=>{se();ft();Fy=v(qe());Di();Ju();oa=class extends pt{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let s=L.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(kt(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=ra(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Fy.toBase64)(r);return}if(s.isListSchema()&&Array.isArray(r)){let o="";for(let a of r){this.write([s.getValueSchema(),s.getMergedTraits()],a);let c=this.flush(),u=s.getValueSchema().isTimestampSchema()?c:vy(c);o!==""&&(o+=", "),o+=u}this.stringBuffer=o;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let n=s.getMergedTraits().mediaType,i=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(i=dt.from(i)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Fy.toBase64)(i.toString());return}this.stringBuffer=r;break;default:s.isIdempotencyToken()?this.stringBuffer=(0,jt.v4)():this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var Cn,lx=E(()=>{se();qy();Cn=class{codecSerializer;stringSerializer;buffer;constructor(e,r,s=new oa(r)){this.codecSerializer=e,this.stringSerializer=s}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let s=L.of(e),n=s.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(s,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(s,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var dx={};ot(dx,{FromStringShapeDeserializer:()=>wn,HttpBindingProtocol:()=>_n,HttpInterceptingShapeDeserializer:()=>vn,HttpInterceptingShapeSerializer:()=>Cn,HttpProtocol:()=>En,RequestBuilder:()=>Xu,RpcProtocol:()=>Ur,SerdeContext:()=>pt,ToStringShapeSerializer:()=>oa,collectBody:()=>$t,determineTimestampFormat:()=>kt,extendedEncodeURIComponent:()=>gr,requestBuilder:()=>Dy,resolvedPath:()=>Oy});var wt=E(()=>{Nu();Du();sx();Yu();ix();ax();Ny();Ly();ux();lx();qy();Ju();Di()});var fx=E(()=>{wt()});function nG(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var px=E(()=>{});var $r,hx=E(()=>{$r=class{authSchemes=new Map;constructor(e){for(let[r,s]of Object.entries(e))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var mx,By,Uy,gx=E(()=>{mx=v(ue()),By=v(ys()),Uy=class{async sign(e,r,s){if(!s)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!s.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!s.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let n=mx.HttpRequest.clone(e);if(s.in===By.HttpApiKeyAuthLocation.QUERY)n.query[s.name]=r.apiKey;else if(s.in===By.HttpApiKeyAuthLocation.HEADER)n.headers[s.name]=s.scheme?`${s.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+s.in+"`");return n}}});var yx,$y,Sx=E(()=>{yx=v(ue()),$y=class{async sign(e,r,s){let n=yx.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return n.headers.Authorization=`Bearer ${r.token}`,n}}});var rr,bx=E(()=>{rr=class{async sign(e,r,s){return e}}});var Ex=E(()=>{gx();Sx();bx()});var _x,iG,jy,el,Hy,wx=E(()=>{_x=t=>function(r){return el(r)&&r.expiration.getTime()-Date.now()<t},iG=3e5,jy=_x(3e5),el=t=>t.expiration!==void 0,Hy=(t,e,r)=>{if(t===void 0)return;let s=typeof t!="function"?async()=>Promise.resolve(t):t,n,i,o,a=!1,c=async u=>{i||(i=s(u));try{n=await i,o=!0,a=!1}finally{i=void 0}return n};return e===void 0?async u=>((!o||u?.forceRefresh)&&(n=await c(u)),n):async u=>((!o||u?.forceRefresh)&&(n=await c(u)),a?n:r(n)?(e(n)&&await c(u),n):(a=!0,n))}});var vx=E(()=>{hx();Ex();wx()});var Mi={};ot(Mi,{DefaultIdentityProviderConfig:()=>$r,EXPIRATION_MS:()=>iG,HttpApiKeyAuthSigner:()=>Uy,HttpBearerAuthSigner:()=>$y,NoAuthSigner:()=>rr,createIsIdentityExpiredFunction:()=>_x,createPaginator:()=>FC,doesIdentityRequireRefresh:()=>el,getHttpAuthSchemeEndpointRuleSetPlugin:()=>gn,getHttpAuthSchemePlugin:()=>qz,getHttpSigningPlugin:()=>yn,getSmithyContext:()=>Oz,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>_C,httpAuthSchemeMiddleware:()=>Go,httpAuthSchemeMiddlewareOptions:()=>AC,httpSigningMiddleware:()=>wg,httpSigningMiddlewareOptions:()=>NC,isIdentityExpired:()=>jy,memoizeIdentityProvider:()=>Hy,normalizeProvider:()=>bs,requestBuilder:()=>Dy,setFeature:()=>nG});var ht=E(()=>{gC();IC();MC();LC();qC();fx();px();vx()});var vs=S(Rn=>{"use strict";var Vy=ys(),Gy=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let s=this.hash(e);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){let n=this.data.keys(),i=0;for(;;){let{value:o,done:a}=n.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(e){let r="",{parameters:s}=this;if(s.length===0)return!1;for(let n of s){let i=String(e[n]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},oG=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Cx=t=>oG.test(t)||t.startsWith("[")&&t.endsWith("]"),aG=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Wy=(t,e=!1)=>{if(!e)return aG.test(t);let r=t.split(".");for(let s of r)if(!Wy(s))return!1;return!0},Qy={},aa="endpoints";function ws(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ws(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ws).join(", ")})`:JSON.stringify(t,null,2)}var Xe=class extends Error{constructor(e){super(e),this.name="EndpointError"}},cG=(t,e)=>t===e,uG=t=>{let e=t.split("."),r=[];for(let s of e){let n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new Xe(`Path: '${t}' does not end with ']'`);let i=s.slice(n+1,-1);if(Number.isNaN(parseInt(i)))throw new Xe(`Invalid array index: '${i}' in path: '${t}'`);n!==0&&r.push(s.slice(0,n)),r.push(i)}else r.push(s)}return r},Rx=(t,e)=>uG(e).reduce((r,s)=>{if(typeof r!="object")throw new Xe(`Index '${s}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},t),lG=t=>t!=null,dG=t=>!t,zy={[Vy.EndpointURLScheme.HTTP]:80,[Vy.EndpointURLScheme.HTTPS]:443},fG=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:m,protocol:g="",path:w="",query:R={}}=t,x=new URL(`${g}//${h}${m?`:${m}`:""}${w}`);return x.search=Object.entries(R).map(([P,D])=>`${P}=${D}`).join("&"),x}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:s,hostname:n,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(Vy.EndpointURLScheme).includes(c))return null;let u=Cx(n),d=r.includes(`${s}:${zy[c]}`)||typeof t=="string"&&t.includes(`${s}:${zy[c]}`),l=`${s}${d?`:${zy[c]}`:""}`;return{scheme:c,authority:l,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},pG=(t,e)=>t===e,hG=(t,e,r,s)=>e>=r||t.length<r?null:s?t.substring(t.length-r,t.length-e):t.substring(e,r),mG=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),gG={booleanEquals:cG,getAttr:Rx,isSet:lG,isValidHostLabel:Wy,not:dG,parseURL:fG,stringEquals:pG,substring:hG,uriEncode:mG},Tx=(t,e)=>{let r=[],s={...e.endpointParams,...e.referenceRecord},n=0;for(;n<t.length;){let i=t.indexOf("{",n);if(i===-1){r.push(t.slice(n));break}r.push(t.slice(n,i));let o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),n=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(Rx(s[c],u))}else r.push(s[a]);n=o+1}return r.join("")},yG=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],tl=(t,e,r)=>{if(typeof t=="string")return Tx(t,r);if(t.fn)return Ax.callFunction(t,r);if(t.ref)return yG(t,r);throw new Xe(`'${e}': ${String(t)} is not a string, function or reference.`)},xx=({fn:t,argv:e},r)=>{let s=e.map(i=>["boolean","number"].includes(typeof i)?i:Ax.evaluateExpression(i,"arg",r)),n=t.split(".");return n[0]in Qy&&n[1]!=null?Qy[n[0]][n[1]](...s):gG[t](...s)},Ax={evaluateExpression:tl,callFunction:xx},SG=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Xe(`'${t}' is already defined in Reference Record.`);let s=xx(e,r);return r.logger?.debug?.(`${aa} evaluateCondition: ${ws(e)} = ${ws(s)}`),{result:s===""?!0:!!s,...t!=null&&{toAssign:{name:t,value:s}}}},Ky=(t=[],e)=>{let r={};for(let s of t){let{result:n,toAssign:i}=SG(s,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!n)return{result:n};i&&(r[i.name]=i.value,e.logger?.debug?.(`${aa} assign: ${i.name} := ${ws(i.value)}`))}return{result:!0,referenceRecord:r}},bG=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:n.map(i=>{let o=tl(i,"Header value entry",e);if(typeof o!="string")throw new Xe(`Header '${s}' value '${o}' is not a string`);return o})}),{}),Px=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:kx.getEndpointProperty(n,e)}),{}),Ix=(t,e)=>{if(Array.isArray(t))return t.map(r=>Ix(r,e));switch(typeof t){case"string":return Tx(t,e);case"object":if(t===null)throw new Xe(`Unexpected endpoint property: ${t}`);return kx.getEndpointProperties(t,e);case"boolean":return t;default:throw new Xe(`Unexpected endpoint property type: ${typeof t}`)}},kx={getEndpointProperty:Ix,getEndpointProperties:Px},EG=(t,e)=>{let r=tl(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new Xe(`Endpoint URL must be a string, got ${typeof r}`)},_G=(t,e)=>{let{conditions:r,endpoint:s}=t,{result:n,referenceRecord:i}=Ky(r,e);if(!n)return;let o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=s;return e.logger?.debug?.(`${aa} Resolving endpoint from template: ${ws(s)}`),{...u!=null&&{headers:bG(u,o)},...c!=null&&{properties:Px(c,o)},url:EG(a,o)}},wG=(t,e)=>{let{conditions:r,error:s}=t,{result:n,referenceRecord:i}=Ky(r,e);if(n)throw new Xe(tl(s,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Ox=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let s=_G(r,e);if(s)return s}else if(r.type==="error")wG(r,e);else if(r.type==="tree"){let s=Nx.evaluateTreeRule(r,e);if(s)return s}else throw new Xe(`Unknown endpoint rule: ${r}`);throw new Xe("Rules evaluation failed")},vG=(t,e)=>{let{conditions:r,rules:s}=t,{result:n,referenceRecord:i}=Ky(r,e);if(n)return Nx.evaluateRules(s,{...e,referenceRecord:{...e.referenceRecord,...i}})},Nx={evaluateRules:Ox,evaluateTreeRule:vG},CG=(t,e)=>{let{endpointParams:r,logger:s}=e,{parameters:n,rules:i}=t;e.logger?.debug?.(`${aa} Initial EndpointParams: ${ws(r)}`);let o=Object.entries(n).filter(([,u])=>u.default!=null).map(([u,d])=>[u,d.default]);if(o.length>0)for(let[u,d]of o)r[u]=r[u]??d;let a=Object.entries(n).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Xe(`Missing required parameter: '${u}'`);let c=Ox(i,{endpointParams:r,logger:s,referenceRecord:{}});return e.logger?.debug?.(`${aa} Resolved endpoint: ${ws(c)}`),c};Rn.EndpointCache=Gy;Rn.EndpointError=Xe;Rn.customEndpointFunctions=Qy;Rn.isIpAddress=Cx;Rn.isValidHostLabel=Wy;Rn.resolveEndpoint=CG});var Mx=S(Dx=>{"use strict";function RG(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}return e}Dx.parseQueryString=RG});var jr=S(Fx=>{"use strict";var TG=Mx(),Lx=t=>{if(typeof t=="string")return Lx(new URL(t));let{hostname:e,pathname:r,port:s,protocol:n,search:i}=t,o;return i&&(o=TG.parseQueryString(i)),{hostname:e,port:s?parseInt(s):void 0,protocol:n,path:r,query:o}};Fx.parseUrl=Lx});var Tn=S(sr=>{"use strict";var Li=vs(),xG=jr(),Bx=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Bx(r))return!1;return!0}return!(!Li.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Li.isIpAddress(t))},qx=":",AG="/",PG=t=>{let e=t.split(qx);if(e.length<6)return null;let[r,s,n,i,o,...a]=e;if(r!=="arn"||s===""||n===""||a.join(qx)==="")return null;let c=a.map(u=>u.split(AG)).flat();return{partition:s,service:n,region:i,accountId:o,resourceId:c}},IG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],kG="1.1",Ux={partitions:IG,version:kG},$x=Ux,jx="",Hx=t=>{let{partitions:e}=$x;for(let s of e){let{regions:n,outputs:i}=s;for(let[o,a]of Object.entries(n))if(o===t)return{...i,...a}}for(let s of e){let{regionRegex:n,outputs:i}=s;if(new RegExp(n).test(t))return{...i}}let r=e.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},zx=(t,e="")=>{$x=t,jx=e},OG=()=>{zx(Ux,"")},NG=()=>jx,Vx={isVirtualHostableS3Bucket:Bx,parseArn:PG,partition:Hx};Li.customEndpointFunctions.aws=Vx;var DG=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>Gx(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},Gx=t=>xG.parseUrl(t.url);Object.defineProperty(sr,"EndpointError",{enumerable:!0,get:function(){return Li.EndpointError}});Object.defineProperty(sr,"isIpAddress",{enumerable:!0,get:function(){return Li.isIpAddress}});Object.defineProperty(sr,"resolveEndpoint",{enumerable:!0,get:function(){return Li.resolveEndpoint}});sr.awsEndpointFunctions=Vx;sr.getUserAgentPrefix=NG;sr.partition=Hx;sr.resolveDefaultAwsRegionalEndpointsConfig=DG;sr.setPartitionInfo=zx;sr.toEndpointV1=Gx;sr.useDefaultPartitionInfo=OG});var rl,Cs,Qx=E(()=>{rl={warningEmitted:!1},Cs=t=>{t&&!rl.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20&&(rl.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}});function Rs(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Wx=E(()=>{});function Kx(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var Yx=E(()=>{});function Xx(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Jx=E(()=>{});var Hr={};ot(Hr,{emitWarningIfUnsupportedVersion:()=>Cs,setCredentialFeature:()=>Rs,setFeature:()=>Kx,setTokenFeature:()=>Xx,state:()=>rl});var Ht=E(()=>{Qx();Wx();Yx();Jx()});var Zx,Yy,eA=E(()=>{Zx=v(ue()),Yy=t=>Zx.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Fi,Xy=E(()=>{Fi=t=>new Date(Date.now()+t)});var tA,rA=E(()=>{Xy();tA=(t,e)=>Math.abs(Fi(e).getTime()-t)>=3e5});var Jy,sA=E(()=>{rA();Jy=(t,e)=>{let r=Date.parse(t);return tA(r,e)?r-Date.now():e}});var Zy=E(()=>{eA();Xy();sA()});var nA,ca,qi,Je,eS,tS=E(()=>{nA=v(ue());Zy();ca=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},qi=async t=>{let e=ca("context",t.context),r=ca("config",t.config),s=e.endpointV2?.properties?.authSchemes?.[0],i=await ca("signer",r.signer)(s),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},Je=class{async sign(e,r,s){if(!nA.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await qi(s),{config:i,signer:o}=n,{signingRegion:a,signingName:c}=n,u=s.context;if(u?.authSchemes?.length??!1){let[l,h]=u.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await o.sign(e,{signingDate:Fi(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let s=r.ServerTime??Yy(r.$response);if(s){let n=ca("config",e.config),i=n.systemClockOffset;n.systemClockOffset=Jy(s,n.systemClockOffset),n.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let s=Yy(e);if(s){let n=ca("config",r.config);n.systemClockOffset=Jy(s,n.systemClockOffset)}}},eS=Je});var iA,ua,oA=E(()=>{iA=v(ue());Zy();tS();ua=class extends Je{async sign(e,r,s){if(!iA.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await qi(s),d=(await n.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:Fi(n.systemClockOffset),signingRegion:d,signingService:c})}}});var rS,aA=E(()=>{rS=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var sl,sS=E(()=>{sl=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var cA,uA,Ts,lA=E(()=>{aA();sS();cA="AWS_AUTH_SCHEME_PREFERENCE",uA="auth_scheme_preference",Ts={environmentVariableSelector:(t,e)=>{if(e?.signingName&&sl(e.signingName)in t)return["httpBearerAuth"];if(cA in t)return rS(t[cA])},configFileSelector:t=>{if(uA in t)return rS(t[uA])},default:[]}});var Ze=S(xn=>{"use strict";var Bi=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let s,n=!0;typeof r=="boolean"?(s=void 0,n=r):r!=null&&typeof r=="object"&&(s=r.logger,n=r.tryNextLink??!0),super(e),this.tryNextLink=n,Object.setPrototypeOf(this,t.prototype),s?.debug?.(`@smithy/property-provider ${n?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},nS=class t extends Bi{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},iS=class t extends Bi{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},MG=(...t)=>async()=>{if(t.length===0)throw new Bi("No providers in chain");let e;for(let r of t)try{return await r()}catch(s){if(e=s,s?.tryNextLink)continue;throw s}throw e},LG=t=>()=>Promise.resolve(t),FG=(t,e,r)=>{let s,n,i,o=!1,a=async()=>{n||(n=t());try{s=await n,i=!0,o=!1}finally{n=void 0}return s};return e===void 0?async c=>((!i||c?.forceRefresh)&&(s=await a()),s):async c=>((!i||c?.forceRefresh)&&(s=await a()),o?s:r&&!r(s)?(o=!0,s):(e(s)&&await a(),s))};xn.CredentialsProviderError=nS;xn.ProviderError=Bi;xn.TokenProviderError=iS;xn.chain=MG;xn.fromStatic=LG;xn.memoize=FG});var oS,dA,fA,pA=E(()=>{ht();oS=v(Ze()),dA=t=>(t.sigv4aSigningRegionSet=bs(t.sigv4aSigningRegionSet),t),fA={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new oS.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new oS.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var FA=S(Q=>{"use strict";var xs=Yg(),An=Fe(),qG=Cg(),yA=ue(),hA=ut(),nl=qg(),SA="X-Amz-Algorithm",bA="X-Amz-Credential",fS="X-Amz-Date",EA="X-Amz-SignedHeaders",_A="X-Amz-Expires",pS="X-Amz-Signature",hS="X-Amz-Security-Token",BG="X-Amz-Region-Set",mS="authorization",gS=fS.toLowerCase(),wA="date",vA=[mS,gS,wA],CA=pS.toLowerCase(),ul="x-amz-content-sha256",RA=hS.toLowerCase(),UG="host",TA={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},xA=/^proxy-/,AA=/^sec-/,$G=[/^proxy-/i,/^sec-/i],il="AWS4-HMAC-SHA256",jG="AWS4-ECDSA-P256-SHA256",PA="AWS4-HMAC-SHA256-PAYLOAD",IA="UNSIGNED-PAYLOAD",kA=50,yS="aws4_request",OA=3600*24*7,Ui={},ol=[],al=(t,e,r)=>`${t}/${e}/${r}/${yS}`,NA=async(t,e,r,s,n)=>{let i=await mA(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${s}:${n}:${xs.toHex(i)}:${e.sessionToken}`;if(o in Ui)return Ui[o];for(ol.push(o);ol.length>kA;)delete Ui[ol.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,s,n,yS])a=await mA(t,a,c);return Ui[o]=a},HG=()=>{ol.length=0,Object.keys(Ui).forEach(t=>{delete Ui[t]})},mA=(t,e,r)=>{let s=new t(e);return s.update(An.toUint8Array(r)),s.digest()},aS=({headers:t},e,r)=>{let s={};for(let n of Object.keys(t).sort()){if(t[n]==null)continue;let i=n.toLowerCase();(i in TA||e?.has(i)||xA.test(i)||AA.test(i))&&(!r||r&&!r.has(i))||(s[i]=t[n].trim().replace(/\s+/g," "))}return s},cl=async({headers:t,body:e},r)=>{for(let s of Object.keys(t))if(s.toLowerCase()===ul)return t[s];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||qG.isArrayBuffer(e)){let s=new r;return s.update(An.toUint8Array(e)),xs.toHex(await s.digest())}return IA},cS=class{format(e){let r=[];for(let i of Object.keys(e)){let o=An.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let s=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),n=0;for(let i of r)s.set(i,n),n+=i.byteLength;return s}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,e.value,!1),new Uint8Array(s.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=An.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let d=new Uint8Array(9);return d[0]=8,d.set(uS.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!zG.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(xs.fromHex(e.value.replace(/\-/g,"")),1),l}}},zG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,uS=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(e));s>-1&&n>0;s--,n/=256)r[s]=n;return e<0&&gA(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&gA(e),parseInt(xs.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function gA(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var DA=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},MA=(t,e={})=>{let{headers:r,query:s={}}=yA.HttpRequest.clone(t);for(let n of Object.keys(r)){let i=n.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(s[n]=r[n],delete r[n])}return{...t,headers:r,query:s}},lS=t=>{t=yA.HttpRequest.clone(t);for(let e of Object.keys(t.headers))vA.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},LA=({query:t={}})=>{let e=[],r={};for(let s of Object.keys(t)){if(s.toLowerCase()===CA)continue;let n=nl.escapeUri(s);e.push(n);let i=t[s];typeof i=="string"?r[n]=`${n}=${nl.escapeUri(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((o,a)=>o.concat([`${n}=${nl.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(s=>r[s]).filter(s=>s).join("&")},VG=t=>GG(t).toISOString().replace(/\.\d{3}Z$/,"Z"),GG=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,ll=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o=!0}){this.service=n,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=hA.normalizeProvider(s),this.credentialProvider=hA.normalizeProvider(r)}createCanonicalRequest(e,r,s){let n=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${LA(e)}
${n.map(i=>`${i}:${r[i]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(e,r,s,n){let i=new this.sha256;i.update(An.toUint8Array(s));let o=await i.digest();return`${n}
${e}
${r}
${xs.toHex(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let s=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return nl.escapeUri(s).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=VG(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},dS=class extends ll{headerFormatter=new cS;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:o})}async presign(e,r={}){let{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let h=u??await this.regionProvider(),{longDate:m,shortDate:g}=this.formatDate(s);if(n>OA)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=al(g,h,d??this.service),R=MA(lS(e),{unhoistableHeaders:o,hoistableHeaders:c});l.sessionToken&&(R.query[hS]=l.sessionToken),R.query[SA]=il,R.query[bA]=`${l.accessKeyId}/${w}`,R.query[fS]=m,R.query[_A]=n.toString(10);let x=aS(R,i,a);return R.query[EA]=this.getCanonicalHeaderList(x),R.query[pS]=await this.getSignature(m,w,this.getSigningKey(l,h,g,d),this.createCanonicalRequest(R,x,await cl(e,this.sha256))),R}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:i,signingService:o}){let a=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(s),d=al(c,a,o??this.service),l=await cl({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let m=xs.toHex(await h.digest()),g=[PA,u,d,n,m,l].join(`
`);return this.signString(g,{signingDate:s,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let o=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,o,a,n));return c.update(An.toUint8Array(e)),xs.toHex(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:i,signingService:o}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=i??await this.regionProvider(),u=lS(e),{longDate:d,shortDate:l}=this.formatDate(r),h=al(l,c,o??this.service);u.headers[gS]=d,a.sessionToken&&(u.headers[RA]=a.sessionToken);let m=await cl(u,this.sha256);!DA(ul,u.headers)&&this.applyChecksum&&(u.headers[ul]=m);let g=aS(u,n,s),w=await this.getSignature(d,h,this.getSigningKey(a,c,l,o),this.createCanonicalRequest(u,g,m));return u.headers[mS]=`${il} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${w}`,u}async getSignature(e,r,s,n){let i=await this.createStringToSign(e,r,n,il),o=new this.sha256(await s);return o.update(An.toUint8Array(i)),xs.toHex(await o.digest())}getSigningKey(e,r,s,n){return NA(this.sha256,e,s,r,n||this.service)}},QG={SignatureV4a:null};Q.ALGORITHM_IDENTIFIER=il;Q.ALGORITHM_IDENTIFIER_V4A=jG;Q.ALGORITHM_QUERY_PARAM=SA;Q.ALWAYS_UNSIGNABLE_HEADERS=TA;Q.AMZ_DATE_HEADER=gS;Q.AMZ_DATE_QUERY_PARAM=fS;Q.AUTH_HEADER=mS;Q.CREDENTIAL_QUERY_PARAM=bA;Q.DATE_HEADER=wA;Q.EVENT_ALGORITHM_IDENTIFIER=PA;Q.EXPIRES_QUERY_PARAM=_A;Q.GENERATED_HEADERS=vA;Q.HOST_HEADER=UG;Q.KEY_TYPE_IDENTIFIER=yS;Q.MAX_CACHE_SIZE=kA;Q.MAX_PRESIGNED_TTL=OA;Q.PROXY_HEADER_PATTERN=xA;Q.REGION_SET_PARAM=BG;Q.SEC_HEADER_PATTERN=AA;Q.SHA256_HEADER=ul;Q.SIGNATURE_HEADER=CA;Q.SIGNATURE_QUERY_PARAM=pS;Q.SIGNED_HEADERS_QUERY_PARAM=EA;Q.SignatureV4=dS;Q.SignatureV4Base=ll;Q.TOKEN_HEADER=RA;Q.TOKEN_QUERY_PARAM=hS;Q.UNSIGNABLE_PATTERNS=$G;Q.UNSIGNED_PAYLOAD=IA;Q.clearCredentialCache=HG;Q.createScope=al;Q.getCanonicalHeaders=aS;Q.getCanonicalQuery=LA;Q.getPayloadHash=cl;Q.getSigningKey=NA;Q.hasHeader=DA;Q.moveHeadersToQuery=MA;Q.prepareRequest=lS;Q.signatureV4aContainer=QG});function WG(t,{credentials:e,credentialDefaultProvider:r}){let s;return e?e?.memoized?s=e:s=Hy(e,jy,el):r?s=bs(r(Object.assign({},t,{parentClientConfig:t}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function KG(t,e){if(e.configBound)return e;let r=async s=>e({...s,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var SS,zr,qA,BA=E(()=>{Ht();ht();SS=v(FA()),zr=t=>{let e=t.credentials,r=!!t.credentials,s;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==s&&(r=!0),e=u;let d=WG(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),l=KG(t,d);if(r&&!l.attributed){let h=typeof e=="object"&&e!==null;s=async m=>{let w=await l(m);return h&&(!w.$source||Object.keys(w.$source).length===0)?Rs(w,"CREDENTIALS_CODE","e"):w},s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0}else s=l},get(){return s},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,a;return t.signer?a=bs(t.signer):t.regionInfoProvider?a=()=>bs(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{let{signingRegion:l,signingService:h}=u;t.signingRegion=t.signingRegion||l||d,t.signingName=t.signingName||h||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},g=t.signerConstructor||SS.SignatureV4;return new g(m)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await bs(t.region)(),properties:{}},u);let d=u.signingRegion,l=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||l||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},m=t.signerConstructor||SS.SignatureV4;return new m(h)},Object.assign(t,{systemClockOffset:i,signingEscapePath:n,signer:a})},qA=zr});var UA=E(()=>{tS();oA();lA();pA();BA()});var $A={};ot($A,{AWSSDKSigV4Signer:()=>eS,AwsSdkSigV4ASigner:()=>ua,AwsSdkSigV4Signer:()=>Je,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ts,NODE_SIGV4A_CONFIG_OPTIONS:()=>fA,getBearerTokenEnvKey:()=>sl,resolveAWSSDKSigV4Config:()=>qA,resolveAwsSdkSigV4AConfig:()=>dA,resolveAwsSdkSigV4Config:()=>zr,validateSigningProperties:()=>qi});var bS=E(()=>{UA();sS()});function As(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function dl(t){return t[ES]=!0,t}var ES,fl=E(()=>{ES=Symbol("@smithy/core/cbor::tagSymbol")});function zA(t){le=t,Gr=new DataView(le.buffer,le.byteOffset,le.byteLength)}function br(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(le[t]&224)>>5,s=le[t]&31;switch(r){case 0:case 1:case 6:let n,i;if(s<24)n=s,i=1;else switch(s){case 24:case 25:case 26:case 27:let o=GA[s],a=o+1;if(i=a,e-t<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=t+1;o===1?n=le[c]:o===2?n=Gr.getUint16(c):o===4?n=Gr.getUint32(c):n=Gr.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${s}.`)}if(r===0)return K=i,_S(n);if(r===1){let o;return typeof n=="bigint"?o=BigInt(-1)-n:o=-1-n,K=i,_S(o)}else if(s===2||s===3){let o=pa(t+i,e),a=BigInt(0),c=t+i+K;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(le[u]);return K=i+K+o,s===3?-a-BigInt(1):a}else if(s===4){let o=br(t+i,e),[a,c]=o,u=c<0?-1:1,d="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),l,h=c<0?"-":"";return l=a===0?d:d.slice(0,d.length+a)+"."+d.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=h+l,K=i+K,Iy(l)}else{let o=br(t+i,e);return K=i+K,dl({tag:_S(n),value:o})}case 3:case 5:case 4:case 2:if(s===31)switch(r){case 3:return r8(t,e);case 5:return a8(t,e);case 4:return i8(t,e);case 2:return s8(t,e)}else switch(r){case 3:return t8(t,e);case 5:return o8(t,e);case 4:return n8(t,e);case 2:return xS(t,e)}default:return c8(t,e)}}function VA(t,e,r){return JG&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):jA?jA.decode(t.subarray(e,r)):(0,HA.toUtf8)(t.subarray(e,r))}function ZG(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function e8(t,e){let r=t>>7,s=(t&124)>>2,n=(t&3)<<8|e,i=r===0?1:-1,o,a;if(s===0){if(n===0)return 0;o=Math.pow(2,-14),a=0}else{if(s===31)return n===0?i*(1/0):NaN;o=Math.pow(2,s-15),a=1}return a+=n/1024,i*(o*a)}function pa(t,e){let r=le[t]&31;if(r<24)return K=1,r;if(r===24||r===25||r===26||r===27){let s=GA[r];if(K=s+1,e-t<K)throw new Error(`countLength ${s} greater than remaining buf len.`);let n=t+1;return s===1?le[n]:s===2?Gr.getUint16(n):s===4?Gr.getUint32(n):ZG(Gr.getBigUint64(n))}throw new Error(`unexpected minor value ${r}.`)}function t8(t,e){let r=pa(t,e),s=K;if(t+=s,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let n=VA(le,t,t+r);return K=s+r,n}function r8(t,e){t+=1;let r=[];for(let s=t;t<e;){if(le[t]===255){let c=As(r.length);return c.set(r,0),K=t-s+2,VA(c,0,c.length)}let n=(le[t]&224)>>5,i=le[t]&31;if(n!==3)throw new Error(`unexpected major type ${n} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=xS(t,e);t+=K;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function xS(t,e){let r=pa(t,e),s=K;if(t+=s,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let n=le.subarray(t,t+r);return K=s+r,n}function s8(t,e){t+=1;let r=[];for(let s=t;t<e;){if(le[t]===255){let c=As(r.length);return c.set(r,0),K=t-s+2,c}let n=(le[t]&224)>>5,i=le[t]&31;if(n!==2)throw new Error(`unexpected major type ${n} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=xS(t,e);t+=K;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function n8(t,e){let r=pa(t,e),s=K;t+=s;let n=t,i=Array(r);for(let o=0;o<r;++o){let a=br(t,e),c=K;i[o]=a,t+=c}return K=s+(t-n),i}function i8(t,e){t+=1;let r=[];for(let s=t;t<e;){if(le[t]===255)return K=t-s+2,r;let n=br(t,e);t+=K,r.push(n)}throw new Error("expected break marker.")}function o8(t,e){let r=pa(t,e),s=K;t+=s;let n=t,i={};for(let o=0;o<r;++o){if(t>=e)throw new Error("unexpected end of map payload.");let a=(le[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=br(t,e);t+=K;let u=br(t,e);t+=K,i[c]=u}return K=s+(t-n),i}function a8(t,e){t+=1;let r=t,s={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(le[t]===255)return K=t-r+2,s;let n=(le[t]&224)>>5;if(n!==3)throw new Error(`unexpected major type ${n} for map key.`);let i=br(t,e);t+=K;let o=br(t,e);t+=K,s[i]=o}throw new Error("expected break marker.")}function c8(t,e){let r=le[t]&31;switch(r){case 21:case 20:return K=1,r===21;case 22:return K=1,null;case 23:return K=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return K=3,e8(le[t+1],le[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return K=5,Gr.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return K=9,Gr.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function _S(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var HA,XG,JG,le,Gr,jA,K,GA,QA=E(()=>{ft();HA=v(Fe());fl();XG=typeof TextDecoder<"u",JG=typeof Buffer<"u",le=As(0),Gr=new DataView(le.buffer,le.byteOffset,le.byteLength),jA=XG?new TextDecoder:null,K=0;GA={24:1,25:2,26:4,27:8}});function PS(t){$.byteLength-F<t&&(F<16e6?hl(Math.max($.byteLength*4,$.byteLength+t)):hl($.byteLength+t+16e6))}function IS(){let t=As(F);return t.set($.subarray(0,F),0),F=0,t}function hl(t){let e=$;$=As(t),e&&(e.copy?e.copy($,0,0,e.byteLength):$.set(e,0)),Kr=new DataView($.buffer,$.byteOffset,$.byteLength)}function Wr(t,e){e<24?$[F++]=t<<5|e:e<256?($[F++]=t<<5|24,$[F++]=e):e<65536?($[F++]=t<<5|25,Kr.setUint16(F,e),F+=2):e<2**32?($[F++]=t<<5|26,Kr.setUint32(F,e),F+=4):($[F++]=t<<5|27,Kr.setBigUint64(F,typeof e=="bigint"?e:BigInt(e)),F+=8)}function YA(t){let e=[t];for(;e.length;){let r=e.pop();if(PS(typeof r=="string"?r.length*4:64),typeof r=="string"){if(WA)Wr(3,Buffer.byteLength(r)),F+=$.write(r,F);else{let s=(0,KA.fromUtf8)(r);Wr(3,s.byteLength),$.set(s,F),F+=s.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let s=r>=0,n=s?0:1,i=s?r:-r-1;i<24?$[F++]=n<<5|i:i<256?($[F++]=n<<5|24,$[F++]=i):i<65536?($[F++]=n<<5|25,$[F++]=i>>8,$[F++]=i):i<4294967296?($[F++]=n<<5|26,Kr.setUint32(F,i),F+=4):($[F++]=n<<5|27,Kr.setBigUint64(F,BigInt(i)),F+=8);continue}$[F++]=251,Kr.setFloat64(F,r),F+=8;continue}else if(typeof r=="bigint"){let s=r>=0,n=s?0:1,i=s?r:-r-BigInt(1),o=Number(i);if(o<24)$[F++]=n<<5|o;else if(o<256)$[F++]=n<<5|24,$[F++]=o;else if(o<65536)$[F++]=n<<5|25,$[F++]=o>>8,$[F++]=o&255;else if(o<4294967296)$[F++]=n<<5|26,Kr.setUint32(F,o),F+=4;else if(i<BigInt("18446744073709551616"))$[F++]=n<<5|27,Kr.setBigUint64(F,i),F+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,d=0;for(;c.byteLength-++d>=0;)c[c.byteLength-d]=Number(u&BigInt(255)),u>>=BigInt(8);PS(c.byteLength*2),$[F++]=s?194:195,WA?Wr(2,Buffer.byteLength(c)):Wr(2,c.byteLength),$.set(c,F),F+=c.byteLength}continue}else if(r===null){$[F++]=246;continue}else if(typeof r=="boolean"){$[F++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let s=r.length-1;s>=0;--s)e.push(r[s]);Wr(4,r.length);continue}else if(typeof r.byteLength=="number"){PS(r.length*2),Wr(2,r.length),$.set(r,F),F+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof ge){let n=r.string.indexOf("."),i=n===-1?0:n-r.string.length+1,o=BigInt(r.string.replace(".",""));$[F++]=196,e.push(o),e.push(i),Wr(4,2);continue}if(r[ES])if("tag"in r&&"value"in r){e.push(r.value),Wr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let s=Object.keys(r);for(let n=s.length-1;n>=0;--n){let i=s[n];e.push(r[i]),e.push(i)}Wr(5,s.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var KA,WA,u8,$,Kr,F,XA=E(()=>{ft();KA=v(Fe());fl();WA=typeof Buffer<"u",u8=2048,$=As(u8),Kr=new DataView($.buffer,$.byteOffset,$.byteLength),F=0});var kS,JA=E(()=>{QA();XA();kS={deserialize(t){return zA(t),br(0,t.length)},serialize(t){try{return YA(t),IS()}catch(e){throw IS(),e}},resizeEncodingBuffer(t){hl(t)}}});var ml,gl,yl=E(()=>{fl();ml=t=>dl({tag:1,value:t.getTime()/1e3}),gl=(t,e)=>{let r=n=>{let i=n;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(e.__type!==void 0)return r(e.__type);let s=Object.keys(e).find(n=>n.toLowerCase()==="code");if(s&&e[s]!==void 0)return r(e[s])}});var DS,Sl,OS,NS,MS=E(()=>{wt();se();ft();ft();DS=v(qe());JA();yl();Sl=class extends pt{createSerializer(){let e=new OS;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new NS;return e.setSerdeContext(this.serdeContext),e}},OS=class extends pt{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let s=L.of(e);if(r==null)return s.isIdempotencyToken()?(0,jt.v4)():r;if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??DS.fromBase64)(r):r;if(s.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?ml(new Date(Number(r)/1e3|0)):ml(r);if(typeof r=="function"||typeof r=="object"){let n=r;if(s.isListSchema()&&Array.isArray(n)){let o=!!s.getMergedTraits().sparse,a=[],c=0;for(let u of n){let d=this.serialize(s.getValueSchema(),u);(d!=null||o)&&(a[c++]=d)}return a}if(n instanceof Date)return ml(n);let i={};if(s.isMapSchema()){let o=!!s.getMergedTraits().sparse;for(let a of Object.keys(n)){let c=this.serialize(s.getValueSchema(),n[a]);(c!=null||o)&&(i[a]=c)}}else if(s.isStructSchema()){for(let[a,c]of s.structIterator()){let u=this.serialize(c,n[a]);u!=null&&(i[a]=u)}if(s.isUnionSchema()&&Array.isArray(n.$unknown)){let[a,c]=n.$unknown;i[a]=c}else if(typeof n.__type=="string")for(let[a,c]of Object.entries(n))a in i||(i[a]=this.serialize(15,c))}else if(s.isDocumentSchema())for(let o of Object.keys(n))i[o]=this.serialize(s.getValueSchema(),n[o]);else if(s.isBigDecimalSchema())return n;return i}return r}flush(){let e=kS.serialize(this.value);return this.value=void 0,e}},NS=class extends pt{read(e,r){let s=kS.deserialize(r);return this.readValue(e,s)}readValue(e,r){let s=L.of(e);if(s.isTimestampSchema()){if(typeof r=="number")return Ni(r);if(typeof r=="object"&&r.tag===1&&"value"in r)return Ni(r.value)}if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??DS.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||s.isDocumentSchema())return r;if(s.isListSchema()){let i=[],o=s.getValueSchema(),a=!!s.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let n={};if(s.isMapSchema()){let i=!!s.getMergedTraits().sparse,o=s.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(n[a]=c)}}else if(s.isStructSchema()){let i=s.isUnionSchema(),o;i&&(o=new Set(Object.keys(r).filter(a=>a!=="__type")));for(let[a,c]of s.structIterator())i&&o.delete(a),r[a]!=null&&(n[a]=this.readValue(c,r[a]));if(i&&o?.size===1&&Object.keys(n).length===0){let a=o.values().next().value;n.$unknown=[a,r[a]]}else if(typeof r.__type=="string")for(let[a,c]of Object.entries(r))a in n||(n[a]=c)}else if(r instanceof ge)return r;return n}else return r}}});var ZA,bl,e1=E(()=>{wt();se();ZA=v(ut());MS();yl();bl=class extends Ur{codec=new Sl;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s);if(Object.assign(n.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),tr(e.input)==="unit")delete n.body,delete n.headers["content-type"];else{n.body||(this.serializer.write(15,{}),n.body=this.serializer.flush());try{n.headers["content-length"]=String(n.body.byteLength)}catch{}}let{service:i,operation:o}=(0,ZA.getSmithyContext)(s),a=`/service/${i}/operation/${o}`;return n.path.endsWith("/")?n.path+=a.slice(1):n.path+=a,n}async deserializeResponse(e,r,s){return super.deserializeResponse(e,r,s)}async handleError(e,r,s,n,i){let o=gl(s,n)??"Unknown",a=this.options.defaultNamespace;o.includes("#")&&([a]=o.split("#"));let c={$metadata:i,$fault:s.statusCode<=500?"client":"server"},u=B.for(a),d;try{d=u.getSchema(o)}catch{n.Message&&(n.message=n.Message);let x=B.for("smithy.ts.sdk.synthetic."+a),P=x.getBaseException();if(P){let D=x.getErrorCtor(P);throw Object.assign(new D({name:o}),c,n)}throw Object.assign(new Error(o),c,n)}let l=L.of(d),h=u.getErrorCtor(d),m=n.message??n.Message??"Unknown",g=new h(m),w={};for(let[R,x]of l.structIterator())w[R]=this.deserializer.readValue(x,n[R]);throw Object.assign(g,c,{$fault:l.getMergedTraits().error,message:m},w)}getDefaultContentType(){return"application/cbor"}}});var t1=E(()=>{yl();e1();MS()});var i1=S(n1=>{"use strict";var Pn=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let s of e)r.push(s);return r},Os=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,LS=()=>{let t=[],e=[],r=!1,s=new Set,n=l=>l.sort((h,m)=>r1[m.step]-r1[h.step]||s1[m.priority||"normal"]-s1[h.priority||"normal"]),i=l=>{let h=!1,m=g=>{let w=Pn(g.name,g.aliases);if(w.includes(l)){h=!0;for(let R of w)s.delete(R);return!1}return!0};return t=t.filter(m),e=e.filter(m),h},o=l=>{let h=!1,m=g=>{if(g.middleware===l){h=!0;for(let w of Pn(g.name,g.aliases))s.delete(w);return!1}return!0};return t=t.filter(m),e=e.filter(m),h},a=l=>(t.forEach(h=>{l.add(h.middleware,{...h})}),e.forEach(h=>{l.addRelativeTo(h.middleware,{...h})}),l.identifyOnResolve?.(d.identifyOnResolve()),l),c=l=>{let h=[];return l.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(l),l.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},u=(l=!1)=>{let h=[],m=[],g={};return t.forEach(R=>{let x={...R,before:[],after:[]};for(let P of Pn(x.name,x.aliases))g[P]=x;h.push(x)}),e.forEach(R=>{let x={...R,before:[],after:[]};for(let P of Pn(x.name,x.aliases))g[P]=x;m.push(x)}),m.forEach(R=>{if(R.toMiddleware){let x=g[R.toMiddleware];if(x===void 0){if(l)return;throw new Error(`${R.toMiddleware} is not found when adding ${Os(R.name,R.aliases)} middleware ${R.relation} ${R.toMiddleware}`)}R.relation==="after"&&x.after.push(R),R.relation==="before"&&x.before.push(R)}}),n(h).map(c).reduce((R,x)=>(R.push(...x),R),[])},d={add:(l,h={})=>{let{name:m,override:g,aliases:w}=h,R={step:"initialize",priority:"normal",middleware:l,...h},x=Pn(m,w);if(x.length>0){if(x.some(P=>s.has(P))){if(!g)throw new Error(`Duplicate middleware name '${Os(m,w)}'`);for(let P of x){let D=t.findIndex(j=>j.name===P||j.aliases?.some(W=>W===P));if(D===-1)continue;let M=t[D];if(M.step!==R.step||R.priority!==M.priority)throw new Error(`"${Os(M.name,M.aliases)}" middleware with ${M.priority} priority in ${M.step} step cannot be overridden by "${Os(m,w)}" middleware with ${R.priority} priority in ${R.step} step.`);t.splice(D,1)}}for(let P of x)s.add(P)}t.push(R)},addRelativeTo:(l,h)=>{let{name:m,override:g,aliases:w}=h,R={middleware:l,...h},x=Pn(m,w);if(x.length>0){if(x.some(P=>s.has(P))){if(!g)throw new Error(`Duplicate middleware name '${Os(m,w)}'`);for(let P of x){let D=e.findIndex(j=>j.name===P||j.aliases?.some(W=>W===P));if(D===-1)continue;let M=e[D];if(M.toMiddleware!==R.toMiddleware||M.relation!==R.relation)throw new Error(`"${Os(M.name,M.aliases)}" middleware ${M.relation} "${M.toMiddleware}" middleware cannot be overridden by "${Os(m,w)}" middleware ${R.relation} "${R.toMiddleware}" middleware.`);e.splice(D,1)}}for(let P of x)s.add(P)}e.push(R)},clone:()=>a(LS()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?i(l):o(l),removeByTag:l=>{let h=!1,m=g=>{let{tags:w,name:R,aliases:x}=g;if(w&&w.includes(l)){let P=Pn(R,x);for(let D of P)s.delete(D);return h=!0,!1}return!0};return t=t.filter(m),e=e.filter(m),h},concat:l=>{let h=a(LS());return h.use(l),h.identifyOnResolve(r||h.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>u(!0).map(l=>{let h=l.step??l.relation+" "+l.toMiddleware;return Os(l.name,l.aliases)+" - "+h}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,h)=>{for(let m of u().map(g=>g.middleware).reverse())l=m(l,h);return r&&console.log(d.identify()),l}};return d},r1={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},s1={high:3,normal:2,low:1};n1.constructStack=LS});var Y=S(ce=>{"use strict";var c1=i1(),VS=(wt(),J(dx)),qS=ys(),l8=(se(),J(Uu)),o1=(ft(),J(XT)),BS=class{config;middlewareStack=c1.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:r,protocolSettings:s}=e;s&&typeof r=="function"&&(e.protocol=new r(s))}send(e,r,s){let n=typeof r!="function"?r:void 0,i=typeof r=="function"?r:s,o=n===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,n),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,n);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},FS="***SensitiveInformation***";function US(t,e){if(e==null)return e;let r=l8.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return FS;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return FS}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return FS}else if(r.isStructSchema()&&typeof e=="object"){let s=e,n={};for(let[i,o]of r.structIterator())s[i]!=null&&(n[i]=US(o,s[i]));return n}return e}var El=class{middlewareStack=c1.constructStack();schema;static classBuilder(){return new $S}resolveMiddlewareWithContext(e,r,s,{middlewareFn:n,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:d,CommandCtor:l}){for(let R of n.bind(this)(l,e,r,s))this.middlewareStack.use(R);let h=e.concat(this.middlewareStack),{logger:m}=r,g={logger:m,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[qS.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...d},{requestHandler:w}=r;return h.resolve(R=>w.handle(R.request,s||{}),g)}},$S=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,s={}){return this._smithyContext={service:e,operation:r,...s},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=s=>s,r=s=>s){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends El{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[s]){super(),this.input=s??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(s,n,i){let o=e._operationSchema,a=o?.[4]??o?.input,c=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(s,n,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?US.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?US.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},d8="***SensitiveInformation***",f8=(t,e)=>{for(let r of Object.keys(t)){let s=t[r],n=async function(o,a,c){let u=new s(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=n}},jS=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},u1=(t,e={})=>{Object.entries(e).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(t[s]==null||t[s]==="")&&(t[s]=n)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},l1=({output:t,parsedBody:e,exceptionCtor:r,errorCode:s})=>{let n=h8(t),i=n.httpStatusCode?n.httpStatusCode+"":void 0,o=new r({name:e?.code||e?.Code||s||i||"UnknownError",$fault:"client",$metadata:n});throw u1(o,e)},p8=t=>({output:e,parsedBody:r,errorCode:s})=>{l1({output:e,parsedBody:r,exceptionCtor:t,errorCode:s})},h8=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),m8=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},a1=!1,g8=t=>{t&&!a1&&parseInt(t.substring(1,t.indexOf(".")))<16&&(a1=!0)},y8=t=>{let e=[];for(let r in qS.AlgorithmId){let s=qS.AlgorithmId[r];t[s]!==void 0&&e.push({algorithmId:()=>s,checksumConstructor:()=>t[s]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},S8=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},b8=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),E8=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},d1=t=>Object.assign(y8(t),b8(t)),_8=d1,w8=t=>Object.assign(S8(t),E8(t)),v8=t=>Array.isArray(t)?t:[t],f1=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=f1(t[r]));return t},C8=t=>t!=null,HS=class{trace(){}debug(){}info(){}warn(){}error(){}};function p1(t,e,r){let s,n,i;if(typeof e>"u"&&typeof r>"u")s={},i=t;else{if(s=t,typeof e=="function")return n=e,i=r,x8(s,n,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){s[o]=i[o];continue}h1(s,null,i,o)}return s}var R8=t=>{let e={};for(let[r,s]of Object.entries(t||{}))e[r]=[,s];return e},T8=(t,e)=>{let r={};for(let s in e)h1(r,t,e,s);return r},x8=(t,e,r)=>p1(t,Object.entries(r).reduce((s,[n,i])=>(Array.isArray(i)?s[n]=i:typeof i=="function"?s[n]=[e,i()]:s[n]=[e,i],s),{})),h1=(t,e,r,s)=>{if(e!==null){let o=r[s];typeof o=="function"&&(o=[,o]);let[a=A8,c=P8,u=s]=o;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[s]=c(e[u]));return}let[n,i]=r[s];if(typeof i=="function"){let o,a=n===void 0&&(o=i())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?t[s]=o:c&&(t[s]=i())}else{let o=n===void 0&&i!=null,a=typeof n=="function"&&!!n(i)||typeof n!="function"&&!!n;(o||a)&&(t[s]=i)}},A8=t=>t!=null,P8=t=>t,I8=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},k8=t=>t.toISOString().replace(".000Z","Z"),zS=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(zS);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=zS(t[r]));return e}return t};Object.defineProperty(ce,"collectBody",{enumerable:!0,get:function(){return VS.collectBody}});Object.defineProperty(ce,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return VS.extendedEncodeURIComponent}});Object.defineProperty(ce,"resolvedPath",{enumerable:!0,get:function(){return VS.resolvedPath}});ce.Client=BS;ce.Command=El;ce.NoOpLogger=HS;ce.SENSITIVE_STRING=d8;ce.ServiceException=jS;ce._json=zS;ce.convertMap=R8;ce.createAggregatedClient=f8;ce.decorateServiceException=u1;ce.emitWarningIfUnsupportedVersion=g8;ce.getArrayIfSingleItem=v8;ce.getDefaultClientConfiguration=_8;ce.getDefaultExtensionConfiguration=d1;ce.getValueFromTextNode=f1;ce.isSerializableHeaderValue=C8;ce.loadConfigsForDefaultMode=m8;ce.map=p1;ce.resolveDefaultRuntimeConfig=w8;ce.serializeDateTime=k8;ce.serializeFloat=I8;ce.take=T8;ce.throwDefaultError=l1;ce.withBaseException=p8;Object.keys(o1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ce,t)&&Object.defineProperty(ce,t,{enumerable:!0,get:function(){return o1[t]}})})});var GS,zt,ji=E(()=>{se();GS=v(Y()),zt=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){let s=r.getMemberSchemas(),n=Object.values(s).find(i=>!!i.getMergedTraits().httpPayload);if(n){let i=n.getMergedTraits().mediaType;return i||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(s).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:d,httpPrefixHeaders:l}=o.getMergedTraits();return!a&&!c&&!u&&!d&&l===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,s,n,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:i,$fault:s.statusCode<500?"client":"server"},d=B.for(a);try{return{errorSchema:o?.(d,c)??d.getSchema(e),errorMetadata:u}}catch{n.message=n.message??n.Message??"UnknownError";let h=B.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw this.decorateServiceException(Object.assign(new g({name:c}),u),n)}throw this.decorateServiceException(Object.assign(new Error(c),u),n)}}decorateServiceException(e,r={}){if(this.queryCompat){let s=e.Message??r.Message,n=(0,GS.decorateServiceException)(e,r);s&&(n.message=s),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??s};let i=n.$metadata.requestId;return i&&(n.RequestId=i),n}return(0,GS.decorateServiceException)(e,r)}setQueryCompatError(e,r){let s=r.headers?.["x-amzn-query-error"];if(e!==void 0&&s!=null){let[n,i]=s.split(";"),o=Object.entries(e),a={Code:n,Type:i};Object.assign(e,a);for(let[c,u]of o)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(n=>L.of(n).getMergedTraits().awsQueryError?.[0]===r)}}}});var _l,m1=E(()=>{t1();se();ji();_l=class extends bl{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r,this.mixin=new zt(this.awsQueryCompatible)}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(e,r,s,n,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let o=(()=>{let g=s.headers["x-amzn-query-error"];return g&&this.awsQueryCompatible?g.split(";")[0]:gl(s,n)??"Unknown"})(),{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,n,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=L.of(a),d=n.message??n.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,h=new l(d),m={};for(let[g,w]of u.structIterator())n[g]!=null&&(m[g]=this.deserializer.readValue(w,n[g]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),this.mixin.decorateServiceException(Object.assign(h,c,{$fault:u.getMergedTraits().error,message:d},m),n)}}});var g1,y1,S1,b1=E(()=>{g1=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},y1=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},S1=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var et,Ns=E(()=>{et=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});function*Hi(t,e){if(t.isUnitSchema())return;let r=t.getSchema();for(let s=0;s<r[4].length;++s){let n=r[4][s],i=r[5][s],o=new L([i,0],n);!(n in e)&&!o.isIdempotencyToken()||(yield[n,o])}}function*E1(t,e,r){if(t.isUnitSchema())return;let s=t.getSchema(),n=Object.keys(e).filter(i=>i!=="__type").length;for(let i=0;i<s[4].length&&n!==0;++i){let o=s[4][i],a=s[5][i],c=new L([a,0],o),u=o;r&&(u=c.getMergedTraits()[r]??o),u in e&&(yield[o,c],n-=1)}}var ha=E(()=>{se()});var zi,QS=E(()=>{zi=class{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(s=>s!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}});function _1(t,e,r){if(r?.source){let s=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||s!==String(e)))return s.includes(".")?new ge(s,"bigDecimal"):BigInt(s)}return e}var w1=E(()=>{ft()});var v1,C1,wl,WS=E(()=>{v1=v(Y()),C1=v(Fe()),wl=(t,e)=>(0,v1.collectBody)(t,e).then(r=>(e?.utf8Encoder??C1.toUtf8)(r))});var ma,R1,Vi,ga=E(()=>{WS();ma=(t,e)=>wl(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),R1=async(t,e)=>{let r=await ma(t,e);return r.message=r.message??r.Message,r},Vi=(t,e)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),s=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},n=r(t.headers,"x-amzn-errortype");if(n!==void 0)return s(t.headers[n]);if(e&&typeof e=="object"){let i=r(e,"code");if(i&&e[i]!==void 0)return s(e[i]);if(e.__type!==void 0)return s(e.__type)}}});var T1,Gi,KS=E(()=>{wt();se();ft();T1=v(qe());Ns();ha();QS();w1();ga();Gi=class extends et{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,_1):await ma(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let s=r!==null&&typeof r=="object",n=L.of(e);if(s){if(n.isStructSchema()){let o=r,a=n.isUnionSchema(),c={},u,{jsonName:d}=this.settings;d&&(u={});let l;a&&(l=new zi(o,c));for(let[h,m]of E1(n,o,d?"jsonName":!1)){let g=h;d&&(g=m.getMergedTraits().jsonName??g,u[g]=h),a&&l.mark(g),o[g]!=null&&(c[h]=this._read(m,o[g]))}if(a)l.writeUnknown();else if(typeof o.__type=="string")for(let[h,m]of Object.entries(o)){let g=d?u[h]??h:h;g in c||(c[g]=m)}return c}if(Array.isArray(r)&&n.isListSchema()){let o=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(o,u));return a}if(n.isMapSchema()){let o=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._read(o,d));return a}}if(n.isBlobSchema()&&typeof r=="string")return(0,T1.fromBase64)(r);let i=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&i)return i==="application/json"||i.endsWith("+json")?dt.from(r):r;if(n.isTimestampSchema()&&r!=null)switch(kt(n,this.settings)){case 5:return gy(r);case 6:return yy(r);case 7:return Sy(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof ge)return r;let o=r;return o.type==="bigDecimal"&&"string"in o?new ge(o.string,o.type):new ge(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(n.isDocumentSchema())if(s){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ge?o[a]=c:o[a]=this._read(n,c);return o}else return structuredClone(r);return r}}});var x1,vl,A1=E(()=>{ft();x1="\u039D",vl=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof ge){let s=`${x1+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${x1+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,s]of this.values)e=e.replace(r,s);return e}}});var YS,Qi,XS=E(()=>{wt();se();ft();YS=v(qe());Ns();ha();A1();Qi=class extends et{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=L.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=L.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let s=new vl;return s.replaceInJson(JSON.stringify(this.buffer,s.createReplacer(),0))}return this.buffer}_write(e,r,s){let n=r!==null&&typeof r=="object",i=L.of(e);if(n){if(i.isStructSchema()){let o=r,a={},{jsonName:c}=this.settings,u;c&&(u={});for(let[d,l]of Hi(i,o)){let h=this._write(l,o[d],i);if(h!==void 0){let m=d;c&&(m=l.getMergedTraits().jsonName??d,u[d]=m),a[m]=h}}if(i.isUnionSchema()&&Object.keys(a).length===0){let{$unknown:d}=o;if(Array.isArray(d)){let[l,h]=d;a[l]=this._write(15,h)}}else if(typeof o.__type=="string")for(let[d,l]of Object.entries(o)){let h=c?u[d]??d:d;h in a||(a[h]=this._write(15,l))}return a}if(Array.isArray(r)&&i.isListSchema()){let o=i.getValueSchema(),a=[],c=!!i.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(o,u));return a}if(i.isMapSchema()){let o=i.getValueSchema(),a={},c=!!i.getMergedTraits().sparse;for(let[u,d]of Object.entries(r))(c||d!=null)&&(a[u]=this._write(o,d));return a}if(r instanceof Uint8Array&&(i.isBlobSchema()||i.isDocumentSchema()))return i===this.rootSchema?r:(this.serdeContext?.base64Encoder??YS.toBase64)(r);if(r instanceof Date&&(i.isTimestampSchema()||i.isDocumentSchema()))switch(kt(i,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return ra(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof ge&&(this.useReplacer=!0)}if(!(r===null&&s?.isStructSchema())){if(i.isStringSchema()){if(typeof r>"u"&&i.isIdempotencyToken())return(0,jt.v4)();let o=i.getMergedTraits().mediaType;return r!=null&&o&&(o==="application/json"||o.endsWith("+json"))?dt.from(r):r}if(typeof r=="number"&&i.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&i.isBlobSchema())return i===this.rootSchema?r:(this.serdeContext?.base64Encoder??YS.toBase64)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),i.isDocumentSchema())if(n){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ge?(this.useReplacer=!0,o[a]=c):o[a]=this._write(i,c);return o}else return structuredClone(r);return r}}}});var Ds,Cl=E(()=>{Ns();KS();XS();Ds=class extends et{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Qi(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Gi(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Ms,Rl=E(()=>{wt();se();ji();Cl();ga();Ms=class extends Ur{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:s,jsonCodec:n}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=n??new Ds({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s,this.mixin=new zt(this.awsQueryCompatible)}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(tr(e.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(e,r,s,n,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let o=Vi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,n,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),u=L.of(a),d=n.message??n.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,h=new l(d),m={};for(let[g,w]of u.structIterator())n[g]!=null&&(m[g]=this.codec.createDeserializer().readObject(w,n[g]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),this.mixin.decorateServiceException(Object.assign(h,c,{$fault:u.getMergedTraits().error,message:d},m),n)}}});var Tl,P1=E(()=>{Rl();Tl=class extends Ms{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:s,jsonCodec:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:s,jsonCodec:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var xl,I1=E(()=>{Rl();xl=class extends Ms{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:s,jsonCodec:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:s,jsonCodec:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Ls,k1=E(()=>{wt();se();ji();Cl();ga();Ls=class extends _n{serializer;deserializer;codec;mixin=new zt;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Ds(r),this.serializer=new Cn(this.codec.createSerializer(),r),this.deserializer=new vn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s),i=L.of(e.input);if(!n.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(n.headers["content-type"]=o)}return n.body==null&&n.headers["content-type"]===this.getDefaultContentType()&&(n.body="{}"),n}async deserializeResponse(e,r,s){let n=await super.deserializeResponse(e,r,s),i=L.of(e.output);for(let[o,a]of i.structIterator())a.getMemberTraits().httpPayload&&!(o in n)&&(n[o]=null);return n}async handleError(e,r,s,n,i){let o=Vi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,n,i),u=L.of(a),d=n.message??n.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,h=new l(d);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of u.structIterator()){let R=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[R])}throw this.mixin.decorateServiceException(Object.assign(h,c,{$fault:u.getMergedTraits().error,message:d},m),n)}getDefaultContentType(){return"application/json"}}});var O1,N1,D1=E(()=>{O1=v(Y()),N1=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,O1.expectUnion)(t)}});var L1=S((Wue,M1)=>{(()=>{"use strict";var t={d:(f,p)=>{for(var y in p)t.o(p,y)&&!t.o(f,y)&&Object.defineProperty(f,y,{enumerable:!0,get:p[y]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p),r:f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>rs,XMLParser:()=>Dq,XMLValidator:()=>jq});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function n(f,p){let y=[],C=p.exec(f);for(;C;){let b=[];b.startIndex=p.lastIndex-C[0].length;let _=C.length;for(let I=0;I<_;I++)b.push(C[I]);y.push(b),C=p.exec(f)}return y}let i=function(f){return s.exec(f)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(f,p){p=Object.assign({},o,p);let y=[],C=!1,b=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let _=0;_<f.length;_++)if(f[_]==="<"&&f[_+1]==="?"){if(_+=2,_=u(f,_),_.err)return _}else{if(f[_]!=="<"){if(c(f[_]))continue;return x("InvalidChar","char '"+f[_]+"' is not expected.",D(f,_))}{let I=_;if(_++,f[_]==="!"){_=d(f,_);continue}{let A=!1;f[_]==="/"&&(A=!0,_++);let O="";for(;_<f.length&&f[_]!==">"&&f[_]!==" "&&f[_]!=="	"&&f[_]!==`
`&&f[_]!=="\r";_++)O+=f[_];if(O=O.trim(),O[O.length-1]==="/"&&(O=O.substring(0,O.length-1),_--),!i(O)){let q;return q=O.trim().length===0?"Invalid space after '<'.":"Tag '"+O+"' is an invalid name.",x("InvalidTag",q,D(f,_))}let N=m(f,_);if(N===!1)return x("InvalidAttr","Attributes for '"+O+"' have open quote.",D(f,_));let H=N.value;if(_=N.index,H[H.length-1]==="/"){let q=_-H.length;H=H.substring(0,H.length-1);let ee=w(H,p);if(ee!==!0)return x(ee.err.code,ee.err.msg,D(f,q+ee.err.line));C=!0}else if(A){if(!N.tagClosed)return x("InvalidTag","Closing tag '"+O+"' doesn't have proper closing.",D(f,_));if(H.trim().length>0)return x("InvalidTag","Closing tag '"+O+"' can't have attributes or invalid starting.",D(f,I));if(y.length===0)return x("InvalidTag","Closing tag '"+O+"' has not been opened.",D(f,I));{let q=y.pop();if(O!==q.tagName){let ee=D(f,q.tagStartPos);return x("InvalidTag","Expected closing tag '"+q.tagName+"' (opened in line "+ee.line+", col "+ee.col+") instead of closing tag '"+O+"'.",D(f,I))}y.length==0&&(b=!0)}}else{let q=w(H,p);if(q!==!0)return x(q.err.code,q.err.msg,D(f,_-H.length+q.err.line));if(b===!0)return x("InvalidXml","Multiple possible root nodes found.",D(f,_));p.unpairedTags.indexOf(O)!==-1||y.push({tagName:O,tagStartPos:I}),C=!0}for(_++;_<f.length;_++)if(f[_]==="<"){if(f[_+1]==="!"){_++,_=d(f,_);continue}if(f[_+1]!=="?")break;if(_=u(f,++_),_.err)return _}else if(f[_]==="&"){let q=R(f,_);if(q==-1)return x("InvalidChar","char '&' is not expected.",D(f,_));_=q}else if(b===!0&&!c(f[_]))return x("InvalidXml","Extra text at the end",D(f,_));f[_]==="<"&&_--}}}return C?y.length==1?x("InvalidTag","Unclosed tag '"+y[0].tagName+"'.",D(f,y[0].tagStartPos)):!(y.length>0)||x("InvalidXml","Invalid '"+JSON.stringify(y.map((_=>_.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):x("InvalidXml","Start tag expected.",1)}function c(f){return f===" "||f==="	"||f===`
`||f==="\r"}function u(f,p){let y=p;for(;p<f.length;p++)if(!(f[p]!="?"&&f[p]!=" ")){let C=f.substr(y,p-y);if(p>5&&C==="xml")return x("InvalidXml","XML declaration allowed only at the start of the document.",D(f,p));if(f[p]=="?"&&f[p+1]==">"){p++;break}}return p}function d(f,p){if(f.length>p+5&&f[p+1]==="-"&&f[p+2]==="-"){for(p+=3;p<f.length;p++)if(f[p]==="-"&&f[p+1]==="-"&&f[p+2]===">"){p+=2;break}}else if(f.length>p+8&&f[p+1]==="D"&&f[p+2]==="O"&&f[p+3]==="C"&&f[p+4]==="T"&&f[p+5]==="Y"&&f[p+6]==="P"&&f[p+7]==="E"){let y=1;for(p+=8;p<f.length;p++)if(f[p]==="<")y++;else if(f[p]===">"&&(y--,y===0))break}else if(f.length>p+9&&f[p+1]==="["&&f[p+2]==="C"&&f[p+3]==="D"&&f[p+4]==="A"&&f[p+5]==="T"&&f[p+6]==="A"&&f[p+7]==="["){for(p+=8;p<f.length;p++)if(f[p]==="]"&&f[p+1]==="]"&&f[p+2]===">"){p+=2;break}}return p}let l='"',h="'";function m(f,p){let y="",C="",b=!1;for(;p<f.length;p++){if(f[p]===l||f[p]===h)C===""?C=f[p]:C!==f[p]||(C="");else if(f[p]===">"&&C===""){b=!0;break}y+=f[p]}return C===""&&{value:y,index:p,tagClosed:b}}let g=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(f,p){let y=n(f,g),C={};for(let b=0;b<y.length;b++){if(y[b][1].length===0)return x("InvalidAttr","Attribute '"+y[b][2]+"' has no space in starting.",M(y[b]));if(y[b][3]!==void 0&&y[b][4]===void 0)return x("InvalidAttr","Attribute '"+y[b][2]+"' is without value.",M(y[b]));if(y[b][3]===void 0&&!p.allowBooleanAttributes)return x("InvalidAttr","boolean attribute '"+y[b][2]+"' is not allowed.",M(y[b]));let _=y[b][2];if(!P(_))return x("InvalidAttr","Attribute '"+_+"' is an invalid name.",M(y[b]));if(C.hasOwnProperty(_))return x("InvalidAttr","Attribute '"+_+"' is repeated.",M(y[b]));C[_]=1}return!0}function R(f,p){if(f[++p]===";")return-1;if(f[p]==="#")return(function(C,b){let _=/\d/;for(C[b]==="x"&&(b++,_=/[\da-fA-F]/);b<C.length;b++){if(C[b]===";")return b;if(!C[b].match(_))break}return-1})(f,++p);let y=0;for(;p<f.length;p++,y++)if(!(f[p].match(/\w/)&&y<20)){if(f[p]===";")break;return-1}return p}function x(f,p,y){return{err:{code:f,msg:p,line:y.line||y,col:y.col}}}function P(f){return i(f)}function D(f,p){let y=f.substring(0,p).split(/\r?\n/);return{line:y.length,col:y[y.length-1].length+1}}function M(f){return f.startIndex+f[1].length}let j={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,p,y){return f},captureMetaData:!1},W;W=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Ee{constructor(p){this.tagname=p,this.child=[],this[":@"]={}}add(p,y){p==="__proto__"&&(p="#__proto__"),this.child.push({[p]:y})}addChild(p,y){p.tagname==="__proto__"&&(p.tagname="#__proto__"),p[":@"]&&Object.keys(p[":@"]).length>0?this.child.push({[p.tagname]:p.child,":@":p[":@"]}):this.child.push({[p.tagname]:p.child}),y!==void 0&&(this.child[this.child.length-1][W]={startIndex:y})}static getMetaDataSymbol(){return W}}function z(f,p){let y={};if(f[p+3]!=="O"||f[p+4]!=="C"||f[p+5]!=="T"||f[p+6]!=="Y"||f[p+7]!=="P"||f[p+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{p+=9;let C=1,b=!1,_=!1,I="";for(;p<f.length;p++)if(f[p]!=="<"||_)if(f[p]===">"){if(_?f[p-1]==="-"&&f[p-2]==="-"&&(_=!1,C--):C--,C===0)break}else f[p]==="["?b=!0:I+=f[p];else{if(b&&an(f,"!ENTITY",p)){let A,O;p+=7,[A,O,p]=de(f,p+1),O.indexOf("&")===-1&&(y[A]={regx:RegExp(`&${A};`,"g"),val:O})}else if(b&&an(f,"!ELEMENT",p)){p+=8;let{index:A}=pq(f,p+1);p=A}else if(b&&an(f,"!ATTLIST",p))p+=8;else if(b&&an(f,"!NOTATION",p)){p+=9;let{index:A}=$e(f,p+1);p=A}else{if(!an(f,"!--",p))throw new Error("Invalid DOCTYPE");_=!0}C++,I=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:y,i:p}}let X=(f,p)=>{for(;p<f.length&&/\s/.test(f[p]);)p++;return p};function de(f,p){p=X(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p])&&f[p]!=='"'&&f[p]!=="'";)y+=f[p],p++;if(kp(y),p=X(f,p),f.substring(p,p+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(f[p]==="%")throw new Error("Parameter entities are not supported");let C="";return[p,C]=St(f,p,"entity"),[y,C,--p]}function $e(f,p){p=X(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p]);)y+=f[p],p++;kp(y),p=X(f,p);let C=f.substring(p,p+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);p+=C.length,p=X(f,p);let b=null,_=null;if(C==="PUBLIC")[p,b]=St(f,p,"publicIdentifier"),f[p=X(f,p)]!=='"'&&f[p]!=="'"||([p,_]=St(f,p,"systemIdentifier"));else if(C==="SYSTEM"&&([p,_]=St(f,p,"systemIdentifier"),!_))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:y,publicIdentifier:b,systemIdentifier:_,index:--p}}function St(f,p,y){let C="",b=f[p];if(b!=='"'&&b!=="'")throw new Error(`Expected quoted string, found "${b}"`);for(p++;p<f.length&&f[p]!==b;)C+=f[p],p++;if(f[p]!==b)throw new Error(`Unterminated ${y} value`);return[++p,C]}function pq(f,p){p=X(f,p);let y="";for(;p<f.length&&!/\s/.test(f[p]);)y+=f[p],p++;if(!kp(y))throw new Error(`Invalid element name: "${y}"`);let C="";if(f[p=X(f,p)]==="E"&&an(f,"MPTY",p))p+=4;else if(f[p]==="A"&&an(f,"NY",p))p+=2;else{if(f[p]!=="(")throw new Error(`Invalid Element Expression, found "${f[p]}"`);for(p++;p<f.length&&f[p]!==")";)C+=f[p],p++;if(f[p]!==")")throw new Error("Unterminated content model")}return{elementName:y,contentModel:C.trim(),index:p}}function an(f,p,y){for(let C=0;C<p.length;C++)if(p[C]!==f[y+C+1])return!1;return!0}function kp(f){if(i(f))return f;throw new Error(`Invalid entity name ${f}`)}let hq=/^[-+]?0x[a-fA-F0-9]+$/,mq=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,gq={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},yq=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function a0(f){return typeof f=="function"?f:Array.isArray(f)?p=>{for(let y of f)if(typeof y=="string"&&p===y||y instanceof RegExp&&y.test(p))return!0}:()=>!1}class Sq{constructor(p){this.options=p,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(y,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(y,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=bq,this.parseXml=Cq,this.parseTextData=Eq,this.resolveNameSpace=_q,this.buildAttributesMap=vq,this.isItStopNode=Aq,this.replaceEntitiesValue=Tq,this.readStopNodeData=Pq,this.saveTextToParentTag=xq,this.addChild=Rq,this.ignoreAttributesFn=a0(this.options.ignoreAttributes)}}function bq(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let C=p[y];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:f[C]}}}function Eq(f,p,y,C,b,_,I){if(f!==void 0&&(this.options.trimValues&&!C&&(f=f.trim()),f.length>0)){I||(f=this.replaceEntitiesValue(f));let A=this.options.tagValueProcessor(p,f,y,b,_);return A==null?f:typeof A!=typeof f||A!==f?A:this.options.trimValues||f.trim()===f?c0(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function _q(f){if(this.options.removeNSPrefix){let p=f.split(":"),y=f.charAt(0)==="/"?"/":"";if(p[0]==="xmlns")return"";p.length===2&&(f=y+p[1])}return f}let wq=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function vq(f,p,y){if(this.options.ignoreAttributes!==!0&&typeof f=="string"){let C=n(f,wq),b=C.length,_={};for(let I=0;I<b;I++){let A=this.resolveNameSpace(C[I][1]);if(this.ignoreAttributesFn(A,p))continue;let O=C[I][4],N=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&(N=this.options.transformAttributeName(N)),N==="__proto__"&&(N="#__proto__"),O!==void 0){this.options.trimValues&&(O=O.trim()),O=this.replaceEntitiesValue(O);let H=this.options.attributeValueProcessor(A,O,p);_[N]=H==null?O:typeof H!=typeof O||H!==O?H:c0(O,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[N]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=_,I}return _}}let Cq=function(f){f=f.replace(/\r\n?/g,`
`);let p=new Ee("!xml"),y=p,C="",b="";for(let _=0;_<f.length;_++)if(f[_]==="<")if(f[_+1]==="/"){let I=cn(f,">",_,"Closing Tag is not closed."),A=f.substring(_+2,I).trim();if(this.options.removeNSPrefix){let H=A.indexOf(":");H!==-1&&(A=A.substr(H+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),y&&(C=this.saveTextToParentTag(C,y,b));let O=b.substring(b.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let N=0;O&&this.options.unpairedTags.indexOf(O)!==-1?(N=b.lastIndexOf(".",b.lastIndexOf(".")-1),this.tagsNodeStack.pop()):N=b.lastIndexOf("."),b=b.substring(0,N),y=this.tagsNodeStack.pop(),C="",_=I}else if(f[_+1]==="?"){let I=Op(f,_,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,y,b),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let A=new Ee(I.tagName);A.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(A[":@"]=this.buildAttributesMap(I.tagExp,b,I.tagName)),this.addChild(y,A,b,_)}_=I.closeIndex+1}else if(f.substr(_+1,3)==="!--"){let I=cn(f,"-->",_+4,"Comment is not closed.");if(this.options.commentPropName){let A=f.substring(_+4,I-2);C=this.saveTextToParentTag(C,y,b),y.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}_=I}else if(f.substr(_+1,2)==="!D"){let I=z(f,_);this.docTypeEntities=I.entities,_=I.i}else if(f.substr(_+1,2)==="!["){let I=cn(f,"]]>",_,"CDATA is not closed.")-2,A=f.substring(_+9,I);C=this.saveTextToParentTag(C,y,b);let O=this.parseTextData(A,y.tagname,b,!0,!1,!0,!0);O==null&&(O=""),this.options.cdataPropName?y.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):y.add(this.options.textNodeName,O),_=I+2}else{let I=Op(f,_,this.options.removeNSPrefix),A=I.tagName,O=I.rawTagName,N=I.tagExp,H=I.attrExpPresent,q=I.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),y&&C&&y.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,y,b,!1));let ee=y;ee&&this.options.unpairedTags.indexOf(ee.tagname)!==-1&&(y=this.tagsNodeStack.pop(),b=b.substring(0,b.lastIndexOf("."))),A!==p.tagname&&(b+=b?"."+A:A);let ae=_;if(this.isItStopNode(this.options.stopNodes,b,A)){let te="";if(N.length>0&&N.lastIndexOf("/")===N.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),b=b.substr(0,b.length-1),N=A):N=N.substr(0,N.length-1),_=I.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)_=I.closeIndex;else{let fr=this.readStopNodeData(f,O,q+1);if(!fr)throw new Error(`Unexpected end of ${O}`);_=fr.i,te=fr.tagContent}let Ie=new Ee(A);A!==N&&H&&(Ie[":@"]=this.buildAttributesMap(N,b,A)),te&&(te=this.parseTextData(te,A,b,!0,H,!0,!0)),b=b.substr(0,b.lastIndexOf(".")),Ie.add(this.options.textNodeName,te),this.addChild(y,Ie,b,ae)}else{if(N.length>0&&N.lastIndexOf("/")===N.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),b=b.substr(0,b.length-1),N=A):N=N.substr(0,N.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let te=new Ee(A);A!==N&&H&&(te[":@"]=this.buildAttributesMap(N,b,A)),this.addChild(y,te,b,ae),b=b.substr(0,b.lastIndexOf("."))}else{let te=new Ee(A);this.tagsNodeStack.push(y),A!==N&&H&&(te[":@"]=this.buildAttributesMap(N,b,A)),this.addChild(y,te,b,ae),y=te}C="",_=q}}else C+=f[_];return p.child};function Rq(f,p,y,C){this.options.captureMetaData||(C=void 0);let b=this.options.updateTag(p.tagname,y,p[":@"]);b===!1||(typeof b=="string"&&(p.tagname=b),f.addChild(p,C))}let Tq=function(f){if(this.options.processEntities){for(let p in this.docTypeEntities){let y=this.docTypeEntities[p];f=f.replace(y.regx,y.val)}for(let p in this.lastEntities){let y=this.lastEntities[p];f=f.replace(y.regex,y.val)}if(this.options.htmlEntities)for(let p in this.htmlEntities){let y=this.htmlEntities[p];f=f.replace(y.regex,y.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function xq(f,p,y,C){return f&&(C===void 0&&(C=p.child.length===0),(f=this.parseTextData(f,p.tagname,y,!1,!!p[":@"]&&Object.keys(p[":@"]).length!==0,C))!==void 0&&f!==""&&p.add(this.options.textNodeName,f),f=""),f}function Aq(f,p,y){let C="*."+y;for(let b in f){let _=f[b];if(C===_||p===_)return!0}return!1}function cn(f,p,y,C){let b=f.indexOf(p,y);if(b===-1)throw new Error(C);return b+p.length-1}function Op(f,p,y,C=">"){let b=(function(q,ee,ae=">"){let te,Ie="";for(let fr=ee;fr<q.length;fr++){let ss=q[fr];if(te)ss===te&&(te="");else if(ss==='"'||ss==="'")te=ss;else if(ss===ae[0]){if(!ae[1])return{data:Ie,index:fr};if(q[fr+1]===ae[1])return{data:Ie,index:fr}}else ss==="	"&&(ss=" ");Ie+=ss}})(f,p+1,C);if(!b)return;let _=b.data,I=b.index,A=_.search(/\s/),O=_,N=!0;A!==-1&&(O=_.substring(0,A),_=_.substring(A+1).trimStart());let H=O;if(y){let q=O.indexOf(":");q!==-1&&(O=O.substr(q+1),N=O!==b.data.substr(q+1))}return{tagName:O,tagExp:_,closeIndex:I,attrExpPresent:N,rawTagName:H}}function Pq(f,p,y){let C=y,b=1;for(;y<f.length;y++)if(f[y]==="<")if(f[y+1]==="/"){let _=cn(f,">",y,`${p} is not closed`);if(f.substring(y+2,_).trim()===p&&(b--,b===0))return{tagContent:f.substring(C,y),i:_};y=_}else if(f[y+1]==="?")y=cn(f,"?>",y+1,"StopNode is not closed.");else if(f.substr(y+1,3)==="!--")y=cn(f,"-->",y+3,"StopNode is not closed.");else if(f.substr(y+1,2)==="![")y=cn(f,"]]>",y,"StopNode is not closed.")-2;else{let _=Op(f,y,">");_&&((_&&_.tagName)===p&&_.tagExp[_.tagExp.length-1]!=="/"&&b++,y=_.closeIndex)}}function c0(f,p,y){if(p&&typeof f=="string"){let C=f.trim();return C==="true"||C!=="false"&&(function(b,_={}){if(_=Object.assign({},gq,_),!b||typeof b!="string")return b;let I=b.trim();if(_.skipLike!==void 0&&_.skipLike.test(I))return b;if(b==="0")return 0;if(_.hex&&hq.test(I))return(function(O){if(parseInt)return parseInt(O,16);if(Number.parseInt)return Number.parseInt(O,16);if(window&&window.parseInt)return window.parseInt(O,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(I);if(I.search(/.+[eE].+/)!==-1)return(function(O,N,H){if(!H.eNotation)return O;let q=N.match(yq);if(q){let ee=q[1]||"",ae=q[3].indexOf("e")===-1?"E":"e",te=q[2],Ie=ee?O[te.length+1]===ae:O[te.length]===ae;return te.length>1&&Ie?O:te.length!==1||!q[3].startsWith(`.${ae}`)&&q[3][0]!==ae?H.leadingZeros&&!Ie?(N=(q[1]||"")+q[3],Number(N)):O:Number(N)}return O})(b,I,_);{let O=mq.exec(I);if(O){let N=O[1]||"",H=O[2],q=((A=O[3])&&A.indexOf(".")!==-1&&((A=A.replace(/0+$/,""))==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substring(0,A.length-1))),A),ee=N?b[H.length+1]===".":b[H.length]===".";if(!_.leadingZeros&&(H.length>1||H.length===1&&!ee))return b;{let ae=Number(I),te=String(ae);if(ae===0||ae===-0)return ae;if(te.search(/[eE]/)!==-1)return _.eNotation?ae:b;if(I.indexOf(".")!==-1)return te==="0"||te===q||te===`${N}${q}`?ae:b;let Ie=H?q:I;return H?Ie===te||N+Ie===te?ae:b:Ie===te||Ie===N+te?ae:b}}return b}var A})(f,y)}return f!==void 0?f:""}let Np=Ee.getMetaDataSymbol();function Iq(f,p){return u0(f,p)}function u0(f,p,y){let C,b={};for(let _=0;_<f.length;_++){let I=f[_],A=kq(I),O="";if(O=y===void 0?A:y+"."+A,A===p.textNodeName)C===void 0?C=I[A]:C+=""+I[A];else{if(A===void 0)continue;if(I[A]){let N=u0(I[A],p,O),H=Nq(N,p);I[Np]!==void 0&&(N[Np]=I[Np]),I[":@"]?Oq(N,I[":@"],O,p):Object.keys(N).length!==1||N[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys(N).length===0&&(p.alwaysCreateTextNode?N[p.textNodeName]="":N=""):N=N[p.textNodeName],b[A]!==void 0&&b.hasOwnProperty(A)?(Array.isArray(b[A])||(b[A]=[b[A]]),b[A].push(N)):p.isArray(A,O,H)?b[A]=[N]:b[A]=N}}}return typeof C=="string"?C.length>0&&(b[p.textNodeName]=C):C!==void 0&&(b[p.textNodeName]=C),b}function kq(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let C=p[y];if(C!==":@")return C}}function Oq(f,p,y,C){if(p){let b=Object.keys(p),_=b.length;for(let I=0;I<_;I++){let A=b[I];C.isArray(A,y+"."+A,!0,!0)?f[A]=[p[A]]:f[A]=p[A]}}}function Nq(f,p){let{textNodeName:y}=p,C=Object.keys(f).length;return C===0||!(C!==1||!f[y]&&typeof f[y]!="boolean"&&f[y]!==0)}class Dq{constructor(p){this.externalEntities={},this.options=(function(y){return Object.assign({},j,y)})(p)}parse(p,y){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(y){y===!0&&(y={});let _=a(p,y);if(_!==!0)throw Error(`${_.err.msg}:${_.err.line}:${_.err.col}`)}let C=new Sq(this.options);C.addExternalEntities(this.externalEntities);let b=C.parseXml(p);return this.options.preserveOrder||b===void 0?b:Iq(b,this.options)}addEntity(p,y){if(y.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(y==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=y}static getMetaDataSymbol(){return Ee.getMetaDataSymbol()}}function Mq(f,p){let y="";return p.format&&p.indentBy.length>0&&(y=`
`),l0(f,p,"",y)}function l0(f,p,y,C){let b="",_=!1;for(let I=0;I<f.length;I++){let A=f[I],O=Lq(A);if(O===void 0)continue;let N="";if(N=y.length===0?O:`${y}.${O}`,O===p.textNodeName){let ae=A[O];Fq(N,p)||(ae=p.tagValueProcessor(O,ae),ae=f0(ae,p)),_&&(b+=C),b+=ae,_=!1;continue}if(O===p.cdataPropName){_&&(b+=C),b+=`<![CDATA[${A[O][0][p.textNodeName]}]]>`,_=!1;continue}if(O===p.commentPropName){b+=C+`<!--${A[O][0][p.textNodeName]}-->`,_=!0;continue}if(O[0]==="?"){let ae=d0(A[":@"],p),te=O==="?xml"?"":C,Ie=A[O][0][p.textNodeName];Ie=Ie.length!==0?" "+Ie:"",b+=te+`<${O}${Ie}${ae}?>`,_=!0;continue}let H=C;H!==""&&(H+=p.indentBy);let q=C+`<${O}${d0(A[":@"],p)}`,ee=l0(A[O],p,N,H);p.unpairedTags.indexOf(O)!==-1?p.suppressUnpairedNode?b+=q+">":b+=q+"/>":ee&&ee.length!==0||!p.suppressEmptyNode?ee&&ee.endsWith(">")?b+=q+`>${ee}${C}</${O}>`:(b+=q+">",ee&&C!==""&&(ee.includes("/>")||ee.includes("</"))?b+=C+p.indentBy+ee+C:b+=ee,b+=`</${O}>`):b+=q+"/>",_=!0}return b}function Lq(f){let p=Object.keys(f);for(let y=0;y<p.length;y++){let C=p[y];if(f.hasOwnProperty(C)&&C!==":@")return C}}function d0(f,p){let y="";if(f&&!p.ignoreAttributes)for(let C in f){if(!f.hasOwnProperty(C))continue;let b=p.attributeValueProcessor(C,f[C]);b=f0(b,p),b===!0&&p.suppressBooleanAttributes?y+=` ${C.substr(p.attributeNamePrefix.length)}`:y+=` ${C.substr(p.attributeNamePrefix.length)}="${b}"`}return y}function Fq(f,p){let y=(f=f.substr(0,f.length-p.textNodeName.length-1)).substr(f.lastIndexOf(".")+1);for(let C in p.stopNodes)if(p.stopNodes[C]===f||p.stopNodes[C]==="*."+y)return!0;return!1}function f0(f,p){if(f&&f.length>0&&p.processEntities)for(let y=0;y<p.entities.length;y++){let C=p.entities[y];f=f.replace(C.regex,C.val)}return f}let qq={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function rs(f){this.options=Object.assign({},qq,f),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=a0(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=$q),this.processTextOrObjNode=Bq,this.options.format?(this.indentate=Uq,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function Bq(f,p,y,C){let b=this.j2x(f,y+1,C.concat(p));return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],p,b.attrStr,y):this.buildObjectNode(b.val,p,b.attrStr,y)}function Uq(f){return this.options.indentBy.repeat(f)}function $q(f){return!(!f.startsWith(this.options.attributeNamePrefix)||f===this.options.textNodeName)&&f.substr(this.attrPrefixLen)}rs.prototype.build=function(f){return this.options.preserveOrder?Mq(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0,[]).val)},rs.prototype.j2x=function(f,p,y){let C="",b="",_=y.join(".");for(let I in f)if(Object.prototype.hasOwnProperty.call(f,I))if(f[I]===void 0)this.isAttribute(I)&&(b+="");else if(f[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?b+="":I[0]==="?"?b+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:b+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(f[I]instanceof Date)b+=this.buildTextValNode(f[I],I,"",p);else if(typeof f[I]!="object"){let A=this.isAttribute(I);if(A&&!this.ignoreAttributesFn(A,_))C+=this.buildAttrPairStr(A,""+f[I]);else if(!A)if(I===this.options.textNodeName){let O=this.options.tagValueProcessor(I,""+f[I]);b+=this.replaceEntitiesValue(O)}else b+=this.buildTextValNode(f[I],I,"",p)}else if(Array.isArray(f[I])){let A=f[I].length,O="",N="";for(let H=0;H<A;H++){let q=f[I][H];if(q!==void 0)if(q===null)I[0]==="?"?b+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:b+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(typeof q=="object")if(this.options.oneListGroup){let ee=this.j2x(q,p+1,y.concat(I));O+=ee.val,this.options.attributesGroupName&&q.hasOwnProperty(this.options.attributesGroupName)&&(N+=ee.attrStr)}else O+=this.processTextOrObjNode(q,I,p,y);else if(this.options.oneListGroup){let ee=this.options.tagValueProcessor(I,q);ee=this.replaceEntitiesValue(ee),O+=ee}else O+=this.buildTextValNode(q,I,"",p)}this.options.oneListGroup&&(O=this.buildObjectNode(O,I,N,p)),b+=O}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let A=Object.keys(f[I]),O=A.length;for(let N=0;N<O;N++)C+=this.buildAttrPairStr(A[N],""+f[I][A[N]])}else b+=this.processTextOrObjNode(f[I],I,p,y);return{attrStr:C,val:b}},rs.prototype.buildAttrPairStr=function(f,p){return p=this.options.attributeValueProcessor(f,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+f:" "+f+'="'+p+'"'},rs.prototype.buildObjectNode=function(f,p,y,C){if(f==="")return p[0]==="?"?this.indentate(C)+"<"+p+y+"?"+this.tagEndChar:this.indentate(C)+"<"+p+y+this.closeTag(p)+this.tagEndChar;{let b="</"+p+this.tagEndChar,_="";return p[0]==="?"&&(_="?",b=""),!y&&y!==""||f.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&_.length===0?this.indentate(C)+`<!--${f}-->`+this.newLine:this.indentate(C)+"<"+p+y+_+this.tagEndChar+f+this.indentate(C)+b:this.indentate(C)+"<"+p+y+_+">"+f+b}},rs.prototype.closeTag=function(f){let p="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${f}`,p},rs.prototype.buildTextValNode=function(f,p,y,C){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(C)+`<!--${f}-->`+this.newLine;if(p[0]==="?")return this.indentate(C)+"<"+p+y+"?"+this.tagEndChar;{let b=this.options.tagValueProcessor(p,f);return b=this.replaceEntitiesValue(b),b===""?this.indentate(C)+"<"+p+y+this.closeTag(p)+this.tagEndChar:this.indentate(C)+"<"+p+y+">"+b+"</"+p+this.tagEndChar}},rs.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){let y=this.options.entities[p];f=f.replace(y.regex,y.val)}return f};let jq={validate:a};M1.exports=e})()});var F1=S(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});ZS.parseXML=N8;var O8=L1(),JS=new O8.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});JS.addEntity("#xD","\r");JS.addEntity("#10",`
`);function N8(t){return JS.parse(t,!0)}});var Il=S(Pl=>{"use strict";var D8=F1();function M8(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function L8(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Al=class{value;constructor(e){this.value=e}toString(){return L8(""+this.value)}},eb=class t{name;children;attributes={};static of(e,r,s){let n=new t(e);return r!==void 0&&n.addChildNode(new Al(r)),s!==void 0&&n.withName(s),n}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,s=r){if(e[r]!=null){let n=t.of(r,e[r]).withName(s);this.c(n)}}l(e,r,s,n){e[r]!=null&&n().map(o=>{o.withName(s),this.c(o)})}lc(e,r,s,n){if(e[r]!=null){let i=n(),o=new t(s);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let e=!!this.children.length,r=`<${this.name}`,s=this.attributes;for(let n of Object.keys(s)){let i=s[n];i!=null&&(r+=` ${n}="${M8(""+i)}"`)}return r+=e?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Pl,"parseXML",{enumerable:!0,get:function(){return D8.parseXML}});Pl.XmlNode=eb;Pl.XmlText=Al});var q1,B1,U1,Fs,kl=E(()=>{q1=v(Il());wt();se();B1=v(Y()),U1=v(Fe());Ns();QS();Fs=class extends et{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new wn(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,s){let n=L.of(e),i=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(i).find(u=>!!u.getMemberTraits().eventPayload)){let u={},d=Object.keys(i)[0];return i[d].isBlobSchema()?u[d]=r:u[d]=this.read(i[d],r),u}let a=(this.serdeContext?.utf8Encoder??U1.toUtf8)(r),c=this.parseXml(a);return this.readSchema(e,s?c[s]:c)}readSchema(e,r){let s=L.of(e);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let i=!!n.sparse,o=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),u=[],d=c.getMergedTraits().xmlName??"member",l=o?r:(r[0]??r)[d],h=Array.isArray(l)?l:[l];for(let m of h)(m!=null||i)&&u.push(this.readSchema(c,m));return u}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),u=s.getValueSchema(),d;o?d=Array.isArray(r)?r:[r]:d=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",h=u.getMergedTraits().xmlName??"value";for(let m of d){let g=m[l],w=m[h];(w!=null||i)&&(a[g]=this.readSchema(u,w))}return a}if(s.isStructSchema()){let c=s.isUnionSchema(),u;c&&(u=new zi(r,a));for(let[d,l]of s.structIterator()){let h=l.getMergedTraits(),m=h.httpPayload?h.xmlName??l.getName():l.getMemberTraits().xmlName??d;c&&u.mark(m),r[m]!=null&&(a[d]=this.readSchema(l,r[m]))}return c&&u.writeUnknown(),a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(e){if(e.length){let r;try{r=(0,q1.parseXML)(e)}catch(o){throw o&&typeof o=="object"&&Object.defineProperty(o,"$responseBodyText",{value:e}),o}let s="#text",n=Object.keys(r)[0],i=r[n];return i[s]&&(i[n]=i[s],delete i[s]),(0,B1.getValueFromTextNode)(i)}return{}}}});var $1,j1,Ol,H1=E(()=>{wt();se();ft();$1=v(Y()),j1=v(qe());Ns();ha();Ol=class extends et{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,s=""){this.buffer===void 0&&(this.buffer="");let n=L.of(e);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??j1.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,jt.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof ge?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),kt(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,$1.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else if(n.isDocumentSchema())Array.isArray(r)?this.write(79,r,s):r instanceof Date?this.write(4,r,s):r instanceof Uint8Array?this.write(21,r,s):r&&typeof r=="object"?this.write(143,r,s):(this.writeKey(s),this.writeValue(String(r)));else if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let i=n.getValueSchema(),o=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",i.getMergedTraits().xmlName),d=o?`${s}${a}`:`${s}${u}.${a}`;this.write(i,c,d),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let i=n.getKeySchema(),o=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[u,d]of Object.entries(r)){if(d==null)continue;let l=this.getKey("key",i.getMergedTraits().xmlName),h=a?`${s}${c}.${l}`:`${s}entry.${c}.${l}`,m=this.getKey("value",o.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(i,u,h),this.write(o,d,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object"){let i=!1;for(let[o,a]of Hi(n,r)){if(r[o]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(o,a.getMergedTraits().xmlName),u=`${s}${c}`;this.write(a,r[o],u),i=!0}if(!i&&n.isUnionSchema()){let{$unknown:o}=r;if(Array.isArray(o)){let[a,c]=o,u=`${s}${a}`;this.write(15,c,u)}}}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let s=r??e;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${gr(e)}=`}writeValue(e){this.buffer+=gr(e)}}});var qs,tb=E(()=>{wt();se();ji();kl();H1();qs=class extends Ur{options;serializer;deserializer;mixin=new zt;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Ol(r),this.deserializer=new Fs(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(tr(e.input)==="unit"||!n.body)&&(n.body="");let i=e.name.split("#")[1]??e.name;return n.body=`Action=${i}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(e,r,s){let n=this.deserializer,i=L.of(e.output),o={};if(s.statusCode>=300){let l=await $t(s.body,r);l.byteLength>0&&Object.assign(o,await n.read(15,l)),await this.handleError(e,r,s,o,this.deserializeMetadata(s))}for(let l in s.headers){let h=s.headers[l];delete s.headers[l],s.headers[l.toLowerCase()]=h}let a=e.name.split("#")[1]??e.name,c=i.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await $t(s.body,r);return u.byteLength>0&&Object.assign(o,await n.read(i,u,c)),{$metadata:this.deserializeMetadata(s),...o}}useNestedResult(){return!0}async handleError(e,r,s,n,i){let o=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,a,i,this.mixin.findQueryCompatibleError),l=L.of(u),h=B.for(u[1]).getErrorCtor(u)??Error,m=new h(c),g={Type:a.Error.Type,Code:a.Error.Code,Error:a.Error};for(let[w,R]of l.structIterator()){let x=R.getMergedTraits().xmlName??w,P=a[x]??n[x];g[w]=this.deserializer.readSchema(R,P)}throw this.mixin.decorateServiceException(Object.assign(m,d,{$fault:l.getMergedTraits().error,message:c},g),n)}loadQueryErrorCode(e,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Nl,z1=E(()=>{tb();Nl=class extends qs{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var V1,G1,rb,Q1,Dl,sb=E(()=>{V1=v(Il()),G1=v(Y());WS();rb=(t,e)=>wl(t,e).then(r=>{if(r.length){let s;try{s=(0,V1.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",i=Object.keys(s)[0],o=s[i];return o[n]&&(o[i]=o[n],delete o[n]),(0,G1.getValueFromTextNode)(o)}return{}}),Q1=async(t,e)=>{let r=await rb(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Dl=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var mt,nb,Ml,Wi,ib=E(()=>{mt=v(Il());wt();se();ft();nb=v(Y()),Ml=v(qe());Ns();ha();Wi=class extends et{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let s=L.of(e);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Ml.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,s){let n=e.getMergedTraits(),i=e.isMemberSchema()&&!n.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():n.xmlName??e.getName();if(!i||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let o=mt.XmlNode.of(i),[a,c]=this.getXmlnsAttribute(e,s);for(let[d,l]of Hi(e,r)){let h=r[d];if(h!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){o.addAttribute(l.getMergedTraits().xmlName??d,this.writeSimple(l,h));continue}if(l.isListSchema())this.writeList(l,h,o,c);else if(l.isMapSchema())this.writeMap(l,h,o,c);else if(l.isStructSchema())o.addChildNode(this.writeStruct(l,h,c));else{let m=mt.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,h,m,c),o.addChildNode(m)}}}let{$unknown:u}=r;if(u&&e.isUnionSchema()&&Array.isArray(u)&&Object.keys(r).length===1){let[d,l]=u,h=mt.XmlNode.of(d);if(typeof l!="string")if(r instanceof mt.XmlNode||r instanceof mt.XmlText)o.addChildNode(r);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,l,h,c),o.addChildNode(h)}return c&&o.addAttribute(a,c),o}writeList(e,r,s,n){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let i=e.getMergedTraits(),o=e.getValueSchema(),a=o.getMergedTraits(),c=!!a.sparse,u=!!i.xmlFlattened,[d,l]=this.getXmlnsAttribute(e,n),h=(m,g)=>{if(o.isListSchema())this.writeList(o,Array.isArray(g)?g:[g],m,l);else if(o.isMapSchema())this.writeMap(o,g,m,l);else if(o.isStructSchema()){let w=this.writeStruct(o,g,l);m.addChildNode(w.withName(u?i.xmlName??e.getMemberName():a.xmlName??"member"))}else{let w=mt.XmlNode.of(u?i.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(o,g,w,l),m.addChildNode(w)}};if(u)for(let m of r)(c||m!=null)&&h(s,m);else{let m=mt.XmlNode.of(i.xmlName??e.getMemberName());l&&m.addAttribute(d,l);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(e,r,s,n,i=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let o=e.getMergedTraits(),a=e.getKeySchema(),u=a.getMergedTraits().xmlName??"key",d=e.getValueSchema(),l=d.getMergedTraits(),h=l.xmlName??"value",m=!!l.sparse,g=!!o.xmlFlattened,[w,R]=this.getXmlnsAttribute(e,n),x=(P,D,M)=>{let j=mt.XmlNode.of(u,D),[W,Ee]=this.getXmlnsAttribute(a,R);Ee&&j.addAttribute(W,Ee),P.addChildNode(j);let z=mt.XmlNode.of(h);d.isListSchema()?this.writeList(d,M,z,R):d.isMapSchema()?this.writeMap(d,M,z,R,!0):d.isStructSchema()?z=this.writeStruct(d,M,R):this.writeSimpleInto(d,M,z,R),P.addChildNode(z)};if(g){for(let[P,D]of Object.entries(r))if(m||D!=null){let M=mt.XmlNode.of(o.xmlName??e.getMemberName());x(M,P,D),s.addChildNode(M)}}else{let P;i||(P=mt.XmlNode.of(o.xmlName??e.getMemberName()),R&&P.addAttribute(w,R),s.addChildNode(P));for(let[D,M]of Object.entries(r))if(m||M!=null){let j=mt.XmlNode.of("entry");x(j,D,M),(i?s:P).addChildNode(j)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=L.of(e),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??Ml.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(kt(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,nb.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,nb.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof ge?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,jt.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(e,r,s,n){let i=this.writeSimple(e,r),o=L.of(e),a=new mt.XmlText(i),[c,u]=this.getXmlnsAttribute(o,n);u&&s.addAttribute(c,u),s.addChildNode(a)}getXmlnsAttribute(e,r){let s=e.getMergedTraits(),[n,i]=s.xmlNamespace??[];return i&&i!==r?[n?`xmlns:${n}`:"xmlns",i]:[void 0,void 0]}}});var Ki,ob=E(()=>{Ns();kl();ib();Ki=class extends et{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Wi(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Fs(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Ll,W1=E(()=>{wt();se();ji();sb();ob();Ll=class extends _n{codec;serializer;deserializer;mixin=new zt;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new Ki(r),this.serializer=new Cn(this.codec.createSerializer(),r),this.deserializer=new vn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,s){let n=await super.serializeRequest(e,r,s),i=L.of(e.input);if(!n.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(n.headers["content-type"]=o)}return typeof n.body=="string"&&n.headers["content-type"]===this.getDefaultContentType()&&!n.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(i)&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(e,r,s){return super.deserializeResponse(e,r,s)}async handleError(e,r,s,n,i){let o=Dl(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,s,n,i),u=L.of(a),d=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=B.for(a[1]).getErrorCtor(a)??Error,h=new l(d);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of u.structIterator()){let R=w.getMergedTraits().xmlName??g,x=n.Error?.[R]??n[R];m[g]=this.codec.createDeserializer().readSchema(w,x)}throw this.mixin.decorateServiceException(Object.assign(h,c,{$fault:u.getMergedTraits().error,message:d},m),n)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(let[,r]of e.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}});var ab={};ot(ab,{AwsEc2QueryProtocol:()=>Nl,AwsJson1_0Protocol:()=>Tl,AwsJson1_1Protocol:()=>xl,AwsJsonRpcProtocol:()=>Ms,AwsQueryProtocol:()=>qs,AwsRestJsonProtocol:()=>Ls,AwsRestXmlProtocol:()=>Ll,AwsSmithyRpcV2CborProtocol:()=>_l,JsonCodec:()=>Ds,JsonShapeDeserializer:()=>Gi,JsonShapeSerializer:()=>Qi,XmlCodec:()=>Ki,XmlShapeDeserializer:()=>Fs,XmlShapeSerializer:()=>Wi,_toBool:()=>y1,_toNum:()=>S1,_toStr:()=>g1,awsExpectUnion:()=>N1,loadRestJsonErrorCode:()=>Vi,loadRestXmlErrorCode:()=>Dl,parseJsonBody:()=>ma,parseJsonErrorBody:()=>R1,parseXmlBody:()=>rb,parseXmlErrorBody:()=>Q1});var In=E(()=>{m1();b1();P1();I1();Rl();k1();Cl();KS();XS();D1();ga();z1();tb();W1();ob();kl();ib();sb()});var Bs={};ot(Bs,{AWSSDKSigV4Signer:()=>eS,AwsEc2QueryProtocol:()=>Nl,AwsJson1_0Protocol:()=>Tl,AwsJson1_1Protocol:()=>xl,AwsJsonRpcProtocol:()=>Ms,AwsQueryProtocol:()=>qs,AwsRestJsonProtocol:()=>Ls,AwsRestXmlProtocol:()=>Ll,AwsSdkSigV4ASigner:()=>ua,AwsSdkSigV4Signer:()=>Je,AwsSmithyRpcV2CborProtocol:()=>_l,JsonCodec:()=>Ds,JsonShapeDeserializer:()=>Gi,JsonShapeSerializer:()=>Qi,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ts,NODE_SIGV4A_CONFIG_OPTIONS:()=>fA,XmlCodec:()=>Ki,XmlShapeDeserializer:()=>Fs,XmlShapeSerializer:()=>Wi,_toBool:()=>y1,_toNum:()=>S1,_toStr:()=>g1,awsExpectUnion:()=>N1,emitWarningIfUnsupportedVersion:()=>Cs,getBearerTokenEnvKey:()=>sl,loadRestJsonErrorCode:()=>Vi,loadRestXmlErrorCode:()=>Dl,parseJsonBody:()=>ma,parseJsonErrorBody:()=>R1,parseXmlBody:()=>rb,parseXmlErrorBody:()=>Q1,resolveAWSSDKSigV4Config:()=>qA,resolveAwsSdkSigV4AConfig:()=>dA,resolveAwsSdkSigV4Config:()=>zr,setCredentialFeature:()=>Rs,setFeature:()=>Kx,setTokenFeature:()=>Xx,state:()=>rl,validateSigningProperties:()=>qi});var He=E(()=>{Ht();bS();In()});var kn=S(Yi=>{"use strict";var F8=(ht(),J(Mi)),q8=Tn(),B8=ue(),Er=(He(),J(Bs)),J1=void 0;function U8(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function $8(t){let e=F8.normalizeProvider(t.userAgentAppId??J1),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await e();if(!U8(s)){let n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var j8=/\d{12}\.ddb/;async function H8(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Er.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Er.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):Er.setFeature(t,"RETRY_MODE_STANDARD","E"):Er.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let i=t.endpointV2;switch(String(i?.url?.hostname).match(j8)&&Er.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Er.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Er.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Er.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let i=n;i.accountId&&Er.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))Er.setFeature(t,o,a)}}var K1="user-agent",cb="x-amz-user-agent",Y1=" ",ub="/",z8=/[^!$%&'*+\-.^_`|~\w]/g,V8=/[^!$%&'*+\-.^_`|~\w#]/g,X1="-",G8=1024;function Q8(t){let e="";for(let r in t){let s=t[r];if(e.length+s.length+1<=G8){e.length?e+=","+s:e+=s;continue}break}return e}var Z1=t=>(e,r)=>async s=>{let{request:n}=s;if(!B8.HttpRequest.isInstance(n))return e(s);let{headers:i}=n,o=r?.userAgent?.map(Fl)||[],a=(await t.defaultUserAgentProvider()).map(Fl);await H8(r,t,s);let c=r;a.push(`m/${Q8(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Fl)||[],d=await t.userAgentAppId();d&&a.push(Fl(["app",`${d}`]));let l=q8.getUserAgentPrefix(),h=(l?[l]:[]).concat([...a,...o,...u]).join(Y1),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...u].join(Y1);return t.runtime!=="browser"?(m&&(i[cb]=i[cb]?`${i[K1]} ${m}`:m),i[K1]=h):i[cb]=h,e({...s,request:n})},Fl=t=>{let e=t[0].split(ub).map(o=>o.replace(z8,X1)).join(ub),r=t[1]?.replace(V8,X1),s=e.indexOf(ub),n=e.substring(0,s),i=e.substring(s+1);return n==="api"&&(i=i.toLowerCase()),[n,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},eP={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},W8=t=>({applyToStack:e=>{e.add(Z1(t),eP)}});Yi.DEFAULT_UA_APP_ID=J1;Yi.getUserAgentMiddlewareOptions=eP;Yi.getUserAgentPlugin=W8;Yi.resolveUserAgentConfig=$8;Yi.userAgentMiddleware=Z1});var tP=S(Xi=>{"use strict";var K8=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},Y8=(t,e,r)=>{if(!(e in t))return;let s=parseInt(t[e],10);if(Number.isNaN(s))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return s};Xi.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Xi.SelectorType||(Xi.SelectorType={}));Xi.booleanSelector=K8;Xi.numberSelector=Y8});var vt=S(ze=>{"use strict";var Us=tP(),ql=ut(),X8=vs(),nP="AWS_USE_DUALSTACK_ENDPOINT",iP="use_dualstack_endpoint",J8=!1,Z8={environmentVariableSelector:t=>Us.booleanSelector(t,nP,Us.SelectorType.ENV),configFileSelector:t=>Us.booleanSelector(t,iP,Us.SelectorType.CONFIG),default:!1},oP="AWS_USE_FIPS_ENDPOINT",aP="use_fips_endpoint",e5=!1,t5={environmentVariableSelector:t=>Us.booleanSelector(t,oP,Us.SelectorType.ENV),configFileSelector:t=>Us.booleanSelector(t,aP,Us.SelectorType.CONFIG),default:!1},r5=t=>{let{tls:e,endpoint:r,urlParser:s,useDualstackEndpoint:n}=t;return Object.assign(t,{tls:e??!0,endpoint:ql.normalizeProvider(typeof r=="string"?s(r):r),isCustomEndpoint:!0,useDualstackEndpoint:ql.normalizeProvider(n??!1)})},s5=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let n=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:o}=await t.regionInfoProvider(r,{useDualstackEndpoint:n,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${o}`)},n5=t=>{let e=ql.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:s,urlParser:n,tls:i}=t;return Object.assign(t,{tls:i??!0,endpoint:r?ql.normalizeProvider(typeof r=="string"?n(r):r):()=>s5({...t,useDualstackEndpoint:e,useFipsEndpoint:s}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},cP="AWS_REGION",uP="region",i5={environmentVariableSelector:t=>t[cP],configFileSelector:t=>t[uP],default:()=>{throw new Error("Region is missing")}},o5={preferredFile:"credentials"},rP=new Set,a5=(t,e=X8.isValidHostLabel)=>{if(!rP.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else rP.add(t)},lP=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),c5=t=>lP(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,u5=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let s=typeof e=="function"?await e():e,n=c5(s);return a5(n),n},useFipsEndpoint:async()=>{let s=typeof e=="string"?e:await e();return lP(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},sP=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:s})=>e===s.includes("fips")&&r===s.includes("dualstack"))?.hostname,l5=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),d5=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",f5=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:s})=>{if(e)return e;if(s){let n=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(n);if(i)return i[0].slice(1,-1)}},p5=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:s,regionHash:n,partitionHash:i})=>{let o=d5(t,{partitionHash:i}),a=t in n?t:i[o]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=sP(n[a]?.variants,c),d=sP(i[o]?.variants,c),l=l5(a,{regionHostname:u,partitionHostname:d});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let h=f5(l,{signingRegion:n[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:e});return{partition:o,signingService:s,hostname:l,...h&&{signingRegion:h},...n[a]?.signingService&&{signingService:n[a].signingService}}};ze.CONFIG_USE_DUALSTACK_ENDPOINT=iP;ze.CONFIG_USE_FIPS_ENDPOINT=aP;ze.DEFAULT_USE_DUALSTACK_ENDPOINT=J8;ze.DEFAULT_USE_FIPS_ENDPOINT=e5;ze.ENV_USE_DUALSTACK_ENDPOINT=nP;ze.ENV_USE_FIPS_ENDPOINT=oP;ze.NODE_REGION_CONFIG_FILE_OPTIONS=o5;ze.NODE_REGION_CONFIG_OPTIONS=i5;ze.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Z8;ze.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=t5;ze.REGION_ENV_NAME=cP;ze.REGION_INI_NAME=uP;ze.getRegionInfo=p5;ze.resolveCustomEndpointsConfig=r5;ze.resolveEndpointsConfig=n5;ze.resolveRegionConfig=u5});var Ji=S(Bl=>{"use strict";var h5=ue(),dP="content-length";function fP(t){return e=>async r=>{let s=r.request;if(h5.HttpRequest.isInstance(s)){let{body:n,headers:i}=s;if(n&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(dP)===-1)try{let o=t(n);s.headers={...s.headers,[dP]:String(o)}}catch{}}return e({...r,request:s})}}var pP={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},m5=t=>({applyToStack:e=>{e.add(fP(t.bodyLengthChecker),pP)}});Bl.contentLengthMiddleware=fP;Bl.contentLengthMiddlewareOptions=pP;Bl.getContentLengthPlugin=m5});var db=S(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.getHomeDir=void 0;var g5=require("os"),y5=require("path"),lb={},S5=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",b5=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:s=`C:${y5.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${s}${r}`;let n=S5();return lb[n]||(lb[n]=(0,g5.homedir)()),lb[n]};Ul.getHomeDir=b5});var fb=S($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.getSSOTokenFilepath=void 0;var E5=require("crypto"),_5=require("path"),w5=db(),v5=t=>{let r=(0,E5.createHash)("sha1").update(t).digest("hex");return(0,_5.join)((0,w5.getHomeDir)(),".aws","sso","cache",`${r}.json`)};$l.getSSOTokenFilepath=v5});var hP=S($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.getSSOTokenFromFile=$s.tokenIntercept=void 0;var C5=require("fs/promises"),R5=fb();$s.tokenIntercept={};var T5=async t=>{if($s.tokenIntercept[t])return $s.tokenIntercept[t];let e=(0,R5.getSSOTokenFilepath)(t),r=await(0,C5.readFile)(e,"utf8");return JSON.parse(r)};$s.getSSOTokenFromFile=T5});var mP=S(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.readFile=Ot.fileIntercept=Ot.filePromises=void 0;var x5=require("node:fs/promises");Ot.filePromises={};Ot.fileIntercept={};var A5=(t,e)=>Ot.fileIntercept[t]!==void 0?Ot.fileIntercept[t]:((!Ot.filePromises[t]||e?.ignoreCache)&&(Ot.filePromises[t]=(0,x5.readFile)(t,"utf8")),Ot.filePromises[t]);Ot.readFile=A5});var _r=S(gt=>{"use strict";var ya=db(),gP=fb(),pb=hP(),jl=require("path"),Hl=ys(),Zi=mP(),SP="AWS_PROFILE",bP="default",P5=t=>t.profile||process.env[SP]||bP,On=".",I5=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(On);return r===-1?!1:Object.values(Hl.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,s])=>{let n=r.indexOf(On),i=r.substring(0,n)===Hl.IniSectionType.PROFILE?r.substring(n+1):r;return e[i]=s,e},{...t.default&&{default:t.default}}),k5="AWS_CONFIG_FILE",EP=()=>process.env[k5]||jl.join(ya.getHomeDir(),".aws","config"),O5="AWS_SHARED_CREDENTIALS_FILE",N5=()=>process.env[O5]||jl.join(ya.getHomeDir(),".aws","credentials"),D5=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,M5=["__proto__","profile __proto__"],hb=t=>{let e={},r,s;for(let n of t.split(/\r?\n/)){let i=n.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,s=void 0;let a=i.substring(1,i.length-1),c=D5.exec(a);if(c){let[,u,,d]=c;Object.values(Hl.IniSectionType).includes(u)&&(r=[u,d].join(On))}else r=a;if(M5.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")s=c;else{s&&n.trimStart()===n&&(s=void 0),e[r]=e[r]||{};let d=s?[s,c].join(On):c;e[r][d]=u}}}}return e},yP=()=>({}),_P=async(t={})=>{let{filepath:e=N5(),configFilepath:r=EP()}=t,s=ya.getHomeDir(),n="~/",i=e;e.startsWith(n)&&(i=jl.join(s,e.slice(2)));let o=r;r.startsWith(n)&&(o=jl.join(s,r.slice(2)));let a=await Promise.all([Zi.readFile(o,{ignoreCache:t.ignoreCache}).then(hb).then(I5).catch(yP),Zi.readFile(i,{ignoreCache:t.ignoreCache}).then(hb).catch(yP)]);return{configFile:a[0],credentialsFile:a[1]}},L5=t=>Object.entries(t).filter(([e])=>e.startsWith(Hl.IniSectionType.SSO_SESSION+On)).reduce((e,[r,s])=>({...e,[r.substring(r.indexOf(On)+1)]:s}),{}),F5=()=>({}),q5=async(t={})=>Zi.readFile(t.configFilepath??EP()).then(hb).then(L5).catch(F5),B5=(...t)=>{let e={};for(let r of t)for(let[s,n]of Object.entries(r))e[s]!==void 0?Object.assign(e[s],n):e[s]=n;return e},U5=async t=>{let e=await _P(t);return B5(e.configFile,e.credentialsFile)},$5={getFileRecord(){return Zi.fileIntercept},interceptFile(t,e){Zi.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return pb.tokenIntercept},interceptToken(t,e){pb.tokenIntercept[t]=e}};Object.defineProperty(gt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return pb.getSSOTokenFromFile}});Object.defineProperty(gt,"readFile",{enumerable:!0,get:function(){return Zi.readFile}});gt.CONFIG_PREFIX_SEPARATOR=On;gt.DEFAULT_PROFILE=bP;gt.ENV_PROFILE=SP;gt.externalDataInterceptor=$5;gt.getProfileName=P5;gt.loadSharedConfigFiles=_P;gt.loadSsoSessionData=q5;gt.parseKnownFiles=U5;Object.keys(ya).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gt,t)&&Object.defineProperty(gt,t,{enumerable:!0,get:function(){return ya[t]}})});Object.keys(gP).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gt,t)&&Object.defineProperty(gt,t,{enumerable:!0,get:function(){return gP[t]}})})});var wr=S(CP=>{"use strict";var Sa=Ze(),wP=_r();function vP(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var j5=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new Sa.CredentialsProviderError(r.message||`Not found in ENV: ${vP(t.toString())}`,{logger:e?.logger})}},H5=(t,{preferredFile:e="config",...r}={})=>async()=>{let s=wP.getProfileName(r),{configFile:n,credentialsFile:i}=await wP.loadSharedConfigFiles(r),o=i[s]||{},a=n[s]||{},c=e==="config"?{...o,...a}:{...a,...o};try{let d=t(c,e==="config"?n:i);if(d===void 0)throw new Error;return d}catch(u){throw new Sa.CredentialsProviderError(u.message||`Not found in config files w/ profile [${s}]: ${vP(t.toString())}`,{logger:r.logger})}},z5=t=>typeof t=="function",V5=t=>z5(t)?async()=>await t():Sa.fromStatic(t),G5=({environmentVariableSelector:t,configFileSelector:e,default:r},s={})=>{let{signingName:n,logger:i}=s,o={signingName:n,logger:i};return Sa.memoize(Sa.chain(j5(t,o),H5(e,s),V5(r)))};CP.loadConfig=G5});var AP=S(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.getEndpointUrlConfig=void 0;var RP=_r(),TP="AWS_ENDPOINT_URL",xP="endpoint_url",Q5=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),s=e[[TP,...r].join("_")];if(s)return s;let n=e[TP];if(n)return n},configFileSelector:(e,r)=>{if(r&&e.services){let n=r[["services",e.services].join(RP.CONFIG_PREFIX_SEPARATOR)];if(n){let i=t.split(" ").map(a=>a.toLowerCase()),o=n[[i.join("_"),xP].join(RP.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let s=e[xP];if(s)return s},default:void 0});zl.getEndpointUrlConfig=Q5});var PP=S(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.getEndpointFromConfig=void 0;var W5=wr(),K5=AP(),Y5=async t=>(0,W5.loadConfig)((0,K5.getEndpointUrlConfig)(t??""))();Vl.getEndpointFromConfig=Y5});var vr=S(Yr=>{"use strict";var kP=PP(),IP=jr(),X5=(ht(),J(Mi)),Gl=ut(),J5=_g(),Z5=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),nQ(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!sQ(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},eQ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,tQ=/(\d+\.){3}\d+/,rQ=/\.\./,sQ=t=>eQ.test(t)&&!tQ.test(t)&&!rQ.test(t),nQ=t=>{let[e,r,s,,,n]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&s&&n);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},iQ=(t,e,r,s=!1)=>{let n=async()=>{let i;return s?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:o,hostname:a,port:c,path:u}=i;return`${o}//${a}${c?":"+c:""}${u}`}}return i}:n},mb=t=>typeof t=="object"?"url"in t?IP.parseUrl(t.url):t:IP.parseUrl(t),OP=async(t,e,r,s)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await kP.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(mb(o)),r.isCustomEndpoint=!0)}let n=await NP(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},NP=async(t,e,r)=>{let s={},n=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(n))switch(o.type){case"staticContextParams":s[i]=o.value;break;case"contextParams":s[i]=t[o.name];break;case"clientContextParams":case"builtInParams":s[i]=await iQ(o.name,i,r,o.type!=="builtInParams")();break;case"operationContextParams":s[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await Z5(s),s},DP=({config:t,instructions:e})=>(r,s)=>async n=>{t.isCustomEndpoint&&X5.setFeature(s,"ENDPOINT_OVERRIDE","N");let i=await OP(n.input,{getEndpointParameterInstructions(){return e}},{...t},s);s.endpointV2=i,s.authSchemes=i.properties?.authSchemes;let o=s.authSchemes?.[0];if(o){s.signing_region=o.signingRegion,s.signing_service=o.signingName;let c=Gl.getSmithyContext(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...n})},MP={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:J5.serializerMiddlewareOption.name},oQ=(t,e)=>({applyToStack:r=>{r.addRelativeTo(DP({config:t,instructions:e}),MP)}}),aQ=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=t,i=r!=null?async()=>mb(await Gl.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Gl.normalizeProvider(s??!1),useFipsEndpoint:Gl.normalizeProvider(n??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=kP.getEndpointFromConfig(t.serviceId)),c),a},cQ=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Yr.endpointMiddleware=DP;Yr.endpointMiddlewareOptions=MP;Yr.getEndpointFromInstructions=OP;Yr.getEndpointPlugin=oQ;Yr.resolveEndpointConfig=aQ;Yr.resolveEndpointRequiredConfig=cQ;Yr.resolveParams=NP;Yr.toEndpointV1=mb});var yb=S(js=>{"use strict";var uQ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],lQ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],dQ=["TimeoutError","RequestTimeout","RequestTimeoutException"],fQ=[500,502,503,504],pQ=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],hQ=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],LP=t=>t?.$retryable!==void 0,mQ=t=>uQ.includes(t.name),FP=t=>t.$metadata?.clockSkewCorrected,qP=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},gQ=t=>t.$metadata?.httpStatusCode===429||lQ.includes(t.name)||t.$retryable?.throttling==!0,gb=(t,e=0)=>LP(t)||FP(t)||dQ.includes(t.name)||pQ.includes(t?.code||"")||hQ.includes(t?.code||"")||fQ.includes(t.$metadata?.httpStatusCode||0)||qP(t)||t.cause!==void 0&&e<=10&&gb(t.cause,e+1),yQ=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!gb(t)}return!1};js.isBrowserNetworkError=qP;js.isClockSkewCorrectedError=FP;js.isClockSkewError=mQ;js.isRetryableByTrait=LP;js.isServerError=yQ;js.isThrottlingError=gQ;js.isTransientError=gb});var Nn=S(xe=>{"use strict";var SQ=yb();xe.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(xe.RETRY_MODES||(xe.RETRY_MODES={}));var Sb=3,bQ=xe.RETRY_MODES.STANDARD,Ql=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>t.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),SQ.isThrottlingError(e)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},ba=100,wb=20*1e3,UP=500,bb=500,$P=5,jP=10,HP=1,EQ="amz-sdk-invocation-id",_Q="amz-sdk-request",wQ=()=>{let t=ba;return{computeNextBackoffDelay:s=>Math.floor(Math.min(wb,Math.random()*2**s*t)),setDelayBase:s=>{t=s}}},BP=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(wb,t),getRetryCost:()=>r}),Ea=class{maxAttempts;mode=xe.RETRY_MODES.STANDARD;capacity=bb;retryBackoffStrategy=wQ();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return BP({retryDelay:ba,retryCount:0})}async refreshRetryTokenForRetry(e,r){let s=await this.getMaxAttempts();if(this.shouldRetry(e,r,s)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?UP:ba);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(n);return this.capacity-=a,BP({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(bb,this.capacity+(e.getRetryCost()??HP))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Sb}`),Sb}}shouldRetry(e,r,s){return e.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?jP:$P}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},Eb=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=xe.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:s}=r??{};this.rateLimiter=s??new Ql,this.standardRetryStrategy=new Ea(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},_b=class extends Ea{computeNextBackoffDelay;constructor(e,r=ba){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let s=await super.refreshRetryTokenForRetry(e,r);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};xe.AdaptiveRetryStrategy=Eb;xe.ConfiguredRetryStrategy=_b;xe.DEFAULT_MAX_ATTEMPTS=Sb;xe.DEFAULT_RETRY_DELAY_BASE=ba;xe.DEFAULT_RETRY_MODE=bQ;xe.DefaultRateLimiter=Ql;xe.INITIAL_RETRY_TOKENS=bb;xe.INVOCATION_ID_HEADER=EQ;xe.MAXIMUM_RETRY_DELAY=wb;xe.NO_RETRY_INCREMENT=HP;xe.REQUEST_HEADER=_Q;xe.RETRY_COST=$P;xe.StandardRetryStrategy=Ea;xe.THROTTLING_RETRY_DELAY_BASE=UP;xe.TIMEOUT_RETRY_COST=jP});var zP=S(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.isStreamingPayload=void 0;var vQ=require("stream"),CQ=t=>t?.body instanceof vQ.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Wl.isStreamingPayload=CQ});var nr=S(Oe=>{"use strict";var Ce=Nn(),eo=ue(),Hs=yb(),GP=wy(),VP=ut(),RQ=Y(),TQ=zP(),xQ=(t,e)=>{let r=t,s=Ce.NO_RETRY_INCREMENT,n=Ce.RETRY_COST,i=Ce.TIMEOUT_RETRY_COST,o=t,a=l=>l.name==="TimeoutError"?i:n,c=l=>a(l)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");let h=a(l);return o-=h,h},releaseRetryTokens:l=>{o+=l??s,o=Math.min(o,r)}})},QP=(t,e)=>Math.floor(Math.min(Ce.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),WP=t=>t?Hs.isRetryableByTrait(t)||Hs.isClockSkewError(t)||Hs.isThrottlingError(t)||Hs.isTransientError(t):!1,KP=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Kl=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ce.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??WP,this.delayDecider=r?.delayDecider??QP,this.retryQuota=r?.retryQuota??xQ(Ce.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,s){return r<s&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Ce.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,s){let n,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(eo.HttpRequest.isInstance(c)&&(c.headers[Ce.INVOCATION_ID_HEADER]=GP.v4());;)try{eo.HttpRequest.isInstance(c)&&(c.headers[Ce.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),s?.beforeRequest&&await s.beforeRequest();let{response:u,output:d}=await e(r);return s?.afterRequest&&s.afterRequest(u),this.retryQuota.releaseRetryTokens(n),d.$metadata.attempts=i+1,d.$metadata.totalRetryDelay=o,{response:u,output:d}}catch(u){let d=KP(u);if(i++,this.shouldRetry(d,i,a)){n=this.retryQuota.retrieveRetryTokens(d);let l=this.delayDecider(Hs.isThrottlingError(d)?Ce.THROTTLING_RETRY_DELAY_BASE:Ce.DEFAULT_RETRY_DELAY_BASE,i),h=AQ(d.$response),m=Math.max(h||0,l);o+=m,await new Promise(g=>setTimeout(g,m));continue}throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=i,d.$metadata.totalRetryDelay=o,d}}},AQ=t=>{if(!eo.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],s=Number(r);return Number.isNaN(s)?new Date(r).getTime()-Date.now():s*1e3},vb=class extends Kl{rateLimiter;constructor(e,r){let{rateLimiter:s,...n}=r??{};super(e,n),this.rateLimiter=s??new Ce.DefaultRateLimiter,this.mode=Ce.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},Cb="AWS_MAX_ATTEMPTS",Rb="max_attempts",PQ={environmentVariableSelector:t=>{let e=t[Cb];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${Cb} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Rb];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Rb} mast be a number, got "${e}"`);return r},default:Ce.DEFAULT_MAX_ATTEMPTS},IQ=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:s}=t,n=VP.normalizeProvider(s??Ce.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>e||(await VP.normalizeProvider(r)()===Ce.RETRY_MODES.ADAPTIVE?new Ce.AdaptiveRetryStrategy(n):new Ce.StandardRetryStrategy(n))})},YP="AWS_RETRY_MODE",XP="retry_mode",kQ={environmentVariableSelector:t=>t[YP],configFileSelector:t=>t[XP],default:Ce.DEFAULT_RETRY_MODE},JP=()=>t=>async e=>{let{request:r}=e;return eo.HttpRequest.isInstance(r)&&(delete r.headers[Ce.INVOCATION_ID_HEADER],delete r.headers[Ce.REQUEST_HEADER]),t(e)},ZP={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},OQ=t=>({applyToStack:e=>{e.addRelativeTo(JP(),ZP)}}),eI=t=>(e,r)=>async s=>{let n=await t.retryStrategy(),i=await t.maxAttempts();if(NQ(n)){n=n;let o=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:d}=s,l=eo.HttpRequest.isInstance(d);for(l&&(d.headers[Ce.INVOCATION_ID_HEADER]=GP.v4());;)try{l&&(d.headers[Ce.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:h,output:m}=await e(s);return n.recordSuccess(o),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=u,{response:h,output:m}}catch(h){let m=DQ(h);if(a=KP(h),l&&TQ.isStreamingPayload(d))throw(r.logger instanceof RQ.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await n.refreshRetryTokenForRetry(o,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let g=o.getRetryDelay();u+=g,await new Promise(w=>setTimeout(w,g))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,s)},NQ=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",DQ=t=>{let e={error:t,errorType:MQ(t)},r=rI(t.$response);return r&&(e.retryAfterHint=r),e},MQ=t=>Hs.isThrottlingError(t)?"THROTTLING":Hs.isTransientError(t)?"TRANSIENT":Hs.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",tI={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},LQ=t=>({applyToStack:e=>{e.add(eI(t),tI)}}),rI=t=>{if(!eo.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};Oe.AdaptiveRetryStrategy=vb;Oe.CONFIG_MAX_ATTEMPTS=Rb;Oe.CONFIG_RETRY_MODE=XP;Oe.ENV_MAX_ATTEMPTS=Cb;Oe.ENV_RETRY_MODE=YP;Oe.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=PQ;Oe.NODE_RETRY_MODE_CONFIG_OPTIONS=kQ;Oe.StandardRetryStrategy=Kl;Oe.defaultDelayDecider=QP;Oe.defaultRetryDecider=WP;Oe.getOmitRetryHeadersPlugin=OQ;Oe.getRetryAfterHint=rI;Oe.getRetryPlugin=LQ;Oe.omitRetryHeadersMiddleware=JP;Oe.omitRetryHeadersMiddlewareOptions=ZP;Oe.resolveRetryConfig=IQ;Oe.retryMiddleware=eI;Oe.retryMiddlewareOptions=tI});var xb=S(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.resolveHttpAuthSchemeConfig=zs.defaultSecretsManagerHttpAuthSchemeProvider=zs.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var FQ=(He(),J(Bs)),Tb=ut(),qQ=async(t,e,r)=>({operation:(0,Tb.getSmithyContext)(e).operation,region:await(0,Tb.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});zs.defaultSecretsManagerHttpAuthSchemeParametersProvider=qQ;function BQ(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var UQ=t=>{let e=[];switch(t.operation){default:e.push(BQ(t))}return e};zs.defaultSecretsManagerHttpAuthSchemeProvider=UQ;var $Q=t=>{let e=(0,FQ.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Tb.normalizeProvider)(t.authSchemePreference??[])})};zs.resolveHttpAuthSchemeConfig=$Q});var sI=S((bde,jQ)=>{jQ.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.975.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.1","@aws-sdk/credential-provider-node":"^3.972.1","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.2","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.1","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.11","@smithy/middleware-retry":"^4.4.27","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.12","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.26","@smithy/util-defaults-mode-node":"^4.2.29","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var Ab=S(Vs=>{"use strict";var HQ=(Ht(),J(Hr)),zQ=Ze(),nI="AWS_ACCESS_KEY_ID",iI="AWS_SECRET_ACCESS_KEY",oI="AWS_SESSION_TOKEN",aI="AWS_CREDENTIAL_EXPIRATION",cI="AWS_CREDENTIAL_SCOPE",uI="AWS_ACCOUNT_ID",VQ=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[nI],r=process.env[iI],s=process.env[oI],n=process.env[aI],i=process.env[cI],o=process.env[uI];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...i&&{credentialScope:i},...o&&{accountId:o}};return HQ.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new zQ.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};Vs.ENV_ACCOUNT_ID=uI;Vs.ENV_CREDENTIAL_SCOPE=cI;Vs.ENV_EXPIRATION=aI;Vs.ENV_KEY=nI;Vs.ENV_SECRET=iI;Vs.ENV_SESSION=oI;Vs.fromEnv=VQ});var wa=S(tt=>{"use strict";var Cr=Ze(),GQ=require("url"),QQ=require("buffer"),WQ=require("http"),Nb=wr(),KQ=jr();function _a(t){return new Promise((e,r)=>{let s=WQ.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});s.on("error",n=>{r(Object.assign(new Cr.ProviderError("Unable to connect to instance metadata service"),n)),s.destroy()}),s.on("timeout",()=>{r(new Cr.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",n=>{let{statusCode:i=400}=n;(i<200||300<=i)&&(r(Object.assign(new Cr.ProviderError("Error response received from instance metadata service"),{statusCode:i})),s.destroy());let o=[];n.on("data",a=>{o.push(a)}),n.on("end",()=>{e(QQ.Buffer.concat(o)),s.destroy()})}),s.end()})}var pI=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",hI=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),mI=1e3,gI=0,Db=({maxRetries:t=gI,timeout:e=mI})=>({maxRetries:t,timeout:e}),Ib=(t,e)=>{let r=t();for(let s=0;s<e;s++)r=r.catch(t);return r},Yl="AWS_CONTAINER_CREDENTIALS_FULL_URI",Xl="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",kb="AWS_CONTAINER_AUTHORIZATION_TOKEN",YQ=(t={})=>{let{timeout:e,maxRetries:r}=Db(t);return()=>Ib(async()=>{let s=await tW({logger:t.logger}),n=JSON.parse(await XQ(e,s));if(!pI(n))throw new Cr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return hI(n)},r)},XQ=async(t,e)=>(process.env[kb]&&(e.headers={...e.headers,Authorization:process.env[kb]}),(await _a({...e,timeout:t})).toString()),JQ="169.254.170.2",ZQ={localhost:!0,"127.0.0.1":!0},eW={"http:":!0,"https:":!0},tW=async({logger:t})=>{if(process.env[Xl])return{hostname:JQ,path:process.env[Xl]};if(process.env[Yl]){let e=GQ.parse(process.env[Yl]);if(!e.hostname||!(e.hostname in ZQ))throw new Cr.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in eW))throw new Cr.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new Cr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Xl} or ${Yl} environment variable is set`,{tryNextLink:!1,logger:t})},Ob=class t extends Cr.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};tt.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(tt.Endpoint||(tt.Endpoint={}));var rW="AWS_EC2_METADATA_SERVICE_ENDPOINT",sW="ec2_metadata_service_endpoint",nW={environmentVariableSelector:t=>t[rW],configFileSelector:t=>t[sW],default:void 0},to;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(to||(to={}));var iW="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",oW="ec2_metadata_service_endpoint_mode",aW={environmentVariableSelector:t=>t[iW],configFileSelector:t=>t[oW],default:to.IPv4},yI=async()=>KQ.parseUrl(await cW()||await uW()),cW=async()=>Nb.loadConfig(nW)(),uW=async()=>{let t=await Nb.loadConfig(aW)();switch(t){case to.IPv4:return tt.Endpoint.IPv4;case to.IPv6:return tt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(to)}`)}},lW=300,dW=300,fW="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",lI=(t,e)=>{let r=lW+Math.floor(Math.random()*dW),s=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(s)}.
For more information, please visit: `+fW);let n=t.originalExpiration??t.expiration;return{...t,...n?{originalExpiration:n}:{},expiration:s}},pW=(t,e={})=>{let r=e?.logger||console,s;return async()=>{let n;try{n=await t(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=lI(n,r))}catch(i){if(s)r.warn("Credential renew failed: ",i),n=lI(s,r);else throw i}return s=n,n}},SI="/latest/meta-data/iam/security-credentials/",hW="/latest/api/token",Pb="AWS_EC2_METADATA_V1_DISABLED",dI="ec2_metadata_v1_disabled",fI="x-aws-ec2-metadata-token",mW=(t={})=>pW(gW(t),{logger:t.logger}),gW=(t={})=>{let e=!1,{logger:r,profile:s}=t,{timeout:n,maxRetries:i}=Db(t),o=async(a,c)=>{if(e||c.headers?.[fI]==null){let l=!1,h=!1,m=await Nb.loadConfig({environmentVariableSelector:g=>{let w=g[Pb];if(h=!!w&&w!=="false",w===void 0)throw new Cr.CredentialsProviderError(`${Pb} not set in env, checking config file next.`,{logger:t.logger});return h},configFileSelector:g=>{let w=g[dI];return l=!!w&&w!=="false",l},default:!1},{profile:s})();if(t.ec2MetadataV1Disabled||m){let g=[];throw t.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&g.push(`config file profile (${dI})`),h&&g.push(`process environment variable (${Pb})`),new Ob(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let d=(await Ib(async()=>{let l;try{l=await SW(c)}catch(h){throw h.statusCode===401&&(e=!1),h}return l},a)).trim();return Ib(async()=>{let l;try{l=await bW(d,c,t)}catch(h){throw h.statusCode===401&&(e=!1),h}return l},a)};return async()=>{let a=await yI();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:n});{let c;try{c=(await yW({...a,timeout:n})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:n})}return o(i,{...a,headers:{[fI]:c},timeout:n})}}},yW=async t=>_a({...t,path:hW,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),SW=async t=>(await _a({...t,path:SI})).toString(),bW=async(t,e,r)=>{let s=JSON.parse((await _a({...e,path:SI+t})).toString());if(!pI(s))throw new Cr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return hI(s)};tt.DEFAULT_MAX_RETRIES=gI;tt.DEFAULT_TIMEOUT=mI;tt.ENV_CMDS_AUTH_TOKEN=kb;tt.ENV_CMDS_FULL_URI=Yl;tt.ENV_CMDS_RELATIVE_URI=Xl;tt.fromContainerMetadata=YQ;tt.fromInstanceMetadata=mW;tt.getInstanceMetadataEndpoint=yI;tt.httpRequest=_a;tt.providerConfigFromInit=Db});var bI=S(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.checkUrl=void 0;var EW=Ze(),_W="169.254.170.2",wW="169.254.170.23",vW="[fd00:ec2::23]",CW=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===_W||t.hostname===wW||t.hostname===vW)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),s=n=>{let i=parseInt(n,10);return 0<=i&&i<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new EW.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};Jl.checkUrl=CW});var EI=S(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.createGetRequest=AW;Zl.getCredentials=PW;var Mb=Ze(),RW=ue(),TW=Y(),xW=ku();function AW(t){return new RW.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,s])=>(e[r]=s,e),{}),fragment:t.hash})}async function PW(t,e){let s=await(0,xW.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new Mb.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,TW.parseRfc3339DateTime)(n.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new Mb.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:n.Code,Message:n.Message})}throw new Mb.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var _I=S(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.retryWrapper=void 0;var IW=(t,e,r)=>async()=>{for(let s=0;s<e;++s)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};ed.retryWrapper=IW});var CI=S(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.fromHttp=void 0;var kW=(na(),J(sa)),OW=(Ht(),J(Hr)),NW=Es(),wI=Ze(),DW=kW.__importDefault(require("fs/promises")),MW=bI(),vI=EI(),LW=_I(),FW="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",qW="http://169.254.170.2",BW="AWS_CONTAINER_CREDENTIALS_FULL_URI",UW="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",$W="AWS_CONTAINER_AUTHORIZATION_TOKEN",jW=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[FW],s=t.awsContainerCredentialsFullUri??process.env[BW],n=t.awsContainerAuthorizationToken??process.env[$W],i=t.awsContainerAuthorizationTokenFile??process.env[UW],o=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&s&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),n&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),s)e=s;else if(r)e=`${qW}${r}`;else throw new wI.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,MW.checkUrl)(a,t.logger);let c=NW.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,LW.retryWrapper)(async()=>{let u=(0,vI.createGetRequest)(a);n?u.headers.Authorization=n:i&&(u.headers.Authorization=(await DW.default.readFile(i)).toString());try{let d=await c.handle(u);return(0,vI.getCredentials)(d.response).then(l=>(0,OW.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(d){throw new wI.CredentialsProviderError(String(d),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};td.fromHttp=jW});var Lb=S(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.fromHttp=void 0;var HW=CI();Object.defineProperty(rd,"fromHttp",{enumerable:!0,get:function(){return HW.fromHttp}})});function zW(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function VW(t){return{schemeId:"smithy.api#noAuth"}}var va,RI,TI,xI,Fb=E(()=>{He();va=v(ut()),RI=async(t,e,r)=>({operation:(0,va.getSmithyContext)(e).operation,region:await(0,va.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});TI=t=>{let e=[];return t.operation==="CreateToken"?e.push(VW(t)):e.push(zW(t)),e},xI=t=>{let e=zr(t);return Object.assign(e,{authSchemePreference:(0,va.normalizeProvider)(t.authSchemePreference??[])})}});var AI,PI,qb=E(()=>{AI=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),PI={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var ro,sd=E(()=>{ro={name:"@aws-sdk/nested-clients",version:"3.974.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var so=S(Dn=>{"use strict";var II=require("os"),Bb=require("process"),QW=kn(),kI={isCrtAvailable:!1},WW=()=>kI.isCrtAvailable?["md/crt-avail"]:null,OI=({serviceId:t,clientVersion:e})=>async r=>{let s=[["aws-sdk-js",e],["ua","2.1"],[`os/${II.platform()}`,II.release()],["lang/js"],["md/nodejs",`${Bb.versions.node}`]],n=WW();n&&s.push(n),t&&s.push([`api/${t}`,e]),Bb.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${Bb.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...s,[`app/${i}`]]:[...s]},KW=OI,NI="AWS_SDK_UA_APP_ID",DI="sdk_ua_app_id",YW="sdk-ua-app-id",XW={environmentVariableSelector:t=>t[NI],configFileSelector:t=>t[DI]??t[YW],default:QW.DEFAULT_UA_APP_ID};Dn.NODE_APP_ID_CONFIG_OPTIONS=XW;Dn.UA_APP_ID_ENV_NAME=NI;Dn.UA_APP_ID_INI_NAME=DI;Dn.createDefaultUserAgentProvider=OI;Dn.crtAvailability=kI;Dn.defaultUserAgent=KW});var no=S(FI=>{"use strict";var Ub=Ti(),JW=Fe(),ZW=require("buffer"),MI=require("crypto"),$b=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(JW.toUint8Array(LI(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?MI.createHmac(this.algorithmIdentifier,LI(this.secret)):MI.createHash(this.algorithmIdentifier)}};function LI(t,e){return ZW.Buffer.isBuffer(t)?t:typeof t=="string"?Ub.fromString(t,e):ArrayBuffer.isView(t)?Ub.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):Ub.fromArrayBuffer(t)}FI.Hash=$b});var io=S(qI=>{"use strict";var jb=require("node:fs"),eK=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof jb.ReadStream){if(t.path!=null)return jb.lstatSync(t.path).size;if(typeof t.fd=="number")return jb.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};qI.calculateBodyLength=eK});var oo=S(jI=>{"use strict";var tK=vt(),BI=wr(),rK=Ze(),sK="AWS_EXECUTION_ENV",UI="AWS_REGION",$I="AWS_DEFAULT_REGION",nK="AWS_EC2_METADATA_DISABLED",iK=["in-region","cross-region","mobile","standard","legacy"],oK="/latest/meta-data/placement/region",aK="AWS_DEFAULTS_MODE",cK="defaults_mode",uK={environmentVariableSelector:t=>t[aK],configFileSelector:t=>t[cK],default:"legacy"},lK=({region:t=BI.loadConfig(tK.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=BI.loadConfig(uK)}={})=>rK.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return dK(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${iK.join(", ")}, got ${r}`)}}),dK=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await fK();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},fK=async()=>{if(process.env[sK]&&(process.env[UI]||process.env[$I]))return process.env[UI]??process.env[$I];if(!process.env[nK])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>v(wa())),r=await t();return(await e({...r,path:oK})).toString()}catch{}};jI.resolveDefaultsModeConfig=lK});var JI,Gt,HI,Ca,ao,co,Xr,Hb,zb,zI,VI,GI,ZI,ek,Vt,QI,tk,WI,KI,YI,XI,pK,rk,sk=E(()=>{JI="required",Gt="argv",HI="isSet",Ca="booleanEquals",ao="error",co="endpoint",Xr="tree",Hb="PartitionResult",zb="getAttr",zI={[JI]:!1,type:"string"},VI={[JI]:!0,default:!1,type:"boolean"},GI={ref:"Endpoint"},ZI={fn:Ca,[Gt]:[{ref:"UseFIPS"},!0]},ek={fn:Ca,[Gt]:[{ref:"UseDualStack"},!0]},Vt={},QI={fn:zb,[Gt]:[{ref:Hb},"supportsFIPS"]},tk={ref:Hb},WI={fn:Ca,[Gt]:[!0,{fn:zb,[Gt]:[tk,"supportsDualStack"]}]},KI=[ZI],YI=[ek],XI=[{ref:"Region"}],pK={version:"1.0",parameters:{Region:zI,UseDualStack:VI,UseFIPS:VI,Endpoint:zI},rules:[{conditions:[{fn:HI,[Gt]:[GI]}],rules:[{conditions:KI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ao},{conditions:YI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ao},{endpoint:{url:GI,properties:Vt,headers:Vt},type:co}],type:Xr},{conditions:[{fn:HI,[Gt]:XI}],rules:[{conditions:[{fn:"aws.partition",[Gt]:XI,assign:Hb}],rules:[{conditions:[ZI,ek],rules:[{conditions:[{fn:Ca,[Gt]:[!0,QI]},WI],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vt,headers:Vt},type:co}],type:Xr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ao}],type:Xr},{conditions:KI,rules:[{conditions:[{fn:Ca,[Gt]:[QI,!0]}],rules:[{conditions:[{fn:"stringEquals",[Gt]:[{fn:zb,[Gt]:[tk,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Vt,headers:Vt},type:co},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Vt,headers:Vt},type:co}],type:Xr},{error:"FIPS is enabled but this partition does not support FIPS",type:ao}],type:Xr},{conditions:YI,rules:[{conditions:[WI],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vt,headers:Vt},type:co}],type:Xr},{error:"DualStack is enabled but this partition does not support DualStack",type:ao}],type:Xr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Vt,headers:Vt},type:co}],type:Xr}],type:Xr},{error:"Invalid Configuration: Missing Region",type:ao}]},rk=pK});var nk,uo,hK,ik,ok=E(()=>{nk=v(Tn()),uo=v(vs());sk();hK=new uo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ik=(t,e={})=>hK.get(t,()=>(0,uo.resolveEndpoint)(rk,{endpointParams:t,logger:e.logger}));uo.customEndpointFunctions.aws=nk.awsEndpointFunctions});var ak,ck,nd,id,uk,lk=E(()=>{He();In();ht();ak=v(Y()),ck=v(jr()),nd=v(qe()),id=v(Fe());Fb();ok();uk=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??nd.fromBase64,base64Encoder:t?.base64Encoder??nd.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ik,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??TI,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rr}],logger:t?.logger??new ak.NoOpLogger,protocol:t?.protocol??Ls,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??ck.parseUrl,utf8Decoder:t?.utf8Decoder??id.fromUtf8,utf8Encoder:t?.utf8Encoder??id.toUtf8})});var od,Qs,dk,ad,Gs,cd,ud,fk,pk,hk,mk,gk=E(()=>{sd();He();od=v(so()),Qs=v(vt()),dk=v(no()),ad=v(nr()),Gs=v(wr()),cd=v(Es()),ud=v(Y()),fk=v(io()),pk=v(oo()),hk=v(Nn());lk();mk=t=>{(0,ud.emitWarningIfUnsupportedVersion)(process.version);let e=(0,pk.resolveDefaultsModeConfig)(t),r=()=>e().then(ud.loadConfigsForDefaultMode),s=uk(t);Cs(process.version);let n={profile:t?.profile,logger:s.logger};return{...s,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Gs.loadConfig)(Ts,n),bodyLengthChecker:t?.bodyLengthChecker??fk.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,od.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:ro.version}),maxAttempts:t?.maxAttempts??(0,Gs.loadConfig)(ad.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Gs.loadConfig)(Qs.NODE_REGION_CONFIG_OPTIONS,{...Qs.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:cd.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Gs.loadConfig)({...ad.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||hk.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??dk.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??cd.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Gs.loadConfig)(Qs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,Gs.loadConfig)(Qs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,Gs.loadConfig)(od.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var Sk=S(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.warning=void 0;lo.stsRegionDefaultResolver=gK;var yk=vt(),mK=wr();function gK(t={}){return(0,mK.loadConfig)({...yk.NODE_REGION_CONFIG_OPTIONS,async default(){return lo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...yk.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}lo.warning={silence:!1}});var Mn=S(Rr=>{"use strict";var bk=Sk(),Ra=vt(),yK=t=>({setRegion(e){t.region=e},region(){return t.region}}),SK=t=>({region:t.region()});Object.defineProperty(Rr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Ra.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Rr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Ra.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Rr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Ra.REGION_ENV_NAME}});Object.defineProperty(Rr,"REGION_INI_NAME",{enumerable:!0,get:function(){return Ra.REGION_INI_NAME}});Object.defineProperty(Rr,"resolveRegionConfig",{enumerable:!0,get:function(){return Ra.resolveRegionConfig}});Rr.getAwsRegionExtensionConfiguration=yK;Rr.resolveAwsRegionExtensionConfiguration=SK;Object.keys(bk).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Rr,t)&&Object.defineProperty(Rr,t,{enumerable:!0,get:function(){return bk[t]}})})});var Ek,_k,wk=E(()=>{Ek=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){let i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},_k=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ld,dd,fd,vk,Ck=E(()=>{ld=v(Mn()),dd=v(ue()),fd=v(Y());wk();vk=(t,e)=>{let r=Object.assign((0,ld.getAwsRegionExtensionConfiguration)(t),(0,fd.getDefaultExtensionConfiguration)(t),(0,dd.getHttpHandlerExtensionConfiguration)(t),Ek(t));return e.forEach(s=>s.configure(r)),Object.assign(t,(0,ld.resolveAwsRegionExtensionConfiguration)(r),(0,fd.resolveDefaultRuntimeConfig)(r),(0,dd.resolveHttpHandlerRuntimeConfig)(r),_k(r))}});var pd,Rk,Tk,hd,xk,Ak,Pk,md,Vb,Ta,Gb=E(()=>{pd=v(wi()),Rk=v(vi()),Tk=v(Ci()),hd=v(kn()),xk=v(vt());ht();se();Ak=v(Ji()),Pk=v(vr()),md=v(nr()),Vb=v(Y());Fb();qb();gk();Ck();Ta=class extends Vb.Client{config;constructor(...[e]){let r=mk(e||{});super(r),this.initConfig=r;let s=AI(r),n=(0,hd.resolveUserAgentConfig)(s),i=(0,md.resolveRetryConfig)(n),o=(0,xk.resolveRegionConfig)(i),a=(0,pd.resolveHostHeaderConfig)(o),c=(0,Pk.resolveEndpointConfig)(a),u=xI(c),d=vk(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Sn(this.config)),this.middlewareStack.use((0,hd.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,md.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Ak.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,pd.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Rk.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Tk.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gn(this.config,{httpAuthSchemeParametersProvider:RI,identityProviderConfigProvider:async l=>new $r({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(yn(this.config))}destroy(){super.destroy()}}});var Ik,Ue,gd=E(()=>{Ik=v(Y()),Ue=class t extends Ik.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var xa,Aa,Pa,Ia,ka,Oa,Na,Da,Ma,La,Fa,Qb=E(()=>{gd();xa=class t extends Ue{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Aa=class t extends Ue{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Pa=class t extends Ue{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Ia=class t extends Ue{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ka=class t extends Ue{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Oa=class t extends Ue{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Na=class t extends Ue{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Da=class t extends Ue{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Ma=class t extends Ue{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},La=class t extends Ue{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Fa=class t extends Ue{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var bK,EK,_K,wK,vK,CK,RK,TK,xK,AK,PK,IK,kK,OK,NK,DK,MK,LK,FK,qK,Tr,BK,UK,$K,jK,HK,Ae,zK,ir,VK,GK,or,QK,kk,Ok,WK,KK,YK,Nk,XK,ne,JK,ZK,e9,t9,Dk,Mk,Lk,Fk,qk,Bk,Uk,$k,jk,Hk,zk,Vk,Gk,Qk,Wk,Wb,Kb=E(()=>{se();Qb();gd();bK="AccessDeniedException",EK="AuthorizationPendingException",_K="AccessToken",wK="ClientSecret",vK="CreateToken",CK="CreateTokenRequest",RK="CreateTokenResponse",TK="CodeVerifier",xK="ExpiredTokenException",AK="InvalidClientException",PK="InvalidGrantException",IK="InvalidRequestException",kK="InternalServerException",OK="InvalidScopeException",NK="IdToken",DK="RefreshToken",MK="SlowDownException",LK="UnauthorizedClientException",FK="UnsupportedGrantTypeException",qK="accessToken",Tr="client",BK="clientId",UK="clientSecret",$K="codeVerifier",jK="code",HK="deviceCode",Ae="error",zK="expiresIn",ir="error_description",VK="grantType",GK="http",or="httpError",QK="idToken",kk="reason",Ok="refreshToken",WK="redirectUri",KK="scope",YK="server",Nk="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",XK="tokenType",ne="com.amazonaws.ssooidc",JK=[0,ne,_K,8,0],ZK=[0,ne,wK,8,0],e9=[0,ne,TK,8,0],t9=[0,ne,NK,8,0],Dk=[0,ne,DK,8,0],Mk=[-3,ne,bK,{[Ae]:Tr,[or]:400},[Ae,kk,ir],[0,0,0]];B.for(ne).registerError(Mk,xa);Lk=[-3,ne,EK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(Lk,Aa);Fk=[3,ne,CK,0,[BK,UK,VK,HK,jK,Ok,KK,WK,$K],[0,[()=>ZK,0],0,0,0,[()=>Dk,0],64,0,[()=>e9,0]],3],qk=[3,ne,RK,0,[qK,XK,zK,Ok,QK],[[()=>JK,0],0,1,[()=>Dk,0],[()=>t9,0]]],Bk=[-3,ne,xK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(Bk,Pa);Uk=[-3,ne,kK,{[Ae]:YK,[or]:500},[Ae,ir],[0,0]];B.for(ne).registerError(Uk,Ia);$k=[-3,ne,AK,{[Ae]:Tr,[or]:401},[Ae,ir],[0,0]];B.for(ne).registerError($k,ka);jk=[-3,ne,PK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(jk,Oa);Hk=[-3,ne,IK,{[Ae]:Tr,[or]:400},[Ae,kk,ir],[0,0,0]];B.for(ne).registerError(Hk,Na);zk=[-3,ne,OK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(zk,Da);Vk=[-3,ne,MK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(Vk,Ma);Gk=[-3,ne,LK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(Gk,La);Qk=[-3,ne,FK,{[Ae]:Tr,[or]:400},[Ae,ir],[0,0]];B.for(ne).registerError(Qk,Fa);Wk=[-3,Nk,"SSOOIDCServiceException",0,[],[]];B.for(Nk).registerError(Wk,Ue);Wb=[9,ne,vK,{[GK]:["POST","/token",200]},()=>Fk,()=>qk]});var Kk,Yb,qa,Xb=E(()=>{Kk=v(vr()),Yb=v(Y());qb();Kb();qa=class extends Yb.Command.classBuilder().ep(PI).m(function(e,r,s,n){return[(0,Kk.getEndpointPlugin)(s,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(Wb).build(){}});var Yk,r9,yd,Xk=E(()=>{Yk=v(Y());Xb();Gb();r9={CreateTokenCommand:qa},yd=class extends Ta{};(0,Yk.createAggregatedClient)(r9,yd)});var Jk=E(()=>{Xb()});var s9,n9,Zk=E(()=>{s9={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},n9={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"}});var eO=E(()=>{});var Jb={};ot(Jb,{$Command:()=>Yb.Command,AccessDeniedException:()=>xa,AccessDeniedException$:()=>Mk,AccessDeniedExceptionReason:()=>s9,AuthorizationPendingException:()=>Aa,AuthorizationPendingException$:()=>Lk,CreateToken$:()=>Wb,CreateTokenCommand:()=>qa,CreateTokenRequest$:()=>Fk,CreateTokenResponse$:()=>qk,ExpiredTokenException:()=>Pa,ExpiredTokenException$:()=>Bk,InternalServerException:()=>Ia,InternalServerException$:()=>Uk,InvalidClientException:()=>ka,InvalidClientException$:()=>$k,InvalidGrantException:()=>Oa,InvalidGrantException$:()=>jk,InvalidRequestException:()=>Na,InvalidRequestException$:()=>Hk,InvalidRequestExceptionReason:()=>n9,InvalidScopeException:()=>Da,InvalidScopeException$:()=>zk,SSOOIDC:()=>yd,SSOOIDCClient:()=>Ta,SSOOIDCServiceException:()=>Ue,SSOOIDCServiceException$:()=>Wk,SlowDownException:()=>Ma,SlowDownException$:()=>Vk,UnauthorizedClientException:()=>La,UnauthorizedClientException$:()=>Gk,UnsupportedGrantTypeException:()=>Fa,UnsupportedGrantTypeException$:()=>Qk,__Client:()=>Vb.Client});var Zb=E(()=>{Gb();Xk();Jk();Kb();Zk();Qb();eO();gd()});var nO=S(Ua=>{"use strict";var i9=(Ht(),J(Hr)),o9=(bS(),J($A)),Nt=Ze(),Ba=_r(),a9=require("fs"),c9=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new Nt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=o9.getBearerTokenEnvKey(e);if(!(r in process.env))throw new Nt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let s={token:process.env[r]};return i9.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},u9=300*1e3,eE="To refresh this SSO session run 'aws sso login' with the corresponding profile.",l9=async(t,e={},r)=>{let{SSOOIDCClient:s}=await Promise.resolve().then(()=>(Zb(),Jb)),n=o=>e.clientConfig?.[o]??e.parentClientConfig?.[o]??r?.[o];return new s(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},d9=async(t,e,r={},s)=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Zb(),Jb));return(await l9(e,r,s)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},tO=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Nt.TokenProviderError(`Token is expired. ${eE}`,!1)},Ln=(t,e,r=!1)=>{if(typeof e>"u")throw new Nt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${eE}`,!1)},{writeFile:f9}=a9.promises,p9=(t,e)=>{let r=Ba.getSSOTokenFilepath(t),s=JSON.stringify(e,null,2);return f9(r,s)},rO=new Date(0),sO=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let r=await Ba.parseKnownFiles(t),s=Ba.getProfileName({profile:t.profile??e?.profile}),n=r[s];if(n){if(!n.sso_session)throw new Nt.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new Nt.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let i=n.sso_session,a=(await Ba.loadSsoSessionData(t))[i];if(!a)throw new Nt.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!a[m])throw new Nt.TokenProviderError(`Sso session '${i}' is missing required property '${m}'.`,!1);a.sso_start_url;let c=a.sso_region,u;try{u=await Ba.getSSOTokenFromFile(i)}catch{throw new Nt.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${eE}`,!1)}Ln("accessToken",u.accessToken),Ln("expiresAt",u.expiresAt);let{accessToken:d,expiresAt:l}=u,h={token:d,expiration:new Date(l)};if(h.expiration.getTime()-Date.now()>u9)return h;if(Date.now()-rO.getTime()<30*1e3)return tO(h),h;Ln("clientId",u.clientId,!0),Ln("clientSecret",u.clientSecret,!0),Ln("refreshToken",u.refreshToken,!0);try{rO.setTime(Date.now());let m=await d9(u,c,t,e);Ln("accessToken",m.accessToken),Ln("expiresIn",m.expiresIn);let g=new Date(Date.now()+m.expiresIn*1e3);try{await p9(i,{...u,accessToken:m.accessToken,expiresAt:g.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:g}}catch{return tO(h),h}},h9=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Nt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},m9=(t={})=>Nt.memoize(Nt.chain(sO(t),async()=>{throw new Nt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Ua.fromEnvSigningName=c9;Ua.fromSso=sO;Ua.fromStatic=h9;Ua.nodeProvider=m9});var rE=S(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.resolveHttpAuthSchemeConfig=Ws.defaultSSOHttpAuthSchemeProvider=Ws.defaultSSOHttpAuthSchemeParametersProvider=void 0;var g9=(He(),J(Bs)),tE=ut(),y9=async(t,e,r)=>({operation:(0,tE.getSmithyContext)(e).operation,region:await(0,tE.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Ws.defaultSSOHttpAuthSchemeParametersProvider=y9;function S9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Sd(t){return{schemeId:"smithy.api#noAuth"}}var b9=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Sd(t));break}case"ListAccountRoles":{e.push(Sd(t));break}case"ListAccounts":{e.push(Sd(t));break}case"Logout":{e.push(Sd(t));break}default:e.push(S9(t))}return e};Ws.defaultSSOHttpAuthSchemeProvider=b9;var E9=t=>{let e=(0,g9.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,tE.normalizeProvider)(t.authSchemePreference??[])})};Ws.resolveHttpAuthSchemeConfig=E9});var iO=S((Ofe,_9)=>{_9.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.974.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"^3.973.0","@aws-sdk/middleware-host-header":"^3.972.1","@aws-sdk/middleware-logger":"^3.972.1","@aws-sdk/middleware-recursion-detection":"^3.972.1","@aws-sdk/middleware-user-agent":"^3.972.1","@aws-sdk/region-config-resolver":"^3.972.1","@aws-sdk/types":"^3.973.0","@aws-sdk/util-endpoints":"3.972.0","@aws-sdk/util-user-agent-browser":"^3.972.1","@aws-sdk/util-user-agent-node":"^3.972.1","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.21.0","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.10","@smithy/middleware-retry":"^4.4.26","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.11","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.25","@smithy/util-defaults-mode-node":"^4.2.28","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",premove:"4.0.0",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var EO=S(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.ruleSet=void 0;var gO="required",Wt="fn",Kt="argv",ho="ref",oO=!0,aO="isSet",$a="booleanEquals",fo="error",po="endpoint",Jr="tree",sE="PartitionResult",nE="getAttr",cO={[gO]:!1,type:"string"},uO={[gO]:!0,default:!1,type:"boolean"},lO={[ho]:"Endpoint"},yO={[Wt]:$a,[Kt]:[{[ho]:"UseFIPS"},!0]},SO={[Wt]:$a,[Kt]:[{[ho]:"UseDualStack"},!0]},Qt={},dO={[Wt]:nE,[Kt]:[{[ho]:sE},"supportsFIPS"]},bO={[ho]:sE},fO={[Wt]:$a,[Kt]:[!0,{[Wt]:nE,[Kt]:[bO,"supportsDualStack"]}]},pO=[yO],hO=[SO],mO=[{[ho]:"Region"}],w9={version:"1.0",parameters:{Region:cO,UseDualStack:uO,UseFIPS:uO,Endpoint:cO},rules:[{conditions:[{[Wt]:aO,[Kt]:[lO]}],rules:[{conditions:pO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:fo},{conditions:hO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:fo},{endpoint:{url:lO,properties:Qt,headers:Qt},type:po}],type:Jr},{conditions:[{[Wt]:aO,[Kt]:mO}],rules:[{conditions:[{[Wt]:"aws.partition",[Kt]:mO,assign:sE}],rules:[{conditions:[yO,SO],rules:[{conditions:[{[Wt]:$a,[Kt]:[oO,dO]},fO],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:po}],type:Jr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:fo}],type:Jr},{conditions:pO,rules:[{conditions:[{[Wt]:$a,[Kt]:[dO,oO]}],rules:[{conditions:[{[Wt]:"stringEquals",[Kt]:[{[Wt]:nE,[Kt]:[bO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Qt,headers:Qt},type:po},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:po}],type:Jr},{error:"FIPS is enabled but this partition does not support FIPS",type:fo}],type:Jr},{conditions:hO,rules:[{conditions:[fO],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:po}],type:Jr},{error:"DualStack is enabled but this partition does not support DualStack",type:fo}],type:Jr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:po}],type:Jr}],type:Jr},{error:"Invalid Configuration: Missing Region",type:fo}]};bd.ruleSet=w9});var _O=S(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.defaultEndpointResolver=void 0;var v9=Tn(),iE=vs(),C9=EO(),R9=new iE.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),T9=(t,e={})=>R9.get(t,()=>(0,iE.resolveEndpoint)(C9.ruleSet,{endpointParams:t,logger:e.logger}));Ed.defaultEndpointResolver=T9;iE.customEndpointFunctions.aws=v9.awsEndpointFunctions});var CO=S(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.getRuntimeConfig=void 0;var x9=(He(),J(Bs)),A9=(In(),J(ab)),P9=(ht(),J(Mi)),I9=Y(),k9=jr(),wO=qe(),vO=Fe(),O9=rE(),N9=_O(),D9=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??wO.fromBase64,base64Encoder:t?.base64Encoder??wO.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??N9.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??O9.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new x9.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new P9.NoAuthSigner}],logger:t?.logger??new I9.NoOpLogger,protocol:t?.protocol??A9.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??k9.parseUrl,utf8Decoder:t?.utf8Decoder??vO.fromUtf8,utf8Encoder:t?.utf8Encoder??vO.toUtf8});_d.getRuntimeConfig=D9});var IO=S(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.getRuntimeConfig=void 0;var M9=(na(),J(sa)),L9=M9.__importDefault(iO()),RO=(He(),J(Bs)),TO=so(),wd=vt(),F9=no(),xO=nr(),Fn=wr(),AO=Es(),PO=Y(),q9=io(),B9=oo(),U9=Nn(),$9=CO(),j9=t=>{(0,PO.emitWarningIfUnsupportedVersion)(process.version);let e=(0,B9.resolveDefaultsModeConfig)(t),r=()=>e().then(PO.loadConfigsForDefaultMode),s=(0,$9.getRuntimeConfig)(t);(0,RO.emitWarningIfUnsupportedVersion)(process.version);let n={profile:t?.profile,logger:s.logger};return{...s,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Fn.loadConfig)(RO.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??q9.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,TO.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:L9.default.version}),maxAttempts:t?.maxAttempts??(0,Fn.loadConfig)(xO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Fn.loadConfig)(wd.NODE_REGION_CONFIG_OPTIONS,{...wd.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:AO.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Fn.loadConfig)({...xO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||U9.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??F9.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??AO.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Fn.loadConfig)(wd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,Fn.loadConfig)(wd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,Fn.loadConfig)(TO.NODE_APP_ID_CONFIG_OPTIONS,n)}};vd.getRuntimeConfig=j9});var cN=S(Z=>{"use strict";var kO=wi(),H9=vi(),z9=Ci(),OO=kn(),V9=vt(),ja=(ht(),J(Mi)),go=(se(),J(Uu)),G9=Ji(),Va=vr(),NO=nr(),ar=Y(),DO=rE(),Q9=IO(),MO=Mn(),LO=ue(),W9=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),kd={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},K9=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){let i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},Y9=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),X9=(t,e)=>{let r=Object.assign(MO.getAwsRegionExtensionConfiguration(t),ar.getDefaultExtensionConfiguration(t),LO.getHttpHandlerExtensionConfiguration(t),K9(t));return e.forEach(s=>s.configure(r)),Object.assign(t,MO.resolveAwsRegionExtensionConfiguration(r),ar.resolveDefaultRuntimeConfig(r),LO.resolveHttpHandlerRuntimeConfig(r),Y9(r))},mo=class extends ar.Client{config;constructor(...[e]){let r=Q9.getRuntimeConfig(e||{});super(r),this.initConfig=r;let s=W9(r),n=OO.resolveUserAgentConfig(s),i=NO.resolveRetryConfig(n),o=V9.resolveRegionConfig(i),a=kO.resolveHostHeaderConfig(o),c=Va.resolveEndpointConfig(a),u=DO.resolveHttpAuthSchemeConfig(c),d=X9(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(go.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(OO.getUserAgentPlugin(this.config)),this.middlewareStack.use(NO.getRetryPlugin(this.config)),this.middlewareStack.use(G9.getContentLengthPlugin(this.config)),this.middlewareStack.use(kO.getHostHeaderPlugin(this.config)),this.middlewareStack.use(H9.getLoggerPlugin(this.config)),this.middlewareStack.use(z9.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ja.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:DO.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new ja.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(ja.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Ks=class t extends ar.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Cd=class t extends Ks{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Rd=class t extends Ks{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Td=class t extends Ks{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},xd=class t extends Ks{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},J9="AccountInfo",Z9="AccountListType",e7="AccessTokenType",t7="GetRoleCredentials",r7="GetRoleCredentialsRequest",s7="GetRoleCredentialsResponse",n7="InvalidRequestException",i7="Logout",o7="ListAccounts",a7="ListAccountsRequest",c7="ListAccountRolesRequest",u7="ListAccountRolesResponse",l7="ListAccountsResponse",d7="ListAccountRoles",f7="LogoutRequest",p7="RoleCredentials",h7="RoleInfo",m7="RoleListType",g7="ResourceNotFoundException",y7="SecretAccessKeyType",S7="SessionTokenType",b7="TooManyRequestsException",E7="UnauthorizedException",Od="accountId",_7="accessKeyId",w7="accountList",v7="accountName",Nd="accessToken",FO="account_id",Dd="client",Md="error",C7="emailAddress",R7="expiration",Ld="http",Fd="httpError",qd="httpHeader",qn="httpQuery",Bd="message",qO="maxResults",BO="max_result",Ud="nextToken",UO="next_token",T7="roleCredentials",x7="roleList",$O="roleName",A7="role_name",jO="smithy.ts.sdk.synthetic.com.amazonaws.sso",P7="secretAccessKey",I7="sessionToken",$d="x-amz-sso_bearer_token",pe="com.amazonaws.sso",jd=[0,pe,e7,8,0],k7=[0,pe,y7,8,0],O7=[0,pe,S7,8,0],HO=[3,pe,J9,0,[Od,v7,C7],[0,0,0]],zO=[3,pe,r7,0,[$O,Od,Nd],[[0,{[qn]:A7}],[0,{[qn]:FO}],[()=>jd,{[qd]:$d}]],3],VO=[3,pe,s7,0,[T7],[[()=>ZO,0]]],GO=[-3,pe,n7,{[Md]:Dd,[Fd]:400},[Bd],[0]];go.TypeRegistry.for(pe).registerError(GO,Cd);var QO=[3,pe,c7,0,[Nd,Od,Ud,qO],[[()=>jd,{[qd]:$d}],[0,{[qn]:FO}],[0,{[qn]:UO}],[1,{[qn]:BO}]],2],WO=[3,pe,u7,0,[Ud,x7],[0,()=>M7]],KO=[3,pe,a7,0,[Nd,Ud,qO],[[()=>jd,{[qd]:$d}],[0,{[qn]:UO}],[1,{[qn]:BO}]],1],YO=[3,pe,l7,0,[Ud,w7],[0,()=>D7]],XO=[3,pe,f7,0,[Nd],[[()=>jd,{[qd]:$d}]],1],JO=[-3,pe,g7,{[Md]:Dd,[Fd]:404},[Bd],[0]];go.TypeRegistry.for(pe).registerError(JO,Rd);var ZO=[3,pe,p7,0,[_7,P7,I7,R7],[0,[()=>k7,0],[()=>O7,0],1]],eN=[3,pe,h7,0,[$O,Od],[0,0]],tN=[-3,pe,b7,{[Md]:Dd,[Fd]:429},[Bd],[0]];go.TypeRegistry.for(pe).registerError(tN,Td);var rN=[-3,pe,E7,{[Md]:Dd,[Fd]:401},[Bd],[0]];go.TypeRegistry.for(pe).registerError(rN,xd);var N7="unit",sN=[-3,jO,"SSOServiceException",0,[],[]];go.TypeRegistry.for(jO).registerError(sN,Ks);var D7=[1,pe,Z9,0,()=>HO],M7=[1,pe,m7,0,()=>eN],nN=[9,pe,t7,{[Ld]:["GET","/federation/credentials",200]},()=>zO,()=>VO],iN=[9,pe,d7,{[Ld]:["GET","/assignment/roles",200]},()=>QO,()=>WO],oN=[9,pe,o7,{[Ld]:["GET","/assignment/accounts",200]},()=>KO,()=>YO],aN=[9,pe,i7,{[Ld]:["POST","/logout",200]},()=>XO,()=>N7],Ad=class extends ar.Command.classBuilder().ep(kd).m(function(e,r,s,n){return[Va.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(nN).build(){},Ha=class extends ar.Command.classBuilder().ep(kd).m(function(e,r,s,n){return[Va.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(iN).build(){},za=class extends ar.Command.classBuilder().ep(kd).m(function(e,r,s,n){return[Va.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(oN).build(){},Pd=class extends ar.Command.classBuilder().ep(kd).m(function(e,r,s,n){return[Va.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(aN).build(){},L7={GetRoleCredentialsCommand:Ad,ListAccountRolesCommand:Ha,ListAccountsCommand:za,LogoutCommand:Pd},Id=class extends mo{};ar.createAggregatedClient(L7,Id);var F7=ja.createPaginator(mo,Ha,"nextToken","nextToken","maxResults"),q7=ja.createPaginator(mo,za,"nextToken","nextToken","maxResults");Object.defineProperty(Z,"$Command",{enumerable:!0,get:function(){return ar.Command}});Object.defineProperty(Z,"__Client",{enumerable:!0,get:function(){return ar.Client}});Z.AccountInfo$=HO;Z.GetRoleCredentials$=nN;Z.GetRoleCredentialsCommand=Ad;Z.GetRoleCredentialsRequest$=zO;Z.GetRoleCredentialsResponse$=VO;Z.InvalidRequestException=Cd;Z.InvalidRequestException$=GO;Z.ListAccountRoles$=iN;Z.ListAccountRolesCommand=Ha;Z.ListAccountRolesRequest$=QO;Z.ListAccountRolesResponse$=WO;Z.ListAccounts$=oN;Z.ListAccountsCommand=za;Z.ListAccountsRequest$=KO;Z.ListAccountsResponse$=YO;Z.Logout$=aN;Z.LogoutCommand=Pd;Z.LogoutRequest$=XO;Z.ResourceNotFoundException=Rd;Z.ResourceNotFoundException$=JO;Z.RoleCredentials$=ZO;Z.RoleInfo$=eN;Z.SSO=Id;Z.SSOClient=mo;Z.SSOServiceException=Ks;Z.SSOServiceException$=sN;Z.TooManyRequestsException=Td;Z.TooManyRequestsException$=tN;Z.UnauthorizedException=xd;Z.UnauthorizedException$=rN;Z.paginateListAccountRoles=F7;Z.paginateListAccounts=q7});var lN=S(oE=>{"use strict";var uN=cN();Object.defineProperty(oE,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return uN.GetRoleCredentialsCommand}});Object.defineProperty(oE,"SSOClient",{enumerable:!0,get:function(){return uN.SSOClient}})});var aE=S(zd=>{"use strict";var cr=Ze(),Hd=_r(),dN=(Ht(),J(Hr)),B7=nO(),pN=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),Ga=!1,fN=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:i,clientConfig:o,parentClientConfig:a,callerClientConfig:c,profile:u,filepath:d,configFilepath:l,ignoreCache:h,logger:m})=>{let g,w="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let St=await B7.fromSso({profile:u,filepath:d,configFilepath:l,ignoreCache:h})();g={accessToken:St.token,expiresAt:new Date(St.expiration).toISOString()}}catch(St){throw new cr.CredentialsProviderError(St.message,{tryNextLink:Ga,logger:m})}else try{g=await Hd.getSSOTokenFromFile(t)}catch{throw new cr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${w}`,{tryNextLink:Ga,logger:m})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new cr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${w}`,{tryNextLink:Ga,logger:m});let{accessToken:R}=g,{SSOClient:x,GetRoleCredentialsCommand:P}=await Promise.resolve().then(function(){return lN()}),D=i||new x(Object.assign({},o??{},{logger:o?.logger??c?.logger??a?.logger,region:o?.region??s,userAgentAppId:o?.userAgentAppId??c?.userAgentAppId??a?.userAgentAppId})),M;try{M=await D.send(new P({accountId:r,roleName:n,accessToken:R}))}catch(St){throw new cr.CredentialsProviderError(St,{tryNextLink:Ga,logger:m})}let{roleCredentials:{accessKeyId:j,secretAccessKey:W,sessionToken:Ee,expiration:z,credentialScope:X,accountId:de}={}}=M;if(!j||!W||!Ee||!z)throw new cr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Ga,logger:m});let $e={accessKeyId:j,secretAccessKey:W,sessionToken:Ee,expiration:new Date(z),...X&&{credentialScope:X},...de&&{accountId:de}};return e?dN.setCredentialFeature($e,"CREDENTIALS_SSO","s"):dN.setCredentialFeature($e,"CREDENTIALS_SSO_LEGACY","u"),$e},hN=(t,e)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:i}=t;if(!r||!s||!n||!i)throw new cr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},U7=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:i,ssoSession:o}=t,{ssoClient:a}=t,c=Hd.getProfileName({profile:t.profile??e?.profile});if(!r&&!s&&!n&&!i&&!o){let d=(await Hd.parseKnownFiles(t))[c];if(!d)throw new cr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!pN(d))throw new cr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(d?.sso_session){let x=(await Hd.loadSsoSessionData(t))[d.sso_session],P=` configurations in profile ${c} and sso-session ${d.sso_session}`;if(n&&n!==x.sso_region)throw new cr.CredentialsProviderError("Conflicting SSO region"+P,{tryNextLink:!1,logger:t.logger});if(r&&r!==x.sso_start_url)throw new cr.CredentialsProviderError("Conflicting SSO start_url"+P,{tryNextLink:!1,logger:t.logger});d.sso_region=x.sso_region,d.sso_start_url=x.sso_start_url}let{sso_start_url:l,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:w}=hN(d,t.logger);return fN({ssoStartUrl:l,ssoSession:w,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!s||!n||!i)throw new cr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return fN({ssoStartUrl:r,ssoSession:o,ssoAccountId:s,ssoRegion:n,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};zd.fromSSO=U7;zd.isSsoProfile=pN;zd.validateSsoProfile=hN});function $7(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function j7(t){return{schemeId:"smithy.api#noAuth"}}var Qa,mN,gN,yN,cE=E(()=>{He();Qa=v(ut()),mN=async(t,e,r)=>({operation:(0,Qa.getSmithyContext)(e).operation,region:await(0,Qa.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});gN=t=>{let e=[];return t.operation==="CreateOAuth2Token"?e.push(j7(t)):e.push($7(t)),e},yN=t=>{let e=zr(t);return Object.assign(e,{authSchemePreference:(0,Qa.normalizeProvider)(t.authSchemePreference??[])})}});var SN,bN,uE=E(()=>{SN=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"signin"}),bN={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var xN,st,EN,Bn,yo,Ys,ur,Qd,lE,_N,wN,vN,dE,fE,rt,pE,Vd,Gd,CN,RN,TN,H7,AN,PN=E(()=>{xN="required",st="argv",EN="isSet",Bn="booleanEquals",yo="error",Ys="endpoint",ur="tree",Qd="PartitionResult",lE="stringEquals",_N={[xN]:!0,default:!1,type:"boolean"},wN={[xN]:!1,type:"string"},vN={ref:"Endpoint"},dE={fn:Bn,[st]:[{ref:"UseFIPS"},!0]},fE={fn:Bn,[st]:[{ref:"UseDualStack"},!0]},rt={},pE={fn:"getAttr",[st]:[{ref:Qd},"name"]},Vd={fn:Bn,[st]:[{ref:"UseFIPS"},!1]},Gd={fn:Bn,[st]:[{ref:"UseDualStack"},!1]},CN={fn:"getAttr",[st]:[{ref:Qd},"supportsFIPS"]},RN={fn:Bn,[st]:[!0,{fn:"getAttr",[st]:[{ref:Qd},"supportsDualStack"]}]},TN=[{ref:"Region"}],H7={version:"1.0",parameters:{UseDualStack:_N,UseFIPS:_N,Endpoint:wN,Region:wN},rules:[{conditions:[{fn:EN,[st]:[vN]}],rules:[{conditions:[dE],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:yo},{rules:[{conditions:[fE],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:yo},{endpoint:{url:vN,properties:rt,headers:rt},type:Ys}],type:ur}],type:ur},{rules:[{conditions:[{fn:EN,[st]:TN}],rules:[{conditions:[{fn:"aws.partition",[st]:TN,assign:Qd}],rules:[{conditions:[{fn:lE,[st]:[pE,"aws"]},Vd,Gd],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:rt,headers:rt},type:Ys},{conditions:[{fn:lE,[st]:[pE,"aws-cn"]},Vd,Gd],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:rt,headers:rt},type:Ys},{conditions:[{fn:lE,[st]:[pE,"aws-us-gov"]},Vd,Gd],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:rt,headers:rt},type:Ys},{conditions:[dE,fE],rules:[{conditions:[{fn:Bn,[st]:[!0,CN]},RN],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rt,headers:rt},type:Ys}],type:ur},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:yo}],type:ur},{conditions:[dE,Gd],rules:[{conditions:[{fn:Bn,[st]:[CN,!0]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:rt,headers:rt},type:Ys}],type:ur},{error:"FIPS is enabled but this partition does not support FIPS",type:yo}],type:ur},{conditions:[Vd,fE],rules:[{conditions:[RN],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rt,headers:rt},type:Ys}],type:ur},{error:"DualStack is enabled but this partition does not support DualStack",type:yo}],type:ur},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:rt,headers:rt},type:Ys}],type:ur}],type:ur},{error:"Invalid Configuration: Missing Region",type:yo}],type:ur}]},AN=H7});var IN,So,z7,kN,ON=E(()=>{IN=v(Tn()),So=v(vs());PN();z7=new So.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),kN=(t,e={})=>z7.get(t,()=>(0,So.resolveEndpoint)(AN,{endpointParams:t,logger:e.logger}));So.customEndpointFunctions.aws=IN.awsEndpointFunctions});var NN,DN,Wd,Kd,MN,LN=E(()=>{He();In();ht();NN=v(Y()),DN=v(jr()),Wd=v(qe()),Kd=v(Fe());cE();ON();MN=t=>({apiVersion:"2023-01-01",base64Decoder:t?.base64Decoder??Wd.fromBase64,base64Encoder:t?.base64Encoder??Wd.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??kN,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??gN,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rr}],logger:t?.logger??new NN.NoOpLogger,protocol:t?.protocol??Ls,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:t?.serviceId??"Signin",urlParser:t?.urlParser??DN.parseUrl,utf8Decoder:t?.utf8Decoder??Kd.fromUtf8,utf8Encoder:t?.utf8Encoder??Kd.toUtf8})});var Yd,Js,FN,Xd,Xs,Jd,Zd,qN,BN,UN,$N,jN=E(()=>{sd();He();Yd=v(so()),Js=v(vt()),FN=v(no()),Xd=v(nr()),Xs=v(wr()),Jd=v(Es()),Zd=v(Y()),qN=v(io()),BN=v(oo()),UN=v(Nn());LN();$N=t=>{(0,Zd.emitWarningIfUnsupportedVersion)(process.version);let e=(0,BN.resolveDefaultsModeConfig)(t),r=()=>e().then(Zd.loadConfigsForDefaultMode),s=MN(t);Cs(process.version);let n={profile:t?.profile,logger:s.logger};return{...s,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Xs.loadConfig)(Ts,n),bodyLengthChecker:t?.bodyLengthChecker??qN.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Yd.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:ro.version}),maxAttempts:t?.maxAttempts??(0,Xs.loadConfig)(Xd.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Xs.loadConfig)(Js.NODE_REGION_CONFIG_OPTIONS,{...Js.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Jd.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Xs.loadConfig)({...Xd.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||UN.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??FN.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Jd.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Xs.loadConfig)(Js.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,Xs.loadConfig)(Js.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,Xs.loadConfig)(Yd.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var HN,zN,VN=E(()=>{HN=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){let i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},zN=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ef,tf,rf,GN,QN=E(()=>{ef=v(Mn()),tf=v(ue()),rf=v(Y());VN();GN=(t,e)=>{let r=Object.assign((0,ef.getAwsRegionExtensionConfiguration)(t),(0,rf.getDefaultExtensionConfiguration)(t),(0,tf.getHttpHandlerExtensionConfiguration)(t),HN(t));return e.forEach(s=>s.configure(r)),Object.assign(t,(0,ef.resolveAwsRegionExtensionConfiguration)(r),(0,rf.resolveDefaultRuntimeConfig)(r),(0,tf.resolveHttpHandlerRuntimeConfig)(r),zN(r))}});var sf,WN,KN,nf,YN,XN,JN,of,hE,Wa,mE=E(()=>{sf=v(wi()),WN=v(vi()),KN=v(Ci()),nf=v(kn()),YN=v(vt());ht();se();XN=v(Ji()),JN=v(vr()),of=v(nr()),hE=v(Y());cE();uE();jN();QN();Wa=class extends hE.Client{config;constructor(...[e]){let r=$N(e||{});super(r),this.initConfig=r;let s=SN(r),n=(0,nf.resolveUserAgentConfig)(s),i=(0,of.resolveRetryConfig)(n),o=(0,YN.resolveRegionConfig)(i),a=(0,sf.resolveHostHeaderConfig)(o),c=(0,JN.resolveEndpointConfig)(a),u=yN(c),d=GN(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Sn(this.config)),this.middlewareStack.use((0,nf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,of.getRetryPlugin)(this.config)),this.middlewareStack.use((0,XN.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,sf.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,WN.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,KN.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gn(this.config,{httpAuthSchemeParametersProvider:mN,identityProviderConfigProvider:async l=>new $r({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(yn(this.config))}destroy(){super.destroy()}}});var ZN,lr,af=E(()=>{ZN=v(Y()),lr=class t extends ZN.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Ka,Ya,Xa,Ja,gE=E(()=>{af();Ka=class t extends lr{name="AccessDeniedException";$fault="client";error;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Ya=class t extends lr{name="InternalServerException";$fault="server";error;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Xa=class t extends lr{name="TooManyRequestsError";$fault="client";error;constructor(e){super({name:"TooManyRequestsError",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}},Ja=class t extends lr{name="ValidationException";$fault="client";error;constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error}}});var V7,G7,Q7,W7,K7,Y7,X7,J7,Z7,eY,tY,eD,tD,yE,rD,sD,rY,Zs,nD,iD,sY,SE,oD,Dt,uf,cf,aD,nY,cD,uD,dD,iY,oY,lD,yt,fD,pD,hD,mD,gD,yD,SD,bD,ED,_D,wD,bE,EE=E(()=>{se();gE();af();V7="AccessDeniedException",G7="AccessToken",Q7="CreateOAuth2Token",W7="CreateOAuth2TokenRequest",K7="CreateOAuth2TokenRequestBody",Y7="CreateOAuth2TokenResponseBody",X7="CreateOAuth2TokenResponse",J7="InternalServerException",Z7="RefreshToken",eY="TooManyRequestsError",tY="ValidationException",eD="accessKeyId",tD="accessToken",yE="client",rD="clientId",sD="codeVerifier",rY="code",Zs="error",nD="expiresIn",iD="grantType",sY="http",SE="httpError",oD="idToken",Dt="jsonName",uf="message",cf="refreshToken",aD="redirectUri",nY="server",cD="secretAccessKey",uD="sessionToken",dD="smithy.ts.sdk.synthetic.com.amazonaws.signin",iY="tokenInput",oY="tokenOutput",lD="tokenType",yt="com.amazonaws.signin",fD=[0,yt,Z7,8,0],pD=[-3,yt,V7,{[Zs]:yE},[Zs,uf],[0,0],2];B.for(yt).registerError(pD,Ka);hD=[3,yt,G7,8,[eD,cD,uD],[[0,{[Dt]:eD}],[0,{[Dt]:cD}],[0,{[Dt]:uD}]],3],mD=[3,yt,W7,0,[iY],[[()=>gD,16]],1],gD=[3,yt,K7,0,[rD,iD,rY,aD,sD,cf],[[0,{[Dt]:rD}],[0,{[Dt]:iD}],0,[0,{[Dt]:aD}],[0,{[Dt]:sD}],[()=>fD,{[Dt]:cf}]],2],yD=[3,yt,X7,0,[oY],[[()=>SD,16]],1],SD=[3,yt,Y7,0,[tD,lD,nD,cf,oD],[[()=>hD,{[Dt]:tD}],[0,{[Dt]:lD}],[1,{[Dt]:nD}],[()=>fD,{[Dt]:cf}],[0,{[Dt]:oD}]],4],bD=[-3,yt,J7,{[Zs]:nY,[SE]:500},[Zs,uf],[0,0],2];B.for(yt).registerError(bD,Ya);ED=[-3,yt,eY,{[Zs]:yE,[SE]:429},[Zs,uf],[0,0],2];B.for(yt).registerError(ED,Xa);_D=[-3,yt,tY,{[Zs]:yE,[SE]:400},[Zs,uf],[0,0],2];B.for(yt).registerError(_D,Ja);wD=[-3,dD,"SigninServiceException",0,[],[]];B.for(dD).registerError(wD,lr);bE=[9,yt,Q7,{[sY]:["POST","/v1/token",200]},()=>mD,()=>yD]});var vD,_E,Za,wE=E(()=>{vD=v(vr()),_E=v(Y());uE();EE();Za=class extends _E.Command.classBuilder().ep(bN).m(function(e,r,s,n){return[(0,vD.getEndpointPlugin)(s,e.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(bE).build(){}});var CD,aY,lf,RD=E(()=>{CD=v(Y());wE();mE();aY={CreateOAuth2TokenCommand:Za},lf=class extends Wa{};(0,CD.createAggregatedClient)(aY,lf)});var TD=E(()=>{wE()});var cY,xD=E(()=>{cY={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"}});var AD=E(()=>{});var PD={};ot(PD,{$Command:()=>_E.Command,AccessDeniedException:()=>Ka,AccessDeniedException$:()=>pD,AccessToken$:()=>hD,CreateOAuth2Token$:()=>bE,CreateOAuth2TokenCommand:()=>Za,CreateOAuth2TokenRequest$:()=>mD,CreateOAuth2TokenRequestBody$:()=>gD,CreateOAuth2TokenResponse$:()=>yD,CreateOAuth2TokenResponseBody$:()=>SD,InternalServerException:()=>Ya,InternalServerException$:()=>bD,OAuth2ErrorCode:()=>cY,Signin:()=>lf,SigninClient:()=>Wa,SigninServiceException:()=>lr,SigninServiceException$:()=>wD,TooManyRequestsError:()=>Xa,TooManyRequestsError$:()=>ED,ValidationException:()=>Ja,ValidationException$:()=>_D,__Client:()=>hE.Client});var ID=E(()=>{mE();RD();TD();EE();xD();gE();AD();af()});var OD=S(kD=>{"use strict";var uY=(Ht(),J(Hr)),en=Ze(),RE=_r(),lY=ue(),df=require("node:crypto"),vE=require("node:fs"),dY=require("node:os"),CE=require("node:path"),TE=class t{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,r,s){this.profileData=e,this.init=r,this.callerClientConfig=s}async loadCredentials(){let e=await this.loadToken();if(!e)throw new en.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=e.accessToken,s=Date.now();return new Date(r.expiresAt).getTime()-s<=t.REFRESH_THRESHOLD?this.refresh(e):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:r,CreateOAuth2TokenCommand:s}=await Promise.resolve().then(()=>(ID(),PD)),{logger:n,userAgentAppId:i}=this.callerClientConfig??{},a=(l=>l?.metadata?.handlerProtocol==="h2")(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,c=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,u=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:c,requestHandler:a,logger:n,userAgentAppId:i,...this.init?.clientConfig});this.createDPoPInterceptor(u.middlewareStack);let d={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:"refresh_token"}};try{let l=await u.send(new s(d)),{accessKeyId:h,secretAccessKey:m,sessionToken:g}=l.tokenOutput?.accessToken??{},{refreshToken:w,expiresIn:R}=l.tokenOutput??{};if(!h||!m||!g||!w)throw new en.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let x=(R??900)*1e3,P=new Date(Date.now()+x),D={...e,accessToken:{...e.accessToken,accessKeyId:h,secretAccessKey:m,sessionToken:g,expiresAt:P.toISOString()},refreshToken:w};await this.saveToken(D);let M=D.accessToken;return{accessKeyId:M.accessKeyId,secretAccessKey:M.secretAccessKey,sessionToken:M.sessionToken,accountId:M.accountId,expiration:P}}catch(l){if(l.name==="AccessDeniedException"){let h=l.error,m;switch(h){case"TOKEN_EXPIRED":m="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":m="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":m="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:m=`Failed to refresh token: ${String(l)}. Please re-authenticate using \`aws login\``}throw new en.CredentialsProviderError(m,{logger:this.logger,tryNextLink:!1})}throw new en.CredentialsProviderError(`Failed to refresh token: ${String(l)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let r;try{r=await RE.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{r=await vE.promises.readFile(e,"utf8")}let s=JSON.parse(r),n=["accessToken","clientId","refreshToken","dpopKey"].filter(i=>!s[i]);if(s.accessToken?.accountId||n.push("accountId"),n.length>0)throw new en.CredentialsProviderError(`Token validation failed, missing fields: ${n.join(", ")}`,{logger:this.logger,tryNextLink:!1});return s}catch(r){throw new en.CredentialsProviderError(`Failed to load token from ${e}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let r=this.getTokenFilePath(),s=CE.dirname(r);try{await vE.promises.mkdir(s,{recursive:!0})}catch{}await vE.promises.writeFile(r,JSON.stringify(e,null,2),"utf8")}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??CE.join(dY.homedir(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),s=df.createHash("sha256").update(r).digest("hex");return CE.join(e,`${s}.json`)}derToRawSignature(e){let r=2;if(e[r]!==2)throw new Error("Invalid DER signature");r++;let s=e[r++],n=e.subarray(r,r+s);if(r+=s,e[r]!==2)throw new Error("Invalid DER signature");r++;let i=e[r++],o=e.subarray(r,r+i);n=n[0]===0?n.subarray(1):n,o=o[0]===0?o.subarray(1):o;let a=Buffer.concat([Buffer.alloc(32-n.length),n]),c=Buffer.concat([Buffer.alloc(32-o.length),o]);return Buffer.concat([a,c])}createDPoPInterceptor(e){e.add(r=>async s=>{if(lY.HttpRequest.isInstance(s.request)){let n=s.request,i=`${n.protocol}//${n.hostname}${n.port?`:${n.port}`:""}${n.path}`,o=await this.generateDpop(n.method,i);n.headers={...n.headers,DPoP:o}}return r(s)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(e="POST",r){let s=await this.loadToken();try{let n=df.createPrivateKey({key:s.dpopKey,format:"pem",type:"sec1"}),o=df.createPublicKey(n).export({format:"der",type:"spki"}),a=-1;for(let P=0;P<o.length;P++)if(o[P]===4){a=P;break}let c=o.slice(a+1,a+33),u=o.slice(a+33,a+65),d={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:c.toString("base64url"),y:u.toString("base64url")}},l={jti:crypto.randomUUID(),htm:e,htu:r,iat:Math.floor(Date.now()/1e3)},h=Buffer.from(JSON.stringify(d)).toString("base64url"),m=Buffer.from(JSON.stringify(l)).toString("base64url"),g=`${h}.${m}`,w=df.sign("sha256",Buffer.from(g),n),x=this.derToRawSignature(w).toString("base64url");return`${g}.${x}`}catch(n){throw new en.CredentialsProviderError(`Failed to generate Dpop proof: ${n instanceof Error?n.message:String(n)}`,{logger:this.logger,tryNextLink:!1})}}},fY=t=>async({callerClientConfig:e}={})=>{t?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let r=await RE.parseKnownFiles(t||{}),s=RE.getProfileName({profile:t?.profile??e?.profile}),n=r[s];if(!n?.login_session)throw new en.CredentialsProviderError(`Profile ${s} does not contain login_session.`,{tryNextLink:!0,logger:t?.logger});let o=await new TE(n,t,e).loadCredentials();return uY.setCredentialFeature(o,"CREDENTIALS_LOGIN","AD")};kD.fromLoginCredentials=fY});function pY(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function hY(t){return{schemeId:"smithy.api#noAuth"}}var ec,ND,DD,mY,MD,xE=E(()=>{He();ec=v(ut());tc();ND=async(t,e,r)=>({operation:(0,ec.getSmithyContext)(e).operation,region:await(0,ec.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});DD=t=>{let e=[];return t.operation==="AssumeRoleWithWebIdentity"?e.push(hY(t)):e.push(pY(t)),e},mY=t=>Object.assign(t,{stsClientCtor:xr}),MD=t=>{let e=mY(t),r=zr(e);return Object.assign(r,{authSchemePreference:(0,ec.normalizeProvider)(t.authSchemePreference??[])})}});var LD,ff,pf=E(()=>{LD=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ff={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var QD,V,re,tn,Ve,WD,KD,Se,FD,Ar,bo,PE,qD,AE,YD,BD,Ge,UD,XD,JD,nt,Mt,$D,ZD,eM,jD,tM,HD,zD,VD,GD,gY,rM,sM=E(()=>{QD="required",V="type",re="argv",tn="booleanEquals",Ve="stringEquals",WD="sigv4",KD="us-east-1",Se="endpoint",FD="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ar="tree",bo="error",PE="getAttr",qD={[QD]:!1,[V]:"string"},AE={[QD]:!0,default:!1,[V]:"boolean"},YD={ref:"Endpoint"},BD={fn:"isSet",[re]:[{ref:"Region"}]},Ge={ref:"Region"},UD={fn:"aws.partition",[re]:[Ge],assign:"PartitionResult"},XD={ref:"UseFIPS"},JD={ref:"UseDualStack"},nt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:WD,signingName:"sts",signingRegion:KD}]},headers:{}},Mt={},$D={conditions:[{fn:Ve,[re]:[Ge,"aws-global"]}],[Se]:nt,[V]:Se},ZD={fn:tn,[re]:[XD,!0]},eM={fn:tn,[re]:[JD,!0]},jD={fn:PE,[re]:[{ref:"PartitionResult"},"supportsFIPS"]},tM={ref:"PartitionResult"},HD={fn:tn,[re]:[!0,{fn:PE,[re]:[tM,"supportsDualStack"]}]},zD=[{fn:"isSet",[re]:[YD]}],VD=[ZD],GD=[eM],gY={version:"1.0",parameters:{Region:qD,UseDualStack:AE,UseFIPS:AE,Endpoint:qD,UseGlobalEndpoint:AE},rules:[{conditions:[{fn:tn,[re]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[re]:zD},BD,UD,{fn:tn,[re]:[XD,!1]},{fn:tn,[re]:[JD,!1]}],rules:[{conditions:[{fn:Ve,[re]:[Ge,"ap-northeast-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"ap-south-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"ap-southeast-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"ap-southeast-2"]}],endpoint:nt,[V]:Se},$D,{conditions:[{fn:Ve,[re]:[Ge,"ca-central-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"eu-central-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"eu-north-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"eu-west-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"eu-west-2"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"eu-west-3"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"sa-east-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,KD]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"us-east-2"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"us-west-1"]}],endpoint:nt,[V]:Se},{conditions:[{fn:Ve,[re]:[Ge,"us-west-2"]}],endpoint:nt,[V]:Se},{endpoint:{url:FD,properties:{authSchemes:[{name:WD,signingName:"sts",signingRegion:"{Region}"}]},headers:Mt},[V]:Se}],[V]:Ar},{conditions:zD,rules:[{conditions:VD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[V]:bo},{conditions:GD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[V]:bo},{endpoint:{url:YD,properties:Mt,headers:Mt},[V]:Se}],[V]:Ar},{conditions:[BD],rules:[{conditions:[UD],rules:[{conditions:[ZD,eM],rules:[{conditions:[{fn:tn,[re]:[!0,jD]},HD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},[V]:Se}],[V]:Ar},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[V]:bo}],[V]:Ar},{conditions:VD,rules:[{conditions:[{fn:tn,[re]:[jD,!0]}],rules:[{conditions:[{fn:Ve,[re]:[{fn:PE,[re]:[tM,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Mt,headers:Mt},[V]:Se},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Mt,headers:Mt},[V]:Se}],[V]:Ar},{error:"FIPS is enabled but this partition does not support FIPS",[V]:bo}],[V]:Ar},{conditions:GD,rules:[{conditions:[HD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},[V]:Se}],[V]:Ar},{error:"DualStack is enabled but this partition does not support DualStack",[V]:bo}],[V]:Ar},$D,{endpoint:{url:FD,properties:Mt,headers:Mt},[V]:Se}],[V]:Ar}],[V]:Ar},{error:"Invalid Configuration: Missing Region",[V]:bo}]},rM=gY});var nM,Eo,yY,iM,oM=E(()=>{nM=v(Tn()),Eo=v(vs());sM();yY=new Eo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),iM=(t,e={})=>yY.get(t,()=>(0,Eo.resolveEndpoint)(rM,{endpointParams:t,logger:e.logger}));Eo.customEndpointFunctions.aws=nM.awsEndpointFunctions});var aM,cM,hf,mf,uM,lM=E(()=>{He();In();ht();aM=v(Y()),cM=v(jr()),hf=v(qe()),mf=v(Fe());xE();oM();uM=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??hf.fromBase64,base64Encoder:t?.base64Encoder??hf.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??iM,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??DD,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rr}],logger:t?.logger??new aM.NoOpLogger,protocol:t?.protocol??qs,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??cM.parseUrl,utf8Decoder:t?.utf8Decoder??mf.fromUtf8,utf8Encoder:t?.utf8Encoder??mf.toUtf8})});var gf,sn,dM,yf,rn,Sf,bf,fM,pM,hM,mM,gM=E(()=>{sd();He();gf=v(so()),sn=v(vt());ht();dM=v(no()),yf=v(nr()),rn=v(wr()),Sf=v(Es()),bf=v(Y()),fM=v(io()),pM=v(oo()),hM=v(Nn());lM();mM=t=>{(0,bf.emitWarningIfUnsupportedVersion)(process.version);let e=(0,pM.resolveDefaultsModeConfig)(t),r=()=>e().then(bf.loadConfigsForDefaultMode),s=uM(t);Cs(process.version);let n={profile:t?.profile,logger:s.logger};return{...s,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,rn.loadConfig)(Ts,n),bodyLengthChecker:t?.bodyLengthChecker??fM.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,gf.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:ro.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await t.credentialDefaultProvider(o?.__config||{})()),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rr}],maxAttempts:t?.maxAttempts??(0,rn.loadConfig)(yf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,rn.loadConfig)(sn.NODE_REGION_CONFIG_OPTIONS,{...sn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Sf.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,rn.loadConfig)({...yf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||hM.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??dM.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Sf.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,rn.loadConfig)(sn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,rn.loadConfig)(sn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,rn.loadConfig)(gf.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var yM,SM,bM=E(()=>{yM=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){let i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},SM=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Ef,_f,wf,EM,_M=E(()=>{Ef=v(Mn()),_f=v(ue()),wf=v(Y());bM();EM=(t,e)=>{let r=Object.assign((0,Ef.getAwsRegionExtensionConfiguration)(t),(0,wf.getDefaultExtensionConfiguration)(t),(0,_f.getHttpHandlerExtensionConfiguration)(t),yM(t));return e.forEach(s=>s.configure(r)),Object.assign(t,(0,Ef.resolveAwsRegionExtensionConfiguration)(r),(0,wf.resolveDefaultRuntimeConfig)(r),(0,_f.resolveHttpHandlerRuntimeConfig)(r),SM(r))}});var vf,wM,vM,Cf,CM,RM,TM,Rf,IE,xr,tc=E(()=>{vf=v(wi()),wM=v(vi()),vM=v(Ci()),Cf=v(kn()),CM=v(vt());ht();se();RM=v(Ji()),TM=v(vr()),Rf=v(nr()),IE=v(Y());xE();pf();gM();_M();xr=class extends IE.Client{config;constructor(...[e]){let r=mM(e||{});super(r),this.initConfig=r;let s=LD(r),n=(0,Cf.resolveUserAgentConfig)(s),i=(0,Rf.resolveRetryConfig)(n),o=(0,CM.resolveRegionConfig)(i),a=(0,vf.resolveHostHeaderConfig)(o),c=(0,TM.resolveEndpointConfig)(a),u=MD(c),d=EM(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(Sn(this.config)),this.middlewareStack.use((0,Cf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Rf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,RM.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,vf.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,wM.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,vM.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gn(this.config,{httpAuthSchemeParametersProvider:ND,identityProviderConfigProvider:async l=>new $r({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(yn(this.config))}destroy(){super.destroy()}}});var xM,Ct,Tf=E(()=>{xM=v(Y()),Ct=class t extends xM.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var rc,sc,nc,ic,oc,ac,cc,kE=E(()=>{Tf();rc=class t extends Ct{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},sc=class t extends Ct{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},nc=class t extends Ct{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ic=class t extends Ct{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},oc=class t extends Ct{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ac=class t extends Ct{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},cc=class t extends Ct{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var SY,bY,EY,_Y,wY,vY,OE,CY,RY,TY,xY,NE,AY,AM,PY,IY,kY,OY,NY,DY,MY,LY,PM,IM,FY,qY,BY,UY,$Y,jY,kM,HY,zY,OM,VY,NM,GY,QY,DE,WY,KY,YY,XY,JY,ZY,eX,tX,rX,sX,Un,$n,nX,jn,Hn,zn,iX,DM,oX,ie,aX,cX,ME,MM,LM,FM,qM,LE,BM,UM,$M,jM,HM,zM,VM,GM,QM,WM,KM,YM,uX,lX,FE,qE,xf=E(()=>{se();kE();Tf();SY="Arn",bY="AccessKeyId",EY="AssumeRole",_Y="AssumedRoleId",wY="AssumeRoleRequest",vY="AssumeRoleResponse",OE="AssumedRoleUser",CY="AssumeRoleWithWebIdentity",RY="AssumeRoleWithWebIdentityRequest",TY="AssumeRoleWithWebIdentityResponse",xY="Audience",NE="Credentials",AY="ContextAssertion",AM="DurationSeconds",PY="Expiration",IY="ExternalId",kY="ExpiredTokenException",OY="IDPCommunicationErrorException",NY="IDPRejectedClaimException",DY="InvalidIdentityTokenException",MY="Key",LY="MalformedPolicyDocumentException",PM="Policy",IM="PolicyArns",FY="ProviderArn",qY="ProvidedContexts",BY="ProvidedContextsListType",UY="ProvidedContext",$Y="PolicyDescriptorType",jY="ProviderId",kM="PackedPolicySize",HY="PackedPolicyTooLargeException",zY="Provider",OM="RoleArn",VY="RegionDisabledException",NM="RoleSessionName",GY="SecretAccessKey",QY="SubjectFromWebIdentityToken",DE="SourceIdentity",WY="SerialNumber",KY="SessionToken",YY="Tags",XY="TokenCode",JY="TransitiveTagKeys",ZY="Tag",eX="Value",tX="WebIdentityToken",rX="arn",sX="accessKeySecretType",Un="awsQueryError",$n="client",nX="clientTokenType",jn="error",Hn="httpError",zn="message",iX="policyDescriptorListType",DM="smithy.ts.sdk.synthetic.com.amazonaws.sts",oX="tagListType",ie="com.amazonaws.sts",aX=[0,ie,sX,8,0],cX=[0,ie,nX,8,0],ME=[3,ie,OE,0,[_Y,SY],[0,0],2],MM=[3,ie,wY,0,[OM,NM,IM,PM,AM,YY,JY,IY,WY,XY,DE,qY],[0,0,()=>YM,0,1,()=>lX,64,0,0,0,0,()=>uX],2],LM=[3,ie,vY,0,[NE,OE,kM,DE],[[()=>LE,0],()=>ME,1,0]],FM=[3,ie,RY,0,[OM,NM,tX,jY,IM,PM,AM],[0,0,[()=>cX,0],0,()=>YM,0,1],3],qM=[3,ie,TY,0,[NE,QY,OE,kM,zY,xY,DE],[[()=>LE,0],0,()=>ME,1,0,0,0]],LE=[3,ie,NE,0,[bY,GY,KY,PY],[0,[()=>aX,0],0,4],4],BM=[-3,ie,kY,{[Un]:["ExpiredTokenException",400],[jn]:$n,[Hn]:400},[zn],[0]];B.for(ie).registerError(BM,rc);UM=[-3,ie,OY,{[Un]:["IDPCommunicationError",400],[jn]:$n,[Hn]:400},[zn],[0]];B.for(ie).registerError(UM,cc);$M=[-3,ie,NY,{[Un]:["IDPRejectedClaim",403],[jn]:$n,[Hn]:403},[zn],[0]];B.for(ie).registerError($M,oc);jM=[-3,ie,DY,{[Un]:["InvalidIdentityToken",400],[jn]:$n,[Hn]:400},[zn],[0]];B.for(ie).registerError(jM,ac);HM=[-3,ie,LY,{[Un]:["MalformedPolicyDocument",400],[jn]:$n,[Hn]:400},[zn],[0]];B.for(ie).registerError(HM,sc);zM=[-3,ie,HY,{[Un]:["PackedPolicyTooLarge",400],[jn]:$n,[Hn]:400},[zn],[0]];B.for(ie).registerError(zM,nc);VM=[3,ie,$Y,0,[rX],[0]],GM=[3,ie,UY,0,[FY,AY],[0,0]],QM=[-3,ie,VY,{[Un]:["RegionDisabledException",403],[jn]:$n,[Hn]:403},[zn],[0]];B.for(ie).registerError(QM,ic);WM=[3,ie,ZY,0,[MY,eX],[0,0],2],KM=[-3,DM,"STSServiceException",0,[],[]];B.for(DM).registerError(KM,Ct);YM=[1,ie,iX,0,()=>VM],uX=[1,ie,BY,0,()=>GM],lX=[1,ie,oX,0,()=>WM],FE=[9,ie,EY,0,()=>MM,()=>LM],qE=[9,ie,CY,0,()=>FM,()=>qM]});var XM,JM,Vn,Af=E(()=>{XM=v(vr()),JM=v(Y());pf();xf();Vn=class extends JM.Command.classBuilder().ep(ff).m(function(e,r,s,n){return[(0,XM.getEndpointPlugin)(s,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(FE).build(){}});var ZM,eL,Gn,Pf=E(()=>{ZM=v(vr()),eL=v(Y());pf();xf();Gn=class extends eL.Command.classBuilder().ep(ff).m(function(e,r,s,n){return[(0,ZM.getEndpointPlugin)(s,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(qE).build(){}});var tL,dX,If,rL=E(()=>{tL=v(Y());Af();Pf();tc();dX={AssumeRoleCommand:Vn,AssumeRoleWithWebIdentityCommand:Gn},If=class extends xr{};(0,tL.createAggregatedClient)(dX,If)});var sL=E(()=>{Af();Pf()});var nL=E(()=>{});var iL,oL,aL,cL,uL,lL,dL=E(()=>{Ht();iL=v(Mn());Af();Pf();oL=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},aL=async(t,e,r,s={})=>{let n=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e,o="",a=n??i??(o=await(0,iL.stsRegionDefaultResolver)(s)());return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),a},cL=(t,e)=>{let r,s;return async(n,i)=>{if(s=n,!r){let{logger:d=t?.parentClientConfig?.logger,profile:l=t?.parentClientConfig?.profile,region:h,requestHandler:m=t?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:w=t?.parentClientConfig?.userAgentAppId}=t,R=await aL(h,t?.parentClientConfig?.region,g,{logger:d,profile:l}),x=!lL(m);r=new e({...t,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>s,region:R,requestHandler:x?m:void 0,logger:d})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new Vn(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=oL(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Rs(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},uL=(t,e)=>{let r;return async s=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:d,requestHandler:l=t?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=t?.parentClientConfig?.userAgentAppId}=t,g=await aL(d,t?.parentClientConfig?.region,h,{logger:c,profile:u}),w=!lL(l);r=new e({...t,userAgentAppId:m,profile:u,region:g,requestHandler:w?l:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:i}=await r.send(new Gn(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let o=oL(i),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...o&&{accountId:o}};return o&&Rs(a,"RESOLVED_ACCOUNT_ID","T"),Rs(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},lL=t=>t?.metadata?.handlerProtocol==="h2"});var fL,pL,hL,fX,mL=E(()=>{dL();tc();fL=(t,e)=>e?class extends t{constructor(s){super(s);for(let n of e)this.middlewareStack.use(n)}}:t,pL=(t={},e)=>cL(t,fL(xr,e)),hL=(t={},e)=>uL(t,fL(xr,e)),fX=t=>e=>t({roleAssumer:pL(e),roleAssumerWithWebIdentity:hL(e),...e})});var BE={};ot(BE,{AssumeRole$:()=>FE,AssumeRoleCommand:()=>Vn,AssumeRoleRequest$:()=>MM,AssumeRoleResponse$:()=>LM,AssumeRoleWithWebIdentity$:()=>qE,AssumeRoleWithWebIdentityCommand:()=>Gn,AssumeRoleWithWebIdentityRequest$:()=>FM,AssumeRoleWithWebIdentityResponse$:()=>qM,AssumedRoleUser$:()=>ME,Credentials$:()=>LE,ExpiredTokenException:()=>rc,ExpiredTokenException$:()=>BM,IDPCommunicationErrorException:()=>cc,IDPCommunicationErrorException$:()=>UM,IDPRejectedClaimException:()=>oc,IDPRejectedClaimException$:()=>$M,InvalidIdentityTokenException:()=>ac,InvalidIdentityTokenException$:()=>jM,MalformedPolicyDocumentException:()=>sc,MalformedPolicyDocumentException$:()=>HM,PackedPolicyTooLargeException:()=>nc,PackedPolicyTooLargeException$:()=>zM,PolicyDescriptorType$:()=>VM,ProvidedContext$:()=>GM,RegionDisabledException:()=>ic,RegionDisabledException$:()=>QM,STS:()=>If,STSClient:()=>xr,STSServiceException:()=>Ct,STSServiceException$:()=>KM,Tag$:()=>WM,__Client:()=>IE.Client,decorateDefaultCredentialProvider:()=>fX,getDefaultRoleAssumer:()=>pL,getDefaultRoleAssumerWithWebIdentity:()=>hL});var UE=E(()=>{tc();rL();sL();xf();kE();nL();mL();Tf()});var HE=S(gL=>{"use strict";var jE=_r(),$E=Ze(),pX=require("child_process"),hX=require("util"),mX=(Ht(),J(Hr)),gX=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let s=e.AccountId;!s&&r?.[t]?.aws_account_id&&(s=r[t].aws_account_id);let n={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...s&&{accountId:s}};return mX.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},yX=async(t,e,r)=>{let s=e[t];if(e[t]){let n=s.credential_process;if(n!==void 0){let i=hX.promisify(jE.externalDataInterceptor?.getTokenRecord?.().exec??pX.exec);try{let{stdout:o}=await i(n),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return gX(t,a,e)}catch(o){throw new $E.CredentialsProviderError(o.message,{logger:r})}}else throw new $E.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new $E.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},SX=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await jE.parseKnownFiles(t);return yX(jE.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};gL.fromProcess=SX});var zE=S(Pr=>{"use strict";var bX=Pr&&Pr.__createBinding||(Object.create?(function(t,e,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,n)}):(function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]})),EX=Pr&&Pr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),_X=Pr&&Pr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var s=t(e),n=0;n<s.length;n++)s[n]!=="default"&&bX(r,e,s[n]);return EX(r,e),r}})();Object.defineProperty(Pr,"__esModule",{value:!0});Pr.fromWebToken=void 0;var wX=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:i,policyArns:o,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:d}=await Promise.resolve().then(()=>_X((UE(),J(BE))));u=d({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};Pr.fromWebToken=wX});var SL=S(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.fromTokenFile=void 0;var vX=(Ht(),J(Hr)),CX=Ze(),RX=_r(),TX=require("fs"),xX=zE(),yL="AWS_WEB_IDENTITY_TOKEN_FILE",AX="AWS_ROLE_ARN",PX="AWS_ROLE_SESSION_NAME",IX=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[yL],s=t?.roleArn??process.env[AX],n=t?.roleSessionName??process.env[PX];if(!r||!s)throw new CX.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,xX.fromWebToken)({...t,webIdentityToken:RX.externalDataInterceptor?.getTokenRecord?.()[r]??(0,TX.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(e);return r===process.env[yL]&&(0,vX.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};kf.fromTokenFile=IX});var VE=S(uc=>{"use strict";var bL=SL(),EL=zE();Object.keys(bL).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(uc,t)&&Object.defineProperty(uc,t,{enumerable:!0,get:function(){return bL[t]}})});Object.keys(EL).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(uc,t)&&Object.defineProperty(uc,t,{enumerable:!0,get:function(){return EL[t]}})})});var TL=S(RL=>{"use strict";var QE=_r(),lc=Ze(),Zr=(Ht(),J(Hr)),kX=OD(),OX=(t,e,r)=>{let s={EcsContainer:async n=>{let{fromHttp:i}=await Promise.resolve().then(()=>v(Lb())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>v(wa()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>lc.chain(i(n??{}),o(n))().then(GE)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>v(wa()));return async()=>i(n)().then(GE)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>v(Ab()));return async()=>i(n)().then(GE)}};if(t in s)return s[t];throw new lc.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},GE=t=>Zr.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),NX=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(DX(t,{profile:e,logger:r})||MX(t,{profile:e,logger:r})),DX=(t,{profile:e,logger:r})=>{let s=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return s&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),s},MX=(t,{profile:e,logger:r})=>{let s=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return s&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),s},LX=async(t,e,r,s,n={},i)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=e[t],{source_profile:a,region:c}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(UE(),BE));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...s,...r?.parentClientConfig,region:c??r?.parentClientConfig?.region??s?.region}},r.clientPlugins)}if(a&&a in n)throw new lc.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${QE.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let u=a?i(a,e,r,s,{...n,[a]:!0},_L(e[a]??{})):(await OX(o.credential_source,t,r.logger)(r))();if(_L(o))return u.then(d=>Zr.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new lc.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let h=await u;return r.roleAssumer(h,d).then(m=>Zr.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},_L=t=>!t.role_arn&&!!t.credential_source,FX=t=>!!(t&&t.login_session),qX=async(t,e,r)=>{let s=await kX.fromLoginCredentials({...e,profile:t})({callerClientConfig:r});return Zr.setCredentialFeature(s,"CREDENTIALS_PROFILE_LOGIN","AC")},BX=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",UX=async(t,e)=>Promise.resolve().then(()=>v(HE())).then(({fromProcess:r})=>r({...t,profile:e})().then(s=>Zr.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),$X=async(t,e,r={},s)=>{let{fromSSO:n}=await Promise.resolve().then(()=>v(aE()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})({callerClientConfig:s}).then(i=>e.sso_session?Zr.setCredentialFeature(i,"CREDENTIALS_PROFILE_SSO","r"):Zr.setCredentialFeature(i,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},jX=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),wL=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,vL=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Zr.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},HX=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,zX=async(t,e,r)=>Promise.resolve().then(()=>v(VE())).then(({fromTokenFile:s})=>s({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})({callerClientConfig:r}).then(n=>Zr.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),CL=async(t,e,r,s,n={},i=!1)=>{let o=e[t];if(Object.keys(n).length>0&&wL(o))return vL(o,r);if(i||NX(o,{profile:t,logger:r.logger}))return LX(t,e,r,s,n,CL);if(wL(o))return vL(o,r);if(HX(o))return zX(o,r,s);if(BX(o))return UX(r,t);if(jX(o))return await $X(t,o,r,s);if(FX(o))return qX(t,r,s);throw new lc.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},VX=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await QE.parseKnownFiles(t);return CL(QE.getProfileName({profile:t.profile??e?.profile}),r,t,e)};RL.fromIni=VX});var IL=S(Of=>{"use strict";var WE=Ab(),dc=Ze(),GX=_r(),xL="AWS_EC2_METADATA_DISABLED",QX=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>v(wa()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>v(Lb()));return dc.chain(i(t),s(t))}return process.env[xL]&&process.env[xL]!=="false"?async()=>{throw new dc.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(t))};function WX(t,e){let r=KX(t),s,n,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),s)await s;else if(!i||e?.(i))if(i)n||(n=r(a).then(c=>{i=c,n=void 0}));else return s=r(a).then(c=>{i=c,s=void 0}),o(a);return i};return o}var KX=t=>async e=>{let r;for(let s of t)try{return await s(e)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},AL=!1,YX=(t={})=>WX([async()=>{if(t.profile??process.env[GX.ENV_PROFILE])throw process.env[WE.ENV_KEY]&&process.env[WE.ENV_SECRET]&&(AL||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),AL=!0)),new dc.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),WE.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:i,ssoSession:o}=t;if(!r&&!s&&!n&&!i&&!o)throw new dc.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>v(aE()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>v(TL()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>v(HE()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>v(VE()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await QX(t))()),async()=>{throw new dc.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],PL),XX=t=>t?.expiration!==void 0,PL=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;Of.credentialsTreatedAsExpired=PL;Of.credentialsWillNeedRefresh=XX;Of.defaultProvider=YX});var WL=S(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.ruleSet=void 0;var VL="required",Rt="fn",Tt="argv",Qn="ref",nn="properties",on="headers",kL=!0,OL="isSet",fc="booleanEquals",_o="error",Ir="endpoint",es="tree",Nf="PartitionResult",KE="stringEquals",NL={[VL]:!1,type:"string"},DL={[VL]:!0,default:!1,type:"boolean"},ML={[Qn]:"Endpoint"},GL={[Rt]:fc,[Tt]:[{[Qn]:"UseFIPS"},!0]},QL={[Rt]:fc,[Tt]:[{[Qn]:"UseDualStack"},!0]},Yt={},LL={[Rt]:"getAttr",[Tt]:[{[Qn]:Nf},"supportsFIPS"]},FL={[Rt]:fc,[Tt]:[!0,{[Rt]:"getAttr",[Tt]:[{[Qn]:Nf},"supportsDualStack"]}]},YE={[Rt]:"getAttr",[Tt]:[{[Qn]:Nf},"name"]},qL={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[nn]:{},[on]:{}},BL={url:"https://secretsmanager.{Region}.amazonaws.com",[nn]:{},[on]:{}},UL=[GL],$L=[QL],jL=[{[Qn]:"Region"}],HL=[{[Rt]:KE,[Tt]:["aws",YE]}],zL=[{[Rt]:KE,[Tt]:["aws-us-gov",YE]}],JX={version:"1.0",parameters:{Region:NL,UseDualStack:DL,UseFIPS:DL,Endpoint:NL},rules:[{conditions:[{[Rt]:OL,[Tt]:[ML]}],rules:[{conditions:UL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:_o},{conditions:$L,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:_o},{endpoint:{url:ML,[nn]:Yt,[on]:Yt},type:Ir}],type:es},{conditions:[{[Rt]:OL,[Tt]:jL}],rules:[{conditions:[{[Rt]:"aws.partition",[Tt]:jL,assign:Nf}],rules:[{conditions:[GL,QL],rules:[{conditions:[{[Rt]:fc,[Tt]:[kL,LL]},FL],rules:[{conditions:HL,endpoint:qL,type:Ir},{conditions:zL,endpoint:qL,type:Ir},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[nn]:Yt,[on]:Yt},type:Ir}],type:es},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:_o}],type:es},{conditions:UL,rules:[{conditions:[{[Rt]:fc,[Tt]:[LL,kL]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[nn]:Yt,[on]:Yt},type:Ir}],type:es},{error:"FIPS is enabled but this partition does not support FIPS",type:_o}],type:es},{conditions:$L,rules:[{conditions:[FL],rules:[{conditions:HL,endpoint:BL,type:Ir},{conditions:[{[Rt]:KE,[Tt]:["aws-cn",YE]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[nn]:Yt,[on]:Yt},type:Ir},{conditions:zL,endpoint:BL,type:Ir},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[nn]:Yt,[on]:Yt},type:Ir}],type:es},{error:"DualStack is enabled but this partition does not support DualStack",type:_o}],type:es},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[nn]:Yt,[on]:Yt},type:Ir}],type:es}],type:es},{error:"Invalid Configuration: Missing Region",type:_o}]};Df.ruleSet=JX});var KL=S(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.defaultEndpointResolver=void 0;var ZX=Tn(),XE=vs(),eJ=WL(),tJ=new XE.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),rJ=(t,e={})=>tJ.get(t,()=>(0,XE.resolveEndpoint)(eJ.ruleSet,{endpointParams:t,logger:e.logger}));Mf.defaultEndpointResolver=rJ;XE.customEndpointFunctions.aws=ZX.awsEndpointFunctions});var JL=S(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.getRuntimeConfig=void 0;var sJ=(He(),J(Bs)),nJ=(In(),J(ab)),iJ=Y(),oJ=jr(),YL=qe(),XL=Fe(),aJ=xb(),cJ=KL(),uJ=t=>({apiVersion:"2017-10-17",base64Decoder:t?.base64Decoder??YL.fromBase64,base64Encoder:t?.base64Encoder??YL.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??cJ.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??aJ.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new sJ.AwsSdkSigV4Signer}],logger:t?.logger??new iJ.NoOpLogger,protocol:t?.protocol??nJ.AwsJson1_1Protocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.secretsmanager",version:"2017-10-17",serviceTarget:"secretsmanager"},serviceId:t?.serviceId??"Secrets Manager",urlParser:t?.urlParser??oJ.parseUrl,utf8Decoder:t?.utf8Decoder??XL.fromUtf8,utf8Encoder:t?.utf8Encoder??XL.toUtf8});Lf.getRuntimeConfig=uJ});var nF=S(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.getRuntimeConfig=void 0;var lJ=(na(),J(sa)),dJ=lJ.__importDefault(sI()),ZL=(He(),J(Bs)),fJ=IL(),eF=so(),Ff=vt(),pJ=no(),tF=nr(),Wn=wr(),rF=Es(),sF=Y(),hJ=io(),mJ=oo(),gJ=Nn(),yJ=JL(),SJ=t=>{(0,sF.emitWarningIfUnsupportedVersion)(process.version);let e=(0,mJ.resolveDefaultsModeConfig)(t),r=()=>e().then(sF.loadConfigsForDefaultMode),s=(0,yJ.getRuntimeConfig)(t);(0,ZL.emitWarningIfUnsupportedVersion)(process.version);let n={profile:t?.profile,logger:s.logger};return{...s,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Wn.loadConfig)(ZL.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??hJ.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??fJ.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,eF.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:dJ.default.version}),maxAttempts:t?.maxAttempts??(0,Wn.loadConfig)(tF.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Wn.loadConfig)(Ff.NODE_REGION_CONFIG_OPTIONS,{...Ff.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:rF.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Wn.loadConfig)({...tF.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||gJ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??pJ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??rF.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Wn.loadConfig)(Ff.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,Wn.loadConfig)(Ff.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,Wn.loadConfig)(eF.NODE_APP_ID_CONFIG_OPTIONS,n)}};qf.getRuntimeConfig=SJ});var dq=S(T=>{"use strict";var iF=wi(),bJ=vi(),EJ=Ci(),oF=kn(),_J=vt(),wo=(ht(),J(Mi)),xt=(se(),J(Uu)),wJ=Ji(),be=vr(),aF=nr(),oe=Y(),cF=xb(),vJ=nF(),uF=Mn(),lF=ue(),CJ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Re={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},RJ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,s=t.credentials;return{setHttpAuthScheme(n){let i=e.findIndex(o=>o.schemeId===n.schemeId);i===-1?e.push(n):e.splice(i,1,n)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},TJ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),xJ=(t,e)=>{let r=Object.assign(uF.getAwsRegionExtensionConfiguration(t),oe.getDefaultExtensionConfiguration(t),lF.getHttpHandlerExtensionConfiguration(t),RJ(t));return e.forEach(s=>s.configure(r)),Object.assign(t,uF.resolveAwsRegionExtensionConfiguration(r),oe.resolveDefaultRuntimeConfig(r),lF.resolveHttpHandlerRuntimeConfig(r),TJ(r))},Kn=class extends oe.Client{config;constructor(...[e]){let r=vJ.getRuntimeConfig(e||{});super(r),this.initConfig=r;let s=CJ(r),n=oF.resolveUserAgentConfig(s),i=aF.resolveRetryConfig(n),o=_J.resolveRegionConfig(i),a=iF.resolveHostHeaderConfig(o),c=be.resolveEndpointConfig(a),u=cF.resolveHttpAuthSchemeConfig(c),d=xJ(u,e?.extensions||[]);this.config=d,this.middlewareStack.use(xt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(oF.getUserAgentPlugin(this.config)),this.middlewareStack.use(aF.getRetryPlugin(this.config)),this.middlewareStack.use(wJ.getContentLengthPlugin(this.config)),this.middlewareStack.use(iF.getHostHeaderPlugin(this.config)),this.middlewareStack.use(bJ.getLoggerPlugin(this.config)),this.middlewareStack.use(EJ.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(wo.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:cF.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new wo.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(wo.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},it=class t extends oe.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Bf=class t extends it{name="DecryptionFailure";$fault="client";Message;constructor(e){super({name:"DecryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Uf=class t extends it{name="InternalServiceError";$fault="server";Message;constructor(e){super({name:"InternalServiceError",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},$f=class t extends it{name="InvalidNextTokenException";$fault="client";Message;constructor(e){super({name:"InvalidNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},jf=class t extends it{name="InvalidParameterException";$fault="client";Message;constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Hf=class t extends it{name="InvalidRequestException";$fault="client";Message;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},zf=class t extends it{name="ResourceNotFoundException";$fault="client";Message;constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Vf=class t extends it{name="EncryptionFailure";$fault="client";Message;constructor(e){super({name:"EncryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Gf=class t extends it{name="LimitExceededException";$fault="client";Message;constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Qf=class t extends it{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Wf=class t extends it{name="PreconditionNotMetException";$fault="client";Message;constructor(e){super({name:"PreconditionNotMetException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Kf=class t extends it{name="ResourceExistsException";$fault="client";Message;constructor(e){super({name:"ResourceExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},Yf=class t extends it{name="PublicPolicyException";$fault="client";Message;constructor(e){super({name:"PublicPolicyException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.Message=e.Message}},AJ="AutomaticallyAfterDays",PJ="APIErrorListType",IJ="APIErrorType",Ne="ARN",dF="AddReplicaRegions",kJ="AddReplicaRegionListType",OJ="BatchGetSecretValue",NJ="BatchGetSecretValueRequest",DJ="BatchGetSecretValueResponse",MJ="BlockPublicPolicy",gc="CreatedDate",LJ="CheckName",FJ="CancelRotateSecret",qJ="CancelRotateSecretRequest",BJ="CancelRotateSecretResponse",Sp="ClientRequestToken",UJ="CreateSecret",$J="CreateSecretRequest",jJ="CreateSecretResponse",bp="Description",HJ="DeletionDate",fF="DeletedDate",zJ="DecryptionFailure",VJ="DeleteResourcePolicy",GJ="DeleteResourcePolicyRequest",QJ="DeleteResourcePolicyResponse",WJ="DeleteSecret",KJ="DeleteSecretRequest",YJ="DeleteSecretResponse",XJ="DescribeSecretRequest",JJ="DescribeSecretResponse",ZJ="DescribeSecret",eZ="Duration",tZ="Errors",rZ="ErrorCode",sZ="ExcludeCharacters",nZ="EncryptionFailure",iZ="ExcludeLowercase",oZ="ErrorMessage",aZ="ExcludeNumbers",cZ="ExcludePunctuation",JE="ExternalSecretRotationMetadata",uZ="ExternalSecretRotationMetadataItem",lZ="ExternalSecretRotationMetadataType",ZE="ExternalSecretRotationRoleArn",dZ="ExcludeUppercase",pF="Filters",fZ="ForceDeleteWithoutRecovery",pZ="FiltersListType",hF="ForceOverwriteReplicaSecret",hZ="Filter",mZ="GetRandomPassword",gZ="GetRandomPasswordRequest",yZ="GetRandomPasswordResponse",SZ="GetResourcePolicyRequest",bZ="GetResourcePolicyResponse",EZ="GetResourcePolicy",_Z="GetSecretValue",wZ="GetSecretValueRequest",vZ="GetSecretValueResponse",CZ="IncludeDeprecated",RZ="InvalidNextTokenException",TZ="IncludePlannedDeletion",xZ="InvalidParameterException",AZ="InvalidRequestException",PZ="IncludeSpace",IZ="InternalServiceError",e0="Key",vo="KmsKeyId",kZ="KmsKeyIds",Ep="LastAccessedDate",mF="LastChangedDate",OZ="LimitExceededException",gF="LastRotatedDate",NZ="ListSecrets",DZ="ListSecretsRequest",MZ="ListSecretsResponse",LZ="ListSecretVersionIds",FZ="ListSecretVersionIdsRequest",qZ="ListSecretVersionIdsResponse",Lt="Message",BZ="MalformedPolicyDocumentException",t0="MaxResults",UZ="MoveToVersionId",Qe="Name",yF="NextRotationDate",Co="NextToken",SF="OwningService",$Z="PasswordLength",jZ="PreconditionNotMetException",HZ="PublicPolicyException",bF="PrimaryRegion",zZ="PutResourcePolicy",VZ="PutResourcePolicyRequest",GZ="PutResourcePolicyResponse",QZ="PutSecretValue",WZ="PutSecretValueRequest",KZ="PutSecretValueResponse",YZ="PolicyValidationPassed",EF="Region",_F="RotationEnabled",XZ="ResourceExistsException",JZ="RequireEachIncludedType",ZZ="RemoveFromVersionId",eee="RotateImmediately",r0="RotationLambdaARN",tee="ResourceNotFoundException",ree="RandomPassword",see="RandomPasswordType",s0="ResourcePolicy",n0="RotationRules",nee="RemoveRegionsFromReplication",iee="RemoveRegionsFromReplicationRequest",oee="RemoveRegionsFromReplicationResponse",aee="RemoveReplicaRegions",cee="ReplicaRegionType",uee="RotationRulesType",_p="ReplicationStatus",lee="ReplicationStatusListType",dee="RestoreSecretRequest",fee="RestoreSecretResponse",pee="RotateSecretRequest",hee="RotateSecretResponse",mee="ReplicationStatusType",gee="ReplicateSecretToRegions",yee="ReplicateSecretToRegionsRequest",See="ReplicateSecretToRegionsResponse",bee="RestoreSecret",Eee="RotateSecret",_ee="RotationToken",wee="RotationTokenType",vee="RecoveryWindowInDays",Cee="Status",yc="SecretBinary",Ree="SecretBinaryType",Tee="SortBy",xee="ScheduleExpression",ke="SecretId",Aee="SecretIdList",Pee="SecretList",Iee="SecretListEntry",kee="SecretListType",Oee="StatusMessage",Nee="SortOrder",Dee="StopReplicationToReplica",Mee="StopReplicationToReplicaRequest",Lee="StopReplicationToReplicaResponse",Sc="SecretString",Fee="SecretStringType",qee="SecretValues",Bee="SecretValueEntry",Uee="SecretVersionsListEntry",$ee="SecretVersionsListType",jee="SecretValuesType",Hee="SecretVersionsToStages",wF="SecretVersionsToStagesMapType",wp="Tags",zee="TagKeys",Vee="TagListType",Gee="TagResource",Qee="TagResourceRequest",Wee="Tag",vp="Type",Kee="UntagResource",Yee="UntagResourceRequest",Xee="UpdateSecret",Jee="UpdateSecretRequest",Zee="UpdateSecretResponse",ete="UpdateSecretVersionStage",tte="UpdateSecretVersionStageRequest",rte="UpdateSecretVersionStageResponse",vF="Value",ste="ValidationErrors",nte="ValidationErrorsEntry",ite="ValidationErrorsType",ts="VersionId",ote="VersionIdsToStages",ate="ValidateResourcePolicy",cte="ValidateResourcePolicyRequest",ute="ValidateResourcePolicyResponse",CF="VersionStage",bc="VersionStages",lte="Values",dte="Versions",dr="client",Xt="error",fte="server",RF="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",k="com.amazonaws.secretsmanager",pte=[0,k,see,8,0],hte=[0,k,wee,8,0],Ec=[0,k,Ree,8,21],_c=[0,k,Fee,8,0],TF=[3,k,IJ,0,[ke,rZ,Lt],[0,0,0]],xF=[3,k,NJ,0,[Aee,pF,t0,Co],[64,()=>$2,1,0]],AF=[3,k,DJ,0,[qee,Co,tZ],[[()=>yte,0],0,()=>mte]],PF=[3,k,qJ,0,[ke],[0],1],IF=[3,k,BJ,0,[Ne,Qe,ts],[0,0,0]],kF=[3,k,$J,0,[Qe,Sp,bp,vo,yc,Sc,wp,dF,hF,vp],[0,[0,4],0,0,[()=>Ec,0],[()=>_c,0],()=>Tp,()=>U2,2,0],1],OF=[3,k,jJ,0,[Ne,Qe,ts,_p],[0,0,0,()=>Rp]],NF=[-3,k,zJ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(NF,Bf);var DF=[3,k,GJ,0,[ke],[0],1],MF=[3,k,QJ,0,[Ne,Qe],[0,0]],LF=[3,k,KJ,0,[ke,vee,fZ],[0,1,2],1],FF=[3,k,YJ,0,[Ne,Qe,HJ],[0,0,4]],qF=[3,k,XJ,0,[ke],[0],1],BF=[3,k,JJ,0,[Ne,Qe,vp,bp,vo,_F,r0,n0,JE,ZE,gF,mF,Ep,fF,yF,wp,ote,SF,gc,bF,_p],[0,0,0,0,0,2,0,()=>Cp,()=>i0,0,4,4,4,4,4,()=>Tp,[2,k,wF,0,0,64],0,4,0,()=>Rp]],UF=[-3,k,nZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(UF,Vf);var $F=[3,k,uZ,0,[e0,vF],[0,0]],jF=[3,k,hZ,0,[e0,lte],[0,64]],HF=[3,k,gZ,0,[$Z,sZ,aZ,cZ,dZ,iZ,PZ,JZ],[1,0,2,2,2,2,2,2]],zF=[3,k,yZ,0,[ree],[[()=>pte,0]]],VF=[3,k,SZ,0,[ke],[0],1],GF=[3,k,bZ,0,[Ne,Qe,s0],[0,0,0]],QF=[3,k,wZ,0,[ke,ts,CF],[0,0,0],1],WF=[3,k,vZ,0,[Ne,Qe,ts,yc,Sc,bc,gc],[0,0,0,[()=>Ec,0],[()=>_c,0],64,4]],KF=[-3,k,IZ,{[Xt]:fte},[Lt],[0]];xt.TypeRegistry.for(k).registerError(KF,Uf);var YF=[-3,k,RZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(YF,$f);var XF=[-3,k,xZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(XF,jf);var JF=[-3,k,AZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(JF,Hf);var ZF=[-3,k,OZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(ZF,Gf);var e2=[3,k,DZ,0,[TZ,t0,Co,pF,Nee,Tee],[2,1,0,()=>$2,0,0]],t2=[3,k,MZ,0,[Pee,Co],[()=>gte,0]],r2=[3,k,FZ,0,[ke,t0,Co,CZ],[0,1,0,2],1],s2=[3,k,qZ,0,[dte,Co,Ne,Qe],[()=>Ste,0,0,0]],n2=[-3,k,BZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(n2,Qf);var i2=[-3,k,jZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(i2,Wf);var o2=[-3,k,HZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(o2,Yf);var a2=[3,k,VZ,0,[ke,s0,MJ],[0,0,2],2],c2=[3,k,GZ,0,[Ne,Qe],[0,0]],u2=[3,k,WZ,0,[ke,Sp,yc,Sc,bc,_ee],[0,[0,4],[()=>Ec,0],[()=>_c,0],64,[()=>hte,0]],1],l2=[3,k,KZ,0,[Ne,Qe,ts,bc],[0,0,0,64]],d2=[3,k,iee,0,[ke,aee],[0,64],2],f2=[3,k,oee,0,[Ne,_p],[0,()=>Rp]],p2=[3,k,cee,0,[EF,vo],[0,0]],h2=[3,k,yee,0,[ke,dF,hF],[0,()=>U2,2],2],m2=[3,k,See,0,[Ne,_p],[0,()=>Rp]],g2=[3,k,mee,0,[EF,vo,Cee,Oee,Ep],[0,0,0,0,4]],y2=[-3,k,XZ,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(y2,Kf);var S2=[-3,k,tee,{[Xt]:dr},[Lt],[0]];xt.TypeRegistry.for(k).registerError(S2,zf);var b2=[3,k,dee,0,[ke],[0],1],E2=[3,k,fee,0,[Ne,Qe],[0,0]],_2=[3,k,pee,0,[ke,Sp,r0,n0,JE,ZE,eee],[0,[0,4],0,()=>Cp,()=>i0,0,2],1],w2=[3,k,hee,0,[Ne,Qe,ts],[0,0,0]],Cp=[3,k,uee,0,[AJ,eZ,xee],[1,0,0]],v2=[3,k,Iee,0,[Ne,Qe,vp,bp,vo,_F,r0,n0,JE,ZE,gF,mF,Ep,fF,yF,wp,Hee,SF,gc,bF],[0,0,0,0,0,2,0,()=>Cp,()=>i0,0,4,4,4,4,4,()=>Tp,[2,k,wF,0,0,64],0,4,0]],C2=[3,k,Bee,0,[Ne,Qe,ts,yc,Sc,bc,gc],[0,0,0,[()=>Ec,0],[()=>_c,0],64,4]],R2=[3,k,Uee,0,[ts,bc,Ep,gc,kZ],[0,64,4,4,64]],T2=[3,k,Mee,0,[ke],[0],1],x2=[3,k,Lee,0,[Ne],[0]],A2=[3,k,Wee,0,[e0,vF],[0,0]],P2=[3,k,Qee,0,[ke,wp],[0,()=>Tp],2],I2=[3,k,Yee,0,[ke,zee],[0,64],2],k2=[3,k,Jee,0,[ke,Sp,bp,vo,yc,Sc,vp],[0,[0,4],0,0,[()=>Ec,0],[()=>_c,0],0],1],O2=[3,k,Zee,0,[Ne,Qe,ts],[0,0,0]],N2=[3,k,tte,0,[ke,CF,ZZ,UZ],[0,0,0,0],2],D2=[3,k,rte,0,[Ne,Qe],[0,0]],M2=[3,k,cte,0,[s0,ke],[0,0],1],L2=[3,k,ute,0,[YZ,ste],[2,()=>bte]],F2=[3,k,nte,0,[LJ,oZ],[0,0]],q2="unit",B2=[-3,RF,"SecretsManagerServiceException",0,[],[]];xt.TypeRegistry.for(RF).registerError(B2,it);var U2=[1,k,kJ,0,()=>p2],mte=[1,k,PJ,0,()=>TF],i0=[1,k,lZ,0,()=>$F],$2=[1,k,pZ,0,()=>jF],Rp=[1,k,lee,0,()=>g2],gte=[1,k,kee,0,()=>v2],yte=[1,k,jee,0,[()=>C2,0]],Ste=[1,k,$ee,0,()=>R2],Tp=[1,k,Vee,0,()=>A2],bte=[1,k,ite,0,()=>F2],j2=[9,k,OJ,0,()=>xF,()=>AF],H2=[9,k,FJ,0,()=>PF,()=>IF],z2=[9,k,UJ,0,()=>kF,()=>OF],V2=[9,k,VJ,0,()=>DF,()=>MF],G2=[9,k,WJ,0,()=>LF,()=>FF],Q2=[9,k,ZJ,0,()=>qF,()=>BF],W2=[9,k,mZ,0,()=>HF,()=>zF],K2=[9,k,EZ,0,()=>VF,()=>GF],Y2=[9,k,_Z,0,()=>QF,()=>WF],X2=[9,k,NZ,0,()=>e2,()=>t2],J2=[9,k,LZ,0,()=>r2,()=>s2],Z2=[9,k,zZ,0,()=>a2,()=>c2],eq=[9,k,QZ,0,()=>u2,()=>l2],tq=[9,k,nee,0,()=>d2,()=>f2],rq=[9,k,gee,0,()=>h2,()=>m2],sq=[9,k,bee,0,()=>b2,()=>E2],nq=[9,k,Eee,0,()=>_2,()=>w2],iq=[9,k,Dee,0,()=>T2,()=>x2],oq=[9,k,Gee,0,()=>P2,()=>q2],aq=[9,k,Kee,0,()=>I2,()=>q2],cq=[9,k,Xee,0,()=>k2,()=>O2],uq=[9,k,ete,0,()=>N2,()=>D2],lq=[9,k,ate,0,()=>M2,()=>L2],pc=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(j2).build(){},Xf=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(H2).build(){},Jf=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(z2).build(){},Zf=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(V2).build(){},ep=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(G2).build(){},tp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(Q2).build(){},rp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(W2).build(){},sp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(K2).build(){},np=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(Y2).build(){},hc=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(X2).build(){},mc=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(J2).build(){},ip=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(Z2).build(){},op=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(eq).build(){},ap=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(tq).build(){},cp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(rq).build(){},up=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(sq).build(){},lp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(nq).build(){},dp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(iq).build(){},fp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(oq).build(){},pp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(aq).build(){},hp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(cq).build(){},mp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(uq).build(){},gp=class extends oe.Command.classBuilder().ep(Re).m(function(e,r,s,n){return[be.getEndpointPlugin(s,e.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(lq).build(){},Ete={BatchGetSecretValueCommand:pc,CancelRotateSecretCommand:Xf,CreateSecretCommand:Jf,DeleteResourcePolicyCommand:Zf,DeleteSecretCommand:ep,DescribeSecretCommand:tp,GetRandomPasswordCommand:rp,GetResourcePolicyCommand:sp,GetSecretValueCommand:np,ListSecretsCommand:hc,ListSecretVersionIdsCommand:mc,PutResourcePolicyCommand:ip,PutSecretValueCommand:op,RemoveRegionsFromReplicationCommand:ap,ReplicateSecretToRegionsCommand:cp,RestoreSecretCommand:up,RotateSecretCommand:lp,StopReplicationToReplicaCommand:dp,TagResourceCommand:fp,UntagResourceCommand:pp,UpdateSecretCommand:hp,UpdateSecretVersionStageCommand:mp,ValidateResourcePolicyCommand:gp},yp=class extends Kn{};oe.createAggregatedClient(Ete,yp);var _te=wo.createPaginator(Kn,pc,"NextToken","NextToken","MaxResults"),wte=wo.createPaginator(Kn,hc,"NextToken","NextToken","MaxResults"),vte=wo.createPaginator(Kn,mc,"NextToken","NextToken","MaxResults"),Cte={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},Rte={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},Tte={created_date:"created-date",last_accessed_date:"last-accessed-date",last_changed_date:"last-changed-date",name:"name"},xte={asc:"asc",desc:"desc"};Object.defineProperty(T,"$Command",{enumerable:!0,get:function(){return oe.Command}});Object.defineProperty(T,"__Client",{enumerable:!0,get:function(){return oe.Client}});T.APIErrorType$=TF;T.BatchGetSecretValue$=j2;T.BatchGetSecretValueCommand=pc;T.BatchGetSecretValueRequest$=xF;T.BatchGetSecretValueResponse$=AF;T.CancelRotateSecret$=H2;T.CancelRotateSecretCommand=Xf;T.CancelRotateSecretRequest$=PF;T.CancelRotateSecretResponse$=IF;T.CreateSecret$=z2;T.CreateSecretCommand=Jf;T.CreateSecretRequest$=kF;T.CreateSecretResponse$=OF;T.DecryptionFailure=Bf;T.DecryptionFailure$=NF;T.DeleteResourcePolicy$=V2;T.DeleteResourcePolicyCommand=Zf;T.DeleteResourcePolicyRequest$=DF;T.DeleteResourcePolicyResponse$=MF;T.DeleteSecret$=G2;T.DeleteSecretCommand=ep;T.DeleteSecretRequest$=LF;T.DeleteSecretResponse$=FF;T.DescribeSecret$=Q2;T.DescribeSecretCommand=tp;T.DescribeSecretRequest$=qF;T.DescribeSecretResponse$=BF;T.EncryptionFailure=Vf;T.EncryptionFailure$=UF;T.ExternalSecretRotationMetadataItem$=$F;T.Filter$=jF;T.FilterNameStringType=Cte;T.GetRandomPassword$=W2;T.GetRandomPasswordCommand=rp;T.GetRandomPasswordRequest$=HF;T.GetRandomPasswordResponse$=zF;T.GetResourcePolicy$=K2;T.GetResourcePolicyCommand=sp;T.GetResourcePolicyRequest$=VF;T.GetResourcePolicyResponse$=GF;T.GetSecretValue$=Y2;T.GetSecretValueCommand=np;T.GetSecretValueRequest$=QF;T.GetSecretValueResponse$=WF;T.InternalServiceError=Uf;T.InternalServiceError$=KF;T.InvalidNextTokenException=$f;T.InvalidNextTokenException$=YF;T.InvalidParameterException=jf;T.InvalidParameterException$=XF;T.InvalidRequestException=Hf;T.InvalidRequestException$=JF;T.LimitExceededException=Gf;T.LimitExceededException$=ZF;T.ListSecretVersionIds$=J2;T.ListSecretVersionIdsCommand=mc;T.ListSecretVersionIdsRequest$=r2;T.ListSecretVersionIdsResponse$=s2;T.ListSecrets$=X2;T.ListSecretsCommand=hc;T.ListSecretsRequest$=e2;T.ListSecretsResponse$=t2;T.MalformedPolicyDocumentException=Qf;T.MalformedPolicyDocumentException$=n2;T.PreconditionNotMetException=Wf;T.PreconditionNotMetException$=i2;T.PublicPolicyException=Yf;T.PublicPolicyException$=o2;T.PutResourcePolicy$=Z2;T.PutResourcePolicyCommand=ip;T.PutResourcePolicyRequest$=a2;T.PutResourcePolicyResponse$=c2;T.PutSecretValue$=eq;T.PutSecretValueCommand=op;T.PutSecretValueRequest$=u2;T.PutSecretValueResponse$=l2;T.RemoveRegionsFromReplication$=tq;T.RemoveRegionsFromReplicationCommand=ap;T.RemoveRegionsFromReplicationRequest$=d2;T.RemoveRegionsFromReplicationResponse$=f2;T.ReplicaRegionType$=p2;T.ReplicateSecretToRegions$=rq;T.ReplicateSecretToRegionsCommand=cp;T.ReplicateSecretToRegionsRequest$=h2;T.ReplicateSecretToRegionsResponse$=m2;T.ReplicationStatusType$=g2;T.ResourceExistsException=Kf;T.ResourceExistsException$=y2;T.ResourceNotFoundException=zf;T.ResourceNotFoundException$=S2;T.RestoreSecret$=sq;T.RestoreSecretCommand=up;T.RestoreSecretRequest$=b2;T.RestoreSecretResponse$=E2;T.RotateSecret$=nq;T.RotateSecretCommand=lp;T.RotateSecretRequest$=_2;T.RotateSecretResponse$=w2;T.RotationRulesType$=Cp;T.SecretListEntry$=v2;T.SecretValueEntry$=C2;T.SecretVersionsListEntry$=R2;T.SecretsManager=yp;T.SecretsManagerClient=Kn;T.SecretsManagerServiceException=it;T.SecretsManagerServiceException$=B2;T.SortByType=Tte;T.SortOrderType=xte;T.StatusType=Rte;T.StopReplicationToReplica$=iq;T.StopReplicationToReplicaCommand=dp;T.StopReplicationToReplicaRequest$=T2;T.StopReplicationToReplicaResponse$=x2;T.Tag$=A2;T.TagResource$=oq;T.TagResourceCommand=fp;T.TagResourceRequest$=P2;T.UntagResource$=aq;T.UntagResourceCommand=pp;T.UntagResourceRequest$=I2;T.UpdateSecret$=cq;T.UpdateSecretCommand=hp;T.UpdateSecretRequest$=k2;T.UpdateSecretResponse$=O2;T.UpdateSecretVersionStage$=uq;T.UpdateSecretVersionStageCommand=mp;T.UpdateSecretVersionStageRequest$=N2;T.UpdateSecretVersionStageResponse$=D2;T.ValidateResourcePolicy$=lq;T.ValidateResourcePolicyCommand=gp;T.ValidateResourcePolicyRequest$=M2;T.ValidateResourcePolicyResponse$=L2;T.ValidationErrorsEntry$=F2;T.paginateBatchGetSecretValue=_te;T.paginateListSecretVersionIds=vte;T.paginateListSecrets=wte});var qte={};ot(qte,{handler:()=>Fte});module.exports=J(qte);var Bt=v(Mh(),1),Pre=Bt.default.Client,cw=Bt.default.Pool,Ire=Bt.default.Connection,kre=Bt.default.types,Ore=Bt.default.Query,Nre=Bt.default.DatabaseError,Dre=Bt.default.escapeIdentifier,Mre=Bt.default.escapeLiteral,Lre=Bt.default.Result,Fre=Bt.default.TypeOverrides,qre=Bt.default.defaults;var fq=v(cC()),Ip=v(dq()),xp=null,Ap=null,Pp=null,Ate=new Ip.SecretsManagerClient({}),{DB_SECRET_ARN:Pte,REDIS_HOST:Ite,REDIS_PORT:kte="6379",ENVIRONMENT:Ote="staging"}=process.env,Nte={POSTS_LIST:60,POST_DETAIL:300,USER_FEED:30};async function Dte(){if(Pp)return Pp;let t=new Ip.GetSecretValueCommand({SecretId:Pte}),e=await Ate.send(t);return Pp=JSON.parse(e.SecretString||"{}"),Pp}async function Mte(){if(xp)return xp;let t=await Dte(),e={host:t.host,port:t.port||5432,database:t.dbname||"smuppy",user:t.username,password:t.password,ssl:{rejectUnauthorized:!1},max:10,idleTimeoutMillis:3e4,connectionTimeoutMillis:5e3};return xp=new cw(e),xp}function Lte(){return Ap||(Ap=new fq.default({host:Ite,port:parseInt(kte),tls:{},maxRetriesPerRequest:3,lazyConnect:!0}),Ap)}function o0(t,e){return{statusCode:t,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Cache-Control":t===200?"public, max-age=60":"no-cache"},body:JSON.stringify(e)}}var Fte=async t=>{let e=Date.now();try{let{limit:r="20",cursor:s,type:n="all",userId:i}=t.queryStringParameters||{},o=Math.min(parseInt(r),100),a=t.requestContext.authorizer?.claims?.sub,c=`posts:list:${n}:${i||"all"}:${s||"first"}:${o}`,u=Lte();if(n!=="following")try{let P=await u.get(c);if(P)return o0(200,{...JSON.parse(P),cached:!0,latency:Date.now()-e})}catch{}let d=await Mte(),l,h;n==="following"&&a?(l=`
        SELECT p.id, p.user_id as "authorId", p.content, p.media_urls as "mediaUrls", p.media_type as "mediaType",
               p.likes_count as "likesCount", p.comments_count as "commentsCount", p.created_at as "createdAt",
               u.username, u.full_name as "fullName", u.avatar_url as "avatarUrl", u.is_verified as "isVerified", u.account_type as "accountType",
               EXISTS(SELECT 1 FROM likes l WHERE l.post_id = p.id AND l.user_id = $1) as "isLiked"
        FROM posts p
        JOIN users u ON p.user_id = u.id
        JOIN follows f ON f.following_id = p.user_id AND f.follower_id = $1 AND f.status = 'accepted'
        WHERE p.deleted_at IS NULL ${s?"AND p.created_at < $3":""}
        ORDER BY p.created_at DESC LIMIT $2
      `,h=s?[a,o+1,new Date(parseInt(s))]:[a,o+1]):i?(l=`
        SELECT p.id, p.user_id as "authorId", p.content, p.media_urls as "mediaUrls", p.media_type as "mediaType",
               p.likes_count as "likesCount", p.comments_count as "commentsCount", p.created_at as "createdAt",
               u.username, u.full_name as "fullName", u.avatar_url as "avatarUrl", u.is_verified as "isVerified", u.account_type as "accountType"
        FROM posts p JOIN users u ON p.user_id = u.id
        WHERE p.user_id = $1 AND p.deleted_at IS NULL ${s?"AND p.created_at < $3":""}
        ORDER BY p.created_at DESC LIMIT $2
      `,h=s?[i,o+1,new Date(parseInt(s))]:[i,o+1]):(l=`
        SELECT p.id, p.user_id as "authorId", p.content, p.media_urls as "mediaUrls", p.media_type as "mediaType",
               p.likes_count as "likesCount", p.comments_count as "commentsCount", p.created_at as "createdAt",
               u.username, u.full_name as "fullName", u.avatar_url as "avatarUrl", u.is_verified as "isVerified", u.account_type as "accountType"
        FROM posts p JOIN users u ON p.user_id = u.id
        WHERE p.deleted_at IS NULL ${s?"AND p.created_at < $2":""}
        ORDER BY CASE WHEN p.created_at > NOW() - INTERVAL '24 hours' THEN p.likes_count * 2 + p.comments_count ELSE p.likes_count + p.comments_count END DESC, p.created_at DESC
        LIMIT $1
      `,h=s?[o+1,new Date(parseInt(s))]:[o+1]);let m=await d.query(l,h),g=m.rows.length>o,w=g?m.rows.slice(0,o):m.rows,R=w.map(P=>({id:P.id,authorId:P.authorId,content:P.content,mediaUrls:P.mediaUrls||[],mediaType:P.mediaType,likesCount:parseInt(P.likesCount)||0,commentsCount:parseInt(P.commentsCount)||0,createdAt:P.createdAt,isLiked:P.isLiked||!1,author:{id:P.authorId,username:P.username,fullName:P.fullName,avatarUrl:P.avatarUrl,isVerified:P.isVerified,accountType:P.accountType}})),x={posts:R,nextCursor:g?w[w.length-1].createdAt.getTime().toString():null,hasMore:g,total:R.length};if(n!=="following")try{await u.setex(c,Nte.POSTS_LIST,JSON.stringify(x))}catch{}return o0(200,{...x,cached:!1,latency:Date.now()-e})}catch(r){return console.error("Error fetching posts:",r),o0(500,{error:"Internal server error",message:Ote==="staging"?r.message:void 0})}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
