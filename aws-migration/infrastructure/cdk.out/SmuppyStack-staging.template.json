{
 "Description": "Smuppy Core Infrastructure - staging",
 "Resources": {
  "SmuppyVPCC8507FB3": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/16",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/Resource"
   }
  },
  "SmuppyVPCPublicSubnet1Subnet9EB0C3AC": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1a",
    "CidrBlock": "10.0.0.0/20",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/Subnet"
   }
  },
  "SmuppyVPCPublicSubnet1RouteTableF94DAA55": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/RouteTable"
   }
  },
  "SmuppyVPCPublicSubnet1RouteTableAssociationE967412A": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet1RouteTableF94DAA55"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPublicSubnet1Subnet9EB0C3AC"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/RouteTableAssociation"
   }
  },
  "SmuppyVPCPublicSubnet1DefaultRouteC1A2282E": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "SmuppyVPCIGWAFDBB158"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet1RouteTableF94DAA55"
    }
   },
   "DependsOn": [
    "SmuppyVPCVPCGWAE10E2C2"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/DefaultRoute"
   }
  },
  "SmuppyVPCPublicSubnet1EIP387FD4F5": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/EIP"
   }
  },
  "SmuppyVPCPublicSubnet1NATGateway165598A0": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "SmuppyVPCPublicSubnet1EIP387FD4F5",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPublicSubnet1Subnet9EB0C3AC"
    },
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPublicSubnet1DefaultRouteC1A2282E",
    "SmuppyVPCPublicSubnet1RouteTableAssociationE967412A"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet1/NATGateway"
   }
  },
  "SmuppyVPCPublicSubnet2Subnet669010A6": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1b",
    "CidrBlock": "10.0.16.0/20",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2/Subnet"
   }
  },
  "SmuppyVPCPublicSubnet2RouteTable0576E3F9": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2/RouteTable"
   }
  },
  "SmuppyVPCPublicSubnet2RouteTableAssociation71B60D65": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet2RouteTable0576E3F9"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPublicSubnet2Subnet669010A6"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2/RouteTableAssociation"
   }
  },
  "SmuppyVPCPublicSubnet2DefaultRoute571BB26B": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "SmuppyVPCIGWAFDBB158"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet2RouteTable0576E3F9"
    }
   },
   "DependsOn": [
    "SmuppyVPCVPCGWAE10E2C2"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet2/DefaultRoute"
   }
  },
  "SmuppyVPCPublicSubnet3SubnetF2765776": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1c",
    "CidrBlock": "10.0.32.0/20",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3/Subnet"
   }
  },
  "SmuppyVPCPublicSubnet3RouteTableDD80D8EF": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3/RouteTable"
   }
  },
  "SmuppyVPCPublicSubnet3RouteTableAssociation280A46C0": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet3RouteTableDD80D8EF"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPublicSubnet3SubnetF2765776"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3/RouteTableAssociation"
   }
  },
  "SmuppyVPCPublicSubnet3DefaultRoute55B0D31F": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "SmuppyVPCIGWAFDBB158"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPublicSubnet3RouteTableDD80D8EF"
    }
   },
   "DependsOn": [
    "SmuppyVPCVPCGWAE10E2C2"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PublicSubnet3/DefaultRoute"
   }
  },
  "SmuppyVPCPrivateSubnet1SubnetF3794B16": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1a",
    "CidrBlock": "10.0.48.0/20",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/Subnet"
   }
  },
  "SmuppyVPCPrivateSubnet1RouteTable18CD344C": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/RouteTable"
   }
  },
  "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet1RouteTable18CD344C"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/RouteTableAssociation"
   }
  },
  "SmuppyVPCPrivateSubnet1DefaultRoute2654E080": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "SmuppyVPCPublicSubnet1NATGateway165598A0"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet1RouteTable18CD344C"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet1/DefaultRoute"
   }
  },
  "SmuppyVPCPrivateSubnet2Subnet89020D78": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1b",
    "CidrBlock": "10.0.64.0/20",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/Subnet"
   }
  },
  "SmuppyVPCPrivateSubnet2RouteTableF256A16E": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/RouteTable"
   }
  },
  "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet2RouteTableF256A16E"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/RouteTableAssociation"
   }
  },
  "SmuppyVPCPrivateSubnet2DefaultRoute263D8447": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "SmuppyVPCPublicSubnet1NATGateway165598A0"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet2RouteTableF256A16E"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet2/DefaultRoute"
   }
  },
  "SmuppyVPCPrivateSubnet3Subnet315EB7E7": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1c",
    "CidrBlock": "10.0.80.0/20",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/Subnet"
   }
  },
  "SmuppyVPCPrivateSubnet3RouteTable323B23FF": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/RouteTable"
   }
  },
  "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet3RouteTable323B23FF"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/RouteTableAssociation"
   }
  },
  "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "SmuppyVPCPublicSubnet1NATGateway165598A0"
    },
    "RouteTableId": {
     "Ref": "SmuppyVPCPrivateSubnet3RouteTable323B23FF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/PrivateSubnet3/DefaultRoute"
   }
  },
  "SmuppyVPCIsolatedSubnet1SubnetC965E000": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1a",
    "CidrBlock": "10.0.96.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Isolated"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/Subnet"
   }
  },
  "SmuppyVPCIsolatedSubnet1RouteTableB4DC6E5F": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/RouteTable"
   }
  },
  "SmuppyVPCIsolatedSubnet1RouteTableAssociationBE7F27CF": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCIsolatedSubnet1RouteTableB4DC6E5F"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCIsolatedSubnet1SubnetC965E000"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet1/RouteTableAssociation"
   }
  },
  "SmuppyVPCIsolatedSubnet2SubnetD76398DB": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1b",
    "CidrBlock": "10.0.97.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Isolated"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/Subnet"
   }
  },
  "SmuppyVPCIsolatedSubnet2RouteTable0A635D33": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/RouteTable"
   }
  },
  "SmuppyVPCIsolatedSubnet2RouteTableAssociationBE553008": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCIsolatedSubnet2RouteTable0A635D33"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCIsolatedSubnet2SubnetD76398DB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet2/RouteTableAssociation"
   }
  },
  "SmuppyVPCIsolatedSubnet3Subnet16F39602": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-east-1c",
    "CidrBlock": "10.0.98.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Isolated"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/Subnet"
   }
  },
  "SmuppyVPCIsolatedSubnet3RouteTableFBBA5170": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/RouteTable"
   }
  },
  "SmuppyVPCIsolatedSubnet3RouteTableAssociationB902D683": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "SmuppyVPCIsolatedSubnet3RouteTableFBBA5170"
    },
    "SubnetId": {
     "Ref": "SmuppyVPCIsolatedSubnet3Subnet16F39602"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IsolatedSubnet3/RouteTableAssociation"
   }
  },
  "SmuppyVPCIGWAFDBB158": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/IGW"
   }
  },
  "SmuppyVPCVPCGWAE10E2C2": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "SmuppyVPCIGWAFDBB158"
    },
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/VPCGW"
   }
  },
  "SmuppyVPCFlowLogIAMRoleEDF7E34F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "vpc-flow-logs.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/FlowLog"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole/Resource"
   }
  },
  "SmuppyVPCFlowLogIAMRoleDefaultPolicyCEF335E0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:DescribeLogStreams",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SmuppyVPCFlowLogLogGroup8444842C",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SmuppyVPCFlowLogIAMRoleDefaultPolicyCEF335E0",
    "Roles": [
     {
      "Ref": "SmuppyVPCFlowLogIAMRoleEDF7E34F"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/FlowLog/IAMRole/DefaultPolicy/Resource"
   }
  },
  "SmuppyVPCFlowLogLogGroup8444842C": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "RetentionInDays": 731,
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/FlowLog"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/FlowLog/LogGroup/Resource"
   }
  },
  "SmuppyVPCFlowLog9549D885": {
   "Type": "AWS::EC2::FlowLog",
   "Properties": {
    "DeliverLogsPermissionArn": {
     "Fn::GetAtt": [
      "SmuppyVPCFlowLogIAMRoleEDF7E34F",
      "Arn"
     ]
    },
    "LogDestinationType": "cloud-watch-logs",
    "LogGroupName": {
     "Ref": "SmuppyVPCFlowLogLogGroup8444842C"
    },
    "ResourceId": {
     "Ref": "SmuppyVPCC8507FB3"
    },
    "ResourceType": "VPC",
    "Tags": [
     {
      "Key": "Name",
      "Value": "SmuppyStack-staging/SmuppyVPC/FlowLog"
     }
    ],
    "TrafficType": "ALL"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyVPC/FlowLog/FlowLog"
   }
  },
  "SmuppyUserPoolB59D12A3": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AliasAttributes": [
     "email"
    ],
    "AutoVerifiedAttributes": [
     "email"
    ],
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 8,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": false,
      "RequireUppercase": true,
      "TemporaryPasswordValidityDays": 3
     }
    },
    "Schema": [
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "account_type"
     },
     {
      "AttributeDataType": "Boolean",
      "Mutable": true,
      "Name": "is_verified"
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "bio",
      "StringAttributeConstraints": {
       "MaxLength": "500"
      }
     }
    ],
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolAddOns": {
     "AdvancedSecurityMode": "AUDIT"
    },
    "UserPoolName": "smuppy-users-staging",
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyUserPool/Resource"
   }
  },
  "SmuppyUserPoolClientA58AA0F4": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AccessTokenValidity": 60,
    "AllowedOAuthFlows": [
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "email",
     "openid",
     "profile"
    ],
    "CallbackURLs": [
     "smuppy://auth/callback"
    ],
    "ClientName": "smuppy-mobile-app",
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "IdTokenValidity": 60,
    "LogoutURLs": [
     "smuppy://auth/logout"
    ],
    "PreventUserExistenceErrors": "ENABLED",
    "RefreshTokenValidity": 43200,
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "TokenValidityUnits": {
     "AccessToken": "minutes",
     "IdToken": "minutes",
     "RefreshToken": "minutes"
    },
    "UserPoolId": {
     "Ref": "SmuppyUserPoolB59D12A3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyUserPoolClient/Resource"
   }
  },
  "SmuppyIdentityPool": {
   "Type": "AWS::Cognito::IdentityPool",
   "Properties": {
    "AllowUnauthenticatedIdentities": false,
    "CognitoIdentityProviders": [
     {
      "ClientId": {
       "Ref": "SmuppyUserPoolClientA58AA0F4"
      },
      "ProviderName": {
       "Fn::GetAtt": [
        "SmuppyUserPoolB59D12A3",
        "ProviderName"
       ]
      }
     }
    ],
    "IdentityPoolName": "smuppy_identity_staging"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyIdentityPool"
   }
  },
  "DBSecurityGroupE3B245A3": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for Aurora PostgreSQL",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DBSecurityGroup/Resource"
   }
  },
  "DBSecurityGroupfromSmuppyStackstagingLambdaSecurityGroup9D425EA45432449B6333": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow PostgreSQL from Lambda only",
    "FromPort": 5432,
    "GroupId": {
     "Fn::GetAtt": [
      "DBSecurityGroupE3B245A3",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "LambdaSecurityGroup0BD9FC99",
      "GroupId"
     ]
    },
    "ToPort": 5432
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DBSecurityGroup/from SmuppyStackstagingLambdaSecurityGroup9D425EA4:5432"
   }
  },
  "LambdaSecurityGroup0BD9FC99": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for Lambda functions",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/LambdaSecurityGroup/Resource"
   }
  },
  "DBCredentialsCBF39AE9": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "GenerateSecretString": {
     "ExcludePunctuation": true,
     "GenerateStringKey": "password",
     "PasswordLength": 32,
     "SecretStringTemplate": "{\"username\":\"smuppy_admin\"}"
    },
    "Name": "smuppy-db-credentials-staging"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DBCredentials/Resource"
   }
  },
  "DBCredentialsAttachment5F5381AF": {
   "Type": "AWS::SecretsManager::SecretTargetAttachment",
   "Properties": {
    "SecretId": {
     "Ref": "DBCredentialsCBF39AE9"
    },
    "TargetId": {
     "Ref": "SmuppyDatabase28802365"
    },
    "TargetType": "AWS::RDS::DBCluster"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DBCredentials/Attachment/Resource"
   }
  },
  "SmuppyDatabaseSubnets9036C03F": {
   "Type": "AWS::RDS::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnets for SmuppyDatabase database",
    "SubnetIds": [
     {
      "Ref": "SmuppyVPCIsolatedSubnet1SubnetC965E000"
     },
     {
      "Ref": "SmuppyVPCIsolatedSubnet2SubnetD76398DB"
     },
     {
      "Ref": "SmuppyVPCIsolatedSubnet3Subnet16F39602"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyDatabase/Subnets/Default"
   }
  },
  "SmuppyDatabase28802365": {
   "Type": "AWS::RDS::DBCluster",
   "Properties": {
    "BackupRetentionPeriod": 7,
    "CopyTagsToSnapshot": true,
    "DBClusterParameterGroupName": "default.aurora-postgresql15",
    "DBSubnetGroupName": {
     "Ref": "SmuppyDatabaseSubnets9036C03F"
    },
    "DatabaseName": "smuppy",
    "DeletionProtection": false,
    "Engine": "aurora-postgresql",
    "EngineVersion": "15.14",
    "MasterUserPassword": {
     "Fn::Join": [
      "",
      [
       "{{resolve:secretsmanager:",
       {
        "Ref": "DBCredentialsCBF39AE9"
       },
       ":SecretString:password::}}"
      ]
     ]
    },
    "MasterUsername": {
     "Fn::Join": [
      "",
      [
       "{{resolve:secretsmanager:",
       {
        "Ref": "DBCredentialsCBF39AE9"
       },
       ":SecretString:username::}}"
      ]
     ]
    },
    "PerformanceInsightsEnabled": true,
    "PerformanceInsightsRetentionPeriod": 7,
    "Port": 5432,
    "PreferredBackupWindow": "03:00-04:00",
    "ServerlessV2ScalingConfiguration": {
     "MaxCapacity": 16,
     "MinCapacity": 0.5
    },
    "StorageEncrypted": true,
    "VpcSecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "DBSecurityGroupE3B245A3",
       "GroupId"
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyDatabase/Resource"
   }
  },
  "SmuppyDatabasewriterD3ECC528": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "AutoMinorVersionUpgrade": true,
    "DBClusterIdentifier": {
     "Ref": "SmuppyDatabase28802365"
    },
    "DBInstanceClass": "db.serverless",
    "Engine": "aurora-postgresql",
    "PromotionTier": 0,
    "PubliclyAccessible": false
   },
   "DependsOn": [
    "SmuppyVPCIsolatedSubnet1RouteTableAssociationBE7F27CF",
    "SmuppyVPCIsolatedSubnet2RouteTableAssociationBE553008",
    "SmuppyVPCIsolatedSubnet3RouteTableAssociationB902D683"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyDatabase/writer/Resource"
   }
  },
  "RedisSecurityGroupB05951F6": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for Redis",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "VpcId": {
     "Ref": "SmuppyVPCC8507FB3"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/RedisSecurityGroup/Resource"
   }
  },
  "RedisSecurityGroupfromSmuppyStackstagingLambdaSecurityGroup9D425EA463799CF24625": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow Redis from Lambda only",
    "FromPort": 6379,
    "GroupId": {
     "Fn::GetAtt": [
      "RedisSecurityGroupB05951F6",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "LambdaSecurityGroup0BD9FC99",
      "GroupId"
     ]
    },
    "ToPort": 6379
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/RedisSecurityGroup/from SmuppyStackstagingLambdaSecurityGroup9D425EA4:6379"
   }
  },
  "RedisSubnetGroup": {
   "Type": "AWS::ElastiCache::SubnetGroup",
   "Properties": {
    "CacheSubnetGroupName": "smuppy-redis-staging",
    "Description": "Subnet group for Redis",
    "SubnetIds": [
     {
      "Ref": "SmuppyVPCIsolatedSubnet1SubnetC965E000"
     },
     {
      "Ref": "SmuppyVPCIsolatedSubnet2SubnetD76398DB"
     },
     {
      "Ref": "SmuppyVPCIsolatedSubnet3Subnet16F39602"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/RedisSubnetGroup"
   }
  },
  "RedisCluster": {
   "Type": "AWS::ElastiCache::ReplicationGroup",
   "Properties": {
    "AtRestEncryptionEnabled": true,
    "AutoMinorVersionUpgrade": true,
    "AutomaticFailoverEnabled": false,
    "CacheNodeType": "cache.t3.medium",
    "CacheSubnetGroupName": "smuppy-redis-staging",
    "Engine": "redis",
    "EngineVersion": "7.0",
    "MultiAZEnabled": false,
    "NumNodeGroups": 1,
    "ReplicasPerNodeGroup": 0,
    "ReplicationGroupDescription": "Smuppy Redis cluster for caching and sessions",
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "RedisSecurityGroupB05951F6",
       "GroupId"
      ]
     }
    ],
    "TransitEncryptionEnabled": true
   },
   "DependsOn": [
    "RedisSubnetGroup"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/RedisCluster"
   }
  },
  "SharedLayer27DFABF0": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "nodejs20.x"
    ],
    "Content": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "879a8aed1af2468752e47dd77a0c983634ad4ba4e1840e09c3988df717817797.zip"
    },
    "Description": "Shared utilities for Smuppy Lambda functions"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SharedLayer/Resource",
    "aws:asset:path": "asset.879a8aed1af2468752e47dd77a0c983634ad4ba4e1840e09c3988df717817797",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "PostsListFunctionServiceRole4F93E01C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsListFunction/ServiceRole/Resource"
   }
  },
  "PostsListFunctionServiceRoleDefaultPolicyA7390DF5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PostsListFunctionServiceRoleDefaultPolicyA7390DF5",
    "Roles": [
     {
      "Ref": "PostsListFunctionServiceRole4F93E01C"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsListFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "PostsListFunctionC67E5479": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "652a8fbc7b8b681e14bc5b597c985f2c3ebcf4e8e37a0d289b10deafd89d6c01.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "PostsListFunctionServiceRole4F93E01C",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "PostsListFunctionServiceRoleDefaultPolicyA7390DF5",
    "PostsListFunctionServiceRole4F93E01C",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsListFunction/Resource",
    "aws:asset:path": "asset.652a8fbc7b8b681e14bc5b597c985f2c3ebcf4e8e37a0d289b10deafd89d6c01",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PostsListFunctionLogRetentionD412ED12": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "PostsListFunctionC67E5479"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsListFunction/LogRetention/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:DeleteRetentionPolicy",
        "logs:PutRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": "nodejs22.x",
    "Timeout": 900,
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "PostsGetFunctionServiceRoleDE50ED3A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsGetFunction/ServiceRole/Resource"
   }
  },
  "PostsGetFunctionServiceRoleDefaultPolicyF80102F4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PostsGetFunctionServiceRoleDefaultPolicyF80102F4",
    "Roles": [
     {
      "Ref": "PostsGetFunctionServiceRoleDE50ED3A"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsGetFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "PostsGetFunction93CD6BC5": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "06493ab79544f4ae36541d77f3358f192bee45e9b7ea1d1f5922960dcccba5fd.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "PostsGetFunctionServiceRoleDE50ED3A",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "PostsGetFunctionServiceRoleDefaultPolicyF80102F4",
    "PostsGetFunctionServiceRoleDE50ED3A",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsGetFunction/Resource",
    "aws:asset:path": "asset.06493ab79544f4ae36541d77f3358f192bee45e9b7ea1d1f5922960dcccba5fd",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PostsGetFunctionLogRetention765E20EE": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "PostsGetFunction93CD6BC5"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsGetFunction/LogRetention/Resource"
   }
  },
  "PostsCreateFunctionServiceRoleC1D765CD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsCreateFunction/ServiceRole/Resource"
   }
  },
  "PostsCreateFunctionServiceRoleDefaultPolicyAFAA5D81": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PostsCreateFunctionServiceRoleDefaultPolicyAFAA5D81",
    "Roles": [
     {
      "Ref": "PostsCreateFunctionServiceRoleC1D765CD"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsCreateFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "PostsCreateFunction05741974": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "0025d9333452455a0fb8703c5f5dcd06e02824738f43466a505d3436f4849285.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "PostsCreateFunctionServiceRoleC1D765CD",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "PostsCreateFunctionServiceRoleDefaultPolicyAFAA5D81",
    "PostsCreateFunctionServiceRoleC1D765CD",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsCreateFunction/Resource",
    "aws:asset:path": "asset.0025d9333452455a0fb8703c5f5dcd06e02824738f43466a505d3436f4849285",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PostsCreateFunctionLogRetention5CA9E1C1": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "PostsCreateFunction05741974"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/PostsCreateFunction/LogRetention/Resource"
   }
  },
  "ProfilesGetFunctionServiceRole50E65A25": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesGetFunction/ServiceRole/Resource"
   }
  },
  "ProfilesGetFunctionServiceRoleDefaultPolicyC8F125A0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProfilesGetFunctionServiceRoleDefaultPolicyC8F125A0",
    "Roles": [
     {
      "Ref": "ProfilesGetFunctionServiceRole50E65A25"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesGetFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProfilesGetFunctionA4D69A50": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "572bff222554bc58152ee3266406f6ffce07f056c25a247dfeda7b1a441e3329.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "ProfilesGetFunctionServiceRole50E65A25",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "ProfilesGetFunctionServiceRoleDefaultPolicyC8F125A0",
    "ProfilesGetFunctionServiceRole50E65A25",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesGetFunction/Resource",
    "aws:asset:path": "asset.572bff222554bc58152ee3266406f6ffce07f056c25a247dfeda7b1a441e3329",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ProfilesGetFunctionLogRetentionD5258E0A": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProfilesGetFunctionA4D69A50"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesGetFunction/LogRetention/Resource"
   }
  },
  "ProfilesSearchFunctionServiceRoleFBCC6BA8": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesSearchFunction/ServiceRole/Resource"
   }
  },
  "ProfilesSearchFunctionServiceRoleDefaultPolicyF41417B5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProfilesSearchFunctionServiceRoleDefaultPolicyF41417B5",
    "Roles": [
     {
      "Ref": "ProfilesSearchFunctionServiceRoleFBCC6BA8"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesSearchFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProfilesSearchFunction955B6C6F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "27b2eaeb91f8aa4717dcb1362e0e8536d7579f170d62208c88f5b1e35f296c75.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "ProfilesSearchFunctionServiceRoleFBCC6BA8",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "ProfilesSearchFunctionServiceRoleDefaultPolicyF41417B5",
    "ProfilesSearchFunctionServiceRoleFBCC6BA8",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesSearchFunction/Resource",
    "aws:asset:path": "asset.27b2eaeb91f8aa4717dcb1362e0e8536d7579f170d62208c88f5b1e35f296c75",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ProfilesSearchFunctionLogRetention82B26D76": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ProfilesSearchFunction955B6C6F"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/ProfilesSearchFunction/LogRetention/Resource"
   }
  },
  "FeedGetFunctionServiceRole38503FC8": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FeedGetFunction/ServiceRole/Resource"
   }
  },
  "FeedGetFunctionServiceRoleDefaultPolicyCC5222C6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "FeedGetFunctionServiceRoleDefaultPolicyCC5222C6",
    "Roles": [
     {
      "Ref": "FeedGetFunctionServiceRole38503FC8"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FeedGetFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "FeedGetFunction14FA861F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "c8cbfd66d34f579b15bba9d539dce5e5f9143783ef8bbc76fc9bba6365ad309b.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "FeedGetFunctionServiceRole38503FC8",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 60,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "FeedGetFunctionServiceRoleDefaultPolicyCC5222C6",
    "FeedGetFunctionServiceRole38503FC8",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FeedGetFunction/Resource",
    "aws:asset:path": "asset.c8cbfd66d34f579b15bba9d539dce5e5f9143783ef8bbc76fc9bba6365ad309b",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "FeedGetFunctionLogRetentionFEE7C23E": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "FeedGetFunction14FA861F"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FeedGetFunction/LogRetention/Resource"
   }
  },
  "FollowsCreateFunctionServiceRole855CF958": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FollowsCreateFunction/ServiceRole/Resource"
   }
  },
  "FollowsCreateFunctionServiceRoleDefaultPolicy02AA2150": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:s3:::smuppy-media",
        "arn:aws:s3:::smuppy-media/*"
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "FollowsCreateFunctionServiceRoleDefaultPolicy02AA2150",
    "Roles": [
     {
      "Ref": "FollowsCreateFunctionServiceRole855CF958"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FollowsCreateFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "FollowsCreateFunctionF0669F53": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "7e7a22cf1f3442e1c2e6d80b8a7f39d9314e5458ede0fab05fe9edd573c75b02.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "FollowsCreateFunctionServiceRole855CF958",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "FollowsCreateFunctionServiceRoleDefaultPolicy02AA2150",
    "FollowsCreateFunctionServiceRole855CF958",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FollowsCreateFunction/Resource",
    "aws:asset:path": "asset.7e7a22cf1f3442e1c2e6d80b8a7f39d9314e5458ede0fab05fe9edd573c75b02",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "FollowsCreateFunctionLogRetention82559B64": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "FollowsCreateFunctionF0669F53"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/FollowsCreateFunction/LogRetention/Resource"
   }
  },
  "AdminMigrationFunctionServiceRole4166D8B7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/AdminMigrationFunction/ServiceRole/Resource"
   }
  },
  "AdminMigrationFunctionServiceRoleDefaultPolicy816302B0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminMigrationFunctionServiceRoleDefaultPolicy816302B0",
    "Roles": [
     {
      "Ref": "AdminMigrationFunctionServiceRole4166D8B7"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/AdminMigrationFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminMigrationFunction4134AACE": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "02890de713263c2cb9df4636313361cb590aa32ee77b7f25e1e27aa680b5e945.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps",
      "ADMIN_KEY": "smuppy-migration-secret-key-2026"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "AdminMigrationFunctionServiceRole4166D8B7",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "AdminMigrationFunctionServiceRoleDefaultPolicy816302B0",
    "AdminMigrationFunctionServiceRole4166D8B7",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/AdminMigrationFunction/Resource",
    "aws:asset:path": "asset.02890de713263c2cb9df4636313361cb590aa32ee77b7f25e1e27aa680b5e945",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminMigrationFunctionLogRetentionC5BE6C6F": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AdminMigrationFunction4134AACE"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/AdminMigrationFunction/LogRetention/Resource"
   }
  },
  "DataMigrationFunctionServiceRoleBBAA6FF1": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DataMigrationFunction/ServiceRole/Resource"
   }
  },
  "DataMigrationFunctionServiceRoleDefaultPolicyCAB4E443": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DataMigrationFunctionServiceRoleDefaultPolicyCAB4E443",
    "Roles": [
     {
      "Ref": "DataMigrationFunctionServiceRoleBBAA6FF1"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DataMigrationFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DataMigrationFunction313678B9": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "16b730fe8ed36bc2e283f32964c113d3c8e3f78fb3bf55d79ac1848514e66e14.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps",
      "ADMIN_KEY": "smuppy-migration-secret-key-2026"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "DataMigrationFunctionServiceRoleBBAA6FF1",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "DataMigrationFunctionServiceRoleDefaultPolicyCAB4E443",
    "DataMigrationFunctionServiceRoleBBAA6FF1",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DataMigrationFunction/Resource",
    "aws:asset:path": "asset.16b730fe8ed36bc2e283f32964c113d3c8e3f78fb3bf55d79ac1848514e66e14",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DataMigrationFunctionLogRetention0546C6AC": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "DataMigrationFunction313678B9"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/DataMigrationFunction/LogRetention/Resource"
   }
  },
  "CheckProfilesFunctionServiceRole70139678": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/CheckProfilesFunction/ServiceRole/Resource"
   }
  },
  "CheckProfilesFunctionServiceRoleDefaultPolicy0DBF2BF5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CheckProfilesFunctionServiceRoleDefaultPolicy0DBF2BF5",
    "Roles": [
     {
      "Ref": "CheckProfilesFunctionServiceRole70139678"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/CheckProfilesFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CheckProfilesFunctionA1E9B56C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "76510fb150826ebd865756bb777cf43cc9ed749dd9e3ee144cc10865ec74d974.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "CheckProfilesFunctionServiceRole70139678",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "CheckProfilesFunctionServiceRoleDefaultPolicy0DBF2BF5",
    "CheckProfilesFunctionServiceRole70139678",
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/CheckProfilesFunction/Resource",
    "aws:asset:path": "asset.76510fb150826ebd865756bb777cf43cc9ed749dd9e3ee144cc10865ec74d974",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UserMigrationFunctionServiceRoleF15206BE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/UserMigrationFunction/ServiceRole/Resource"
   }
  },
  "UserMigrationFunctionServiceRoleDefaultPolicy647E497D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTelemetryRecords",
        "xray:PutTraceSegments"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "secretsmanager:DescribeSecret",
        "secretsmanager:GetSecretValue"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "DBCredentialsCBF39AE9"
       }
      },
      {
       "Action": [
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword",
        "cognito-idp:ListUsers"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "SmuppyUserPoolB59D12A3",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "UserMigrationFunctionServiceRoleDefaultPolicy647E497D",
    "Roles": [
     {
      "Ref": "UserMigrationFunctionServiceRoleF15206BE"
     }
    ]
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/UserMigrationFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "UserMigrationFunctionF93EDED4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-471112656108-us-east-1",
     "S3Key": "c96fb0edf9243f396c30ef5896e065126044b9d708948d45d418b1c62eddb955.zip"
    },
    "Environment": {
     "Variables": {
      "DB_HOST": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Address"
       ]
      },
      "DB_PORT": {
       "Fn::GetAtt": [
        "SmuppyDatabase28802365",
        "Endpoint.Port"
       ]
      },
      "DB_NAME": "smuppy",
      "DB_SECRET_ARN": {
       "Ref": "DBCredentialsCBF39AE9"
      },
      "REDIS_HOST": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Address"
       ]
      },
      "REDIS_PORT": {
       "Fn::GetAtt": [
        "RedisCluster",
        "PrimaryEndPoint.Port"
       ]
      },
      "USER_POOL_ID": {
       "Ref": "SmuppyUserPoolB59D12A3"
      },
      "MEDIA_BUCKET": "smuppy-media",
      "ENVIRONMENT": "staging",
      "NODE_OPTIONS": "--enable-source-maps",
      "ADMIN_KEY": "smuppy-migration-secret-key-2026"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "UserMigrationFunctionServiceRoleF15206BE",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 900,
    "TracingConfig": {
     "Mode": "Active"
    },
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "LambdaSecurityGroup0BD9FC99",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "SmuppyVPCPrivateSubnet1SubnetF3794B16"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet2Subnet89020D78"
      },
      {
       "Ref": "SmuppyVPCPrivateSubnet3Subnet315EB7E7"
      }
     ]
    }
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862",
    "UserMigrationFunctionServiceRoleDefaultPolicy647E497D",
    "UserMigrationFunctionServiceRoleF15206BE"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/UserMigrationFunction/Resource",
    "aws:asset:path": "asset.c96fb0edf9243f396c30ef5896e065126044b9d708948d45d418b1c62eddb955",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "UserMigrationFunctionLogRetention75D5B383": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "UserMigrationFunctionF93EDED4"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "DependsOn": [
    "SmuppyVPCPrivateSubnet1DefaultRoute2654E080",
    "SmuppyVPCPrivateSubnet1RouteTableAssociation17F7923B",
    "SmuppyVPCPrivateSubnet2DefaultRoute263D8447",
    "SmuppyVPCPrivateSubnet2RouteTableAssociationA112B25A",
    "SmuppyVPCPrivateSubnet3DefaultRouteD61991EC",
    "SmuppyVPCPrivateSubnet3RouteTableAssociation73AA0862"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/UserMigrationFunction/LogRetention/Resource"
   }
  },
  "SmuppyAPI522869CB": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "BinaryMediaTypes": [
     "image/*",
     "video/*"
    ],
    "Description": "Smuppy REST API - Auto-scaling Social Network",
    "Name": "smuppy-api-staging"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Resource"
   }
  },
  "SmuppyAPICloudWatchRoleE30D8814": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/CloudWatchRole/Resource"
   }
  },
  "SmuppyAPIAccountE52E07A8": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "SmuppyAPICloudWatchRoleE30D8814",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "SmuppyAPI522869CB"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Account"
   }
  },
  "SmuppyAPIDeployment7DF64D7327ddf6e8b4b4c56bb4a46ccb5c3c2bef": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Smuppy REST API - Auto-scaling Social Network",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "DependsOn": [
    "SmuppyAPIadminmigratedataOPTIONS705FC23D",
    "SmuppyAPIadminmigratedataPOST3CEC2E0F",
    "SmuppyAPIadminmigratedataA2C83E9F",
    "SmuppyAPIadminmigrateOPTIONSF0690528",
    "SmuppyAPIadminmigratePOST32163964",
    "SmuppyAPIadminmigrateA11F622E",
    "SmuppyAPIadminOPTIONS6D67A925",
    "SmuppyAPIadmin0963F1F7",
    "SmuppyAPIfeedGETB4635D29",
    "SmuppyAPIfeedOPTIONSA163E5DD",
    "SmuppyAPIfeedE675CAE0",
    "SmuppyAPIfollowsOPTIONS0C1A893E",
    "SmuppyAPIfollowsPOST926367CE",
    "SmuppyAPIfollowsAB82C934",
    "SmuppyAPIOPTIONS4AE4D695",
    "SmuppyAPIpostsGETFDF6C5A3",
    "SmuppyAPIpostsOPTIONS1181E345",
    "SmuppyAPIpostsPOST1DC3C060",
    "SmuppyAPIposts4690FF05",
    "SmuppyAPIprofilesidGET89AF02F7",
    "SmuppyAPIprofilesidOPTIONS54425DFE",
    "SmuppyAPIprofilesid8D522476",
    "SmuppyAPIprofilesGET9FCB80EB",
    "SmuppyAPIprofilesOPTIONSD2F4AC68",
    "SmuppyAPIprofilesE145C226"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "SmuppyAPIDeploymentStagestaging91880277": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "CacheClusterEnabled": false,
    "DeploymentId": {
     "Ref": "SmuppyAPIDeployment7DF64D7327ddf6e8b4b4c56bb4a46ccb5c3c2bef"
    },
    "MethodSettings": [
     {
      "CachingEnabled": false,
      "DataTraceEnabled": true,
      "HttpMethod": "*",
      "LoggingLevel": "INFO",
      "MetricsEnabled": true,
      "ResourcePath": "/*",
      "ThrottlingBurstLimit": 500,
      "ThrottlingRateLimit": 1000
     }
    ],
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    },
    "StageName": "staging"
   },
   "DependsOn": [
    "SmuppyAPIAccountE52E07A8"
   ],
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/DeploymentStage.staging/Resource"
   }
  },
  "SmuppyAPIOPTIONS4AE4D695": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/OPTIONS/Resource"
   }
  },
  "SmuppyAPIposts4690FF05": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "PathPart": "posts",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/Resource"
   }
  },
  "SmuppyAPIpostsOPTIONS1181E345": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIposts4690FF05"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/OPTIONS/Resource"
   }
  },
  "SmuppyAPIpostsGETApiPermissionSmuppyStackstagingSmuppyAPIE17EB69AGETposts5C95BD79": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PostsListFunctionC67E5479",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/GET/posts"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts"
   }
  },
  "SmuppyAPIpostsGETApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69AGETpostsA8795A09": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PostsListFunctionC67E5479",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/GET/posts"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..posts"
   }
  },
  "SmuppyAPIpostsGETFDF6C5A3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "PostsListFunctionC67E5479",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIposts4690FF05"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/GET/Resource"
   }
  },
  "SmuppyAPIpostsPOSTApiPermissionSmuppyStackstagingSmuppyAPIE17EB69APOSTpostsD85CB55F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PostsCreateFunction05741974",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/POST/posts"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts"
   }
  },
  "SmuppyAPIpostsPOSTApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69APOSTpostsA34930FC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PostsCreateFunction05741974",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/POST/posts"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..posts"
   }
  },
  "SmuppyAPIpostsPOST1DC3C060": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "CognitoAuthorizerF3215DBC"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "PostsCreateFunction05741974",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIposts4690FF05"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/posts/POST/Resource"
   }
  },
  "SmuppyAPIprofilesE145C226": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "PathPart": "profiles",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/Resource"
   }
  },
  "SmuppyAPIprofilesOPTIONSD2F4AC68": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIprofilesE145C226"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/OPTIONS/Resource"
   }
  },
  "SmuppyAPIprofilesGETApiPermissionSmuppyStackstagingSmuppyAPIE17EB69AGETprofiles9A774564": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProfilesSearchFunction955B6C6F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/GET/profiles"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles"
   }
  },
  "SmuppyAPIprofilesGETApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69AGETprofilesA2708D5B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProfilesSearchFunction955B6C6F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/GET/profiles"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles"
   }
  },
  "SmuppyAPIprofilesGET9FCB80EB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ProfilesSearchFunction955B6C6F",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIprofilesE145C226"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/GET/Resource"
   }
  },
  "SmuppyAPIprofilesid8D522476": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "SmuppyAPIprofilesE145C226"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/Resource"
   }
  },
  "SmuppyAPIprofilesidOPTIONS54425DFE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIprofilesid8D522476"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/OPTIONS/Resource"
   }
  },
  "SmuppyAPIprofilesidGETApiPermissionSmuppyStackstagingSmuppyAPIE17EB69AGETprofilesid3909AE59": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProfilesGetFunctionA4D69A50",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/GET/profiles/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}"
   }
  },
  "SmuppyAPIprofilesidGETApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69AGETprofilesidBBCFA831": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProfilesGetFunctionA4D69A50",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/GET/profiles/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..profiles.{id}"
   }
  },
  "SmuppyAPIprofilesidGET89AF02F7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ProfilesGetFunctionA4D69A50",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIprofilesid8D522476"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/profiles/{id}/GET/Resource"
   }
  },
  "SmuppyAPIfeedE675CAE0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "PathPart": "feed",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/feed/Resource"
   }
  },
  "SmuppyAPIfeedOPTIONSA163E5DD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIfeedE675CAE0"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/feed/OPTIONS/Resource"
   }
  },
  "SmuppyAPIfeedGETApiPermissionSmuppyStackstagingSmuppyAPIE17EB69AGETfeed9A4CE69E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "FeedGetFunction14FA861F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/GET/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/feed/GET/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed"
   }
  },
  "SmuppyAPIfeedGETApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69AGETfeedE680EA75": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "FeedGetFunction14FA861F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/GET/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/feed/GET/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.GET..feed"
   }
  },
  "SmuppyAPIfeedGETB4635D29": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "CognitoAuthorizerF3215DBC"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "FeedGetFunction14FA861F",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIfeedE675CAE0"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/feed/GET/Resource"
   }
  },
  "SmuppyAPIfollowsAB82C934": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "PathPart": "follows",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/follows/Resource"
   }
  },
  "SmuppyAPIfollowsOPTIONS0C1A893E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIfollowsAB82C934"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/follows/OPTIONS/Resource"
   }
  },
  "SmuppyAPIfollowsPOSTApiPermissionSmuppyStackstagingSmuppyAPIE17EB69APOSTfollows44577AA2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "FollowsCreateFunctionF0669F53",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/POST/follows"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/follows/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows"
   }
  },
  "SmuppyAPIfollowsPOSTApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69APOSTfollows26A5DA94": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "FollowsCreateFunctionF0669F53",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/POST/follows"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/follows/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..follows"
   }
  },
  "SmuppyAPIfollowsPOST926367CE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "CognitoAuthorizerF3215DBC"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "FollowsCreateFunctionF0669F53",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIfollowsAB82C934"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/follows/POST/Resource"
   }
  },
  "SmuppyAPIadmin0963F1F7": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SmuppyAPI522869CB",
      "RootResourceId"
     ]
    },
    "PathPart": "admin",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/Resource"
   }
  },
  "SmuppyAPIadminOPTIONS6D67A925": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIadmin0963F1F7"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/OPTIONS/Resource"
   }
  },
  "SmuppyAPIadminmigrateA11F622E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "SmuppyAPIadmin0963F1F7"
    },
    "PathPart": "migrate",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/Resource"
   }
  },
  "SmuppyAPIadminmigrateOPTIONSF0690528": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIadminmigrateA11F622E"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/OPTIONS/Resource"
   }
  },
  "SmuppyAPIadminmigratePOSTApiPermissionSmuppyStackstagingSmuppyAPIE17EB69APOSTadminmigrateCBDA0E4D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminMigrationFunction4134AACE",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/POST/admin/migrate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate"
   }
  },
  "SmuppyAPIadminmigratePOSTApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69APOSTadminmigrate8419CE06": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminMigrationFunction4134AACE",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/POST/admin/migrate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate"
   }
  },
  "SmuppyAPIadminmigratePOST32163964": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminMigrationFunction4134AACE",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIadminmigrateA11F622E"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate/POST/Resource"
   }
  },
  "SmuppyAPIadminmigratedataA2C83E9F": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "SmuppyAPIadmin0963F1F7"
    },
    "PathPart": "migrate-data",
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/Resource"
   }
  },
  "SmuppyAPIadminmigratedataOPTIONS705FC23D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Amz-Date,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Max-Age": "'86400'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Max-Age": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "SmuppyAPIadminmigratedataA2C83E9F"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/OPTIONS/Resource"
   }
  },
  "SmuppyAPIadminmigratedataPOSTApiPermissionSmuppyStackstagingSmuppyAPIE17EB69APOSTadminmigratedata23EC9F7A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DataMigrationFunction313678B9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/",
       {
        "Ref": "SmuppyAPIDeploymentStagestaging91880277"
       },
       "/POST/admin/migrate-data"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/ApiPermission.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data"
   }
  },
  "SmuppyAPIadminmigratedataPOSTApiPermissionTestSmuppyStackstagingSmuppyAPIE17EB69APOSTadminmigratedata67ACE88D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DataMigrationFunction313678B9",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:471112656108:",
       {
        "Ref": "SmuppyAPI522869CB"
       },
       "/test-invoke-stage/POST/admin/migrate-data"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/ApiPermission.Test.SmuppyStackstagingSmuppyAPIE17EB69A.POST..admin.migrate-data"
   }
  },
  "SmuppyAPIadminmigratedataPOST3CEC2E0F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "TimeoutInMillis": 29000,
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DataMigrationFunction313678B9",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SmuppyAPIadminmigratedataA2C83E9F"
    },
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyAPI/Default/admin/migrate-data/POST/Resource"
   }
  },
  "CognitoAuthorizerF3215DBC": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "AuthorizerResultTtlInSeconds": 300,
    "IdentitySource": "method.request.header.Authorization",
    "Name": "SmuppyStackstagingCognitoAuthorizer1E979614",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "SmuppyUserPoolB59D12A3",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "SmuppyAPI522869CB"
    },
    "Type": "COGNITO_USER_POOLS"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/CognitoAuthorizer/Resource"
   }
  },
  "SmuppyGraphQLApiLogsRole31540BD0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "appsync.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyGraphQL/ApiLogsRole/Resource"
   }
  },
  "SmuppyGraphQL690F381D": {
   "Type": "AWS::AppSync::GraphQLApi",
   "Properties": {
    "AdditionalAuthenticationProviders": [
     {
      "AuthenticationType": "AWS_IAM"
     }
    ],
    "AuthenticationType": "AMAZON_COGNITO_USER_POOLS",
    "LogConfig": {
     "CloudWatchLogsRoleArn": {
      "Fn::GetAtt": [
       "SmuppyGraphQLApiLogsRole31540BD0",
       "Arn"
      ]
     },
     "ExcludeVerboseContent": true,
     "FieldLogLevel": "ERROR"
    },
    "Name": "smuppy-graphql-staging",
    "UserPoolConfig": {
     "AwsRegion": "us-east-1",
     "DefaultAction": "ALLOW",
     "UserPoolId": {
      "Ref": "SmuppyUserPoolB59D12A3"
     }
    },
    "XrayEnabled": true
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyGraphQL/Resource"
   }
  },
  "SmuppyGraphQLSchema64646B74": {
   "Type": "AWS::AppSync::GraphQLSchema",
   "Properties": {
    "ApiId": {
     "Fn::GetAtt": [
      "SmuppyGraphQL690F381D",
      "ApiId"
     ]
    },
    "Definition": "# ============================================\n# Smuppy GraphQL Schema for AppSync\n# Handles Realtime subscriptions (Chat, Notifications)\n# ============================================\n\n# ============================================\n# Types\n# ============================================\n\ntype User {\n  id: ID!\n  username: String!\n  fullName: String\n  avatarUrl: String\n  isVerified: Boolean!\n  accountType: AccountType!\n  createdAt: AWSDateTime!\n}\n\nenum AccountType {\n  PERSONAL\n  PRO_CREATOR\n  PRO_LOCAL\n}\n\ntype Message {\n  id: ID!\n  conversationId: ID!\n  senderId: ID!\n  sender: User\n  content: String!\n  mediaUrl: String\n  mediaType: MediaType\n  readAt: AWSDateTime\n  createdAt: AWSDateTime!\n}\n\nenum MediaType {\n  IMAGE\n  VIDEO\n  AUDIO\n}\n\ntype Conversation {\n  id: ID!\n  participants: [User!]!\n  lastMessage: Message\n  unreadCount: Int!\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\ntype Notification {\n  id: ID!\n  userId: ID!\n  type: NotificationType!\n  title: String!\n  body: String!\n  data: AWSJSON\n  read: Boolean!\n  createdAt: AWSDateTime!\n}\n\nenum NotificationType {\n  NEW_FOLLOWER\n  NEW_LIKE\n  NEW_COMMENT\n  NEW_MESSAGE\n  MENTION\n  SYSTEM\n}\n\ntype Post {\n  id: ID!\n  authorId: ID!\n  author: User\n  content: String\n  mediaUrls: [String!]\n  mediaType: MediaType\n  likesCount: Int!\n  commentsCount: Int!\n  createdAt: AWSDateTime!\n}\n\ntype Comment {\n  id: ID!\n  postId: ID!\n  authorId: ID!\n  author: User\n  content: String!\n  likesCount: Int!\n  createdAt: AWSDateTime!\n}\n\ntype Peak {\n  id: ID!\n  authorId: ID!\n  author: User\n  videoUrl: String!\n  thumbnailUrl: String\n  caption: String\n  viewsCount: Int!\n  likesCount: Int!\n  createdAt: AWSDateTime!\n}\n\n# ============================================\n# Inputs\n# ============================================\n\ninput SendMessageInput {\n  conversationId: ID!\n  content: String!\n  mediaUrl: String\n  mediaType: MediaType\n}\n\ninput CreateConversationInput {\n  participantIds: [ID!]!\n  initialMessage: String\n}\n\ninput MarkAsReadInput {\n  conversationId: ID!\n  messageId: ID!\n}\n\n# ============================================\n# Queries\n# ============================================\n\ntype Query {\n  # Conversations\n  getConversation(id: ID!): Conversation\n  listConversations(limit: Int, nextToken: String): ConversationConnection!\n\n  # Messages\n  listMessages(conversationId: ID!, limit: Int, nextToken: String): MessageConnection!\n\n  # Notifications\n  listNotifications(limit: Int, nextToken: String): NotificationConnection!\n  getUnreadCount: Int!\n}\n\ntype ConversationConnection {\n  items: [Conversation!]!\n  nextToken: String\n}\n\ntype MessageConnection {\n  items: [Message!]!\n  nextToken: String\n}\n\ntype NotificationConnection {\n  items: [Notification!]!\n  nextToken: String\n}\n\n# ============================================\n# Mutations\n# ============================================\n\ntype Mutation {\n  # Messages\n  sendMessage(input: SendMessageInput!): Message!\n  markAsRead(input: MarkAsReadInput!): MessageReadReceipt!\n\n  # Conversations\n  createConversation(input: CreateConversationInput!): Conversation!\n  deleteConversation(id: ID!): Boolean!\n\n  # Notifications\n  createNotification(\n    userId: ID!\n    type: NotificationType!\n    title: String!\n    body: String!\n    data: AWSJSON\n  ): Notification!\n  markNotificationRead(id: ID!): Boolean!\n  markAllNotificationsRead: Boolean!\n\n  # Typing indicator\n  setTyping(conversationId: ID!, isTyping: Boolean!): TypingIndicator!\n}\n\n# ============================================\n# Subscriptions (Realtime)\n# ============================================\n\ntype Subscription {\n  # Real-time message updates\n  onNewMessage(conversationId: ID!): Message\n    @aws_subscribe(mutations: [\"sendMessage\"])\n\n  # Real-time notification updates\n  onNotification(userId: ID!): Notification\n    @aws_subscribe(mutations: [\"createNotification\"])\n\n  # Typing indicator\n  onTyping(conversationId: ID!): TypingIndicator\n    @aws_subscribe(mutations: [\"setTyping\"])\n\n  # Message read receipts\n  onMessageRead(conversationId: ID!): MessageReadReceipt\n    @aws_subscribe(mutations: [\"markAsRead\"])\n}\n\ntype TypingIndicator {\n  conversationId: ID!\n  userId: ID!\n  isTyping: Boolean!\n  timestamp: AWSDateTime!\n}\n\ntype MessageReadReceipt {\n  conversationId: ID!\n  messageId: ID!\n  userId: ID!\n  readAt: AWSDateTime!\n}\n\n# ============================================\n# Schema\n# ============================================\n\nschema {\n  query: Query\n  mutation: Mutation\n  subscription: Subscription\n}\n"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyGraphQL/Schema"
   }
  },
  "SmuppyGraphQLLogRetention0B912E58": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/appsync/apis/",
       {
        "Fn::GetAtt": [
         "SmuppyGraphQL690F381D",
         "ApiId"
        ]
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/SmuppyGraphQL/LogRetention/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31T227bMAz9lr4r2pZge3fSNgjQdV7S5TWQZdZRYkueKDXIDP/7KPmWdsCeeHgxeXhEz/l88Y1/vhMXnMn8PCtVxpudE/LMKHRoQM55s68lW73qfbpiqc9KJXc+0+BCbEJb4x28iKyEKT7FEkQjlXDK6LE4gIdNGsyzcGvh4CKuLLXqjeDUeKMdWMJDQcek9xJHXI8VaMceS3N5MkXID3AH0lvlrmtrfB1p/Tew0YUFxJYpUfFma7pVok0NrR1nd6hlpSmQNzRl7DViAltwxIm2bZk0hVbO8OYXgk2NKUPtiAewKlVY4iY1RTZ56OWuIdoyBGnBYSW0KMDSa0W/XyagzrwIW4C70Wcs+Jhpmc1plXvhRCYQVqVHUpx1LzBud7/8JzBURmej0QktoWVQCnRKUnfgzXgL43dbqEnBeAoxRhst+NLLM7gljWelqLJckLTiCnYPFvub+eg/ei2He0rBVgox6o2Lg0AkhXgSTN/voE0OJ+TP0YzfiloV3SXRgwO6pFYdxxEmUhpP8t0TbXMdlLzx6G8pupuPgD413kqIu3wHdzR5SPZoyPZDetxdyPDwmHiqtepPJ+3ktUS3xquWvFlbUR9/lz3H6P18eu/tSP9KtO00M+oRWCpdvCfwqn94V3s6hSATP+Gnt/lXPudf7k6o1MySAKoCvu3sXxWcN0M1BAAA"
   },
   "Metadata": {
    "aws:cdk:path": "SmuppyStack-staging/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "SmuppyAPIEndpoint9FD58B1C": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SmuppyAPI522869CB"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SmuppyAPIDeploymentStagestaging91880277"
      },
      "/"
     ]
    ]
   }
  },
  "UserPoolId": {
   "Description": "Cognito User Pool ID",
   "Value": {
    "Ref": "SmuppyUserPoolB59D12A3"
   },
   "Export": {
    "Name": "SmuppyStack-staging-UserPoolId"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "SmuppyUserPoolClientA58AA0F4"
   },
   "Export": {
    "Name": "SmuppyStack-staging-UserPoolClientId"
   }
  },
  "IdentityPoolId": {
   "Description": "Cognito Identity Pool ID",
   "Value": {
    "Ref": "SmuppyIdentityPool"
   },
   "Export": {
    "Name": "SmuppyStack-staging-IdentityPoolId"
   }
  },
  "ApiEndpoint": {
   "Description": "REST API Endpoint",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SmuppyAPI522869CB"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SmuppyAPIDeploymentStagestaging91880277"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "SmuppyStack-staging-ApiEndpoint"
   }
  },
  "GraphQLEndpoint": {
   "Description": "GraphQL API Endpoint",
   "Value": {
    "Fn::GetAtt": [
     "SmuppyGraphQL690F381D",
     "GraphQLUrl"
    ]
   },
   "Export": {
    "Name": "SmuppyStack-staging-GraphQLEndpoint"
   }
  },
  "DatabaseEndpoint": {
   "Description": "Aurora Database Endpoint",
   "Value": {
    "Fn::GetAtt": [
     "SmuppyDatabase28802365",
     "Endpoint.Address"
    ]
   },
   "Export": {
    "Name": "SmuppyStack-staging-DatabaseEndpoint"
   }
  },
  "RedisEndpoint": {
   "Description": "Redis Primary Endpoint",
   "Value": {
    "Fn::GetAtt": [
     "RedisCluster",
     "PrimaryEndPoint.Address"
    ]
   },
   "Export": {
    "Name": "SmuppyStack-staging-RedisEndpoint"
   }
  },
  "DeploymentInfo": {
   "Description": "Deployment metadata",
   "Value": "{\"environment\":\"staging\",\"region\":\"us-east-1\",\"timestamp\":\"2026-01-25T02:13:47.619Z\"}"
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}